(self.webpackChunkrootSystems=self.webpackChunkrootSystems||[]).push([[179],{543:(qt,Qt,St)=>{"use strict";function Xe(n){return"function"==typeof n}function It(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const qe=It(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ke(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class st{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Xe(r))try{r()}catch(o){e=o instanceof qe?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Be(o)}catch(s){e=e??[],s instanceof qe?e=[...e,...s.errors]:e.push(s)}}if(e)throw new qe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Be(e);else{if(e instanceof st){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ke(t,e)}remove(e){const{_finalizers:t}=this;t&&ke(t,e),e instanceof st&&e._removeParent(this)}}st.EMPTY=(()=>{const n=new st;return n.closed=!0,n})();const at=st.EMPTY;function ft(n){return n instanceof st||n&&"closed"in n&&Xe(n.remove)&&Xe(n.add)&&Xe(n.unsubscribe)}function Be(n){Xe(n)?n():n.unsubscribe()}const oe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout(n,e,...t){const{delegate:r}=Q;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Q;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function N(n){Q.setTimeout(()=>{const{onUnhandledError:e}=oe;if(!e)throw n;e(n)})}function L(){}const U=fe("C",void 0,void 0);function fe(n,e,t){return{kind:n,value:e,error:t}}let Ie=null;function rt(n){if(oe.useDeprecatedSynchronousErrorHandling){const e=!Ie;if(e&&(Ie={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ie;if(Ie=null,t)throw r}}else n()}class le extends st{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ft(e)&&e.add(this)):this.destination=ut}static create(e,t,r){return new we(e,t,r)}next(e){this.isStopped?$e(function ee(n){return fe("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?$e(function Y(n){return fe("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$e(U,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ce=Function.prototype.bind;function xt(n,e){return Ce.call(n,e)}class Ft{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){xe(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){xe(r)}else xe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){xe(t)}}}class we extends le{constructor(e,t,r){let i;if(super(),Xe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&oe.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xt(e.next,o),error:e.error&&xt(e.error,o),complete:e.complete&&xt(e.complete,o)}):i=e}this.destination=new Ft(i)}}function xe(n){oe.useDeprecatedSynchronousErrorHandling?function se(n){oe.useDeprecatedSynchronousErrorHandling&&Ie&&(Ie.errorThrown=!0,Ie.error=n)}(n):N(n)}function $e(n,e){const{onStoppedNotification:t}=oe;t&&Q.setTimeout(()=>t(n,e))}const ut={closed:!0,next:L,error:function je(n){throw n},complete:L},Fn="function"==typeof Symbol&&Symbol.observable||"@@observable";function dn(n){return n}function yo(n){return 0===n.length?dn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let _n=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function cl(n){return n&&n instanceof le||function ll(n){return n&&Xe(n.next)&&Xe(n.error)&&Xe(n.complete)}(n)&&ft(n)}(t)?t:new we(t,r,i);return rt(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=na(r))((i,o)=>{const s=new we({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Fn](){return this}pipe(...t){return yo(t)(this)}toPromise(t){return new(t=na(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function na(n){var e;return null!==(e=n??oe.Promise)&&void 0!==e?e:Promise}const $l=It(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Tn=(()=>{class n extends _n{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new $o(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $l}next(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?at:(this.currentObservers=null,o.push(t),new st(()=>{this.currentObservers=null,ke(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new _n;return t.source=this,t}}return n.create=(e,t)=>new $o(e,t),n})();class $o extends Tn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:at}}function Hc(n){return Xe(n?.lift)}function br(n){return e=>{if(Hc(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function zr(n,e,t,r,i){return new Dm(n,e,t,r,i)}class Dm extends le{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Gt(n,e){return br((t,r)=>{let i=0;t.subscribe(zr(r,o=>{r.next(n.call(e,o,i++))}))})}function ra(n){return this instanceof ra?(this.v=n,this):new ra(n)}function Ph(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(m,p){o.push([h,f,m,p])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof ra?Promise.resolve(h.value.v).then(c,u):d(o[0][2],h)}(r[h](f))}catch(m){d(o[0][3],m)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Oh(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function id(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const vt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function yt(n){return Xe(n?.then)}function Tt(n){return Xe(n[Fn])}function nt(n){return Symbol.asyncIterator&&Xe(n?.[Symbol.asyncIterator])}function wt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wn=function en(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pt(n){return Xe(n?.[wn])}function gi(n){return Ph(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ra(t.read());if(i)return yield ra(void 0);yield yield ra(r)}}finally{t.releaseLock()}})}function vi(n){return Xe(n?.getReader)}function fr(n){if(n instanceof _n)return n;if(null!=n){if(Tt(n))return function di(n){return new _n(e=>{const t=n[Fn]();if(Xe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(vt(n))return function qi(n){return new _n(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(yt(n))return function _i(n){return new _n(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,N)})}(n);if(nt(n))return Fi(n);if(Pt(n))return function Po(n){return new _n(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(vi(n))return function yi(n){return Fi(gi(n))}(n)}throw wt(n)}function Fi(n){return new _n(e=>{(function Ea(n,e){var t,r,i,o;return function ul(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Oh(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Zr(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wr(n,e,t=1/0){return Xe(e)?Wr((r,i)=>Gt((o,s)=>e(r,o,i,s))(fr(n(r,i))),t):("number"==typeof e&&(t=e),br((r,i)=>function ia(n,e,t,r,i,o,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=p=>c<r?m(p):l.push(p),m=p=>{o&&e.next(p),c++;let g=!1;fr(t(p,u++)).subscribe(zr(e,_=>{i?.(_),o?f(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){const _=l.shift();s?Zr(e,s,()=>m(_)):m(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(zr(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function gs(n=1/0){return Wr(dn,n)}const vs=new _n(n=>n.complete());function od(n){return n&&Xe(n.schedule)}function $c(n){return n[n.length-1]}function sd(n){return Xe($c(n))?n.pop():void 0}function Da(n){return od($c(n))?n.pop():void 0}function dl(n,e=0){return br((t,r)=>{t.subscribe(zr(r,i=>Zr(r,n,()=>r.next(i),e),()=>Zr(r,n,()=>r.complete(),e),i=>Zr(r,n,()=>r.error(i),e)))})}function _s(n,e=0){return br((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Xl(n,e){if(!n)throw new Error("Iterable cannot be null");return new _n(t=>{Zr(t,e,()=>{const r=n[Symbol.asyncIterator]();Zr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function xr(n,e){return e?function hl(n,e){if(null!=n){if(Tt(n))return function Xc(n,e){return fr(n).pipe(_s(e),dl(e))}(n,e);if(vt(n))return function Om(n,e){return new _n(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(yt(n))return function ad(n,e){return fr(n).pipe(_s(e),dl(e))}(n,e);if(nt(n))return Xl(n,e);if(Pt(n))return function Nm(n,e){return new _n(t=>{let r;return Zr(t,e,()=>{r=n[wn](),Zr(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>Xe(r?.return)&&r.return()})}(n,e);if(vi(n))return function Oo(n,e){return Xl(gi(n),e)}(n,e)}throw wt(n)}(n,e):fr(n)}function ys(...n){const e=Da(n),t=function Aa(n,e){return"number"==typeof $c(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?fr(r[0]):gs(t)(xr(r,e)):vs}function fl(n={}){const{connector:e=(()=>new Tn),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},m=()=>{const p=s;f(),p?.unsubscribe()};return br((p,g)=>{c++,!d&&!u&&h();const _=l=l??e();g.add(()=>{c--,0===c&&!d&&!u&&(a=No(m,i))}),_.subscribe(g),!s&&c>0&&(s=new we({next:b=>_.next(b),error:b=>{d=!0,h(),a=No(f,t,b),_.error(b)},complete:()=>{u=!0,h(),a=No(f,r),_.complete()}}),fr(p).subscribe(s))})(o)}}function No(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new we({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Bn(n){for(let e in n)if(n[e]===Bn)return e;throw Error("Could not find renamed property on target object.")}function Yc(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function vr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(vr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function pl(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Yo=Bn({__forward_ref__:Bn});function $n(n){return n.__forward_ref__=$n,n.toString=function(){return vr(this())},n}function $t(n){return Si(n)?n():n}function Si(n){return"function"==typeof n&&n.hasOwnProperty(Yo)&&n.__forward_ref__===$n}function ei(n){return n&&!!n.\u0275providers}const Ta="https://g.co/ng/security#xss";class We extends Error{constructor(e,t){super(function Ia(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function hn(n){return"string"==typeof n?n:null==n?"":String(n)}function B(n,e){throw new We(-201,!1)}function sa(n,e){null==n&&function Sr(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function _t(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Er(n){return{providers:n.providers||[],imports:n.imports||[]}}function F0(n){return IT(n,k0)||IT(n,OT)}function IT(n,e){return n.hasOwnProperty(e)?n[e]:null}function PT(n){return n&&(n.hasOwnProperty(Pw)||n.hasOwnProperty($7))?n[Pw]:null}const k0=Bn({\u0275prov:Bn}),Pw=Bn({\u0275inj:Bn}),OT=Bn({ngInjectableDef:Bn}),$7=Bn({ngInjectorDef:Bn});var fn=(()=>((fn=fn||{})[fn.Default=0]="Default",fn[fn.Host=1]="Host",fn[fn.Self=2]="Self",fn[fn.SkipSelf=4]="SkipSelf",fn[fn.Optional=8]="Optional",fn))();let Ow;function aa(n){const e=Ow;return Ow=n,e}function NT(n,e,t){const r=F0(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&fn.Optional?null:void 0!==e?e:void B(vr(n))}const Kr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Rm={},Nw="__NG_DI_FLAG__",L0="ngTempTokenPath",Z7=/\n/gm,RT="__source";let Fm;function kh(n){const e=Fm;return Fm=n,e}function Q7(n,e=fn.Default){if(void 0===Fm)throw new We(-203,!1);return null===Fm?NT(n,void 0,e):Fm.get(n,e&fn.Optional?null:void 0,e)}function Oe(n,e=fn.Default){return(function X7(){return Ow}()||Q7)($t(n),e)}function Vn(n,e=fn.Default){return Oe(n,B0(e))}function B0(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Rw(n){const e=[];for(let t=0;t<n.length;t++){const r=$t(n[t]);if(Array.isArray(r)){if(0===r.length)throw new We(900,!1);let i,o=fn.Default;for(let s=0;s<r.length;s++){const a=r[s],l=J7(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(Oe(i,o))}else e.push(Oe(r))}return e}function km(n,e){return n[Nw]=e,n.prototype[Nw]=e,n}function J7(n){return n[Nw]}function Zc(n){return{toString:n}.toString()}var Oa=(()=>((Oa=Oa||{})[Oa.OnPush=0]="OnPush",Oa[Oa.Default=1]="Default",Oa))(),Na=(()=>{return(n=Na||(Na={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Na;var n})();const Yl={},wr=[],V0=Bn({\u0275cmp:Bn}),Fw=Bn({\u0275dir:Bn}),kw=Bn({\u0275pipe:Bn}),kT=Bn({\u0275mod:Bn}),Zl=Bn({\u0275fac:Bn}),Lm=Bn({__NG_ELEMENT_ID__:Bn});let n9=0;function Dr(n){return Zc(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Oa.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||wr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Na.Emulated,id:"c"+n9++,styles:n.styles||wr,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return i.inputs=VT(n.inputs,r),i.outputs=VT(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(LT).filter(BT):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Zo).filter(BT):null,i})}function LT(n){return Ar(n)||Fo(n)}function BT(n){return null!==n}function kr(n){return Zc(()=>({type:n.type,bootstrap:n.bootstrap||wr,declarations:n.declarations||wr,imports:n.imports||wr,exports:n.exports||wr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function VT(n,e){if(null==n)return Yl;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const tn=Dr;function Ar(n){return n[V0]||null}function Fo(n){return n[Fw]||null}function Zo(n){return n[kw]||null}function Fs(n,e){const t=n[kT]||null;if(!t&&!0===e)throw new Error(`Type ${vr(n)} does not have '\u0275mod' property.`);return t}function ks(n){return Array.isArray(n)&&"object"==typeof n[1]}function Fa(n){return Array.isArray(n)&&!0===n[1]}function Vw(n){return 0!=(4&n.flags)}function Um(n){return n.componentOffset>-1}function j0(n){return 1==(1&n.flags)}function ka(n){return null!==n.template}function o9(n){return 0!=(256&n[2])}function ud(n,e){return n.hasOwnProperty(Zl)?n[Zl]:null}class l9{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Qo(){return WT}function WT(n){return n.type.prototype.ngOnChanges&&(n.setInput=u9),c9}function c9(){const n=$T(this),e=n?.current;if(e){const t=n.previous;if(t===Yl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function u9(n,e,t,r){const i=this.declaredInputs[t],o=$T(n)||function d9(n,e){return n[qT]=e}(n,{previous:Yl,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[i];s[i]=new l9(l&&l.currentValue,e,a===Yl),n[r]=e}Qo.ngInherit=!0;const qT="__ngSimpleChanges__";function $T(n){return n[qT]||null}function xo(n){for(;Array.isArray(n);)n=n[0];return n}function W0(n,e){return xo(e[n])}function Ls(n,e){return xo(e[n.index])}function ZT(n,e){return n.data[e]}function Bs(n,e){const t=e[n];return ks(t)?t:t[0]}function q0(n){return 64==(64&n[2])}function Kc(n,e){return null==e?null:n[e]}function KT(n){n[18]=0}function Uw(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Mn={lFrame:aI(null),bindingsEnabled:!0};function JT(){return Mn.bindingsEnabled}function lt(){return Mn.lFrame.lView}function ur(){return Mn.lFrame.tView}function qr(n){return Mn.lFrame.contextLView=n,n[8]}function $r(n){return Mn.lFrame.contextLView=null,n}function wo(){let n=eI();for(;null!==n&&64===n.type;)n=n.parent;return n}function eI(){return Mn.lFrame.currentTNode}function gl(n,e){const t=Mn.lFrame;t.currentTNode=n,t.isParent=e}function Hw(){return Mn.lFrame.isParent}function Gw(){Mn.lFrame.isParent=!1}function Gh(){return Mn.lFrame.bindingIndex++}function Jl(n){const e=Mn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function C9(n,e){const t=Mn.lFrame;t.bindingIndex=t.bindingRootIndex=n,jw(e)}function jw(n){Mn.lFrame.currentDirectiveIndex=n}function iI(){return Mn.lFrame.currentQueryIndex}function qw(n){Mn.lFrame.currentQueryIndex=n}function E9(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function oI(n,e,t){if(t&fn.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&fn.Host||(i=E9(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=Mn.lFrame=sI();return r.currentTNode=e,r.lView=n,!0}function $w(n){const e=sI(),t=n[1];Mn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sI(){const n=Mn.lFrame,e=null===n?null:n.child;return null===e?aI(n):e}function aI(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function lI(){const n=Mn.lFrame;return Mn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const cI=lI;function Xw(){const n=lI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function es(){return Mn.lFrame.selectedIndex}function dd(n){Mn.lFrame.selectedIndex=n}function hi(){const n=Mn.lFrame;return ZT(n.tView,n.selectedIndex)}function $0(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function X0(n,e,t){hI(n,e,3,t)}function Y0(n,e,t,r){(3&n[2])===t&&hI(n,e,t,r)}function Yw(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function hI(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<o||-1==o)&&(N9(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function N9(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Gm{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Kw(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];pI(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function fI(n){return 3===n||4===n||6===n}function pI(n){return 64===n.charCodeAt(0)}function jm(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||mI(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function mI(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function gI(n){return-1!==n}function Z0(n){return 32767&n}function K0(n,e){let t=function L9(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Qw=!0;function Q0(n){const e=Qw;return Qw=n,e}let B9=0;const vl={};function J0(n,e){const t=yI(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Jw(r.data,n),Jw(e,null),Jw(r.blueprint,null));const i=e1(n,e),o=n.injectorIndex;if(gI(i)){const s=Z0(i),a=K0(i,e),l=a[1].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Jw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yI(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function e1(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=EI(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function t1(n,e,t){!function V9(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Lm)&&(r=t[Lm]),null==r&&(r=t[Lm]=B9++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function bI(n,e,t){if(t&fn.Optional||void 0!==n)return n;B()}function xI(n,e,t,r){if(t&fn.Optional&&void 0===r&&(r=null),0==(t&(fn.Self|fn.Host))){const i=n[9],o=aa(void 0);try{return i?i.get(e,r,t&fn.Optional):NT(e,r,t&fn.Optional)}finally{aa(o)}}return bI(r,0,t)}function wI(n,e,t,r=fn.Default,i){if(null!==n){if(1024&e[2]){const s=function j9(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=MI(o,s,t,r|fn.Self,vl);if(a!==vl)return a;let l=o.parent;if(!l){const c=s[21];if(c){const u=c.get(t,vl,r);if(u!==vl)return u}l=EI(s),s=s[15]}o=l}return i}(n,e,t,r,vl);if(s!==vl)return s}const o=MI(n,e,t,r,vl);if(o!==vl)return o}return xI(e,t,r,i)}function MI(n,e,t,r,i){const o=function H9(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Lm)?n[Lm]:void 0;return"number"==typeof e?e>=0?255&e:G9:e}(t);if("function"==typeof o){if(!oI(e,n,r))return r&fn.Host?bI(i,0,r):xI(e,t,r,i);try{const s=o(r);if(null!=s||r&fn.Optional)return s;B()}finally{cI()}}else if("number"==typeof o){let s=null,a=yI(n,e),l=-1,c=r&fn.Host?e[16][6]:null;for((-1===a||r&fn.SkipSelf)&&(l=-1===a?e1(n,e):e[a+8],-1!==l&&SI(r,!1)?(s=e[1],a=Z0(l),e=K0(l,e)):a=-1);-1!==a;){const u=e[1];if(CI(o,a,u.data)){const d=U9(a,e,t,s,r,c);if(d!==vl)return d}l=e[a+8],-1!==l&&SI(r,e[1].data[a+8]===c)&&CI(o,a,e)?(s=u,a=Z0(l),e=K0(l,e)):a=-1}}return i}function U9(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],u=e_(a,s,t,null==r?Um(a)&&Qw:r!=s&&0!=(3&a.type),i&fn.Host&&o===a);return null!==u?hd(e,s,u,a):vl}function e_(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,u=o>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const m=s[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(i){const f=s[l];if(f&&ka(f)&&f.type===t)return l}return null}function hd(n,e,t,r){let i=n[t];const o=e.data;if(function R9(n){return n instanceof Gm}(i)){const s=i;s.resolving&&function Pa(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new We(-200,`Circular dependency in DI detected for ${n}${t}`)}(function nr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():hn(n)}(o[t]));const a=Q0(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?aa(s.injectImpl):null;oI(n,r,fn.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function O9(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=WT(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==l&&aa(l),Q0(a),s.resolving=!1,cI()}}return i}function CI(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function SI(n,e){return!(n&fn.Self||n&fn.Host&&e)}class Wh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wI(this._tNode,this._lView,e,B0(r),t)}}function G9(){return new Wh(wo(),lt())}function Xi(n){return Zc(()=>{const e=n.prototype.constructor,t=e[Zl]||n1(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Zl]||n1(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function n1(n){return Si(n)?()=>{const e=n1($t(n));return e&&e()}:ud(n)}function EI(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function fd(n){return function z9(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(fI(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(wo(),n)}const $h="__parameters__";function Yh(n,e,t){return Zc(()=>{const r=function r1(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty($h)?l[$h]:Object.defineProperty(l,$h,{value:[]})[$h];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class bt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=_t({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pd(n,e){n.forEach(t=>Array.isArray(t)?pd(t,e):e(t))}function AI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function t_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $m(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Vs(n,e,t){let r=Zh(n,e);return r>=0?n[1|r]=t:(r=~r,function X9(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function s1(n,e){const t=Zh(n,e);if(t>=0)return n[1|t]}function Zh(n,e){return function TI(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const r_=km(Yh("Inject",n=>({token:n})),-1),_l=km(Yh("Optional"),8),Kh=km(Yh("SkipSelf"),4);var xs=(()=>((xs=xs||{})[xs.Important=1]="Important",xs[xs.DashCase=2]="DashCase",xs))();const d1=new Map;let gG=0;const f1="__ngContext__";function Bo(n,e){ks(e)?(n[f1]=e[20],function _G(n){d1.set(n[20],n)}(e)):n[f1]=e}function m1(n,e){return undefined(n,e)}function Km(n){const e=n[3];return Fa(e)?e[3]:e}function g1(n){return YI(n[13])}function v1(n){return YI(n[4])}function YI(n){for(;null!==n&&!Fa(n);)n=n[4];return n}function Jh(n,e,t,r,i){if(null!=r){let o,s=!1;Fa(r)?o=r:ks(r)&&(s=!0,r=r[0]);const a=xo(r);0===n&&null!==t?null==i?tP(e,t,a):md(e,t,a,i||null,!0):1===n&&null!==t?md(e,t,a,i||null,!0):2===n?function C1(n,e,t){const r=s_(n,e);r&&function BG(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function UG(n,e,t,r,i){const o=t[7];o!==xo(t)&&Jh(e,n,r,o,i);for(let a=10;a<t.length;a++){const l=t[a];Qm(l[1],l,n,e,r,o)}}(e,n,o,t,i)}}function y1(n,e,t){return n.createElement(e,t)}function KI(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Uw(i,-1)),t.splice(r,1)}function b1(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&KI(i,r),e>0&&(n[t-1][4]=r[4]);const o=t_(n,10+e);!function IG(n,e){Qm(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function QI(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Qm(n,e,t,3,null,null),function NG(n){let e=n[13];if(!e)return x1(n[1],n);for(;e;){let t=null;if(ks(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)ks(e)&&x1(e[1],e),e=e[3];null===e&&(e=n),ks(e)&&x1(e[1],e),t=e&&e[4]}e=t}}(e)}}function x1(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function LG(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Gm)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function kG(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[i=s]():r[i=-s].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Fa(e[3])){t!==e[3]&&KI(t,e);const r=e[19];null!==r&&r.detachView(n)}!function yG(n){d1.delete(n[20])}(e)}}function JI(n,e,t){return function eP(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Na.None||o===Na.Emulated)return null}return Ls(r,t)}}(n,e.parent,t)}function md(n,e,t,r,i){n.insertBefore(e,t,r,i)}function tP(n,e,t){n.appendChild(e,t)}function nP(n,e,t,r,i){null!==r?md(n,e,t,r,i):tP(n,e,t)}function s_(n,e){return n.parentNode(e)}function rP(n,e,t){return oP(n,e,t)}let c_,D1,oP=function iP(n,e,t){return 40&n.type?Ls(n,t):null};function a_(n,e,t,r){const i=JI(n,r,e),o=e[11],a=rP(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)nP(o,i,t[l],a,!1);else nP(o,i,t,a,!1)}function l_(n,e){if(null!==e){const t=e.type;if(3&t)return Ls(e,n);if(4&t)return M1(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return l_(n,r);{const i=n[e.index];return Fa(i)?M1(-1,i):xo(i)}}if(32&t)return m1(e,n)()||xo(n[e.index]);{const r=aP(n,e);return null!==r?Array.isArray(r)?r[0]:l_(Km(n[16]),r):l_(n,e.next)}}return null}function aP(n,e){return null!==e?n[16][6].projection[e.projection]:null}function M1(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return l_(r,i)}return e[7]}function S1(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],l=t.type;if(s&&0===e&&(a&&Bo(xo(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)S1(n,e,t.child,r,i,o,!1),Jh(e,n,i,a,o);else if(32&l){const c=m1(t,r);let u;for(;u=c();)Jh(e,n,i,u,o);Jh(e,n,i,a,o)}else 16&l?lP(n,e,r,t,i,o):Jh(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Qm(n,e,t,r,i,o){S1(t,r,n.firstChild,e,i,o,!1)}function lP(n,e,t,r,i,o){const s=t[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Jh(e,n,i,l[c],o);else S1(n,e,l,s[3],i,o,!0)}function cP(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function uP(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Kw(n,e,r),null!==i&&cP(n,e,i),null!==o&&function GG(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function gd(n){return function E1(){if(void 0===c_&&(c_=null,Kr.trustedTypes))try{c_=Kr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return c_}()?.createHTML(n)||n}class vd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ta})`}}class XG extends vd{getTypeName(){return"HTML"}}class YG extends vd{getTypeName(){return"Style"}}class ZG extends vd{getTypeName(){return"Script"}}class KG extends vd{getTypeName(){return"URL"}}class QG extends vd{getTypeName(){return"ResourceURL"}}function zs(n){return n instanceof vd?n.changingThisBreaksApplicationSecurity:n}function yl(n,e){const t=function JG(n){return n instanceof vd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ta})`)}return t===e}class oj{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(gd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class sj{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=gd(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=gd(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const s=t.item(i).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&e.removeAttribute(s)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const lj=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function d_(n){return(n=String(n)).match(lj)?n:"unsafe:"+n}function ec(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Jm(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const gP=ec("area,br,col,hr,img,wbr"),vP=ec("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_P=ec("rp,rt"),T1=Jm(gP,Jm(vP,ec("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jm(_P,ec("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jm(_P,vP)),I1=ec("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yP=Jm(I1,ec("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ec("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cj=ec("script,style,template");class uj{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!T1.hasOwnProperty(t))return this.sanitizedSomething=!0,!cj.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!yP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;I1[a]&&(l=d_(l)),this.buf.push(" ",s,'="',bP(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();T1.hasOwnProperty(t)&&!gP.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(bP(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const dj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hj=/([^\#-~ |!])/g;function bP(n){return n.replace(/&/g,"&amp;").replace(dj,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(hj,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let h_;function xP(n,e){let t=null;try{h_=h_||function mP(n){const e=new sj(n);return function aj(){try{return!!(new window.DOMParser).parseFromString(gd(""),"text/html")}catch{return!1}}()?new oj(e):e}(n);let r=e?String(e):"";t=h_.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=h_.getInertBodyElement(r)}while(r!==o);return gd((new uj).sanitizeChildren(P1(t)||t))}finally{if(t){const r=P1(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function P1(n){return"content"in n&&function fj(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Mr=(()=>((Mr=Mr||{})[Mr.NONE=0]="NONE",Mr[Mr.HTML=1]="HTML",Mr[Mr.STYLE=2]="STYLE",Mr[Mr.SCRIPT=3]="SCRIPT",Mr[Mr.URL=4]="URL",Mr[Mr.RESOURCE_URL=5]="RESOURCE_URL",Mr))();const f_=new bt("ENVIRONMENT_INITIALIZER"),SP=new bt("INJECTOR",-1),EP=new bt("INJECTOR_DEF_TYPES");class DP{get(e,t=Rm){if(t===Rm){const r=new Error(`NullInjectorError: No provider for ${vr(e)}!`);throw r.name="NullInjectorError",r}return t}}function bj(...n){return{\u0275providers:AP(0,n),\u0275fromNgModule:!0}}function AP(n,...e){const t=[],r=new Set;let i;return pd(e,o=>{const s=o;O1(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&TP(i,t),t}function TP(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];N1(i,o=>{e.push(o)})}}function O1(n,e,t,r){if(!(n=$t(n)))return!1;let i=null,o=PT(n);const s=!o&&Ar(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const l=n.ngModule;if(o=PT(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)O1(c,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{pd(o.imports,u=>{O1(u,e,t,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&TP(c,e)}if(!a){const c=ud(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:wr},{provide:EP,useValue:i,multi:!0},{provide:f_,useValue:()=>Oe(i),multi:!0})}const l=o.providers;null==l||a||N1(l,u=>{e.push(u)})}}return i!==n&&void 0!==n.providers}function N1(n,e){for(let t of n)ei(t)&&(t=t.\u0275providers),Array.isArray(t)?N1(t,e):e(t)}const xj=Bn({provide:String,useValue:Bn});function R1(n){return null!==n&&"object"==typeof n&&xj in n}function _d(n){return"function"==typeof n}const F1=new bt("Set Injector scope."),p_={},Mj={};let k1;function m_(){return void 0===k1&&(k1=new DP),k1}class tc{}class OP extends tc{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,B1(e,s=>this.processProvider(s)),this.records.set(SP,ef(void 0,this)),i.has("environment")&&this.records.set(tc,ef(void 0,this));const o=this.records.get(F1);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(EP.multi,wr,fn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=kh(this),r=aa(void 0);try{return e()}finally{kh(t),aa(r)}}get(e,t=Rm,r=fn.Default){this.assertNotDestroyed(),r=B0(r);const i=kh(this),o=aa(void 0);try{if(!(r&fn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function Aj(n){return"function"==typeof n||"object"==typeof n&&n instanceof bt}(e)&&F0(e);a=l&&this.injectableDefInScope(l)?ef(L1(e),p_):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&fn.Self?m_():this.parent).get(e,t=r&fn.Optional&&t===Rm?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[L0]=s[L0]||[]).unshift(vr(e)),i)throw s;return function e9(n,e,t,r){const i=n[L0];throw e[RT]&&i.unshift(e[RT]),n.message=function t9(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=vr(e);if(Array.isArray(e))i=e.map(vr).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):vr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Z7,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[L0]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{aa(o),kh(i)}}resolveInjectorInitializers(){const e=kh(this),t=aa(void 0);try{const r=this.get(f_.multi,wr,fn.Self);for(const i of r)i()}finally{kh(e),aa(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(vr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new We(205,!1)}processProvider(e){let t=_d(e=$t(e))?e:$t(e&&e.provide);const r=function Sj(n){return R1(n)?ef(void 0,n.useValue):ef(NP(n),p_)}(e);if(_d(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ef(void 0,p_,!0),i.factory=()=>Rw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===p_&&(t.value=Mj,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Dj(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=$t(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function L1(n){const e=F0(n),t=null!==e?e.factory:ud(n);if(null!==t)return t;if(n instanceof bt)throw new We(204,!1);if(n instanceof Function)return function Cj(n){const e=n.length;if(e>0)throw $m(e,"?"),new We(204,!1);const t=function W7(n){const e=n&&(n[k0]||n[OT]);if(e){const t=function q7(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new We(204,!1)}function NP(n,e,t){let r;if(_d(n)){const i=$t(n);return ud(i)||L1(i)}if(R1(n))r=()=>$t(n.useValue);else if(function PP(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Rw(n.deps||[]));else if(function IP(n){return!(!n||!n.useExisting)}(n))r=()=>Oe($t(n.useExisting));else{const i=$t(n&&(n.useClass||n.provide));if(!function Ej(n){return!!n.deps}(n))return ud(i)||L1(i);r=()=>new i(...Rw(n.deps))}return r}function ef(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function B1(n,e){for(const t of n)Array.isArray(t)?B1(t,e):t&&ei(t)?B1(t.\u0275providers,e):e(t)}class Tj{}class RP{}class Pj{resolveComponentFactory(e){throw function Ij(n){const e=Error(`No component factory found for ${vr(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let tf=(()=>{class n{}return n.NULL=new Pj,n})();function Oj(){return nf(wo(),lt())}function nf(n,e){return new ni(Ls(n,e))}let ni=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Oj,n})();function Nj(n){return n instanceof ni?n.nativeElement:n}class tg{}let nc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Rj(){const n=lt(),t=Bs(wo().index,n);return(ks(t)?t:n)[11]}(),n})(),Fj=(()=>{class n{}return n.\u0275prov=_t({token:n,providedIn:"root",factory:()=>null}),n})();class yd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const kj=new yd("15.0.4"),V1={};function U1(n){return n.ngOriginalError}class rc{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&U1(e);for(;t&&U1(t);)t=U1(t);return t||null}}function ic(n){return n instanceof Function?n():n}function LP(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const BP="ng-template";function $j(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==LP(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function VP(n){return 4===n.type&&n.value!==BP}function Xj(n,e,t){return e===(4!==n.type||t?n.value:BP)}function Yj(n,e,t){let r=4;const i=n.attrs||[],o=function Qj(n){for(let e=0;e<n.length;e++)if(fI(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Xj(n,l,t)||""===l&&1===e.length){if(La(r))return!1;s=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!$j(n.attrs,c,t)){if(La(r))return!1;s=!0}continue}const d=Zj(8&r?"class":l,i,VP(n),t);if(-1===d){if(La(r))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==LP(f,c,0)||2&r&&c!==h){if(La(r))return!1;s=!0}}}}else{if(!s&&!La(r)&&!La(l))return!1;if(s&&La(l))continue;s=!1,r=l|1&r}}return La(r)||s}function La(n){return 0==(1&n)}function Zj(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Jj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function zP(n,e,t=!1){for(let r=0;r<e.length;r++)if(Yj(n,e[r],t))return!0;return!1}function eW(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function UP(n,e){return n?":not("+e.trim()+")":e}function tW(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!La(s)&&(e+=UP(o,i),i=""),r=s,o=o||!La(r);t++}return""!==i&&(e+=UP(o,i)),e}const Cn={};function Le(n){HP(ur(),lt(),es()+n,!1)}function HP(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&X0(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Y0(e,o,0,t)}dd(t)}function qP(n,e=null,t=null,r){const i=$P(n,e,t,r);return i.resolveInjectorInitializers(),i}function $P(n,e=null,t=null,r,i=new Set){const o=[t||wr,bj(n)];return r=r||("object"==typeof n?void 0:vr(n)),new OP(o,e||m_(),r||null,i)}let Ms=(()=>{class n{static create(t,r){if(Array.isArray(t))return qP({name:""},r,t,"");{const i=t.name??"";return qP({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Rm,n.NULL=new DP,n.\u0275prov=_t({token:n,providedIn:"any",factory:()=>Oe(SP)}),n.__NG_ELEMENT_ID__=-1,n})();function Me(n,e=fn.Default){const t=lt();return null===t?Oe(n,e):wI(wo(),t,$t(n),e)}function v_(){throw new Error("invalid")}function eO(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=n.data[o];qw(i),s.contentQueries(2,e[o],o)}}}function __(n,e,t,r,i,o,s,a,l,c,u){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==u||n&&1024&n[2])&&(d[2]|=1024),KT(d),d[3]=d[15]=n,d[8]=t,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=o,d[20]=function vG(){return gG++}(),d[21]=u,d[16]=2==e.type?n[16]:d,d}function af(n,e,t,r,i){let o=n.data[e];if(null===o)o=function q1(n,e,t,r,i){const o=eI(),s=Hw(),l=n.data[e]=function DW(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(n,e,t,r,i),function M9(){return Mn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Hm(){const n=Mn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return gl(o,!0),o}function ng(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $1(n,e,t){$w(e);try{const r=n.viewQuery;null!==r&&rM(1,r,t);const i=n.template;null!==i&&tO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&eO(n,e),n.staticViewQueries&&rM(2,n.viewQuery,t);const o=n.components;null!==o&&function CW(n,e){for(let t=0;t<e.length;t++)qW(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Xw()}}function y_(n,e,t,r){const i=e[2];if(128!=(128&i)){$w(e);try{KT(e),function nI(n){return Mn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&tO(n,e,t,2,r);const s=3==(3&i);if(s){const c=n.preOrderCheckHooks;null!==c&&X0(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Y0(e,c,0,null),Yw(e,0)}if(function jW(n){for(let e=g1(n);null!==e;e=v1(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Uw(o,1),i[2]|=512}}}(e),function GW(n){for(let e=g1(n);null!==e;e=v1(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];q0(r)&&y_(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&eO(n,e),s){const c=n.contentCheckHooks;null!==c&&X0(e,c)}else{const c=n.contentHooks;null!==c&&Y0(e,c,1),Yw(e,1)}!function wW(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)dd(~i);else{const o=i,s=t[++r],a=t[++r];C9(s,o),a(2,e[o])}}}finally{dd(-1)}}(n,e);const a=n.components;null!==a&&function MW(n,e){for(let t=0;t<e.length;t++)WW(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&rM(2,l,r),s){const c=n.viewCheckHooks;null!==c&&X0(e,c)}else{const c=n.viewHooks;null!==c&&Y0(e,c,2),Yw(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Uw(e[3],-1))}finally{Xw()}}}function tO(n,e,t,r,i){const o=es(),s=2&r;try{dd(-1),s&&e.length>22&&HP(n,e,22,!1),t(r,i)}finally{dd(o)}}function X1(n,e,t){if(Vw(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function Y1(n,e,t){!JT()||(function NW(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;Um(t)&&function zW(n,e,t){const r=Ls(e,n),i=nO(t),o=n[10],s=b_(n,__(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||J0(t,e),Bo(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const l=n.data[a],c=hd(e,n,a,t);Bo(c,e),null!==s&&UW(0,a-i,c,l,0,s),ka(l)&&(Bs(t.index,e)[8]=hd(e,n,a,t))}}(n,e,t,Ls(t,e)),64==(64&t.flags)&&lO(n,e,t))}function Z1(n,e,t=Ls){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function nO(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=K1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function K1(n,e,t,r,i,o,s,a,l,c){const u=22+r,d=u+i,h=function SW(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Cn);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function rO(n,e,t,r){const i=uO(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&dO(n).push(r,i.length-1))}function iO(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?oO(t,e,i,o):r.hasOwnProperty(i)&&oO(t,e,r[i],o)}return t}function oO(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Us(n,e,t,r,i,o,s,a){const l=Ls(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(iM(n,t,u,r,i),Um(e)&&sO(t,e.index)):3&e.type&&(r=function TW(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(l,r,i))}function sO(n,e){const t=Bs(e,n);16&t[2]||(t[2]|=32)}function Q1(n,e,t,r){let i=!1;if(JT()){const o=null===r?null:{"":-1},s=function FW(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(zP(e,s.selectors,!1))if(r||(r=[]),ka(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),J1(n,e,a.length)}else r.unshift(s),J1(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let a,l;null===s?a=l=null:[a,l]=s,null!==a&&(i=!0,aO(n,e,t,a,o,l)),o&&function kW(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new We(-301,!1);r.push(e[i],o)}}}(t,r,o)}return t.mergedAttrs=jm(t.mergedAttrs,t.attrs),i}function aO(n,e,t,r,i,o){for(let c=0;c<r.length;c++)t1(J0(t,e),n,r[c].type);!function BW(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=ng(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=jm(t.mergedAttrs,u.hostAttrs),VW(n,t,e,l,u),LW(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function AW(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const d=o[u],h=t?t.get(d):null,m=h?h.outputs:null;l=iO(d.inputs,u,l,h?h.inputs:null),c=iO(d.outputs,u,c,m);const p=null===l||null===s||VP(e)?null:HW(l,u,s);a.push(p)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,o)}function lO(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function S9(){return Mn.lFrame.currentDirectiveIndex}();try{dd(o);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];jw(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&RW(l,c)}}finally{dd(-1),jw(s)}}function RW(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function J1(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function LW(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ka(e)&&(t[""]=n)}}function VW(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=ud(i.type)),s=new Gm(o,ka(i),Me);n.blueprint[r]=s,t[r]=s,function PW(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function OW(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,ng(n,t,i.hostVars,Cn),i)}function bl(n,e,t,r,i,o){const s=Ls(n,e);!function eM(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?hn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[11],s,o,n.value,t,r,i)}function UW(n,e,t,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function HW(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function cO(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function WW(n,e){const t=Bs(e,n);if(q0(t)){const r=t[1];48&t[2]?y_(r,t,r.template,t[8]):t[5]>0&&tM(t)}}function tM(n){for(let r=g1(n);null!==r;r=v1(r))for(let i=10;i<r.length;i++){const o=r[i];if(q0(o))if(512&o[2]){const s=o[1];y_(s,o,s.template,o[8])}else o[5]>0&&tM(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Bs(t[r],n);q0(i)&&i[5]>0&&tM(i)}}function qW(n,e){const t=Bs(e,n),r=t[1];(function $W(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),$1(r,t,t[8])}function b_(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function nM(n){for(;n;){n[2]|=32;const e=Km(n);if(o9(n)&&!e)return n;n=e}return null}function x_(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{y_(n,e,n.template,t)}catch(s){throw r&&fO(e,s),s}finally{i.end&&i.end()}}function rM(n,e,t){qw(0),e(n,t)}function uO(n){return n[7]||(n[7]=[])}function dO(n){return n.cleanup||(n.cleanup=[])}function fO(n,e){const t=n[9],r=t?t.get(rc,null):null;r&&r.handleError(e)}function iM(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],l=e[s],c=n.data[s];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function oc(n,e,t){const r=W0(e,n);!function ZI(n,e,t){n.setValue(e,t)}(n[11],r,t)}function w_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=pl(i,a):2==o&&(r=pl(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function M_(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(xo(o)),Fa(o))for(let a=10;a<o.length;a++){const l=o[a],c=l[1].firstChild;null!==c&&M_(l[1],l,c,r)}const s=t.type;if(8&s)M_(n,e,t.child,r);else if(32&s){const a=m1(t,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=aP(e,t);if(Array.isArray(a))r.push(...a);else{const l=Km(e[16]);M_(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class rg{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return M_(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Fa(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(b1(e,r),t_(t,r))}this._attachedToViewContainer=!1}QI(this._lView[1],this._lView)}onDestroy(e){rO(this._lView[1],this._lView,null,e)}markForCheck(){nM(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){x_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new We(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function OG(n,e){Qm(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new We(902,!1);this._appRef=e}}class XW extends rg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;x_(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class pO extends tf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ar(e);return new ig(t,this.ngModule)}}function mO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class ZW{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=B0(r);const i=this.injector.get(e,V1,r);return i!==V1||t===V1?i:this.parentInjector.get(e,t,r)}}class ig extends RP{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function nW(n){return n.map(tW).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return mO(this.componentDef.inputs)}get outputs(){return mO(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof tc?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new ZW(e,o):e,a=s.get(tg,null);if(null===a)throw new We(407,!1);const l=s.get(Fj,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function EW(n,e,t){return n.selectRootElement(e,t===Na.ShadowDom)}(c,r,this.componentDef.encapsulation):y1(c,u,function YW(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=K1(0,null,null,1,0,null,null,null,null,null),m=__(null,f,null,h,null,null,a,c,l,s,null);let p,g;$w(m);try{const _=this.componentDef;let b,v=null;_.findHostDirectiveDefs?(b=[],v=new Map,_.findHostDirectiveDefs(_,b,v),b.push(_)):b=[_];const y=function QW(n,e){const t=n[1];return n[22]=e,af(t,22,2,"#host",null)}(m,d),w=function JW(n,e,t,r,i,o,s,a){const l=i[1];!function eq(n,e,t,r){for(const i of n)e.mergedAttrs=jm(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(w_(e,e.mergedAttrs,!0),null!==t&&uP(r,t,e))}(r,n,e,s);const c=o.createRenderer(e,t),u=__(i,nO(t),null,t.onPush?32:16,i[n.index],n,o,c,a||null,null,null);return l.firstCreatePass&&J1(l,n,r.length-1),b_(i,u),i[n.index]=u}(y,d,_,b,m,a,c);g=ZT(f,22),d&&function nq(n,e,t,r){if(r)Kw(n,t,["ng-version",kj.full]);else{const{attrs:i,classes:o}=function rW(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!La(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Kw(n,t,i),o&&o.length>0&&cP(n,t,o.join(" "))}}(c,_,d,r),void 0!==t&&function rq(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(g,this.ngContentSelectors,t),p=function tq(n,e,t,r,i,o){const s=wo(),a=i[1],l=Ls(s,i);aO(a,i,s,t,null,r);for(let u=0;u<t.length;u++)Bo(hd(i,a,s.directiveStart+u,s),i);lO(a,i,s),l&&Bo(l,i);const c=hd(i,a,s.directiveStart+s.componentOffset,s);if(n[8]=i[8]=c,null!==o)for(const u of o)u(c,e);return X1(a,s,n),c}(w,_,b,v,m,[iq]),$1(f,m,null)}finally{Xw()}return new KW(this.componentType,p,nf(g,m),m,g)}}class KW extends Tj{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new XW(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;iM(o[1],o,i,e,t),sO(o,this._tNode.index)}}get injector(){return new Wh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function iq(){const n=wo();$0(lt()[1],n)}function zn(n){let e=function gO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ka(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new We(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=oM(n.inputs),s.declaredInputs=oM(n.declaredInputs),s.outputs=oM(n.outputs);const a=i.hostBindings;a&&lq(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&sq(n,l),c&&aq(n,c),Yc(n.inputs,i.inputs),Yc(n.declaredInputs,i.declaredInputs),Yc(n.outputs,i.outputs),ka(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===zn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function oq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=jm(i.hostAttrs,t=jm(t,i.hostAttrs))}}(r)}function oM(n){return n===Yl?{}:n===wr?[]:n}function sq(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function aq(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function lq(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let C_=null;function bd(){if(!C_){const n=Kr.Symbol;if(n&&n.iterator)C_=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(C_=r)}}}return C_}function og(n){return!!sM(n)&&(Array.isArray(n)||!(n instanceof Map)&&bd()in n)}function sM(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Vo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function S_(n,e,t,r,i){const o=function xd(n,e,t,r){const i=Vo(n,e,t);return Vo(n,e+1,r)||i}(n,e,t,r);return Vo(n,e+2,i)||o}function zo(n,e,t,r){const i=lt();return Vo(i,Gh(),e)&&(ur(),bl(hi(),i,n,e,t,r)),zo}function df(n,e,t,r,i,o,s,a){const c=S_(n,function Ql(){return Mn.lFrame.bindingIndex}(),t,i,s);return Jl(3),c?e+hn(t)+r+hn(i)+o+hn(s)+a:Cn}function Yn(n,e,t,r,i,o,s,a){const l=lt(),c=ur(),u=n+22,d=c.firstCreatePass?function _q(n,e,t,r,i,o,s,a,l){const c=e.consts,u=af(e,n,4,s||null,Kc(c,a));Q1(e,t,u,Kc(c,l)),$0(e,u);const d=u.tViews=K1(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,o,s):c.data[u];gl(d,!1);const h=l[11].createComment("");a_(c,l,h,d),Bo(h,l),b_(l,l[u]=cO(h,l,h,d)),j0(d)&&Y1(c,l,d),null!=s&&Z1(l,d,a)}function E_(n){return function Hh(n,e){return n[e]}(function w9(){return Mn.lFrame.contextLView}(),22+n)}function ot(n,e,t){const r=lt();return Vo(r,Gh(),e)&&Us(ur(),hi(),r,n,e,r[11],t,!1),ot}function aM(n,e,t,r,i){const s=i?"class":"style";iM(n,t,e.inputs[s],s,r)}function he(n,e,t,r){const i=lt(),o=ur(),s=22+n,a=i[11],l=i[s]=y1(a,e,function P9(){return Mn.lFrame.currentNamespace}()),c=o.firstCreatePass?function bq(n,e,t,r,i,o,s){const a=e.consts,c=af(e,n,2,i,Kc(a,o));return Q1(e,t,c,Kc(a,s)),null!==c.attrs&&w_(c,c.attrs,!1),null!==c.mergedAttrs&&w_(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,t,r):o.data[s];return gl(c,!0),uP(a,l,c),32!=(32&c.flags)&&a_(o,i,l,c),0===function v9(){return Mn.lFrame.elementDepthCount}()&&Bo(l,i),function _9(){Mn.lFrame.elementDepthCount++}(),j0(c)&&(Y1(o,i,c),X1(o,c,i)),null!==r&&Z1(i,c),he}function be(){let n=wo();Hw()?Gw():(n=n.parent,gl(n,!1));const e=n;!function y9(){Mn.lFrame.elementDepthCount--}();const t=ur();return t.firstCreatePass&&($0(t,n),Vw(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function F9(n){return 0!=(8&n.flags)}(e)&&aM(t,e,lt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function k9(n){return 0!=(16&n.flags)}(e)&&aM(t,e,lt(),e.stylesWithoutHost,!1),be}function At(n,e,t,r){return he(n,e,t,r),be(),At}function ho(){return lt()}function ag(n){return!!n&&"function"==typeof n.then}const uM=function IO(n){return!!n&&"function"==typeof n.subscribe};function Et(n,e,t,r){const i=lt(),o=ur(),s=wo();return function OO(n,e,t,r,i,o,s){const a=j0(r),c=n.firstCreatePass&&dO(n),u=e[8],d=uO(e);let h=!0;if(3&r.type||s){const p=Ls(r,e),g=s?s(p):p,_=d.length,b=s?y=>s(xo(y[r.index])):r.index;let v=null;if(!s&&a&&(v=function wq(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=o,v.__ngLastListenerFn__=o,h=!1;else{o=RO(r,e,u,o,!1);const y=t.listen(g,i,o);d.push(o,y),c&&c.push(i,b,_,_+1)}}else o=RO(r,e,u,o,!1);const f=r.outputs;let m;if(h&&null!==f&&(m=f[i])){const p=m.length;if(p)for(let g=0;g<p;g+=2){const w=e[m[g]][m[g+1]].subscribe(o),x=d.length;d.push(o,w),c&&c.push(i,r.index,x,-(x+1))}}}(o,i,i[11],s,n,e,r),Et}function NO(n,e,t,r){try{return!1!==t(r)}catch(i){return fO(n,i),!1}}function RO(n,e,t,r,i){return function o(s){if(s===Function)return r;nM(n.componentOffset>-1?Bs(n.index,e):e);let l=NO(e,0,r,s),c=o.__ngNextListenerFn__;for(;c;)l=NO(e,0,c,s)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function pn(n=1){return function D9(n){return(Mn.lFrame.contextLView=function A9(n,e){for(;n>0;)e=e[15],n--;return e}(n,Mn.lFrame.contextLView))[8]}(n)}function Mq(n,e){let t=null;const r=function Kj(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?zP(n,o,!0):eW(r,o))return i}else t=i}return t}function lg(n){const e=lt()[16][6];if(!e.projection){const r=e.projection=$m(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=n?Mq(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function cg(n,e=0,t){const r=lt(),i=ur(),o=af(i,22+n,16,null,t||null);null===o.projection&&(o.projection=e),Gw(),32!=(32&o.flags)&&function zG(n,e,t){lP(e[11],0,e,t,JI(n,t,e),rP(t.parent||e[6],t,e))}(i,r,o)}function D_(n,e){return n<<17|e<<2}function Qc(n){return n>>17&32767}function hM(n){return 2|n}function wd(n){return(131068&n)>>2}function fM(n,e){return-131069&n|e<<2}function pM(n){return 1|n}function jO(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Qc(o):wd(o),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];Tq(n[a],e)&&(l=!0,n[a+1]=r?pM(u):hM(u)),a=r?Qc(u):wd(u)}l&&(n[t+1]=r?hM(o):pM(o))}function Tq(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Zh(n,e)>=0}function Uo(n,e,t){return Ba(n,e,t,!1),Uo}function ai(n,e){return Ba(n,e,null,!0),ai}function Ba(n,e,t,r){const i=lt(),o=ur(),s=Jl(2);o.firstUpdatePass&&function QO(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[es()],s=function KO(n,e){return e>=n.expandoStartIndex}(n,t);(function n2(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function Bq(n,e,t,r){const i=function Ww(n){const e=Mn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ug(t=mM(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=mM(i,n,e,t,r),null===o){let l=function Vq(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==wd(r))return n[Qc(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=mM(null,n,e,l[1],r),l=ug(l,e.attrs,r),function zq(n,e,t,r){n[Qc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else o=function Uq(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ug(r,n[o].hostAttrs,t);return ug(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function Dq(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Qc(s),l=wd(s);n[r]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Zh(d,u)>0)&&(c=!0)}else u=t;if(i)if(0!==l){const h=Qc(n[a+1]);n[r+1]=D_(h,a),0!==h&&(n[h+1]=fM(n[h+1],r)),n[a+1]=function Sq(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=D_(a,0),0!==a&&(n[a+1]=fM(n[a+1],r)),a=r;else n[r+1]=D_(l,0),0===a?a=r:n[l+1]=fM(n[l+1],r),l=r;c&&(n[r+1]=hM(n[r+1])),jO(n,u,r,!0),jO(n,u,r,!1),function Aq(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Zh(o,e)>=0&&(t[r+1]=pM(t[r+1]))}(e,u,n,r,o),s=D_(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==Cn&&Vo(i,s,e)&&function e2(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function Eq(n){return 1==(1&n)}(c)?t2(l,e,t,i,wd(c),s):void 0;A_(u)||(A_(o)||function Cq(n){return 2==(2&n)}(c)&&(o=t2(l,null,t,i,a,s)),function HG(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:xs.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=xs.Important),n.setStyle(t,r,i,o))}}(r,s,W0(es(),t),i,o))}(o,o.data[es()],i,i[11],n,i[s+1]=function jq(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=vr(zs(n)))),n}(e,t),r,s)}function mM(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=ug(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function ug(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Vs(n,s,!!t||e[++o]))}return void 0===n?null:n}function t2(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===Cn&&(h=d?wr:void 0);let f=d?s1(h,r):u===r?h:void 0;if(c&&!A_(f)&&(f=s1(l,r)),A_(f)&&(a=f,s))return a;const m=n[i+1];i=s?Qc(m):wd(m)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=s1(l,r))}return a}function A_(n){return void 0!==n}function ht(n,e=""){const t=lt(),r=ur(),i=n+22,o=r.firstCreatePass?af(r,i,1,e,null):r.data[i],s=t[i]=function _1(n,e){return n.createText(e)}(t[11],e);a_(r,t,s,o),gl(o,!1)}function Jc(n){return fo("",n,""),Jc}function fo(n,e,t){const r=lt(),i=function cf(n,e,t,r){return Vo(n,Gh(),t)?e+hn(t)+r:Cn}(r,n,e,t);return i!==Cn&&oc(r,es(),i),fo}function gM(n,e,t,r,i,o,s){const a=lt(),l=df(a,n,e,t,r,i,o,s);return l!==Cn&&oc(a,es(),l),gM}function vM(n,e,t){const r=lt();return Vo(r,Gh(),e)&&Us(ur(),hi(),r,n,e,r[11],t,!0),vM}const yf="en-US";let M2=yf;function bM(n,e,t,r,i){if(n=$t(n),Array.isArray(n))for(let o=0;o<n.length;o++)bM(n[o],e,t,r,i);else{const o=ur(),s=lt();let a=_d(n)?n:$t(n.provide),l=NP(n);const c=wo(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(_d(n)||!n.multi){const f=new Gm(l,i,Me),m=wM(a,e,i?u:u+h,d);-1===m?(t1(J0(c,s),o,a),xM(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[m]=f,s[m]=f)}else{const f=wM(a,e,u+h,d),m=wM(a,e,u,u+h),p=f>=0&&t[f],g=m>=0&&t[m];if(i&&!g||!i&&!p){t1(J0(c,s),o,a);const _=function lX(n,e,t,r,i){const o=new Gm(n,t,Me);return o.multi=[],o.index=e,o.componentProviders=0,X2(o,i,r&&!t),o}(i?aX:sX,t.length,i,r,l);!i&&g&&(t[m].providerFactory=_),xM(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(_),s.push(_)}else xM(o,n,f>-1?f:m,X2(t[i?m:f],l,!i&&r));!i&&r&&g&&t[m].componentProviders++}}}function xM(n,e,t,r){const i=_d(e),o=function wj(n){return!!n.useClass}(e);if(i||o){const l=(o?$t(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function X2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wM(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function sX(n,e,t,r){return MM(this.multi,[])}function aX(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=hd(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),MM(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],MM(i,o);return o}function MM(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Tr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function oX(n,e,t){const r=ur();if(r.firstCreatePass){const i=ka(n);bM(t,r.data,r.blueprint,i,!0),bM(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class bf{}class Y2{}class Z2 extends bf{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pO(this);const r=Fs(e);this._bootstrapComponents=ic(r.bootstrap),this._r3Injector=$P(e,t,[{provide:bf,useValue:this},{provide:tf,useValue:this.componentFactoryResolver}],vr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class CM extends Y2{constructor(e){super(),this.moduleType=e}create(e){return new Z2(this.moduleType,e)}}class uX extends bf{constructor(e,t,r){super(),this.componentFactoryResolver=new pO(this),this.instance=null;const i=new OP([...e,{provide:bf,useValue:this},{provide:tf,useValue:this.componentFactoryResolver}],t||m_(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function N_(n,e,t=null){return new uX(n,e,t).injector}let dX=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=AP(0,t.type),i=r.length>0?N_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=_t({token:n,providedIn:"environment",factory:()=>new n(Oe(tc))}),n})();function SM(n){n.getStandaloneInjector=e=>e.get(dX).getOrCreateStandaloneInjector(n)}function rN(n,e,t,r,i,o){return function sN(n,e,t,r,i,o,s,a){const l=e+t;return S_(n,l,i,o,s)?function xl(n,e,t){return n[e]=t}(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):function gg(n,e){const t=n[e];return t===Cn?void 0:t}(n,l+3)}(lt(),function Jo(){const n=Mn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r,i,o)}function DM(n){return e=>{setTimeout(n,void 0,e)}}const pr=class kX extends Tn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=DM(o),i&&(i=DM(i)),s&&(s=DM(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof st&&e.add(a),a}};function LX(){return this._results[bd()]()}class AM{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=bd(),r=AM.prototype;r[t]||(r[t]=LX)}get changes(){return this._changes||(this._changes=new pr)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function ca(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function q9(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let sc=(()=>{class n{}return n.__NG_ELEMENT_ID__=zX,n})();const BX=sc,VX=class extends BX{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=__(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),$1(r,i,e),new rg(i)}};function zX(){return R_(wo(),lt())}function R_(n,e){return 4&n.type?new VX(e,n,nf(n,e)):null}let za=(()=>{class n{}return n.__NG_ELEMENT_ID__=UX,n})();function UX(){return dN(wo(),lt())}const HX=za,cN=class extends HX{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return nf(this._hostTNode,this._hostLView)}get injector(){return new Wh(this._hostTNode,this._hostLView)}get parentInjector(){const e=e1(this._hostTNode,this._hostLView);if(gI(e)){const t=K0(e,this._hostLView),r=Z0(e);return new Wh(t[1].data[r+8],t)}return new Wh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=uN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(e,t,r,i,o){const s=e&&!function qm(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?e:new ig(Ar(e)),c=r||this.parentInjector;if(!o&&null==l.ngModule){const h=(s?c:this.parentInjector).get(tc,null);h&&(o=h)}const u=l.create(c,i,void 0,o);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function g9(n){return Fa(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new cN(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function RG(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],AI(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function FG(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,s,o);const a=M1(o,s),l=r[11],c=s_(l,s[7]);return null!==c&&function PG(n,e,t,r,i,o){r[0]=i,r[6]=e,Qm(n,r,t,1,i,o)}(i,s[6],l,r,c,a),e.attachToViewContainerRef(),AI(TM(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=uN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=b1(this._lContainer,t);r&&(t_(TM(this._lContainer),t),QI(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=b1(this._lContainer,t);return r&&null!=t_(TM(this._lContainer),t)?new rg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function uN(n){return n[8]}function TM(n){return n[8]||(n[8]=[])}function dN(n,e){let t;const r=e[n.index];if(Fa(r))t=r;else{let i;if(8&n.type)i=xo(r);else{const o=e[11];i=o.createComment("");const s=Ls(n,e);md(o,s_(o,s),i,function VG(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=cO(r,e,i,n),b_(e,t)}return new cN(t,n,e)}class IM{constructor(e){this.queryList=e,this.matches=null}clone(){return new IM(this.queryList)}setDirty(){this.queryList.setDirty()}}class PM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new PM(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==gN(e,t).matches&&this.queries[t].setDirty()}}class hN{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class OM{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new OM(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class NM{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new NM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,GX(t,o)),this.matchTNodeWithReadOption(e,t,e_(t,e,o,!1,!1))}else r===sc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,e_(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===ni||i===za||i===sc&&4&t.type)this.addMatch(t.index,-2);else{const o=e_(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function GX(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function WX(n,e,t,r){return-1===t?function jX(n,e){return 11&n.type?nf(n,e):4&n.type?R_(n,e):null}(e,n):-2===t?function qX(n,e,t){return t===ni?nf(e,n):t===sc?R_(e,n):t===za?dN(e,n):void 0}(n,e,r):hd(n,n[1],t,e)}function fN(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:WX(e,o[c],s[l+1],t.metadata.read))}i.matches=a}return i.matches}function RM(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=fN(n,e,i,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)r.push(s[a/2]);else{const c=o[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&RM(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];RM(f[1],f,c,r)}}}}}return r}function ki(n){const e=lt(),t=ur(),r=iI();qw(r+1);const i=gN(t,r);if(n.dirty&&function m9(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?RM(t,e,r,[]):fN(t,e,i,r);n.reset(o,Nj),n.notifyOnChanges()}return!0}return!1}function po(n,e,t){const r=ur();r.firstCreatePass&&(mN(r,new hN(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),pN(r,lt(),e)}function Li(){return function $X(n,e){return n[19].queries[e].queryList}(lt(),iI())}function pN(n,e,t){const r=new AM(4==(4&t));rO(n,e,r,r.destroy),null===e[19]&&(e[19]=new PM),e[19].queries.push(new IM(r))}function mN(n,e,t){null===n.queries&&(n.queries=new OM),n.queries.track(new NM(e,t))}function gN(n,e){return n.queries.getByIndex(e)}function k_(...n){}const L_=new bt("Application Initializer");let B_=(()=>{class n{constructor(t){this.appInits=t,this.resolve=k_,this.reject=k_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(ag(o))t.push(o);else if(uM(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Oe(L_,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yg=new bt("AppId",{providedIn:"root",factory:function FN(){return`${zM()}${zM()}${zM()}`}});function zM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const kN=new bt("Platform Initializer"),UM=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LN=new bt("appBootstrapListener"),Mf=new bt("AnimationModuleType");let HM=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cl=new bt("LocaleId",{providedIn:"root",factory:()=>Vn(Cl,fn.Optional|fn.SkipSelf)||function mY(){return typeof $localize<"u"&&$localize.locale||yf}()});class vY{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let BN=(()=>{class n{compileModuleSync(t){return new CM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=ic(Fs(t).declarations).reduce((s,a)=>{const l=Ar(a);return l&&s.push(new ig(l)),s},[]);return new vY(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bY=(()=>Promise.resolve(0))();function GM(n){typeof Zone>"u"?bY.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Zn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pr(!1),this.onMicrotaskEmpty=new pr(!1),this.onStable=new pr(!1),this.onError=new pr(!1),typeof Zone>"u")throw new We(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function xY(){let n=Kr.requestAnimationFrame,e=Kr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function CY(n){const e=()=>{!function MY(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Kr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,WM(n),n.isCheckStableRunning=!0,jM(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),WM(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return UN(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),HN(n)}},onInvoke:(t,r,i,o,s,a,l)=>{try{return UN(n),t.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),HN(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,WM(n),jM(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zn.isInAngularZone())throw new We(909,!1)}static assertNotInAngularZone(){if(Zn.isInAngularZone())throw new We(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,wY,k_,k_);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const wY={};function jM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function WM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function UN(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HN(n){n._nesting--,jM(n)}class SY{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pr,this.onMicrotaskEmpty=new pr,this.onStable=new pr,this.onError=new pr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const GN=new bt(""),V_=new bt("");let XM,qM=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,XM||(function EY(n){XM=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zn.assertNotInAngularZone(),GM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())GM(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Oe(Zn),Oe($M),Oe(V_))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),$M=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return XM?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),eu=null;const jN=new bt("AllowMultipleToken"),YM=new bt("PlatformDestroyListeners");class WN{constructor(e,t){this.name=e,this.token=t}}function $N(n,e,t=[]){const r=`Platform: ${e}`,i=new bt(r);return(o=[])=>{let s=ZM();if(!s||s.injector.get(jN,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function TY(n){if(eu&&!eu.get(jN,!1))throw new We(400,!1);eu=n;const e=n.get(YN);(function qN(n){const e=n.get(kN,null);e&&e.forEach(t=>t())})(n)}(function XN(n=[],e){return Ms.create({name:e,providers:[{provide:F1,useValue:"platform"},{provide:YM,useValue:new Set([()=>eu=null])},...n]})}(a,r))}return function PY(n){const e=ZM();if(!e)throw new We(401,!1);return e}()}}function ZM(){return eu?.get(YN)??null}let YN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function KN(n,e){let t;return t="noop"===n?new SY:("zone.js"===n?void 0:n)||new Zn(e),t}(r?.ngZone,function ZN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Zn,useValue:i}];return i.run(()=>{const s=Ms.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),l=a.injector.get(rc,null);if(!l)throw new We(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{z_(this._modules,a),c.unsubscribe()})}),function QN(n,e,t){try{const r=t();return ag(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const c=a.injector.get(B_);return c.runInitializers(),c.donePromise.then(()=>(function C2(n){sa(n,"Expected localeId to be defined"),"string"==typeof n&&(M2=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Cl,yf)||yf),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=JN({},r);return function DY(n,e,t){const r=new CM(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Cf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new We(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new We(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(YM,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Oe(Ms))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function JN(n,e){return Array.isArray(e)?e.reduce(JN,n):{...n,...e}}let Cf=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _n(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new _n(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Zn.assertNotInAngularZone(),GM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Zn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=ys(o,s.pipe(fl()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof RP;if(!this._injector.get(B_).done)throw!i&&function Lh(n){const e=Ar(n)||Fo(n)||Zo(n);return null!==e&&e.standalone}(t),new We(405,false);let s;s=i?t:this._injector.get(tf).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function AY(n){return n.isBoundToModule}(s)?void 0:this._injector.get(bf),c=s.create(Ms.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(GN,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),z_(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new We(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;z_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(LN,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>z_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new We(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Oe(Zn),Oe(tc),Oe(rc))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let rs=(()=>{class n{}return n.__NG_ELEMENT_ID__=NY,n})();function NY(n){return function RY(n,e,t){if(Um(n)&&!t){const r=Bs(n.index,e);return new rg(r,r)}return 47&n.type?new rg(e[16],e):null}(wo(),lt(),16==(16&n))}class iR{constructor(){}supports(e){return og(e)}create(e){return new zY(e)}}const VY=(n,e)=>e;class zY{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||VY}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<sR(r,i,o)?t:r,a=sR(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<c&&(o[h]=f+1)}o[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!og(e))throw new We(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function mq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[bd()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new UY(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new oR),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oR),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class UY{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HY{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class oR{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new HY,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sR(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class aR{constructor(){}supports(e){return e instanceof Map||sM(e)}create(){return new GY}}class GY{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||sM(e)))throw new We(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new jY(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class jY{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lR(){return new G_([new iR])}let G_=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||lR()),deps:[[n,new Kh,new _l]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new We(901,!1)}}return n.\u0275prov=_t({token:n,providedIn:"root",factory:lR}),n})();function cR(){return new bg([new aR])}let bg=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||cR()),deps:[[n,new Kh,new _l]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new We(901,!1)}}return n.\u0275prov=_t({token:n,providedIn:"root",factory:cR}),n})();const $Y=$N(null,"core",[]);let XY=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Oe(Cf))},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({}),n})(),tC=null;function Sl(){return tC}class KY{}const rr=new bt("DocumentToken");let nC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return function QY(){return Oe(uR)}()},providedIn:"platform"}),n})();const JY=new bt("Location Initialized");let uR=(()=>{class n extends nC{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sl().getBaseHref(this._doc)}onPopState(t){const r=Sl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Sl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){dR()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){dR()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr))},n.\u0275prov=_t({token:n,factory:function(){return function eZ(){return new uR(Oe(rr))}()},providedIn:"platform"}),n})();function dR(){return!!window.history.pushState}function rC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function hR(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function lc(n){return n&&"?"!==n[0]?"?"+n:n}let Sd=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return Vn(pR)},providedIn:"root"}),n})();const fR=new bt("appBaseHref");let pR=(()=>{class n extends Sd{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Vn(rr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+lc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+lc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+lc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(nC),Oe(fR,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tZ=(()=>{class n extends Sd{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=rC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+lc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+lc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(nC),Oe(fR,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),j_=(()=>{class n{constructor(t){this._subject=new pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function iZ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(hR(mR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+lc(r))}normalize(t){return n.stripTrailingSlash(function rZ(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,mR(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=lc,n.joinWithSlash=rC,n.stripTrailingSlash=hR,n.\u0275fac=function(t){return new(t||n)(Oe(Sd))},n.\u0275prov=_t({token:n,factory:function(){return function nZ(){return new j_(Oe(Sd))}()},providedIn:"root"}),n})();function mR(n){return n.replace(/\/index.html$/,"")}let CR=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(og(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${vr(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(Me(G_),Me(bg),Me(ni),Me(nc))},n.\u0275dir=tn({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class GZ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tu=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new GZ(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),DR(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{DR(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Me(za),Me(sc),Me(G_))},n.\u0275dir=tn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function DR(n,e){n.context.$implicit=e.item}let nu=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new WZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AR("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AR("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Me(za),Me(sc))},n.\u0275dir=tn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class WZ{constructor(){this.$implicit=null,this.ngIf=null}}function AR(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${vr(e)}'.`)}let Ef=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({}),n})();const PR="browser";let CK=(()=>{class n{}return n.\u0275prov=_t({token:n,providedIn:"root",factory:()=>new SK(Oe(rr),window)}),n})();class SK{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function EK(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=OR(this.window.history)||OR(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function OR(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class eQ extends KY{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class yC extends eQ{static makeCurrent(){!function ZY(n){tC||(tC=n)}(new yC)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function tQ(){return Cg=Cg||document.querySelector("base"),Cg?Cg.getAttribute("href"):null}();return null==t?null:function nQ(n){ty=ty||document.createElement("a"),ty.setAttribute("href",n);const e=ty.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Cg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function UZ(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let ty,Cg=null;const BR=new bt("TRANSITION_ID"),iQ=[{provide:L_,useFactory:function rQ(n,e,t){return()=>{t.get(B_).donePromise.then(()=>{const r=Sl(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[BR,rr,Ms],multi:!0}];let sQ=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const Sg=new bt("EventManagerPlugins");let ny=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Oe(Sg),Oe(Zn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class bC{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Sl().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let VR=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),Eg=(()=>{class n extends VR{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(zR),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zR))}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();function zR(n){Sl().remove(n)}const xC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wC=/%COMP%/g;function MC(n,e){return e.flat(100).map(t=>t.replace(wC,n))}function GR(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ry=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new CC(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Na.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new hQ(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Na.ShadowDom:return new fQ(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=MC(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Oe(ny),Oe(Eg),Oe(yg))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class CC{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xC[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(WR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(WR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=xC[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=xC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xs.DashCase|xs.Important)?e.style.setProperty(t,r,i&xs.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,GR(r)):this.eventManager.addEventListener(e,t,GR(r))}}function WR(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hQ extends CC{constructor(e,t,r,i){super(e),this.component=r;const o=MC(i+"-"+r.id,r.styles);t.addStyles(o),this.contentAttr=function cQ(n){return"_ngcontent-%COMP%".replace(wC,n)}(i+"-"+r.id),this.hostAttr=function uQ(n){return"_nghost-%COMP%".replace(wC,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class fQ extends CC{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=MC(i.id,i.styles);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let pQ=(()=>{class n extends bC{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const qR=["alt","control","meta","shift"],mQ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vQ=(()=>{class n extends bC{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sl().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qR.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=mQ[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qR.forEach(s=>{s!==i&&(0,gQ[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const xQ=$N($Y,"browser",[{provide:UM,useValue:PR},{provide:kN,useValue:function _Q(){yC.makeCurrent()},multi:!0},{provide:rr,useFactory:function bQ(){return function $G(n){D1=n}(document),document},deps:[]}]),YR=new bt(""),ZR=[{provide:V_,useClass:class oQ{addToWindow(e){Kr.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Kr.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kr.getAllAngularRootElements=()=>e.getAllRootElements(),Kr.frameworkStabilizers||(Kr.frameworkStabilizers=[]),Kr.frameworkStabilizers.push(r=>{const i=Kr.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Sl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:GN,useClass:qM,deps:[Zn,$M,V_]},{provide:qM,useClass:qM,deps:[Zn,$M,V_]}],KR=[{provide:F1,useValue:"root"},{provide:rc,useFactory:function yQ(){return new rc},deps:[]},{provide:Sg,useClass:pQ,multi:!0,deps:[rr,Zn,UM]},{provide:Sg,useClass:vQ,multi:!0,deps:[rr]},{provide:ry,useClass:ry,deps:[ny,Eg,yg]},{provide:tg,useExisting:ry},{provide:VR,useExisting:Eg},{provide:Eg,useClass:Eg,deps:[rr]},{provide:ny,useClass:ny,deps:[Sg,Zn]},{provide:class DK{},useClass:sQ,deps:[]},[]];let QR=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:yg,useValue:t.appId},{provide:BR,useExisting:yg},iQ]}}}return n.\u0275fac=function(t){return new(t||n)(Oe(YR,12))},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({providers:[...KR,...ZR],imports:[Ef,XY]}),n})(),JR=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr))},n.\u0275prov=_t({token:n,factory:function(t){let r=null;return r=t?new t:function MQ(){return new JR(Oe(rr))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const IQ={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},iy=new bt("HammerGestureConfig"),nF=new bt("HammerLoader");let rF=(()=>{class n{constructor(){this.events=[],this.overrides={}}buildHammer(t){const r=new Hammer(t,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(const i in this.overrides)r.get(i).set(this.overrides[i]);return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),PQ=(()=>{class n extends bC{constructor(t,r,i,o){super(t),this._config=r,this.console=i,this.loader=o,this._loaderPromise=null}supports(t){return!(!IQ.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader)}addEventListener(t,r,i){const o=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let s=!1,a=()=>{s=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{window.Hammer?s||(a=this.addEventListener(t,r,i)):a=()=>{}}).catch(()=>{a=()=>{}})),()=>{a()}}return o.runOutsideAngular(()=>{const s=this._config.buildHammer(t),a=function(l){o.runGuarded(function(){i(l)})};return s.on(r,a),()=>{s.off(r,a),"function"==typeof s.destroy&&s.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr),Oe(iy),Oe(HM),Oe(nF,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),OQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({providers:[{provide:Sg,useClass:PQ,multi:!0,deps:[rr,iy,HM,[new _l,nF]]},{provide:iy,useClass:rF,deps:[]}]}),n})(),DC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(t){let r=null;return r=t?new(t||n):Oe(iF),r},providedIn:"root"}),n})(),iF=(()=>{class n extends DC{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Mr.NONE:return r;case Mr.HTML:return yl(r,"HTML")?zs(r):xP(this._doc,String(r)).toString();case Mr.STYLE:return yl(r,"Style")?zs(r):r;case Mr.SCRIPT:if(yl(r,"Script"))return zs(r);throw new Error("unsafe value used in a script context");case Mr.URL:return yl(r,"URL")?zs(r):d_(String(r));case Mr.RESOURCE_URL:if(yl(r,"ResourceURL"))return zs(r);throw new Error(`unsafe value used in a resource URL context (see ${Ta})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${Ta})`)}}bypassSecurityTrustHtml(t){return function ej(n){return new XG(n)}(t)}bypassSecurityTrustStyle(t){return function tj(n){return new YG(n)}(t)}bypassSecurityTrustScript(t){return function nj(n){return new ZG(n)}(t)}bypassSecurityTrustUrl(t){return function rj(n){return new KG(n)}(t)}bypassSecurityTrustResourceUrl(t){return function ij(n){return new QG(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr))},n.\u0275prov=_t({token:n,factory:function(t){let r=null;return r=t?new t:function NQ(n){return new iF(n.get(rr))}(Oe(Ms)),r},providedIn:"root"}),n})();function Zt(...n){return xr(n,Da(n))}class fa extends Tn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const oy=It(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:RQ}=Array,{getPrototypeOf:FQ,prototype:kQ,keys:LQ}=Object;function oF(n){if(1===n.length){const e=n[0];if(RQ(e))return{args:e,keys:null};if(function BQ(n){return n&&"object"==typeof n&&FQ(n)===kQ}(e)){const t=LQ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:VQ}=Array;function AC(n){return Gt(e=>function zQ(n,e){return VQ(e)?n(...e):n(e)}(n,e))}function sF(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function TC(...n){const e=Da(n),t=sd(n),{args:r,keys:i}=oF(n);if(0===r.length)return xr([],e);const o=new _n(function UQ(n,e,t=dn){return r=>{aF(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)aF(e,()=>{const c=xr(n[l],e);let u=!1;c.subscribe(zr(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>sF(i,s):dn));return t?o.pipe(AC(t)):o}function aF(n,e,t){n?Zr(t,n,e):e()}function sy(...n){return function HQ(){return gs(1)}()(xr(n,Da(n)))}function lF(n){return new _n(e=>{fr(n()).subscribe(e)})}function Df(n,e){const t=Xe(n)?n:()=>n,r=i=>i.error(t());return new _n(e?i=>e.schedule(r,0,i):r)}function IC(){return br((n,e)=>{let t=null;n._refCount++;const r=zr(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cF extends _n{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new st;const t=this.getSubject();e.add(this.source.subscribe(zr(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=st.EMPTY)}return e}refCount(){return IC()(this)}}function El(n,e){return br((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(zr(r,l=>{i?.unsubscribe();let c=0;const u=o++;fr(n(l,u)).subscribe(i=zr(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function iu(n){return n<=0?()=>vs:br((e,t)=>{let r=0;e.subscribe(zr(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function PC(...n){const e=Da(n);return br((t,r)=>{(e?sy(n,t,e):sy(n,t)).subscribe(r)})}function ja(n,e){return br((t,r)=>{let i=0;t.subscribe(zr(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ay(n){return br((e,t)=>{let r=!1;e.subscribe(zr(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function uF(n=GQ){return br((e,t)=>{let r=!1;e.subscribe(zr(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function GQ(){return new oy}function ou(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ja((i,o)=>n(i,o,r)):dn,iu(1),t?ay(e):uF(()=>new oy))}function su(n,e){return Xe(e)?Wr(n,e,1):Wr(n,1)}function Ji(n,e,t){const r=Xe(n)||e||t?{next:n,error:e,complete:t}:n;return r?br((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(zr(o,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),o.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):dn}function uc(n){return br((e,t)=>{let o,r=null,i=!1;r=e.subscribe(zr(t,void 0,void 0,s=>{o=fr(n(s,uc(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function jQ(n,e,t,r,i){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(zr(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function dF(n,e){return br(jQ(n,e,arguments.length>=2,!0))}function OC(n){return n<=0?()=>vs:br((e,t)=>{let r=[];e.subscribe(zr(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hF(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ja((i,o)=>n(i,o,r)):dn,OC(1),t?ay(e):uF(()=>new oy))}function ly(n){return br((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Un="primary",Dg=Symbol("RouteTitle");class $Q{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Af(n){return new $Q(n)}function XQ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Dl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!fF(n[i],e[i]))return!1;return!0}function fF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function pF(n){return Array.prototype.concat.apply([],n)}function mF(n){return n.length>0?n[n.length-1]:null}function Mo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function au(n){return uM(n)?n:ag(n)?xr(Promise.resolve(n)):Zt(n)}const cy=!1,ZQ={exact:function _F(n,e,t){if(!Dd(n.segments,e.segments)||!uy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_F(n.children[r],e.children[r],t))return!1;return!0},subset:yF},gF={exact:function KQ(n,e){return Dl(n,e)},subset:function QQ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fF(n[t],e[t]))},ignored:()=>!0};function vF(n,e,t){return ZQ[t.paths](n.root,e.root,t.matrixParams)&&gF[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function yF(n,e,t){return bF(n,e,e.segments,t)}function bF(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Dd(i,t)||e.hasChildren()||!uy(i,t,r))}if(n.segments.length===t.length){if(!Dd(n.segments,t)||!uy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!yF(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Dd(n.segments,i)&&uy(n.segments,i,r)&&n.children[Un])&&bF(n.children[Un],e,o,r)}}function uy(n,e,t){return e.every((r,i)=>gF[t](n[i].parameters,r.parameters))}class Ed{constructor(e=new Kn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Af(this.queryParams)),this._queryParamMap}toString(){return tJ.serialize(this)}}class Kn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Mo(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dy(this)}}class Ag{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Af(this.parameters)),this._parameterMap}toString(){return MF(this)}}function Dd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Tg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return new NC},providedIn:"root"}),n})();class NC{parse(e){const t=new uJ(e);return new Ed(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ig(e.root,!0)}`,r=function iJ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${hy(t)}=${hy(i)}`).join("&"):`${hy(t)}=${hy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function nJ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const tJ=new NC;function dy(n){return n.segments.map(e=>MF(e)).join("/")}function Ig(n,e){if(!n.hasChildren())return dy(n);if(e){const t=n.children[Un]?Ig(n.children[Un],!1):"",r=[];return Mo(n.children,(i,o)=>{o!==Un&&r.push(`${o}:${Ig(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function eJ(n,e){let t=[];return Mo(n.children,(r,i)=>{i===Un&&(t=t.concat(e(r,i)))}),Mo(n.children,(r,i)=>{i!==Un&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Un?[Ig(n.children[Un],!1)]:[`${i}:${Ig(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Un]?`${dy(n)}/${t[0]}`:`${dy(n)}/(${t.join("//")})`}}function xF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hy(n){return xF(n).replace(/%3B/gi,";")}function RC(n){return xF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fy(n){return decodeURIComponent(n)}function wF(n){return fy(n.replace(/\+/g,"%20"))}function MF(n){return`${RC(n.path)}${function rJ(n){return Object.keys(n).map(e=>`;${RC(e)}=${RC(n[e])}`).join("")}(n.parameters)}`}const oJ=/^[^\/()?;=#]+/;function py(n){const e=n.match(oJ);return e?e[0]:""}const sJ=/^[^=?&#]+/,lJ=/^[^&#]+/;class uJ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kn([],{}):new Kn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Un]=new Kn(e,t)),r}parseSegment(){const e=py(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new We(4009,cy);return this.capture(e),new Ag(fy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=py(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=py(this.remaining);i&&(r=i,this.capture(r))}e[fy(t)]=fy(r)}parseQueryParam(e){const t=function aJ(n){const e=n.match(sJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function cJ(n){const e=n.match(lJ);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=wF(t),o=wF(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=py(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new We(4010,cy);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Un);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[Un]:new Kn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new We(4011,cy)}}function FC(n){return n.segments.length>0?new Kn([],{[Un]:n}):n}function my(n){const e={};for(const r of Object.keys(n.children)){const o=my(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function dJ(n){if(1===n.numberOfChildren&&n.children[Un]){const e=n.children[Un];return new Kn(n.segments.concat(e.segments),e.children)}return n}(new Kn(n.segments,e))}function Ad(n){return n instanceof Ed}function pJ(n,e,t,r,i){if(0===t.length)return Tf(e.root,e.root,e.root,r,i);const o=function EF(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new SF(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Mo(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new SF(t,e,r)}(t);return o.toRoot()?Tf(e.root,e.root,new Kn([],{}),r,i):function s(l){const c=function gJ(n,e,t,r){if(n.isAbsolute)return new If(e.root,!0,0);if(-1===r)return new If(t,t===e.root,0);return function DF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new We(4005,!1);i=r.segments.length}return new If(r,!1,i-o)}(t,r+(Pg(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,l),u=c.processChildren?Ng(c.segmentGroup,c.index,o.commands):LC(c.segmentGroup,c.index,o.commands);return Tf(e.root,c.segmentGroup,u,r,i)}(n.snapshot?._lastPathIndex)}function Pg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Og(n){return"object"==typeof n&&null!=n&&n.outlets}function Tf(n,e,t,r,i){let s,o={};r&&Mo(r,(l,c)=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:CF(n,e,t);const a=FC(my(s));return new Ed(a,o,i)}function CF(n,e,t){const r={};return Mo(n.children,(i,o)=>{r[o]=i===e?t:CF(i,e,t)}),new Kn(n.segments,r)}class SF{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pg(r[0]))throw new We(4003,!1);const i=r.find(Og);if(i&&i!==mF(r))throw new We(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class If{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function LC(n,e,t){if(n||(n=new Kn([],{})),0===n.segments.length&&n.hasChildren())return Ng(n,e,t);const r=function _J(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(Og(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!TF(l,c,s))return o;r+=2}else{if(!TF(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Kn(n.segments.slice(0,r.pathIndex),{});return o.children[Un]=new Kn(n.segments.slice(r.pathIndex),n.children),Ng(o,0,i)}return r.match&&0===i.length?new Kn(n.segments,{}):r.match&&!n.hasChildren()?BC(n,e,t):r.match?Ng(n,0,i):BC(n,e,t)}function Ng(n,e,t){if(0===t.length)return new Kn(n.segments,{});{const r=function vJ(n){return Og(n[0])?n[0].outlets:{[Un]:n}}(t),i={};return Mo(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=LC(n.children[s],e,o))}),Mo(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new Kn(n.segments,i)}}function BC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Og(o)){const l=yJ(o.outlets);return new Kn(r,l)}if(0===i&&Pg(t[0])){r.push(new Ag(n.segments[e].path,AF(t[0]))),i++;continue}const s=Og(o)?o.outlets[Un]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Pg(a)?(r.push(new Ag(s,AF(a))),i+=2):(r.push(new Ag(s,{})),i++)}return new Kn(r,{})}function yJ(n){const e={};return Mo(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=BC(new Kn([],{}),0,t))}),e}function AF(n){const e={};return Mo(n,(t,r)=>e[r]=`${t}`),e}function TF(n,e,t){return n==t.path&&Dl(e,t.parameters)}class dc{constructor(e,t){this.id=e,this.url=t}}class VC extends dc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lu extends dc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gy extends dc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class IF extends dc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bJ extends dc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xJ extends dc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wJ extends dc{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class MJ extends dc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CJ extends dc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SJ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EJ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class DJ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AJ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TJ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IJ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let OJ=(()=>{class n{createUrlTree(t,r,i,o,s,a){return pJ(t||r.root,i,o,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),NJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(e){return OJ.\u0275fac(e)},providedIn:"root"}),n})();class OF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=zC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=UC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return UC(e,this._root).map(t=>t.value)}}function zC(n,e){if(n===e.value)return e;for(const t of e.children){const r=zC(n,t);if(r)return r}return null}function UC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=UC(n,t);if(r.length)return r.unshift(e),r}return[]}class hc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NF extends OF{constructor(e,t){super(e),this.snapshot=t,HC(this,e)}toString(){return this.snapshot.toString()}}function RF(n,e){const t=function RJ(n,e){const s=new vy([],{},{},"",{},Un,e,null,n.root,-1,{});return new kF("",new hc(s,[]))}(n,e),r=new fa([new Ag("",{})]),i=new fa({}),o=new fa({}),s=new fa({}),a=new fa(""),l=new Al(r,i,s,a,o,Un,e,t.root);return l.snapshot=t.root,new NF(new hc(l,[]),t)}class Al{constructor(e,t,r,i,o,s,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(Gt(c=>c[Dg]))??Zt(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Gt(e=>Af(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Gt(e=>Af(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function FJ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vy{constructor(e,t,r,i,o,s,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get title(){return this.data?.[Dg]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Af(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Af(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kF extends OF{constructor(e,t){super(t),this.url=e,HC(this,t)}toString(){return LF(this._root)}}function HC(n,e){e.value._routerState=n,e.children.forEach(t=>HC(n,t))}function LF(n){const e=n.children.length>0?` { ${n.children.map(LF).join(", ")} } `:"";return`${n.value}${e}`}function GC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Dl(e.params,t.params)||n.params.next(t.params),function YQ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Dl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jC(n,e){const t=Dl(n.params,e.params)&&function JQ(n,e){return Dd(n,e)&&n.every((t,r)=>Dl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jC(n.parent,e.parent))}function Rg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function LJ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Rg(n,r,i);return Rg(n,r)})}(n,e,t);return new hc(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Rg(n,a)),s}}const r=function BJ(n){return new Al(new fa(n.url),new fa(n.params),new fa(n.queryParams),new fa(n.fragment),new fa(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Rg(n,o));return new hc(r,i)}}const WC="ngNavigationCancelingError";function BF(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ad(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VF(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function VF(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[WC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function zF(n){return UF(n)&&Ad(n.url)}function UF(n){return n&&n[WC]}class VJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Fg,this.attachRef=null}}let Fg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new VJ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _y=!1;let qC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Un,this.activateEvents=new pr,this.deactivateEvents=new pr,this.attachEvents=new pr,this.detachEvents=new pr,this.parentContexts=Vn(Fg),this.location=Vn(za),this.changeDetector=Vn(rs),this.environmentInjector=Vn(tc)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new We(4012,_y);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new We(4012,_y);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new We(4012,_y);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new We(4013,_y);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new zJ(t,a,i.injector);if(r&&function UJ(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=i.createComponent(c,i.length,l)}else this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=tn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Qo]}),n})();class zJ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Al?this.route:e===Fg?this.childContexts:this.parent.get(e,t)}}let $C=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Dr({type:n,selectors:[["ng-component"]],standalone:!0,features:[SM],decls:1,vars:0,template:function(t,r){1&t&&At(0,"router-outlet")},dependencies:[qC],encapsulation:2}),n})();function HF(n,e){return n.providers&&!n._injector&&(n._injector=N_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function YC(n){const e=n.children&&n.children.map(YC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Un&&(t.component=$C),t}function pa(n){return n.outlet||Un}function GF(n,e){const t=n.filter(r=>pa(r)===e);return t.push(...n.filter(r=>pa(r)!==e)),t}function kg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class qJ{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),GC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Pf(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Mo(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Pf(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Pf(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Pf(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new IJ(o.value.snapshot))}),e.children.length&&this.forwardEvent(new AJ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(GC(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),GC(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=kg(i.snapshot),l=a?.get(tf)??null;s.attachRef=null,s.route=i,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class jF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yy{constructor(e,t){this.component=e,this.route=t}}function $J(n,e,t){const r=n._root;return Lg(r,e?e._root:null,t,[r.value])}function Of(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function j7(n){return null!==F0(n)}(n)?e.get(n):n:r}function Lg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Pf(e);return n.children.forEach(s=>{(function YJ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function ZJ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dd(n.url,e.url)||!Dl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jC(n,e)||!Dl(n.queryParams,e.queryParams);default:return!jC(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new jF(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Lg(n,e,o.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yy(a.outlet.component,s))}else s&&Bg(e,a,i),i.canActivateChecks.push(new jF(r)),Lg(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Mo(o,(s,a)=>Bg(s,t.getContext(a),i)),i}function Bg(n,e,t){const r=Pf(n),i=n.value;Mo(r,(o,s)=>{Bg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new yy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Vg(n){return"function"==typeof n}function ZC(n){return n instanceof oy||"EmptyError"===n?.name}const by=Symbol("INITIAL_VALUE");function Nf(){return El(n=>TC(n.map(e=>e.pipe(iu(1),PC(by)))).pipe(Gt(e=>{for(const t of e)if(!0!==t){if(t===by)return by;if(!1===t||t instanceof Ed)return t}return!0}),ja(e=>e!==by),iu(1)))}function WF(n){return function Dn(...n){return yo(n)}(Ji(e=>{if(Ad(e))throw BF(0,e)}),Gt(e=>!0===e))}const KC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qF(n,e,t,r,i){const o=QC(n,e,t);return o.matched?function fee(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Zt(i.map(s=>{const a=Of(s,n);return au(function nee(n){return n&&Vg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Nf(),WF()):Zt(!0)}(r=HF(e,r),e,t).pipe(Gt(s=>!0===s?o:{...KC})):Zt(o)}function QC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...KC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||XQ)(t,n,e);if(!i)return{...KC};const o={};Mo(i.posParams,(a,l)=>{o[l]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xy(n,e,t,r){if(t.length>0&&function gee(n,e,t){return t.some(r=>wy(n,e,r)&&pa(r)!==Un)}(n,t,r)){const o=new Kn(e,function mee(n,e,t,r){const i={};i[Un]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&pa(o)!==Un){const s=new Kn([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,i[pa(o)]=s}return i}(n,e,r,new Kn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function vee(n,e,t){return t.some(r=>wy(n,e,r))}(n,t,r)){const o=new Kn(n.segments,function pee(n,e,t,r,i){const o={};for(const s of r)if(wy(n,t,s)&&!i[pa(s)]){const a=new Kn([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,o[pa(s)]=a}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new Kn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function wy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $F(n,e,t,r){return!!(pa(n)===r||r!==Un&&wy(e,t,n))&&("**"===n.path||QC(e,n,t).matched)}function XF(n,e,t){return 0===e.length&&!n.children[t]}const My=!1;class Cy{constructor(e){this.segmentGroup=e||null}}class YF{constructor(e){this.urlTree=e}}function zg(n){return Df(new Cy(n))}function ZF(n){return Df(new YF(n))}class xee{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=xy(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Un).pipe(Gt(o=>this.createUrlTree(my(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uc(o=>{if(o instanceof YF)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Cy?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Un).pipe(Gt(i=>this.createUrlTree(my(i),e.queryParams,e.fragment))).pipe(uc(i=>{throw i instanceof Cy?this.noMatchError(i):i}))}noMatchError(e){return new We(4002,My)}createUrlTree(e,t,r){const i=FC(e);return new Ed(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(Gt(o=>new Kn([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return xr(i).pipe(su(o=>{const s=r.children[o],a=GF(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(Gt(l=>({segment:l,outlet:o})))}),dF((o,s)=>(o[s.outlet]=s.segment,o),{}),hF())}expandSegment(e,t,r,i,o,s){return xr(r).pipe(su(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,o,s).pipe(uc(c=>{if(c instanceof Cy)return Zt(null);throw c}))),ou(a=>!!a),uc((a,l)=>{if(ZC(a))return XF(t,i,o)?Zt(new Kn([],{})):zg(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,o,s,a){return $F(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s):zg(t):zg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ZF(o):this.lineralizeSegments(r,o).pipe(Wr(s=>{const a=new Kn(s,{});return this.expandSegment(e,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=QC(t,i,o);if(!a)return zg(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?ZF(d):this.lineralizeSegments(i,d).pipe(Wr(h=>this.expandSegment(e,t,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=HF(r,e),r.loadChildren?(r._loadedRoutes?Zt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(Gt(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new Kn(i,{})))):Zt(new Kn(i,{}))):qF(t,r,i,e).pipe(El(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=r._injector??e,r,i).pipe(Wr(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:m}=xy(t,a,l,h),p=new Kn(f.segments,f.children);if(0===m.length&&p.hasChildren())return this.expandChildren(d,h,p).pipe(Gt(v=>new Kn(a,v)));if(0===h.length&&0===m.length)return Zt(new Kn(a,{}));const g=pa(r)===o;return this.expandSegment(d,p,h,m,g?Un:o,!0).pipe(Gt(b=>new Kn(a.concat(b.segments),b.children)))})):zg(t)))}getChildConfig(e,t,r){return t.children?Zt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Zt({routes:t._loadedRoutes,injector:t._loadedInjector}):function hee(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Zt(!0):Zt(i.map(s=>{const a=Of(s,n);return au(function QJ(n){return n&&Vg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Nf(),WF())}(e,t,r).pipe(Wr(i=>i?this.configLoader.loadChildren(e,t).pipe(Ji(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function yee(n){return Df(VF(My,3))}())):Zt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Zt(r);if(i.numberOfChildren>1||!i.children[Un])return Df(new We(4e3,My));i=i.children[Un]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Ed(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Mo(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Mo(t.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,r,i)}),new Kn(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new We(4001,My);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Mee{}class Eee{constructor(e,t,r,i,o,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=xy(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Un).pipe(Gt(t=>{if(null===t)return null;const r=new vy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Un,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new hc(r,t),o=new kF(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=FF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return xr(Object.keys(r.children)).pipe(su(i=>{const o=r.children[i],s=GF(t,i);return this.processSegmentGroup(e,s,o,i)}),dF((i,o)=>i&&o?(i.push(...o),i):null),function WQ(n,e=!1){return br((t,r)=>{let i=0;t.subscribe(zr(r,o=>{const s=n(o,i++);(s||e)&&r.next(o),!s&&r.complete()}))})}(i=>null!==i),ay(null),hF(),Gt(i=>{if(null===i)return null;const o=QF(i);return function Dee(n){n.sort((e,t)=>e.value.outlet===Un?-1:t.value.outlet===Un?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return xr(t).pipe(su(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,i,o)),ou(s=>!!s),uc(s=>{if(ZC(s))return XF(r,i,o)?Zt([]):Zt(null);throw s}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!$F(t,r,i,o))return Zt(null);let s;if("**"===t.path){const a=i.length>0?mF(i).parameters:{},l=ek(r)+i.length;s=Zt({snapshot:new vy(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tk(t),pa(t),t.component??t._loadedComponent??null,t,JF(r),l,nk(t)),consumedSegments:[],remainingSegments:[]})}else s=qF(r,t,i,e).pipe(Gt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=ek(r)+l.length;return{snapshot:new vy(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tk(t),pa(t),t.component??t._loadedComponent??null,t,JF(r),d,nk(t)),consumedSegments:l,remainingSegments:c}}));return s.pipe(El(a=>{if(null===a)return Zt(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function Aee(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:m}=xy(r,c,u,h.filter(g=>void 0===g.redirectTo));if(0===m.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(Gt(g=>null===g?null:[new hc(l,g)]));if(0===h.length&&0===m.length)return Zt([new hc(l,[])]);const p=pa(t)===o;return this.processSegment(d,h,f,m,p?Un:o).pipe(Gt(g=>null===g?null:[new hc(l,g)]))}))}}function Tee(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QF(n){const e=[],t=new Set;for(const r of n){if(!Tee(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=QF(r.children);e.push(new hc(r.value,i))}return e.filter(r=>!t.has(r))}function JF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ek(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tk(n){return n.data||{}}function nk(n){return n.resolve||{}}function rk(n){return"string"==typeof n.title||null===n.title}function JC(n){return El(e=>{const t=n(e);return t?xr(t).pipe(Gt(()=>e)):Zt(e)})}const Rf=new bt("ROUTES");let eS=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Zt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=au(t.loadComponent()).pipe(Gt(ok),Ji(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ly(()=>{this.componentLoaders.delete(t)})),i=new cF(r,()=>new Tn).pipe(IC());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Zt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Gt(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=pF(l.get(Rf,[],fn.Self|fn.Optional)));return{routes:c.map(YC),injector:l}}),ly(()=>{this.childrenLoaders.delete(r)})),s=new cF(o,()=>new Tn).pipe(IC());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return au(t()).pipe(Gt(ok),Wr(i=>i instanceof Y2||Array.isArray(i)?Zt(i):xr(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(Oe(Ms),Oe(BN))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ok(n){return function Bee(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let tS=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Tn,this.configLoader=Vn(eS),this.environmentInjector=Vn(tc),this.urlSerializer=Vn(Tg),this.rootContexts=Vn(Fg),this.navigationId=0,this.configLoader.onLoadEndListener=i=>this.events.next(new EJ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new SJ(i))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new fa({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ja(r=>0!==r.id),Gt(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),El(r=>{let i=!1,o=!1;return Zt(r).pipe(Ji(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),El(s=>{const a=t.browserUrlTree.toString(),l=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||l)&&t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ak(s.source)&&(t.browserUrlTree=s.extractedUrl),Zt(s).pipe(El(u=>{const d=this.transitions?.getValue();return this.events.next(new VC(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?vs:Promise.resolve(u)}),function wee(n,e,t,r){return El(i=>function bee(n,e,t,r,i){return new xee(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(Gt(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Ji(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function Pee(n,e,t,r,i){return Wr(o=>function See(n,e,t,r,i,o,s="emptyOnly"){return new Eee(n,e,t,r,i,s,o).recognize().pipe(El(a=>null===a?function Cee(n){return new _n(e=>e.error(n))}(new Mee):Zt(a)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(Gt(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ji(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new bJ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:h,source:f,restoredState:m,extras:p}=s,g=new VC(d,this.urlSerializer.serialize(h),f,m);this.events.next(g);const _=RF(h,t.rootComponentType).snapshot;return Zt(r={...s,targetSnapshot:_,urlAfterRedirects:h,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=s.rawUrl,s.resolve(null),vs}),Ji(s=>{const a=new xJ(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Gt(s=>r={...s,guards:$J(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function iee(n,e){return Wr(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Zt({...t,guardsResult:!0}):function oee(n,e,t,r){return xr(n).pipe(Wr(i=>function dee(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Zt(o.map(a=>{const l=kg(e)??i,c=Of(a,l);return au(function tee(n){return n&&Vg(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(ou())})).pipe(Nf()):Zt(!0)}(i.component,i.route,t,e,r)),ou(i=>!0!==i,!0))}(s,r,i,n).pipe(Wr(a=>a&&function KJ(n){return"boolean"==typeof n}(a)?function see(n,e,t,r){return xr(e).pipe(su(i=>sy(function lee(n,e){return null!==n&&e&&e(new DJ(n)),Zt(!0)}(i.route.parent,r),function aee(n,e){return null!==n&&e&&e(new TJ(n)),Zt(!0)}(i.route,r),function uee(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function XJ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>lF(()=>Zt(s.guards.map(l=>{const c=kg(s.node)??t,u=Of(l,c);return au(function eee(n){return n&&Vg(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(ou())})).pipe(Nf())));return Zt(o).pipe(Nf())}(n,i.path,t),function cee(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Zt(!0);const i=r.map(o=>lF(()=>{const s=kg(e)??t,a=Of(o,s);return au(function JJ(n){return n&&Vg(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(ou())}));return Zt(i).pipe(Nf())}(n,i.route,t))),ou(i=>!0!==i,!0))}(r,o,n,e):Zt(a)),Gt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Ji(s=>{if(r.guardsResult=s.guardsResult,Ad(s.guardsResult))throw BF(0,s.guardsResult);const a=new wJ(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),ja(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3,t),!1)),JC(s=>{if(s.guards.canActivateChecks.length)return Zt(s).pipe(Ji(a=>{const l=new MJ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),El(a=>{let l=!1;return Zt(a).pipe(function Oee(n,e){return Wr(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Zt(t);let o=0;return xr(i).pipe(su(s=>function Nee(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!rk(i)&&(o[Dg]=i.title),function Ree(n,e,t,r){const i=function Fee(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Zt({});const o={};return xr(i).pipe(Wr(s=>function kee(n,e,t,r){const i=kg(e)??r,o=Of(n,i);return au(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(ou(),Ji(a=>{o[s]=a}))),OC(1),function qQ(n){return Gt(()=>n)}(o),uc(s=>ZC(s)?vs:Df(s)))}(o,n,e,r).pipe(Gt(s=>(n._resolvedData=s,n.data=FF(n,t).resolve,i&&rk(i)&&(n.data[Dg]=i.title),null)))}(s.route,r,n,e)),Ji(()=>o++),OC(1),Wr(s=>o===i.length?Zt(t):vs))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ji({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),Ji(a=>{const l=new CJ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),JC(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ji(u=>{l.component=u}),Gt(()=>{})));for(const u of l.children)c.push(...a(u));return c};return TC(a(s.targetSnapshot.root)).pipe(ay(),iu(1))}),JC(()=>t.afterPreactivation()),Gt(s=>{const a=function kJ(n,e,t){const r=Rg(n,e._root,t?t._root:void 0);return new NF(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),Ji(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>Gt(r=>(new qJ(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Ji({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new lu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ly(()=>{i||o||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),uc(s=>{if(o=!0,UF(s)){zF(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new gy(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),zF(s)){const l=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||ak(r.source)};t.scheduleNavigation(l,"imperative",null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new IF(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(l){r.reject(l)}}return vs}))}))}cancelNavigationTransition(t,r,i,o){const s=new gy(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ak(n){return"imperative"!==n}let lk=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Un);return r}getResolvedTitleForRoute(t){return t.data[Dg]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return Vn(Vee)},providedIn:"root"}),n})(),Vee=(()=>{class n extends lk{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(Oe(JR))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return Vn(Hee)},providedIn:"root"}),n})();class Uee{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Hee=(()=>{class n extends Uee{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Xi(n)))(r||n)}}(),n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sy=new bt("",{providedIn:"root",factory:()=>({})});let jee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return Vn(Wee)},providedIn:"root"}),n})(),Wee=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qee(n){throw n}function $ee(n,e,t){return e.parse("/")}const Xee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Co=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=Vn(HM),this.isNgZoneEnabled=!1,this.options=Vn(Sy,{optional:!0})||{},this.errorHandler=this.options.errorHandler||qee,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||$ee,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Zt(void 0),this.urlHandlingStrategy=Vn(jee),this.routeReuseStrategy=Vn(zee),this.urlCreationStrategy=Vn(NJ),this.titleStrategy=Vn(lk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pF(Vn(Rf,{optional:!0})??[]),this.navigationTransitions=Vn(tS),this.urlSerializer=Vn(Tg),this.location=Vn(j_),this.rootComponentType=null,this.isNgZoneEnabled=Vn(Zn)instanceof Zn&&Zn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ed,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=RF(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(YC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...o};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ad(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Zee(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new We(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Xee}:!1===r?{...Yee}:r,Ad(t))return vF(this.currentUrlTree,t,i);const o=this.parseUrl(t);return vF(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),u=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):u=0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uk{}let Jee=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ja(t=>t instanceof lu),su(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=N_(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return xr(i).pipe(gs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Zt(null);const o=i.pipe(Wr(s=>null===s?Zt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?xr([o,this.loader.loadComponent(r)]).pipe(gs()):o})}}return n.\u0275fac=function(t){return new(t||n)(Oe(Co),Oe(BN),Oe(tc),Oe(uk),Oe(eS))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rS=new bt("");let dk=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof VC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof PF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new PF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){v_()},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();function kf(n,e){return{\u0275kind:n,\u0275providers:e}}function fk(){const n=Vn(Ms);return e=>{const t=n.get(Cf);if(e!==t.components[0])return;const r=n.get(Co),i=n.get(pk);1===n.get(oS)&&r.initialNavigation(),n.get(mk,null,fn.Optional)?.setUpPreloading(),n.get(rS,null,fn.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const pk=new bt("",{factory:()=>new Tn}),oS=new bt("",{providedIn:"root",factory:()=>1});const mk=new bt("");function ite(n){return kf(0,[{provide:mk,useExisting:Jee},{provide:uk,useExisting:n}])}const gk=new bt("ROUTER_FORROOT_GUARD"),ote=[j_,{provide:Tg,useClass:NC},Co,Fg,{provide:Al,useFactory:function hk(n){return n.routerState.root},deps:[Co]},eS,[]];function ste(){return new WN("Router",Co)}let vk=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ote,[],{provide:Rf,multi:!0,useValue:t},{provide:gk,useFactory:ute,deps:[[Co,new _l,new Kh]]},{provide:Sy,useValue:r||{}},r?.useHash?{provide:Sd,useClass:tZ}:{provide:Sd,useClass:pR},{provide:rS,useFactory:()=>{const n=Vn(CK),e=Vn(Zn),t=Vn(Sy),r=Vn(tS),i=Vn(Tg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new dk(i,r,n,e,t)}},r?.preloadingStrategy?ite(r.preloadingStrategy).\u0275providers:[],{provide:WN,multi:!0,useFactory:ste},r?.initialNavigation?dte(r):[],[{provide:_k,useFactory:fk},{provide:LN,multi:!0,useExisting:_k}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Rf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(Oe(gk,8))},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[$C]}),n})();function ute(n){return"guarded"}function dte(n){return["disabled"===n.initialNavigation?kf(3,[{provide:L_,multi:!0,useFactory:()=>{const e=Vn(Co);return()=>{e.setUpLocationChangeListener()}}},{provide:oS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?kf(2,[{provide:oS,useValue:0},{provide:L_,multi:!0,deps:[Ms],useFactory:e=>{const t=e.get(JY,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const o=e.get(Co),s=e.get(pk);(function r(i){e.get(Co).events.pipe(ja(s=>s instanceof lu||s instanceof gy||s instanceof IF),Gt(s=>s instanceof lu||s instanceof gy&&(0===s.code||1===s.code)&&null),ja(s=>null!==s),iu(1)).subscribe(()=>{i()})})(()=>{i(!0)}),o.afterPreactivation=()=>(i(!0),s.closed?Zt(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const _k=new bt("");function cu(){return cu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cu.apply(this,arguments)}var yk={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},it=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(yk)};cu(it,yk,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var xk,fc,Lf=9e15,uu=1e9,lS="0123456789abcdef",Ey="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Dy="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",cS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Lf,maxE:Lf,crypto:!1},yn=!0,Ay="[DecimalError] ",du=Ay+"Invalid argument: ",wk=Ay+"Precision limit exceeded",Mk=Ay+"crypto unavailable",Ck="[object Decimal]",Ho=Math.floor,eo=Math.pow,pte=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,mte=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,gte=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Sk=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wa=1e7,_te=Ey.length-1,uS=Dy.length-1,dt={toStringTag:Ck};function So(n){var e,t,r,i=n.length-1,o="",s=n[0];if(i>0){for(o+=s,e=1;e<i;e++)(t=7-(r=n[e]+"").length)&&(o+=hu(t)),o+=r;(t=7-(r=(s=n[e])+"").length)&&(o+=hu(t))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function Ss(n,e,t){if(n!==~~n||n<e||n>t)throw Error(du+n)}function Hg(n,e,t,r){var i,o,s,a;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=7,i=0):(i=Math.ceil((e+1)/7),e%=7),o=eo(10,7-e),a=n[i]%o|0,null==r?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),s=t<4&&99999==a||t>3&&49999==a||5e4==a||0==a):s=(t<4&&a+1==o||t>3&&a+1==o/2)&&(n[i+1]/o/100|0)==eo(10,e-2)-1||(a==o/2||0==a)&&0==(n[i+1]/o/100|0):e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),s=(r||t<4)&&9999==a||!r&&t>3&&4999==a):s=((r||t<4)&&a+1==o||!r&&t>3&&a+1==o/2)&&(n[i+1]/o/1e3|0)==eo(10,e-3)-1,s}function Ty(n,e,t){for(var r,o,i=[0],s=0,a=n.length;s<a;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=lS.indexOf(n.charAt(s++)),r=0;r<i.length;r++)i[r]>t-1&&(void 0===i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}dt.absoluteValue=dt.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),nn(n)},dt.ceil=function(){return nn(new this.constructor(this),this.e+1,2)},dt.clampedTo=dt.clamp=function(n,e){var r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(du+e);return r.cmp(n)<0?n:r.cmp(e)>0?e:new i(r)},dt.comparedTo=dt.cmp=function(n){var e,t,r,i,o=this,s=o.d,a=(n=new o.constructor(n)).d,l=o.s,c=n.s;if(!s||!a)return l&&c?l!==c?l:s===a?0:!s^l<0?1:-1:NaN;if(!s[0]||!a[0])return s[0]?l:a[0]?-c:0;if(l!==c)return l;if(o.e!==n.e)return o.e>n.e^l<0?1:-1;for(e=0,t=(r=s.length)<(i=a.length)?r:i;e<t;++e)if(s[e]!==a[e])return s[e]>a[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},dt.cosine=dt.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(e=r.rounding,r.precision=(n=r.precision)+Math.max(t.e,t.sd())+7,r.rounding=1,t=function yte(n,e){var t,r,i;if(e.isZero())return e;(r=e.d.length)<32?i=(1/Oy(4,t=Math.ceil(r/3))).toString():(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=Bf(n,1,e.times(i),new n(1));for(var o=t;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return n.precision-=t,e}(r,Pk(r,t)),r.precision=n,r.rounding=e,nn(2==fc||3==fc?t.neg():t,n,e,!0)):new r(1):new r(NaN)},dt.cubeRoot=dt.cbrt=function(){var n,e,t,r,i,o,s,a,l,c,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(yn=!1,(o=u.s*eo(u.s*u,1/3))&&Math.abs(o)!=1/0?r=new d(o.toString()):(t=So(u.d),(o=((n=u.e)-t.length+1)%3)&&(t+=1==o||-2==o?"0":"00"),o=eo(t,1/3),n=Ho((n+1)/3)-(n%3==(n<0?-1:2)),(r=new d(t=o==1/0?"5e"+n:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+n)).s=u.s),s=(n=d.precision)+3;;)if(c=(l=(a=r).times(a).times(a)).plus(u),r=Xr(c.plus(u).times(a),c.plus(l),s+2,1),So(a.d).slice(0,s)===(t=So(r.d)).slice(0,s)){if("9999"!=(t=t.slice(s-3,s+1))&&(i||"4999"!=t)){(!+t||!+t.slice(1)&&"5"==t.charAt(0))&&(nn(r,n+1,1),e=!r.times(r).times(r).eq(u));break}if(!i&&(nn(a,n+1,0),a.times(a).times(a).eq(u))){r=a;break}s+=4,i=1}return yn=!0,nn(r,n,d.rounding,e)},dt.decimalPlaces=dt.dp=function(){var n,e=this.d,t=NaN;if(e){if(t=7*((n=e.length-1)-Ho(this.e/7)),n=e[n])for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t},dt.dividedBy=dt.div=function(n){return Xr(this,new this.constructor(n))},dt.dividedToIntegerBy=dt.divToInt=function(n){var t=this.constructor;return nn(Xr(this,new t(n),0,1,1),t.precision,t.rounding)},dt.equals=dt.eq=function(n){return 0===this.cmp(n)},dt.floor=function(){return nn(new this.constructor(this),this.e+1,3)},dt.greaterThan=dt.gt=function(n){return this.cmp(n)>0},dt.greaterThanOrEqualTo=dt.gte=function(n){var e=this.cmp(n);return 1==e||0===e},dt.hyperbolicCosine=dt.cosh=function(){var n,e,t,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;r=s.rounding,s.precision=(t=s.precision)+Math.max(o.e,o.sd())+4,s.rounding=1,(i=o.d.length)<32?e=(1/Oy(4,n=Math.ceil(i/3))).toString():(n=16,e="2.3283064365386962890625e-10"),o=Bf(s,1,o.times(e),new s(1),!0);for(var l,c=n,u=new s(8);c--;)l=o.times(o),o=a.minus(l.times(u.minus(l.times(u))));return nn(o,s.precision=t,s.rounding=r,!0)},dt.hyperbolicSine=dt.sinh=function(){var n,e,t,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.rounding,o.precision=(e=o.precision)+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=Bf(o,2,i,i,!0);else{n=1.4*Math.sqrt(r),i=Bf(o,2,i=i.times(1/Oy(5,n=n>16?16:0|n)),i,!0);for(var s,a=new o(5),l=new o(16),c=new o(20);n--;)s=i.times(i),i=i.times(a.plus(s.times(l.times(s).plus(c))))}return o.precision=e,o.rounding=t,nn(i,e,t,!0)},dt.hyperbolicTangent=dt.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.rounding,r.precision=(n=r.precision)+7,r.rounding=1,Xr(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)},dt.inverseCosine=dt.acos=function(){var n,e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,o=t.rounding;return-1!==r?0===r?e.isNeg()?qa(t,i,o):new t(0):new t(NaN):e.isZero()?qa(t,i+4,o).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),n=qa(t,i+4,o).times(.5),t.precision=i,t.rounding=o,n.minus(e))},dt.inverseHyperbolicCosine=dt.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(e=r.rounding,r.precision=(n=r.precision)+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,yn=!1,t=t.times(t).minus(1).sqrt().plus(t),yn=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)},dt.inverseHyperbolicSine=dt.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(e=r.rounding,r.precision=(n=r.precision)+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,yn=!1,t=t.times(t).plus(1).sqrt().plus(t),yn=!0,r.precision=n,r.rounding=e,t.ln())},dt.inverseHyperbolicTangent=dt.atanh=function(){var n,e,t,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=o.precision,e=o.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?nn(new o(i),n,e,!0):(o.precision=t=r-i.e,i=Xr(i.plus(1),new o(1).minus(i),t+n,1),o.precision=n+4,o.rounding=1,i=i.ln(),o.precision=n,o.rounding=e,i.times(.5))):new o(NaN)},dt.inverseSine=dt.asin=function(){var n,e,t,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),t=o.precision,r=o.rounding,-1!==e?0===e?((n=qa(o,t+4,r).times(.5)).s=i.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=r,i.times(2)))},dt.inverseTangent=dt.atan=function(){var n,e,t,r,i,o,s,a,l,c=this,u=c.constructor,d=u.precision,h=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&d+4<=uS)return(s=qa(u,d+4,h).times(.25)).s=c.s,s}else{if(!c.s)return new u(NaN);if(d+4<=uS)return(s=qa(u,d+4,h).times(.5)).s=c.s,s}for(u.precision=a=d+10,u.rounding=1,n=t=Math.min(28,a/7+2|0);n;--n)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(yn=!1,e=Math.ceil(a/7),r=1,l=c.times(c),s=new u(c),i=c;-1!==n;)if(i=i.times(l),o=s.minus(i.div(r+=2)),i=i.times(l),void 0!==(s=o.plus(i.div(r+=2))).d[e])for(n=e;s.d[n]===o.d[n]&&n--;);return t&&(s=s.times(2<<t-1)),yn=!0,nn(s,u.precision=d,u.rounding=h,!0)},dt.isFinite=function(){return!!this.d},dt.isInteger=dt.isInt=function(){return!!this.d&&Ho(this.e/7)>this.d.length-2},dt.isNaN=function(){return!this.s},dt.isNegative=dt.isNeg=function(){return this.s<0},dt.isPositive=dt.isPos=function(){return this.s>0},dt.isZero=function(){return!!this.d&&0===this.d[0]},dt.lessThan=dt.lt=function(n){return this.cmp(n)<0},dt.lessThanOrEqualTo=dt.lte=function(n){return this.cmp(n)<1},dt.logarithm=dt.log=function(n){var e,t,r,i,o,s,a,l,c=this,u=c.constructor,d=u.precision,h=u.rounding;if(null==n)n=new u(10),e=!0;else{if(t=(n=new u(n)).d,n.s<0||!t||!t[0]||n.eq(1))return new u(NaN);e=n.eq(10)}if(t=c.d,c.s<0||!t||!t[0]||c.eq(1))return new u(t&&!t[0]?-1/0:1!=c.s?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(i=t[0];i%10==0;)i/=10;o=1!==i}if(yn=!1,s=fu(c,a=d+5),r=e?Py(u,a+10):fu(n,a),Hg((l=Xr(s,r,a,1)).d,i=d,h))do{if(s=fu(c,a+=10),r=e?Py(u,a+10):fu(n,a),l=Xr(s,r,a,1),!o){+So(l.d).slice(i+1,i+15)+1==1e14&&(l=nn(l,d+1,0));break}}while(Hg(l.d,i+=10,h));return yn=!0,nn(l,d,h)},dt.minus=dt.sub=function(n){var e,t,r,i,o,s,a,l,c,u,d,h,f=this,m=f.constructor;if(n=new m(n),!f.d||!n.d)return f.s&&n.s?f.d?n.s=-n.s:n=new m(n.d||f.s!==n.s?f:NaN):n=new m(NaN),n;if(f.s!=n.s)return n.s=-n.s,f.plus(n);if(h=n.d,a=m.precision,l=m.rounding,!(c=f.d)[0]||!h[0]){if(h[0])n.s=-n.s;else{if(!c[0])return new m(3===l?-0:0);n=new m(f)}return yn?nn(n,a,l):n}if(t=Ho(n.e/7),u=Ho(f.e/7),c=c.slice(),o=u-t){for((d=o<0)?(e=c,o=-o,s=h.length):(e=h,t=u,s=c.length),o>(r=Math.max(Math.ceil(a/7),s)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((d=(r=c.length)<(s=h.length))&&(s=r),r=0;r<s;r++)if(c[r]!=h[r]){d=c[r]<h[r];break}o=0}for(d&&(e=c,c=h,h=e,n.s=-n.s),r=h.length-(s=c.length);r>0;--r)c[s++]=0;for(r=h.length;r>o;){if(c[--r]<h[r]){for(i=r;i&&0===c[--i];)c[i]=Wa-1;--c[i],c[r]+=Wa}c[r]-=h[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--t;return c[0]?(n.d=c,n.e=Iy(c,t),yn?nn(n,a,l):n):new m(3===l?-0:0)},dt.modulo=dt.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?nn(new r(t),r.precision,r.rounding):(yn=!1,9==r.modulo?(e=Xr(t,n.abs(),0,3,1)).s*=n.s:e=Xr(t,n,0,r.modulo,1),e=e.times(n),yn=!0,t.minus(e))},dt.naturalExponential=dt.exp=function(){return dS(this)},dt.naturalLogarithm=dt.ln=function(){return fu(this)},dt.negated=dt.neg=function(){var n=new this.constructor(this);return n.s=-n.s,nn(n)},dt.plus=dt.add=function(n){var e,t,r,i,o,s,a,l,c,u,d=this,h=d.constructor;if(n=new h(n),!d.d||!n.d)return d.s&&n.s?d.d||(n=new h(n.d||d.s===n.s?d:NaN)):n=new h(NaN),n;if(d.s!=n.s)return n.s=-n.s,d.minus(n);if(u=n.d,a=h.precision,l=h.rounding,!(c=d.d)[0]||!u[0])return u[0]||(n=new h(d)),yn?nn(n,a,l):n;if(o=Ho(d.e/7),r=Ho(n.e/7),c=c.slice(),i=o-r){for(i<0?(t=c,i=-i,s=u.length):(t=u,r=o,s=c.length),i>(s=(o=Math.ceil(a/7))>s?o+1:s+1)&&(i=s,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for((s=c.length)-(i=u.length)<0&&(i=s,t=u,u=c,c=t),e=0;i;)e=(c[--i]=c[i]+u[i]+e)/Wa|0,c[i]%=Wa;for(e&&(c.unshift(e),++r),s=c.length;0==c[--s];)c.pop();return n.d=c,n.e=Iy(c,r),yn?nn(n,a,l):n},dt.precision=dt.sd=function(n){var e,t=this;if(void 0!==n&&n!==!!n&&1!==n&&0!==n)throw Error(du+n);return t.d?(e=Ek(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e},dt.round=function(){var n=this,e=n.constructor;return nn(new e(n),n.e+1,e.rounding)},dt.sine=dt.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.rounding,r.precision=(n=r.precision)+Math.max(t.e,t.sd())+7,r.rounding=1,t=function xte(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:Bf(n,2,e,e);t=1.4*Math.sqrt(r),e=Bf(n,2,e=e.times(1/Oy(5,t=t>16?16:0|t)),e);for(var i,o=new n(5),s=new n(16),a=new n(20);t--;)i=e.times(e),e=e.times(o.plus(i.times(s.times(i).minus(a))));return e}(r,Pk(r,t)),r.precision=n,r.rounding=e,nn(fc>2?t.neg():t,n,e,!0)):new r(NaN)},dt.squareRoot=dt.sqrt=function(){var n,e,t,r,i,o,s=this,a=s.d,l=s.e,c=s.s,u=s.constructor;if(1!==c||!a||!a[0])return new u(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);for(yn=!1,0==(c=Math.sqrt(+s))||c==1/0?(((e=So(a)).length+l)%2==0&&(e+="0"),c=Math.sqrt(e),l=Ho((l+1)/2)-(l<0||l%2),r=new u(e=c==1/0?"5e"+l:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+l)):r=new u(c.toString()),t=(l=u.precision)+3;;)if(r=(o=r).plus(Xr(s,o,t+2,1)).times(.5),So(o.d).slice(0,t)===(e=So(r.d)).slice(0,t)){if("9999"!=(e=e.slice(t-3,t+1))&&(i||"4999"!=e)){(!+e||!+e.slice(1)&&"5"==e.charAt(0))&&(nn(r,l+1,1),n=!r.times(r).eq(s));break}if(!i&&(nn(o,l+1,0),o.times(o).eq(s))){r=o;break}t+=4,i=1}return yn=!0,nn(r,l,u.rounding,n)},dt.tangent=dt.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.rounding,r.precision=(n=r.precision)+10,r.rounding=1,(t=t.sin()).s=1,t=Xr(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,nn(2==fc||4==fc?t.neg():t,n,e,!0)):new r(NaN)},dt.times=dt.mul=function(n){var e,t,r,i,o,s,a,l,c,u=this,d=u.constructor,h=u.d,f=(n=new d(n)).d;if(n.s*=u.s,!(h&&h[0]&&f&&f[0]))return new d(!n.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:h&&f?0*n.s:n.s/0);for(t=Ho(u.e/7)+Ho(n.e/7),(l=h.length)<(c=f.length)&&(o=h,h=f,f=o,s=l,l=c,c=s),o=[],r=s=l+c;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+f[r]*h[i-r-1]+e,o[i--]=a%Wa|0,e=a/Wa|0;o[i]=(o[i]+e)%Wa|0}for(;!o[--s];)o.pop();return e?++t:o.shift(),n.d=o,n.e=Iy(o,t),yn?nn(n,d.precision,d.rounding):n},dt.toBinary=function(n,e){return fS(this,2,n,e)},dt.toDecimalPlaces=dt.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),void 0===n?t:(Ss(n,0,uu),void 0===e?e=r.rounding:Ss(e,0,8),nn(t,n+t.e+1,e))},dt.toExponential=function(n,e){var t,r=this,i=r.constructor;return void 0===n?t=Tl(r,!0):(Ss(n,0,uu),void 0===e?e=i.rounding:Ss(e,0,8),t=Tl(r=nn(new i(r),n+1,e),!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t},dt.toFixed=function(n,e){var t,r,i=this,o=i.constructor;return void 0===n?t=Tl(i):(Ss(n,0,uu),void 0===e?e=o.rounding:Ss(e,0,8),t=Tl(r=nn(new o(i),n+i.e+1,e),!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t},dt.toFraction=function(n){var e,t,r,i,o,s,a,l,c,u,d,h,f=this,m=f.d,p=f.constructor;if(!m)return new p(f);if(c=t=new p(1),r=l=new p(0),o=(e=new p(r)).e=Ek(m)-f.e-1,e.d[0]=eo(10,(s=o%7)<0?7+s:s),null==n)n=o>0?e:c;else{if(!(a=new p(n)).isInt()||a.lt(c))throw Error(du+a);n=a.gt(e)?o>0?e:c:a}for(yn=!1,a=new p(So(m)),u=p.precision,p.precision=o=7*m.length*2;d=Xr(a,e,0,1,1),1!=(i=t.plus(d.times(r))).cmp(n);)t=r,r=i,c=l.plus(d.times(i=c)),l=i,e=a.minus(d.times(i=e)),a=i;return i=Xr(n.minus(t),r,0,1,1),l=l.plus(i.times(c)),t=t.plus(i.times(r)),l.s=c.s=f.s,h=Xr(c,r,o,1).minus(f).abs().cmp(Xr(l,t,o,1).minus(f).abs())<1?[c,r]:[l,t],p.precision=u,yn=!0,h},dt.toHexadecimal=dt.toHex=function(n,e){return fS(this,16,n,e)},dt.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),null==n){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),void 0===e?e=r.rounding:Ss(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(yn=!1,t=Xr(t,n,0,e,1).times(n),yn=!0,nn(t)):(n.s=t.s,t=n),t},dt.toNumber=function(){return+this},dt.toOctal=function(n,e){return fS(this,8,n,e)},dt.toPower=dt.pow=function(n){var e,t,r,i,o,s,a=this,l=a.constructor,c=+(n=new l(n));if(!(a.d&&n.d&&a.d[0]&&n.d[0]))return new l(eo(+a,c));if((a=new l(a)).eq(1))return a;if(r=l.precision,o=l.rounding,n.eq(1))return nn(a,r,o);if((e=Ho(n.e/7))>=n.d.length-1&&(t=c<0?-c:c)<=9007199254740991)return i=Dk(l,a,t,r),n.s<0?new l(1).div(i):nn(i,r,o);if((s=a.s)<0){if(e<n.d.length-1)return new l(NaN);if(0==(1&n.d[e])&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(e=0!=(t=eo(+a,c))&&isFinite(t)?new l(t+"").e:Ho(c*(Math.log("0."+So(a.d))/Math.LN10+a.e+1)))>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(yn=!1,l.rounding=a.s=1,t=Math.min(12,(e+"").length),(i=dS(n.times(fu(a,r+t)),r)).d&&Hg((i=nn(i,r+5,1)).d,r,o)&&+So((i=nn(dS(n.times(fu(a,(e=r+10)+t)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=nn(i,r+1,0)),i.s=s,yn=!0,l.rounding=o,nn(i,r,o))},dt.toPrecision=function(n,e){var t,r=this,i=r.constructor;return void 0===n?t=Tl(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Ss(n,1,uu),void 0===e?e=i.rounding:Ss(e,0,8),t=Tl(r=nn(new i(r),n,e),n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t},dt.toSignificantDigits=dt.toSD=function(n,e){var r=this.constructor;return void 0===n?(n=r.precision,e=r.rounding):(Ss(n,1,uu),void 0===e?e=r.rounding:Ss(e,0,8)),nn(new r(this),n,e)},dt.toString=function(){var n=this,e=n.constructor,t=Tl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t},dt.truncated=dt.trunc=function(){return nn(new this.constructor(this),this.e+1,1)},dt.valueOf=dt.toJSON=function(){var n=this,e=n.constructor,t=Tl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};var Xr=function(){function n(r,i,o){var s,a=0,l=r.length;for(r=r.slice();l--;)r[l]=(s=r[l]*i+a)%o|0,a=s/o|0;return a&&r.unshift(a),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function t(r,i,o,s){for(var a=0;o--;)r[o]-=a,r[o]=(a=r[o]<i[o]?1:0)*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,a,l){var c,u,d,h,f,m,p,g,_,b,v,y,w,x,E,M,S,C,I,P,F=r.constructor,R=r.s==i.s?1:-1,z=r.d,O=i.d;if(!(z&&z[0]&&O&&O[0]))return new F(r.s&&i.s&&(z?!O||z[0]!=O[0]:O)?z&&0==z[0]||!O?0*R:R/0:NaN);for(l?(f=1,u=r.e-i.e):(l=Wa,u=Ho(r.e/(f=7))-Ho(i.e/f)),I=O.length,S=z.length,b=(_=new F(R)).d=[],d=0;O[d]==(z[d]||0);d++);if(O[d]>(z[d]||0)&&u--,null==o?(x=o=F.precision,s=F.rounding):x=a?o+(r.e-i.e)+1:o,x<0)b.push(1),m=!0;else{if(x=x/f+2|0,d=0,1==I){for(h=0,O=O[0],x++;(d<S||h)&&x--;d++)b[d]=(E=h*l+(z[d]||0))/O|0,h=E%O|0;m=h||d<S}else{for((h=l/(O[0]+1)|0)>1&&(O=n(O,h,l),z=n(z,h,l),I=O.length,S=z.length),M=I,y=(v=z.slice(0,I)).length;y<I;)v[y++]=0;(P=O.slice()).unshift(0),C=O[0],O[1]>=l/2&&++C;do{h=0,(c=e(O,v,I,y))<0?(w=v[0],I!=y&&(w=w*l+(v[1]||0)),(h=w/C|0)>1?(h>=l&&(h=l-1),1==(c=e(p=n(O,h,l),v,g=p.length,y=v.length))&&(h--,t(p,I<g?P:O,g,l))):(0==h&&(c=h=1),p=O.slice()),(g=p.length)<y&&p.unshift(0),t(v,p,y,l),-1==c&&(c=e(O,v,I,y=v.length))<1&&(h++,t(v,I<y?P:O,y,l)),y=v.length):0===c&&(h++,v=[0]),b[d++]=h,c&&v[0]?v[y++]=z[M]||0:(v=[z[M]],y=1)}while((M++<S||void 0!==v[0])&&x--);m=void 0!==v[0]}b[0]||b.shift()}if(1==f)_.e=u,xk=m;else{for(d=1,h=b[0];h>=10;h/=10)d++;_.e=d+u*f-1,nn(_,a?o+_.e+1:o,s,m)}return _}}();function nn(n,e,t,r){var i,o,s,a,l,c,u,d,h,f=n.constructor;e:if(null!=e){if(!(d=n.d))return n;for(i=1,a=d[0];a>=10;a/=10)i++;if((o=e-i)<0)o+=7,l=(u=d[h=0])/eo(10,i-(s=e)-1)%10|0;else if((h=Math.ceil((o+1)/7))>=(a=d.length)){if(!r)break e;for(;a++<=h;)d.push(0);u=l=0,i=1,s=(o%=7)-7+1}else{for(u=a=d[h],i=1;a>=10;a/=10)i++;l=(s=(o%=7)-7+i)<0?0:u/eo(10,i-s-1)%10|0}if(r=r||e<0||void 0!==d[h+1]||(s<0?u:u%eo(10,i-s-1)),c=t<4?(l||r)&&(0==t||t==(n.s<0?3:2)):l>5||5==l&&(4==t||r||6==t&&(o>0?s>0?u/eo(10,i-s):0:d[h-1])%10&1||t==(n.s<0?8:7)),e<1||!d[0])return d.length=0,c?(d[0]=eo(10,(7-(e-=n.e+1)%7)%7),n.e=-e||0):d[0]=n.e=0,n;if(0==o?(d.length=h,a=1,h--):(d.length=h+1,a=eo(10,7-o),d[h]=s>0?(u/eo(10,i-s)%eo(10,s)|0)*a:0),c)for(;;){if(0==h){for(o=1,s=d[0];s>=10;s/=10)o++;for(s=d[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(n.e++,d[0]==Wa&&(d[0]=1));break}if(d[h]+=a,d[h]!=Wa)break;d[h--]=0,a=1}for(o=d.length;0===d[--o];)d.pop()}return yn&&(n.e>f.maxE?(n.d=null,n.e=NaN):n.e<f.minE&&(n.e=0,n.d=[0])),n}function Tl(n,e,t){if(!n.isFinite())return Ik(n);var r,i=n.e,o=So(n.d),s=o.length;return e?(t&&(r=t-s)>0?o=o.charAt(0)+"."+o.slice(1)+hu(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):i<0?(o="0."+hu(-i-1)+o,t&&(r=t-s)>0&&(o+=hu(r))):i>=s?(o+=hu(i+1-s),t&&(r=t-i-1)>0&&(o=o+"."+hu(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(o+="."),o+=hu(r))),o}function Iy(n,e){var t=n[0];for(e*=7;t>=10;t/=10)e++;return e}function Py(n,e,t){if(e>_te)throw yn=!0,t&&(n.precision=t),Error(wk);return nn(new n(Ey),e,1,!0)}function qa(n,e,t){if(e>uS)throw Error(wk);return nn(new n(Dy),e,t,!0)}function Ek(n){var e=n.length-1,t=7*e+1;if(e=n[e]){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function hu(n){for(var e="";n--;)e+="0";return e}function Dk(n,e,t,r){var i,o=new n(1),s=Math.ceil(r/7+4);for(yn=!1;;){if(t%2&&Ok((o=o.times(e)).d,s)&&(i=!0),0===(t=Ho(t/2))){t=o.d.length-1,i&&0===o.d[t]&&++o.d[t];break}Ok((e=e.times(e)).d,s)}return yn=!0,o}function Ak(n){return 1&n.d[n.d.length-1]}function Tk(n,e,t){for(var r,i=new n(e[0]),o=0;++o<e.length;){if(!(r=new n(e[o])).s){i=r;break}i[t](r)&&(i=r)}return i}function dS(n,e){var t,r,i,o,s,a,l,c=0,u=0,d=0,h=n.constructor,f=h.rounding,m=h.precision;if(!n.d||!n.d[0]||n.e>17)return new h(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(null==e?(yn=!1,l=m):l=e,a=new h(.03125);n.e>-2;)n=n.times(a),d+=5;for(l+=r=Math.log(eo(2,d))/Math.LN10*2+5|0,t=o=s=new h(1),h.precision=l;;){if(o=nn(o.times(n),l,1),t=t.times(++u),So((a=s.plus(Xr(o,t,l,1))).d).slice(0,l)===So(s.d).slice(0,l)){for(i=d;i--;)s=nn(s.times(s),l,1);if(null!=e)return h.precision=m,s;if(!(c<3&&Hg(s.d,l-r,f,c)))return nn(s,h.precision=m,f,yn=!0);h.precision=l+=10,t=o=a=new h(1),u=0,c++}s=a}}function fu(n,e){var t,r,i,o,s,a,l,c,u,d,h,f=1,p=n,g=p.d,_=p.constructor,b=_.rounding,v=_.precision;if(p.s<0||!g||!g[0]||!p.e&&1==g[0]&&1==g.length)return new _(g&&!g[0]?-1/0:1!=p.s?NaN:g?0:p);if(null==e?(yn=!1,u=v):u=e,_.precision=u+=10,r=(t=So(g)).charAt(0),!(Math.abs(o=p.e)<15e14))return c=Py(_,u+2,v).times(o+""),p=fu(new _(r+"."+t.slice(1)),u-10).plus(c),_.precision=v,null==e?nn(p,v,b,yn=!0):p;for(;r<7&&1!=r||1==r&&t.charAt(1)>3;)r=(t=So((p=p.times(n)).d)).charAt(0),f++;for(o=p.e,r>1?(p=new _("0."+t),o++):p=new _(r+"."+t.slice(1)),d=p,l=s=p=Xr(p.minus(1),p.plus(1),u,1),h=nn(p.times(p),u,1),i=3;;){if(s=nn(s.times(h),u,1),So((c=l.plus(Xr(s,new _(i),u,1))).d).slice(0,u)===So(l.d).slice(0,u)){if(l=l.times(2),0!==o&&(l=l.plus(Py(_,u+2,v).times(o+""))),l=Xr(l,new _(f),u,1),null!=e)return _.precision=v,l;if(!Hg(l.d,u-10,b,a))return nn(l,_.precision=v,b,yn=!0);_.precision=u+=10,c=s=p=Xr(d.minus(1),d.plus(1),u,1),h=nn(p.times(p),u,1),i=a=1}l=c,i+=2}}function Ik(n){return String(n.s*n.s/0)}function hS(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%7,t<0&&(r+=7),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=7;r<i;)n.d.push(+e.slice(r,r+=7));r=7-(e=e.slice(r)).length}else r-=i;for(;r--;)e+="0";n.d.push(+e),yn&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function Bf(n,e,t,r,i){var o,s,a,l,u=n.precision,d=Math.ceil(u/7);for(yn=!1,l=t.times(t),a=new n(r);;){if(s=Xr(a.times(l),new n(e++*e++),u,1),a=i?r.plus(s):r.minus(s),r=Xr(s.times(l),new n(e++*e++),u,1),void 0!==(s=a.plus(r)).d[d]){for(o=d;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=r,r=s,s=o}return yn=!0,s.d.length=d+1,s}function Oy(n,e){for(var t=n;--e;)t*=n;return t}function Pk(n,e){var t,r=e.s<0,i=qa(n,n.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return fc=r?4:1,e;if((t=e.divToInt(i)).isZero())fc=r?3:2;else{if((e=e.minus(t.times(i))).lte(o))return fc=Ak(t)?r?2:3:r?4:1,e;fc=Ak(t)?r?1:4:r?3:2}return e.minus(i).abs()}function fS(n,e,t,r){var i,o,s,a,l,c,u,d,h,f=n.constructor,m=void 0!==t;if(m?(Ss(t,1,uu),void 0===r?r=f.rounding:Ss(r,0,8)):(t=f.precision,r=f.rounding),n.isFinite()){for(m?(i=2,16==e?t=4*t-3:8==e&&(t=3*t-2)):i=e,(s=(u=Tl(n)).indexOf("."))>=0&&(u=u.replace(".",""),(h=new f(1)).e=u.length-s,h.d=Ty(Tl(h),10,i),h.e=h.d.length),o=l=(d=Ty(u,10,i)).length;0==d[--l];)d.pop();if(d[0]){if(s<0?o--:((n=new f(n)).d=d,n.e=o,d=(n=Xr(n,h,t,r,0,i)).d,o=n.e,c=xk),s=d[t],a=i/2,c=c||void 0!==d[t+1],c=r<4?(void 0!==s||c)&&(0===r||r===(n.s<0?3:2)):s>a||s===a&&(4===r||c||6===r&&1&d[t-1]||r===(n.s<0?8:7)),d.length=t,c)for(;++d[--t]>i-1;)d[t]=0,t||(++o,d.unshift(1));for(l=d.length;!d[l-1];--l);for(s=0,u="";s<l;s++)u+=lS.charAt(d[s]);if(m){if(l>1)if(16==e||8==e){for(s=16==e?4:3,--l;l%s;l++)u+="0";for(l=(d=Ty(u,i,e)).length;!d[l-1];--l);for(s=1,u="1.";s<l;s++)u+=lS.charAt(d[s])}else u=u.charAt(0)+"."+u.slice(1);u=u+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)u="0"+u;u="0."+u}else if(++o>l)for(o-=l;o--;)u+="0";else o<l&&(u=u.slice(0,o)+"."+u.slice(o))}else u=m?"0p+0":"0";u=(16==e?"0x":2==e?"0b":8==e?"0o":"")+u}else u=Ik(n);return n.s<0?"-"+u:u}function Ok(n,e){if(n.length>e)return n.length=e,!0}function wte(n){return new this(n).abs()}function Mte(n){return new this(n).acos()}function Cte(n){return new this(n).acosh()}function Ste(n,e){return new this(n).plus(e)}function Ete(n){return new this(n).asin()}function Dte(n){return new this(n).asinh()}function Ate(n){return new this(n).atan()}function Tte(n){return new this(n).atanh()}function Ite(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,o=r+4;return n.s&&e.s?n.d||e.d?!e.d||n.isZero()?(t=e.s<0?qa(this,r,i):new this(0)).s=n.s:!n.d||e.isZero()?(t=qa(this,o,1).times(.5)).s=n.s:e.s<0?(this.precision=o,this.rounding=1,t=this.atan(Xr(n,e,o,1)),e=qa(this,o,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(Xr(n,e,o,1)):(t=qa(this,o,1).times(e.s>0?.25:.75)).s=n.s:t=new this(NaN),t}function Pte(n){return new this(n).cbrt()}function Ote(n){return nn(n=new this(n),n.e+1,2)}function Nte(n,e,t){return new this(n).clamp(e,t)}function Rte(n){if(!n||"object"!=typeof n)throw Error(Ay+"Object expected");var e,t,r,i=!0===n.defaults,o=["precision",1,uu,"rounding",0,8,"toExpNeg",-Lf,0,"toExpPos",0,Lf,"maxE",0,Lf,"minE",-Lf,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],i&&(this[t]=cS[t]),void 0!==(r=n[t])){if(!(Ho(r)===r&&r>=o[e+1]&&r<=o[e+2]))throw Error(du+t+": "+r);this[t]=r}if(t="crypto",i&&(this[t]=cS[t]),void 0!==(r=n[t])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(du+t+": "+r);if(r){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw Error(Mk);this[t]=!0}else this[t]=!1}return this}function Fte(n){return new this(n).cos()}function kte(n){return new this(n).cosh()}function Lte(n,e){return new this(n).div(e)}function Bte(n){return new this(n).exp()}function Vte(n){return nn(n=new this(n),n.e+1,3)}function zte(){var n,e,t=new this(0);for(yn=!1,n=0;n<arguments.length;)if((e=new this(arguments[n++])).d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return yn=!0,new this(1/0);t=e}return yn=!0,t.sqrt()}function Rk(n){return n instanceof Gg||n&&n.toStringTag===Ck||!1}function Ute(n){return new this(n).ln()}function Hte(n,e){return new this(n).log(e)}function Gte(n){return new this(n).log(2)}function jte(n){return new this(n).log(10)}function Wte(){return Tk(this,arguments,"lt")}function qte(){return Tk(this,arguments,"gt")}function $te(n,e){return new this(n).mod(e)}function Xte(n,e){return new this(n).mul(e)}function Yte(n,e){return new this(n).pow(e)}function Zte(n){var e,t,r,i,o=0,s=new this(1),a=[];if(void 0===n?n=this.precision:Ss(n,1,uu),r=Math.ceil(n/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(Mk);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(i%1e7),o+=4);o=r/4}else for(;o<r;)a[o++]=1e7*Math.random()|0;for(n%=7,(r=a[--o])&&n&&(i=eo(10,7-n),a[o]=(r/i|0)*i);0===a[o];o--)a.pop();if(o<0)t=0,a=[0];else{for(t=-1;0===a[0];t-=7)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<7&&(t-=7-r)}return s.e=t,s.d=a,s}function Kte(n){return nn(n=new this(n),n.e+1,this.rounding)}function Qte(n){return(n=new this(n)).d?n.d[0]?n.s:0*n.s:n.s||NaN}function Jte(n){return new this(n).sin()}function ene(n){return new this(n).sinh()}function tne(n){return new this(n).sqrt()}function nne(n,e){return new this(n).sub(e)}function rne(){var n=0,e=arguments,t=new this(e[n]);for(yn=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return yn=!0,nn(t,this.precision,this.rounding)}function ine(n){return new this(n).tan()}function one(n){return new this(n).tanh()}function sne(n){return nn(n=new this(n),n.e+1,1)}dt[Symbol.for("nodejs.util.inspect.custom")]=dt.toString,dt[Symbol.toStringTag]="Decimal";var Gg=dt.constructor=function Nk(n){var e,t,r;function i(o){var s,a,l,c=this;if(!(c instanceof i))return new i(o);if(c.constructor=i,Rk(o))return c.s=o.s,void(yn?!o.d||o.e>i.maxE?(c.e=NaN,c.d=null):o.e<i.minE?(c.e=0,c.d=[0]):(c.e=o.e,c.d=o.d.slice()):(c.e=o.e,c.d=o.d?o.d.slice():o.d));if("number"==(l=typeof o)){if(0===o)return c.s=1/o<0?-1:1,c.e=0,void(c.d=[0]);if(o<0?(o=-o,c.s=-1):c.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;return void(yn?s>i.maxE?(c.e=NaN,c.d=null):s<i.minE?(c.e=0,c.d=[0]):(c.e=s,c.d=[o]):(c.e=s,c.d=[o]))}return 0*o!=0?(o||(c.s=NaN),c.e=NaN,void(c.d=null)):hS(c,o.toString())}if("string"!==l)throw Error(du+o);return 45===(a=o.charCodeAt(0))?(o=o.slice(1),c.s=-1):(43===a&&(o=o.slice(1)),c.s=1),Sk.test(o)?hS(c,o):function bte(n,e){var t,r,i,o,s,a,l,c,u;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Sk.test(e))return hS(n,e)}else if("Infinity"===e||"NaN"===e)return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(mte.test(e))t=16,e=e.toLowerCase();else if(pte.test(e))t=2;else{if(!gte.test(e))throw Error(du+e);t=8}for((o=e.search(/p/i))>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),r=n.constructor,(s=o>=0)&&(o=(a=(e=e.replace(".","")).length)-o,i=Dk(r,new r(t),o,2*o)),o=u=(c=Ty(e,t,Wa)).length-1;0===c[o];--o)c.pop();return o<0?new r(0*n.s):(n.e=Iy(c,u),n.d=c,yn=!1,s&&(n=Xr(n,i,4*a)),l&&(n=n.times(Math.abs(l)<54?eo(2,l):Gg.pow(2,l))),yn=!0,n)}(c,o)}if(i.prototype=dt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Rte,i.clone=Nk,i.isDecimal=Rk,i.abs=wte,i.acos=Mte,i.acosh=Cte,i.add=Ste,i.asin=Ete,i.asinh=Dte,i.atan=Ate,i.atanh=Tte,i.atan2=Ite,i.cbrt=Pte,i.ceil=Ote,i.clamp=Nte,i.cos=Fte,i.cosh=kte,i.div=Lte,i.exp=Bte,i.floor=Vte,i.hypot=zte,i.ln=Ute,i.log=Hte,i.log10=jte,i.log2=Gte,i.max=Wte,i.min=qte,i.mod=$te,i.mul=Xte,i.pow=Yte,i.random=Zte,i.round=Kte,i.sign=Qte,i.sin=Jte,i.sinh=ene,i.sqrt=tne,i.sub=nne,i.sum=rne,i.tan=ine,i.tanh=one,i.trunc=sne,void 0===n&&(n={}),n&&!0!==n.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}(cS);Ey=new Gg(Ey),Dy=new Gg(Dy);const Ny=Gg;function Ir(n){return"number"==typeof n}function mr(n){return!(!n||"object"!=typeof n||"function"!=typeof n.constructor)&&(!0===n.isBigNumber&&"object"==typeof n.constructor.prototype&&!0===n.constructor.prototype.isBigNumber||"function"==typeof n.constructor.isDecimal&&!0===n.constructor.isDecimal(n))}function pu(n){return n&&"object"==typeof n&&!0===Object.getPrototypeOf(n).isComplex||!1}function Ry(n){return n&&"object"==typeof n&&!0===Object.getPrototypeOf(n).isFraction||!1}function mu(n){return n&&!0===n.constructor.prototype.isUnit||!1}function Es(n){return"string"==typeof n}var Ur=Array.isArray;function xn(n){return n&&!0===n.constructor.prototype.isMatrix||!1}function Td(n){return Array.isArray(n)||xn(n)}function Fy(n){return n&&n.isDenseMatrix&&!0===n.constructor.prototype.isMatrix||!1}function Id(n){return n&&n.isSparseMatrix&&!0===n.constructor.prototype.isMatrix||!1}function Fk(n){return n&&!0===n.constructor.prototype.isRange||!1}function ky(n){return n&&!0===n.constructor.prototype.isIndex||!1}function ane(n){return"boolean"==typeof n}function lne(n){return n&&!0===n.constructor.prototype.isResultSet||!1}function cne(n){return n&&!0===n.constructor.prototype.isHelp||!1}function une(n){return"function"==typeof n}function dne(n){return n instanceof Date}function hne(n){return n instanceof RegExp}function fne(n){return!(!n||"object"!=typeof n||n.constructor!==Object||pu(n)||Ry(n))}function pne(n){return null===n}function mne(n){return void 0===n}function gne(n){return n&&!0===n.isAccessorNode&&!0===n.constructor.prototype.isNode||!1}function vne(n){return n&&!0===n.isArrayNode&&!0===n.constructor.prototype.isNode||!1}function _ne(n){return n&&!0===n.isAssignmentNode&&!0===n.constructor.prototype.isNode||!1}function yne(n){return n&&!0===n.isBlockNode&&!0===n.constructor.prototype.isNode||!1}function bne(n){return n&&!0===n.isConditionalNode&&!0===n.constructor.prototype.isNode||!1}function pS(n){return n&&!0===n.isConstantNode&&!0===n.constructor.prototype.isNode||!1}function xne(n){return n&&!0===n.isFunctionAssignmentNode&&!0===n.constructor.prototype.isNode||!1}function wne(n){return n&&!0===n.isFunctionNode&&!0===n.constructor.prototype.isNode||!1}function Mne(n){return n&&!0===n.isIndexNode&&!0===n.constructor.prototype.isNode||!1}function Cne(n){return n&&!0===n.isNode&&!0===n.constructor.prototype.isNode||!1}function Sne(n){return n&&!0===n.isObjectNode&&!0===n.constructor.prototype.isNode||!1}function kk(n){return n&&!0===n.isOperatorNode&&!0===n.constructor.prototype.isNode||!1}function Ene(n){return n&&!0===n.isParenthesisNode&&!0===n.constructor.prototype.isNode||!1}function Dne(n){return n&&!0===n.isRangeNode&&!0===n.constructor.prototype.isNode||!1}function Ane(n){return n&&!0===n.isRelationalNode&&!0===n.constructor.prototype.isNode||!1}function Tne(n){return n&&!0===n.isSymbolNode&&!0===n.constructor.prototype.isNode||!1}function Ine(n){return n&&!0===n.constructor.prototype.isChain||!1}function zi(n){var e=typeof n;return"object"===e?null===n?"null":mr(n)?"BigNumber":n.constructor&&n.constructor.name?n.constructor.name:"Object":e}function mn(n){var e=typeof n;if("number"===e||"string"===e||"boolean"===e||null==n)return n;if("function"==typeof n.clone)return n.clone();if(Array.isArray(n))return n.map(function(t){return mn(t)});if(n instanceof Date)return new Date(n.valueOf());if(mr(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return function Pne(n,e){var t={};for(var r in n)Pr(n,r)&&(t[r]=e(n[r]));return t}(n,mn)}function Ly(n,e){var t,r,i;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(r=0,i=n.length;r<i;r++)if(!Ly(n[r],e[r]))return!1;return!0}if("function"==typeof n)return n===e;if(n instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in n)if(!(t in e)||!Ly(n[t],e[t]))return!1;for(t in e)if(!(t in n))return!1;return!0}return n===e}function Pr(n,e){return n&&Object.hasOwnProperty.call(n,e)}function ne(n,e,t,r){function i(o){var s=function Rne(n,e){for(var t={},r=0;r<e.length;r++){var i=e[r],o=n[i];void 0!==o&&(t[i]=o)}return t}(o,e.map(Bne));return function kne(n,e,t){var r=e.filter(o=>!function Lne(n){return n&&"?"===n[0]}(o)).every(o=>void 0!==t[o]);if(!r){var i=e.filter(o=>void 0===t[o]);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}(n,e,o),t(s)}return i.isFactory=!0,i.fn=n,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function Bne(n){return n&&"?"===n[0]?n.slice(1):n}var Une=ne("BigNumber",["?on","config"],n=>{var{on:e,config:t}=n,r=Ny.clone({precision:t.precision,modulo:Ny.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),Eo=St(6);function Xt(n){return"boolean"==typeof n||!!isFinite(n)&&n===Math.round(n)}Math,Math,Math,Math,Math,Math;function gS(n,e,t){var i={2:"0b",8:"0o",16:"0x"}[e],o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Xt(t))throw new Error("size must be an integer");if(n>2**(t-1)-1||n<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Xt(n))throw new Error("Value must be an integer");n<0&&(n+=2**t),o="i".concat(t)}var s="";return n<0&&(n=-n,s="-"),"".concat(s).concat(i).concat(n.toString(e)).concat(o)}function Pd(n,e){if("function"==typeof e)return e(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var r,i,t="auto";if(e&&(e.notation&&(t=e.notation),Ir(e)?r=e:Ir(e.precision)&&(r=e.precision),e.wordSize&&"number"!=typeof(i=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return function Gk(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=By(n),r="number"==typeof e?Vy(t,t.exponent+1+e):t,i=r.coefficients,o=r.exponent+1,s=o+(e||0);return i.length<s&&(i=i.concat(Vf(s-i.length))),o<0&&(i=Vf(1-o).concat(i),o=1),o<i.length&&i.splice(o,0,0===o?"0.":"."),r.sign+i.join("")}(n,r);case"exponential":return jk(n,r);case"engineering":return function qne(n,e){if(isNaN(n)||!isFinite(n))return String(n);var r=Vy(By(n),e),i=r.exponent,o=r.coefficients,s=i%3==0?i:i<0?i-3-i%3:i-i%3;if(Ir(e))for(;e>o.length||i-s+1>o.length;)o.push(0);else for(var a=Math.abs(i-s)-(o.length-1),l=0;l<a;l++)o.push(0);for(var c=Math.abs(i-s),u=1;c>0;)u++,c--;var d=o.slice(u).join(""),h=Ir(e)&&d.length||d.match(/[1-9]/)?"."+d:"",f=o.slice(0,u).join("")+h+"e"+(i>=0?"+":"")+s.toString();return r.sign+f}(n,r);case"bin":return gS(n,2,i);case"oct":return gS(n,8,i);case"hex":return gS(n,16,i);case"auto":return function $ne(n,e,t){if(isNaN(n)||!isFinite(n))return String(n);var r=t&&void 0!==t.lowerExp?t.lowerExp:-3,i=t&&void 0!==t.upperExp?t.upperExp:5,o=By(n),s=e?Vy(o,e):o;if(s.exponent<r||s.exponent>=i)return jk(n,e);var a=s.coefficients,l=s.exponent;a.length<e&&(a=a.concat(Vf(e-a.length))),a=a.concat(Vf(l-a.length+1+(a.length<e?e-a.length:0)));var c=l>0?l:0;return c<(a=Vf(-l).concat(a)).length-1&&a.splice(c+1,0,"."),s.sign+a.join("")}(n,r,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],s=arguments[4];return"."!==o?o+s:s});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function By(n){var e=String(n).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+n);var t=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return 0===s.length&&(s.push(0),i++),{sign:t,coefficients:s,exponent:i}}function jk(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=By(n),r=e?Vy(t,e):t,i=r.coefficients,o=r.exponent;i.length<e&&(i=i.concat(Vf(e-i.length)));var s=i.shift();return r.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function Vy(n,e){for(var t={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},r=t.coefficients;e<=0;)r.unshift(0),t.exponent++,e++;if(r.length>e&&r.splice(e,r.length-e)[0]>=5){var o=e-1;for(r[o]++;10===r[o];)r.pop(),0===o&&(r.unshift(0),t.exponent++,o++),r[--o]++}return t}function Vf(n){for(var e=[],t=0;t<n;t++)e.push(0);return e}var Yne=Number.EPSILON||2220446049250313e-31;function Hs(n,e,t){if(null==t)return n===e;if(n===e)return!0;if(isNaN(n)||isNaN(e))return!1;if(isFinite(n)&&isFinite(e)){var r=Math.abs(n-e);return r<Yne||r<=Math.max(Math.abs(n),Math.abs(e))*t}return!1}Math,Math,Math,Math,Math;Math;var rre=ne("Complex",[],()=>(Object.defineProperty(Eo,"name",{value:"Complex"}),Eo.prototype.constructor=Eo,Eo.prototype.type="Complex",Eo.prototype.isComplex=!0,Eo.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Eo.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Eo.prototype.format=function(n){var t=this.im,r=this.re,i=Pd(this.re,n),o=Pd(this.im,n),s=Ir(n)?n:n?n.precision:null;if(null!==s){var a=Math.pow(10,-s);Math.abs(r/t)<a&&(r=0),Math.abs(t/r)<a&&(t=0)}return 0===t?i:0===r?1===t?"i":-1===t?"-i":o+"i":t<0?-1===t?i+" - i":i+" - "+o.substring(1)+"i":1===t?i+" + i":i+" + "+o+"i"},Eo.fromPolar=function(n){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return Eo(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var t=arguments[0],r=arguments[1];if(Ir(t)){if(mu(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Ir(r))return new Eo({r:t,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Eo.prototype.valueOf=Eo.prototype.toString,Eo.fromJSON=function(n){return new Eo(n)},Eo.compare=function(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0},Eo),{isClass:!0});function ore(n){var e=0,t=1,r=Object.create(null),i=Object.create(null),o=0,s=function(l){var c=i[l];if(c&&(delete r[c],delete i[l],--e,t===c)){if(!e)return o=0,void(t=1);for(;!hasOwnProperty.call(r,++t););}};return n=Math.abs(n),{hit:function(l){var c=i[l],u=++o;if(r[u]=l,i[l]=u,!c)return++e<=n?void 0:(s(l=r[t]),l);if(delete r[c],t===c)for(;!hasOwnProperty.call(r,++t););},delete:s,clear:function(){e=o=0,t=1,r=Object.create(null),i=Object.create(null)}}}function jg(n){var{hasher:e,limit:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){"object"!=typeof r.cache&&(r.cache={values:new Map,lru:ore(t||Number.POSITIVE_INFINITY)});for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e(i);if(r.cache.values.has(s))return r.cache.lru.hit(s),r.cache.values.get(s);var a=n.apply(n,i);return r.cache.values.set(s,a),r.cache.values.delete(r.cache.lru.hit(s)),a}}function Wg(n){return Object.keys(n.signatures||{}).reduce(function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}jg(function(n){return new n(1).exp()},{hasher:zy}),jg(function(n){return new n(1).plus(new n(5).sqrt()).div(2)},{hasher:zy});var vS=jg(function(n){return n.acos(-1)},{hasher:zy});function zy(n){return n[0].precision}function Uy(n,e){return ne(n,["config","BigNumber"],r=>{var{config:i,BigNumber:o}=r;return"BigNumber"===i.number?new o(e):e})}jg(function(n){return vS(n).times(2)},{hasher:zy}),Math,Math,Math,Uy("fineStructure",.0072973525693),Uy("weakMixingAngle",.2229),Uy("efimovFactor",22.7),Uy("sackurTetrode",-1.16487052358);var pc=St(613),Aie=ne("Fraction",[],()=>(Object.defineProperty(pc,"name",{value:"Fraction"}),pc.prototype.constructor=pc,pc.prototype.type="Fraction",pc.prototype.isFraction=!0,pc.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},pc.fromJSON=function(n){return new pc(n)},pc),{isClass:!0}),Pie=ne("Matrix",[],()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(e,t,r){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(e,t,r){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function _S(n,e,t){var i=new(0,n.constructor)(2),o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Xt(t))throw new Error("size must be an integer");if(n.greaterThan(i.pow(t-1).sub(1))||n.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(i.pow(t))),o="i".concat(t)}switch(e){case 2:return"".concat(n.toBinary()).concat(o);case 8:return"".concat(n.toOctal()).concat(o);case 16:return"".concat(n.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function $k(n,e){return void 0!==e?n.toExponential(e-1):n.toExponential()}function Qn(n,e){var t=function Hie(n,e){return"number"==typeof n?Pd(n,e):mr(n)?function Bie(n,e){if("function"==typeof e)return e(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var r,i,t="auto";if(void 0!==e&&(e.notation&&(t=e.notation),"number"==typeof e?r=e:e.precision&&(r=e.precision),e.wordSize&&"number"!=typeof(i=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return function zie(n,e){return n.toFixed(e)}(n,r);case"exponential":return $k(n,r);case"engineering":return function Vie(n,e){var t=n.e,r=t%3==0?t:t<0?t-3-t%3:t-t%3,i=n.mul(Math.pow(10,-r)),o=i.toPrecision(e);return-1!==o.indexOf("e")&&(o=i.toString()),o+"e"+(t>=0?"+":"")+r.toString()}(n,r);case"bin":return _S(n,2,i);case"oct":return _S(n,8,i);case"hex":return _S(n,16,i);case"auto":var o=e&&void 0!==e.lowerExp?e.lowerExp:-3,s=e&&void 0!==e.upperExp?e.upperExp:5;if(n.isZero())return"0";var l=n.toSignificantDigits(r),c=l.e;return(c>=o&&c<s?l.toFixed():$k(n,r)).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],d=arguments[4];return"."!==u?u+d:d});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(n,e):function Gie(n){return n&&"object"==typeof n&&"number"==typeof n.s&&"number"==typeof n.n&&"number"==typeof n.d||!1}(n)?e&&"decimal"===e.fraction?n.toString():n.s*n.n+"/"+n.d:Array.isArray(n)?Xk(n,e):Es(n)?'"'+n+'"':"function"==typeof n?n.syntax?String(n.syntax):"function":n&&"object"==typeof n?"function"==typeof n.format?n.format(e):n&&n.toString(e)!=={}.toString()?n.toString(e):"{"+Object.keys(n).map(r=>'"'+r+'": '+Qn(n[r],e)).join(", ")+"}":String(n)}(n,e);return e&&"object"==typeof e&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function Xk(n,e){if(Array.isArray(n)){for(var t="[",r=n.length,i=0;i<r;i++)0!==i&&(t+=", "),t+=Xk(n[i],e);return t+"]"}return Qn(n,e)}function On(n,e,t){if(!(this instanceof On))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function Il(n,e,t){if(!(this instanceof Il))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function Ln(n){for(var e=[];Array.isArray(n);)e.push(n.length),n=n[0];return e}function Yk(n,e,t){var r,i=n.length;if(i!==e[t])throw new On(i,e[t]);if(t<e.length-1){var o=t+1;for(r=0;r<i;r++){if(!Array.isArray(n[r]))throw new On(e.length-1,e.length,"<");Yk(n[r],e,o)}}else for(r=0;r<i;r++)if(Array.isArray(n[r]))throw new On(e.length+1,e.length,">")}function Zk(n,e){if(0===e.length){if(Array.isArray(n))throw new On(n.length,0)}else Yk(n,e,0)}function Lr(n,e){if(!Ir(n)||!Xt(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||"number"==typeof e&&n>=e)throw new Il(n,e)}function zf(n,e,t){if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach(function(i){if(!Ir(i)||!Xt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qn(e)+")")}),bS(n,e,0,void 0!==t?t:0),n}function bS(n,e,t,r){var i,o,a=e[t],l=Math.min(n.length,a);if(n.length=a,t<e.length-1){var c=t+1;for(i=0;i<l;i++)o=n[i],Array.isArray(o)||(n[i]=o=[o]),bS(o,e,c,r);for(i=l;i<a;i++)n[i]=o=[],bS(o,e,c,r)}else{for(i=0;i<l;i++)for(;Array.isArray(n[i]);)n[i]=n[i][0];for(i=l;i<a;i++)n[i]=r}}function Kk(n,e){var t=function cr(n){if(!Array.isArray(n))return n;var e=[];return n.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e}(n),r=t.length;if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new On(0,r,"!=");var i=Qk(e=xS(e,r));if(r!==i)throw new On(i,r,"!=");try{return function jie(n,e){for(var r,t=n,i=e.length-1;i>0;i--){var o=e[i];r=[];for(var s=t.length/o,a=0;a<s;a++)r.push(t.slice(a*o,(a+1)*o));t=r}return t}(t,e)}catch(o){throw o instanceof On?new On(i,r,"!="):o}}function xS(n,e){var t=Qk(n),r=n.slice(),o=n.indexOf(-1);if(n.indexOf(-1,o+1)>=0)throw new Error("More than one wildcard in sizes");if(o>=0){if(e%t!=0)throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);r[o]=-e/t}return r}function Qk(n){return n.reduce((e,t)=>e*t,1)}function e3(n,e,t,r){var i=r||Ln(n);if(t)for(var o=0;o<t;o++)n=[n],i.unshift(1);for(n=t3(n,e,0);i.length<e;)i.push(1);return n}function t3(n,e,t){var r,i;if(Array.isArray(n)){var o=t+1;for(r=0,i=n.length;r<i;r++)n[r]=t3(n[r],e,o)}else for(var s=t;s<e;s++)n=[n];return n}function qg(n,e){for(var t,r=0,i=0;i<n.length;i++){var o=n[i],s=Array.isArray(o);if(0===i&&s&&(r=o.length),s&&o.length!==r)return;var a=s?qg(o,e):e(o);if(void 0===t)t=a;else if(t!==a)return"mixed"}return t}(On.prototype=new RangeError).constructor=RangeError,On.prototype.name="DimensionError",On.prototype.isDimensionError=!0,(Il.prototype=new RangeError).constructor=RangeError,Il.prototype.name="IndexError",Il.prototype.isIndexError=!0;var Yie=ne("DenseMatrix",["Matrix"],n=>{var{Matrix:e}=n;function t(u,d){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!Es(d))throw new Error("Invalid datatype: "+d);if(xn(u))"DenseMatrix"===u.type?(this._data=mn(u._data),this._size=mn(u._size),this._datatype=d||u._datatype):(this._data=u.toArray(),this._size=u.size(),this._datatype=d||u._datatype);else if(u&&Ur(u.data)&&Ur(u.size))this._data=u.data,this._size=u.size,Zk(this._data,this._size),this._datatype=d||u.datatype;else if(Ur(u))this._data=c(u),this._size=Ln(this._data),Zk(this._data,this._size),this._datatype=d;else{if(u)throw new TypeError("Unsupported type of data ("+zi(u)+")");this._data=[],this._size=[0],this._datatype=d}}function r(u,d){if(!ky(d))throw new TypeError("Invalid index");if(d.isScalar())return u.get(d.min());var f=d.size();if(f.length!==u._size.length)throw new On(f.length,u._size.length);for(var m=d.min(),p=d.max(),g=0,_=u._size.length;g<_;g++)Lr(m[g],u._size[g]),Lr(p[g],u._size[g]);return new t(i(u._data,d,f.length,0),u._datatype)}function i(u,d,h,f){var m=f===h-1,p=d.dimension(f);return m?p.map(function(g){return Lr(g,u.length),u[g]}).valueOf():p.map(function(g){return Lr(g,u.length),i(u[g],d,h,f+1)}).valueOf()}function o(u,d,h,f){if(!d||!0!==d.isIndex)throw new TypeError("Invalid index");var g,m=d.size(),p=d.isScalar();if(xn(h)?(g=h.size(),h=h.valueOf()):g=Ln(h),p){if(0!==g.length)throw new TypeError("Scalar expected");u.set(d.min(),h,f)}else{if(m.length<u._size.length)throw new On(m.length,u._size.length,"<");if(g.length<m.length){for(var _=0,b=0;1===m[_]&&1===g[_];)_++;for(;1===m[_];)b++,_++;h=e3(h,m.length,b,g)}if(!Ly(m,g))throw new On(m,g,">");l(u,d.max().map(function(x){return x+1}),f),s(u._data,d,h,m.length,0)}return u}function s(u,d,h,f,m){var p=m===f-1;d.dimension(m).forEach(p?function(_,b){Lr(_),u[_]=h[b[0]]}:function(_,b){Lr(_),s(u[_],d,h[b[0]],f,m+1)})}function a(u,d,h){if(0===d.length){for(var f=u._data;Ur(f);)f=f[0];return f}return u._size=d.slice(0),u._data=zf(u._data,u._size,h),u}function l(u,d,h){for(var f=u._size.slice(0),m=!1;f.length<d.length;)f.push(0),m=!0;for(var p=0,g=d.length;p<g;p++)d[p]>f[p]&&(f[p]=d[p],m=!0);m&&a(u,f,h)}function c(u){for(var d=0,h=u.length;d<h;d++){var f=u[d];Ur(f)?u[d]=c(f):f&&!0===f.isMatrix&&(u[d]=c(f.valueOf()))}return u}return(t.prototype=new e).createDenseMatrix=function(u,d){return new t(u,d)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return qg(this._data,zi)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(u,d){return new t(u,d)},t.prototype.subset=function(u,d,h){switch(arguments.length){case 1:return r(this,u);case 2:case 3:return o(this,u,d,h);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(u){if(!Ur(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new On(u.length,this._size.length);for(var d=0;d<u.length;d++)Lr(u[d],this._size[d]);for(var h=this._data,f=0,m=u.length;f<m;f++){var p=u[f];Lr(p,h.length),h=h[p]}return h},t.prototype.set=function(u,d,h){if(!Ur(u))throw new TypeError("Array expected");if(u.length<this._size.length)throw new On(u.length,this._size.length,"<");var f,m,p;l(this,u.map(function(b){return b+1}),h);var _=this._data;for(f=0,m=u.length-1;f<m;f++)Lr(p=u[f],_.length),_=_[p];return Lr(p=u[u.length-1],_.length),_[p]=d,this},t.prototype.resize=function(u,d,h){if(!Td(u))throw new TypeError("Array or Matrix expected");var f=u.valueOf().map(p=>Array.isArray(p)&&1===p.length?p[0]:p);return a(h?this.clone():this,f,d)},t.prototype.reshape=function(u,d){var h=d?this.clone():this;h._data=Kk(h._data,u);var f=h._size.reduce((m,p)=>m*p);return h._size=xS(u,f),h},t.prototype.clone=function(){return new t({data:mn(this._data),size:mn(this._size),datatype:this._datatype})},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(u){var d=this,h=Wg(u),m=function g(_,b){return Ur(_)?_.map(function(v,y){return g(v,b.concat(y))}):1===h?u(_):2===h?u(_,b):u(_,b,d)}(this._data,[]);return new t(m,void 0!==this._datatype?qg(m,zi):void 0)},t.prototype.forEach=function(u){var d=this;!function f(m,p){Ur(m)?m.forEach(function(g,_){f(g,p.concat(_))}):u(m,p,d)}(this._data,[])},t.prototype[Symbol.iterator]=function*(){yield*function*d(h,f){if(Ur(h))for(var m=0;m<h.length;m++)yield*d(h[m],f.concat(m));else yield{value:h,index:f}}(this._data,[])},t.prototype.rows=function(){var u=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var f of h)u.push(new t([f],this._datatype));return u},t.prototype.columns=function(){var u=this,d=[],h=this.size();if(2!==h.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var f=this._data,m=function(_){var b=f.map(v=>[v[_]]);d.push(new t(b,u._datatype))},p=0;p<h[1];p++)m(p);return d},t.prototype.toArray=function(){return mn(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(u){return Qn(this._data,u)},t.prototype.toString=function(){return Qn(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(u){if(u){if(mr(u)&&(u=u.toNumber()),!Ir(u)||!Xt(u))throw new TypeError("The parameter k must be an integer number")}else u=0;for(var d=u>0?u:0,h=u<0?-u:0,p=Math.min(this._size[0]-h,this._size[1]-d),g=[],_=0;_<p;_++)g[_]=this._data[_+h][_+d];return new t({data:g,size:[p],datatype:this._datatype})},t.diagonal=function(u,d,h,f){if(!Ur(u))throw new TypeError("Array expected, size parameter");if(2!==u.length)throw new Error("Only two dimensions matrix are supported");if(u=u.map(function(E){if(mr(E)&&(E=E.toNumber()),!Ir(E)||!Xt(E)||E<1)throw new Error("Size values must be positive integers");return E}),h){if(mr(h)&&(h=h.toNumber()),!Ir(h)||!Xt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var v,m=h>0?h:0,p=h<0?-h:0,g=u[0],_=u[1],b=Math.min(g-p,_-m);if(Ur(d)){if(d.length!==b)throw new Error("Invalid value array length");v=function(M){return d[M]}}else if(xn(d)){var y=d.size();if(1!==y.length||y[0]!==b)throw new Error("Invalid matrix length");v=function(M){return d.get([M])}}else v=function(){return d};f||(f=mr(v(0))?v(0).mul(0):0);var w=[];if(u.length>0){w=zf(w,u,f);for(var x=0;x<b;x++)w[x+p][x+m]=v(x)}return new t({data:w,size:[g,_]})},t.fromJSON=function(u){return new t(u)},t.prototype.swapRows=function(u,d){if(!(Ir(u)&&Xt(u)&&Ir(d)&&Xt(d)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Lr(u,this._size[0]),Lr(d,this._size[0]),t._swapRows(u,d,this._data),this},t._swapRows=function(u,d,h){var f=h[u];h[u]=h[d],h[d]=f},t},{isClass:!0}),r3=St(961);function o3(n,e){if(c3(n)&&a3(n,e))return n[e];throw"function"==typeof n[e]&&function l3(n,e){return!(null==n||"function"!=typeof n[e]||Pr(n,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(n)||!Pr(toe,e)&&(e in Object.prototype||e in Function.prototype))}(n,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function a3(n,e){return!(!n||"object"!=typeof n||!Pr(eoe,e)&&(e in Object.prototype||e in Function.prototype))}function c3(n){return"object"==typeof n&&n&&n.constructor===Object}var eoe={length:!0,name:!0},toe={toString:!0,valueOf:!0,toLocaleString:!0};class wS{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return o3(this.wrappedObject,e)}set(e,t){return function s3(n,e,t){if(c3(n)&&a3(n,e))return n[e]=t,t;throw new Error('No access to property "'+e+'"')}(this.wrappedObject,e,t),this}has(e){return function Jie(n,e){return e in n}(this.wrappedObject,e)}}function MS(n){return!!n&&(n instanceof Map||n instanceof wS||"function"==typeof n.set&&"function"==typeof n.get&&"function"==typeof n.keys&&"function"==typeof n.has)}var u3=function(){return u3=r3.create,r3},ioe=ne("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(e){var{BigNumber:t,Complex:r,DenseMatrix:i,Fraction:o}=e,s=u3();return s.clear(),s.addTypes([{name:"number",test:Ir},{name:"Complex",test:pu},{name:"BigNumber",test:mr},{name:"Fraction",test:Ry},{name:"Unit",test:mu},{name:"identifier",test:a=>Es&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(a)},{name:"string",test:Es},{name:"Chain",test:Ine},{name:"Array",test:Ur},{name:"Matrix",test:xn},{name:"DenseMatrix",test:Fy},{name:"SparseMatrix",test:Id},{name:"Range",test:Fk},{name:"Index",test:ky},{name:"boolean",test:ane},{name:"ResultSet",test:lne},{name:"Help",test:cne},{name:"function",test:une},{name:"Date",test:dne},{name:"RegExp",test:hne},{name:"null",test:pne},{name:"undefined",test:mne},{name:"AccessorNode",test:gne},{name:"ArrayNode",test:vne},{name:"AssignmentNode",test:_ne},{name:"BlockNode",test:yne},{name:"ConditionalNode",test:bne},{name:"ConstantNode",test:pS},{name:"FunctionNode",test:wne},{name:"FunctionAssignmentNode",test:xne},{name:"IndexNode",test:Mne},{name:"Node",test:Cne},{name:"ObjectNode",test:Sne},{name:"OperatorNode",test:kk},{name:"ParenthesisNode",test:Ene},{name:"RangeNode",test:Dne},{name:"RelationalNode",test:Ane},{name:"SymbolNode",test:Tne},{name:"Map",test:MS},{name:"Object",test:fne}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||CS(l),function Xne(n){return n.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return r||jy(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||jy(l),new r(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||jy(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||SS(l);var c=new o(l);if(c.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(l){var c=Number(l);if(isNaN(c))throw new Error('Cannot convert "'+l+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(l){t||CS(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){o||SS(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||jy(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||CS(l),new t(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||SS(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||function ooe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(a,l,c)=>{var u=s.createError(a,l,c);if(["wrongType","mismatch"].includes(u.data.category)&&1===l.length&&Td(l[0])&&c.some(h=>!h.params.includes(","))){var d=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw d.data=u.data,d}throw u},s.onMismatch=(a,l,c)=>{var u=s.createError(a,l,c);if(["wrongType","mismatch"].includes(u.data.category)&&1===l.length&&Td(l[0])&&c.some(h=>!h.params.includes(","))){var d=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw d.data=u.data,d}throw u},s});function CS(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function jy(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function SS(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}function or(n,e,t){return n&&"function"==typeof n.map?n.map(function(r){return or(r,e,t)}):e(n)}var Ds="number",gc="number, number";function f3(n){return Math.abs(n)}function p3(n,e){return n+e}function m3(n,e){return n*e}function g3(n){return-n}f3.signature=Ds,p3.signature=gc,m3.signature=gc,g3.signature=Ds;var moe=ne("abs",["typed"],n=>{var{typed:e}=n;return e("abs",{number:f3,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>r=>or(r,t,!0))})});var Q3="addScalar",Noe=ne(Q3,["typed"],n=>{var{typed:e}=n;return e(Q3,{"number, number":p3,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(null==r.value)throw new Error("Parameter x contains a unit with undefined value");if(null==i.value)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=e.find(t,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),Xoe=ne("bignumber",["typed","BigNumber"],n=>{var{typed:e,BigNumber:t}=n;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var s=o[2],a=t(o[1]),l=new t(2).pow(Number(s));if(a.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var c=new t(2).pow(Number(s)-1);return a.gte(c)?a.sub(l):a}return new t(i)},BigNumber:function(i){return i},Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(r=>i=>or(i,r))})});var fse=ne("conj",["typed"],n=>{var{typed:e}=n;return e("conj",{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>r=>or(r,t))})});var Wf=ne("compareUnits",["typed"],n=>{var{typed:e}=n;return{"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[r.valueType(),i.valueType()])(r.value,i.value)})}}),Xy="equalScalar",Cse=ne(Xy,["typed","config"],n=>{var{typed:e,config:t}=n,r=Wf({typed:e});return e(Xy,{"boolean, boolean":function(o,s){return o===s},"number, number":function(o,s){return Hs(o,s,t.epsilon)},"BigNumber, BigNumber":function(o,s){return o.eq(s)||function Pl(n,e,t){if(null==t)return n.eq(e);if(n.eq(e))return!0;if(n.isNaN()||e.isNaN())return!1;if(n.isFinite()&&e.isFinite()){var r=n.minus(e).abs();if(r.isZero())return!0;var i=n.constructor.max(n.abs(),e.abs());return r.lte(i.times(t))}return!1}(o,s,t.epsilon)},"Fraction, Fraction":function(o,s){return o.equals(s)},"Complex, Complex":function(o,s){return function wse(n,e,t){return Hs(n.re,e.re,t)&&Hs(n.im,e.im,t)}(o,s,t.epsilon)}},r)});ne(Xy,["typed","config"],n=>{var{typed:e,config:t}=n;return e(Xy,{"number, number":function(i,o){return Hs(i,o,t.epsilon)}})}),Math.pow(2,53),ne("hex",["typed","format"],n=>{var{typed:e,format:t}=n;return e("hex",{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number":function(i,o){return t(i,{notation:"hex",wordSize:o})}})});var Yg="number";function PL(n){return 0===n}PL.signature=Yg;var rae=ne("isZero",["typed"],n=>{var{typed:e}=n;return e("isZero",{number:PL,BigNumber:function(r){return r.isZero()},Complex:function(r){return 0===r.re&&0===r.im},Fraction:function(r){return 1===r.d&&0===r.n},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>or(r,t))})});var vae=ne("multiplyScalar",["typed"],n=>{var{typed:e}=n;return e("multiplyScalar",{"number, number":m3,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,r)=>r.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,r)=>t.multiply(r)})});var Sae=ne("number",["typed"],n=>{var{typed:e}=n,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if("NaN"===i)return NaN;var o=function Mae(n){var e=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return e?{input:n,radix:{"0b":2,"0o":8,"0x":16}[e[1]],integerPart:e[2],fractionalPart:e[3]}:null}(i);if(o)return function Cae(n){for(var e=parseInt(n.integerPart,n.radix),t=0,r=0;r<n.fractionalPart.length;r++)t+=parseInt(n.fractionalPart[r],n.radix)/Math.pow(n.radix,r+1);var o=e+t;if(isNaN(o))throw new SyntaxError('String "'+n.input+'" is no valid number');return o}(o);var s=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(s=Number(a[2]),i=a[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is no valid number');if(a){if(l>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(s-1)&&(l-=2**s)}return l},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":e.referToSelf(r=>i=>or(i,r))});return t.fromJSON=function(r){return parseFloat(r.value)},t});ne("oct",["typed","format"],n=>{var{typed:e,format:t}=n;return e("oct",{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number":function(i,o){return t(i,{notation:"oct",wordSize:o})}})}),St(340);Date.now();var Wae=ne("SparseMatrix",["typed","equalScalar","Matrix"],n=>{var{typed:e,equalScalar:t,Matrix:r}=n;function i(p,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!Es(g))throw new Error("Invalid datatype: "+g);if(xn(p))!function o(p,g,_){"SparseMatrix"===g.type?(p._values=g._values?mn(g._values):void 0,p._index=mn(g._index),p._ptr=mn(g._ptr),p._size=mn(g._size),p._datatype=_||g._datatype):s(p,g.valueOf(),_||g._datatype)}(this,p,g);else if(p&&Ur(p.index)&&Ur(p.ptr)&&Ur(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=g||p.datatype;else if(Ur(p))s(this,p,g);else{if(p)throw new TypeError("Unsupported type of data ("+zi(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(p,g,_){p._values=[],p._index=[],p._ptr=[],p._datatype=_;var b=g.length,v=0,y=t,w=0;if(Es(_)&&(y=e.find(t,[_,_])||t,w=e.convert(0,_)),b>0){var x=0;do{p._ptr.push(p._index.length);for(var E=0;E<b;E++){var M=g[E];if(Ur(M)){if(0===x&&v<M.length&&(v=M.length),x<M.length){var S=M[x];y(S,w)||(p._values.push(S),p._index.push(E))}}else 0===x&&v<1&&(v=1),y(M,w)||(p._values.push(M),p._index.push(E))}x++}while(x<v)}p._ptr.push(p._index.length),p._size=[b,v]}function a(p,g){if(!ky(g))throw new TypeError("Invalid index");if(g.isScalar())return p.get(g.min());var b=g.size();if(b.length!==p._size.length)throw new On(b.length,p._size.length);var v,y,w,x,E=g.min(),M=g.max();for(v=0,y=p._size.length;v<y;v++)Lr(E[v],p._size[v]),Lr(M[v],p._size[v]);var S=p._values,C=p._index,I=p._ptr,P=g.dimension(0),F=g.dimension(1),R=[],z=[];P.forEach(function(D,k){z[D]=k[0],R[D]=!0});var O=S?[]:void 0,T=[],V=[];return F.forEach(function(D){for(V.push(T.length),w=I[D],x=I[D+1];w<x;w++)!0===R[v=C[w]]&&(T.push(z[v]),O&&O.push(S[w]))}),V.push(T.length),new i({values:O,index:T,ptr:V,size:b,datatype:p._datatype})}function l(p,g,_,b){if(!g||!0!==g.isIndex)throw new TypeError("Invalid index");var w,v=g.size(),y=g.isScalar();if(xn(_)?(w=_.size(),_=_.toArray()):w=Ln(_),y){if(0!==w.length)throw new TypeError("Scalar expected");p.set(g.min(),_,b)}else{if(1!==v.length&&2!==v.length)throw new On(v.length,p._size.length,"<");if(w.length<v.length){for(var x=0,E=0;1===v[x]&&1===w[x];)x++;for(;1===v[x];)E++,x++;_=e3(_,v.length,E,w)}if(!Ly(v,w))throw new On(v,w,">");if(1===v.length)g.dimension(0).forEach(function(I,P){Lr(I),p.set([I,0],_[P[0]],b)});else{var S=g.dimension(0),C=g.dimension(1);S.forEach(function(I,P){Lr(I),C.forEach(function(F,R){Lr(F),p.set([I,F],_[P[0]][R[0]],b)})})}}return p}function c(p,g,_,b){if(_-g==0)return _;for(var v=g;v<_;v++)if(b[v]===p)return v;return g}function d(p,g,_,b,v,y,w){v.splice(p,0,b),y.splice(p,0,g);for(var x=_+1;x<w.length;x++)w[x]++}function h(p,g,_,b){var v=b||0,y=t,w=0;Es(p._datatype)&&(y=e.find(t,[p._datatype,p._datatype])||t,w=e.convert(0,p._datatype),v=e.convert(v,p._datatype));var S,C,I,x=!y(v,w),E=p._size[0],M=p._size[1];if(_>M){for(C=M;C<_;C++)if(p._ptr[C]=p._values.length,x)for(S=0;S<E;S++)p._values.push(v),p._index.push(S);p._ptr[_]=p._values.length}else _<M&&(p._ptr.splice(_+1,M-_),p._values.splice(p._ptr[_],p._values.length),p._index.splice(p._ptr[_],p._index.length));if(M=_,g>E){if(x){var P=0;for(C=0;C<M;C++){p._ptr[C]=p._ptr[C]+P,I=p._ptr[C+1]+P;var F=0;for(S=E;S<g;S++,F++)p._values.splice(I+F,0,v),p._index.splice(I+F,0,S),P++}p._ptr[M]=p._values.length}}else if(g<E){var R=0;for(C=0;C<M;C++){p._ptr[C]=p._ptr[C]-R;var O=p._ptr[C+1]-R;for(I=p._ptr[C];I<O;I++)(S=p._index[I])>g-1&&(p._values.splice(I,1),p._index.splice(I,1),R++)}p._ptr[C]=p._values.length}return p._size[0]=g,p._size[1]=_,p}function m(p,g,_,b,v){var E,M,y=b[0],w=b[1],x=[];for(E=0;E<y;E++)for(x[E]=[],M=0;M<w;M++)x[E][M]=0;for(M=0;M<w;M++)for(var C=_[M+1],I=_[M];I<C;I++)x[E=g[I]][M]=p?v?mn(p[I]):p[I]:1;return x}return(i.prototype=new r).createSparseMatrix=function(p,g){return new i(p,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return qg(this._values,zi)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,g){return new i(p,g)},i.prototype.density=function(){var p=this._size[0],g=this._size[1];return 0!==p&&0!==g?this._index.length/(p*g):0},i.prototype.subset=function(p,g,_){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,p);case 2:case 3:return l(this,p,g,_);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(p){if(!Ur(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new On(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=p[0],_=p[1];Lr(g,this._size[0]),Lr(_,this._size[1]);var b=c(g,this._ptr[_],this._ptr[_+1],this._index);return b<this._ptr[_+1]&&this._index[b]===g?this._values[b]:0},i.prototype.set=function(p,g,_){if(!Ur(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new On(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var b=p[0],v=p[1],y=this._size[0],w=this._size[1],x=t,E=0;Es(this._datatype)&&(x=e.find(t,[this._datatype,this._datatype])||t,E=e.convert(0,this._datatype)),(b>y-1||v>w-1)&&(h(this,Math.max(b+1,y),Math.max(v+1,w),_),y=this._size[0],w=this._size[1]),Lr(b,y),Lr(v,w);var M=c(b,this._ptr[v],this._ptr[v+1],this._index);return M<this._ptr[v+1]&&this._index[M]===b?x(g,E)?function u(p,g,_,b,v){_.splice(p,1),b.splice(p,1);for(var y=g+1;y<v.length;y++)v[y]--}(M,v,this._values,this._index,this._ptr):this._values[M]=g:x(g,E)||d(M,b,v,g,this._values,this._index,this._ptr),this},i.prototype.resize=function(p,g,_){if(!Td(p))throw new TypeError("Array or Matrix expected");var b=p.valueOf().map(y=>Array.isArray(y)&&1===y.length?y[0]:y);if(2!==b.length)throw new Error("Only two dimensions matrix are supported");return b.forEach(function(y){if(!Ir(y)||!Xt(y)||y<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qn(b)+")")}),h(_?this.clone():this,b[0],b[1],g)},i.prototype.reshape=function(p,g){if(!Ur(p))throw new TypeError("Array expected");if(2!==p.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(D){if(!Ir(D)||!Xt(D)||D<=-2||0===D)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Qn(p)+")")});var _=this._size[0]*this._size[1];if(_!==(p=xS(p,_))[0]*p[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var v=g?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return v;for(var y=[],w=0;w<v._ptr.length;w++)for(var x=0;x<v._ptr[w+1]-v._ptr[w];x++)y.push(w);for(var E=v._values.slice(),M=v._index.slice(),S=0;S<v._index.length;S++){var P=M[S]*v._size[1]+y[S];y[S]=P%p[1],M[S]=Math.floor(P/p[1])}v._values.length=0,v._index.length=0,v._ptr.length=p[1]+1,v._size=p.slice();for(var F=0;F<v._ptr.length;F++)v._ptr[F]=0;for(var R=0;R<E.length;R++){var z=M[R],O=y[R],T=E[R];d(c(z,v._ptr[O],v._ptr[O+1],v._index),z,O,T,v._values,v._index,v._ptr)}return v},i.prototype.clone=function(){return new i({values:this._values?mn(this._values):void 0,index:mn(this._index),ptr:mn(this._ptr),size:mn(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var _=this,b=this._size[0],v=this._size[1],y=Wg(p);return function f(p,g,_,b,v,y,w){var x=[],E=[],M=[],S=t,C=0;Es(p._datatype)&&(S=e.find(t,[p._datatype,p._datatype])||t,C=e.convert(0,p._datatype));for(var I=function(X,re,Ee){X=y(X,re,Ee),S(X,C)||(x.push(X),E.push(re))},P=b;P<=v;P++){M.push(x.length);var F=p._ptr[P],R=p._ptr[P+1];if(w)for(var z=F;z<R;z++){var O=p._index[z];O>=g&&O<=_&&I(p._values[z],O-g,P-b)}else{for(var T={},V=F;V<R;V++)T[p._index[V]]=p._values[V];for(var k=g;k<=_;k++)I(k in T?T[k]:0,k-g,P-b)}}return M.push(x.length),new i({values:x,index:E,ptr:M,size:[_-g+1,v-b+1]})}(this,0,b-1,0,v-1,function(E,M,S){return 1===y?p(E):2===y?p(E,[M,S]):p(E,[M,S],_)},g)},i.prototype.forEach=function(p,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this._size[0],v=this._size[1],y=0;y<v;y++){var w=this._ptr[y],x=this._ptr[y+1];if(g)for(var E=w;E<x;E++)p(this._values[E],[this._index[E],y],this);else{for(var S={},C=w;C<x;C++)S[this._index[C]]=this._values[C];for(var P=0;P<b;P++)p(P in S?S[P]:0,[P,y],this)}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],g=0;g<p;g++)for(var b=this._ptr[g+1],v=this._ptr[g];v<b;v++){var y=this._index[v];yield{value:this._values[v],index:[y,g]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(p){for(var g=this._size[0],_=this._size[1],b=this.density(),v="Sparse Matrix ["+Qn(g,p)+" x "+Qn(_,p)+"] density: "+Qn(b,p)+"\n",y=0;y<_;y++)for(var x=this._ptr[y+1],E=this._ptr[y];E<x;E++)v+="\n    ("+Qn(this._index[E],p)+", "+Qn(y,p)+") ==> "+(this._values?Qn(this._values[E],p):"X");return v},i.prototype.toString=function(){return Qn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(mr(p)&&(p=p.toNumber()),!Ir(p)||!Xt(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var g=p>0?p:0,_=p<0?-p:0,v=this._size[1],y=Math.min(this._size[0]-_,v-g),w=[],x=[],E=[];E[0]=0;for(var M=g;M<v&&w.length<y;M++)for(var C=this._ptr[M+1],I=this._ptr[M];I<C;I++){var P=this._index[I];if(P===M-g+_){w.push(this._values[I]),x[w.length-1]=P-_;break}}return E.push(w.length),new i({values:w,index:x,ptr:E,size:[y,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,g,_,b,v){if(!Ur(p))throw new TypeError("Array expected, size parameter");if(2!==p.length)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(D){if(mr(D)&&(D=D.toNumber()),!Ir(D)||!Xt(D)||D<1)throw new Error("Size values must be positive integers");return D}),_){if(mr(_)&&(_=_.toNumber()),!Ir(_)||!Xt(_))throw new TypeError("The parameter k must be an integer number")}else _=0;var y=t,w=0;Es(v)&&(y=e.find(t,[v,v])||t,w=e.convert(0,v));var I,x=_>0?_:0,E=_<0?-_:0,M=p[0],S=p[1],C=Math.min(M-E,S-x);if(Ur(g)){if(g.length!==C)throw new Error("Invalid value array length");I=function(k){return g[k]}}else if(xn(g)){var P=g.size();if(1!==P.length||P[0]!==C)throw new Error("Invalid matrix length");I=function(k){return g.get([k])}}else I=function(){return g};for(var F=[],R=[],z=[],O=0;O<S;O++){z.push(F.length);var T=O-x;if(T>=0&&T<C){var V=I(T);y(V,w)||(R.push(T+E),F.push(V))}}return z.push(F.length),new i({values:F,index:R,ptr:z,size:[M,S]})},i.prototype.swapRows=function(p,g){if(!(Ir(p)&&Xt(p)&&Ir(g)&&Xt(g)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Lr(p,this._size[0]),Lr(g,this._size[0]),i._swapRows(p,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,g,_,b,v){for(var w=b[p+1],x=b[p];x<w;x++)v(_[x],g[x])},i._swapRows=function(p,g,_,b,v,y){for(var w=0;w<_;w++){var x=y[w],E=y[w+1],M=c(p,x,E,v),S=c(g,x,E,v);if(M<E&&S<E&&v[M]===p&&v[S]===g){if(b){var C=b[M];b[M]=b[S],b[S]=C}}else if(M<E&&v[M]===p&&(S>=E||v[S]!==g)){var I=b?b[M]:void 0;v.splice(S,0,g),b&&b.splice(S,0,I),v.splice(S<=M?M+1:M,1),b&&b.splice(S<=M?M+1:M,1)}else if(S<E&&v[S]===g&&(M>=E||v[M]!==p)){var P=b?b[S]:void 0;v.splice(M,0,p),b&&b.splice(M,0,P),v.splice(M<=S?S+1:S,1),b&&b.splice(M<=S?S+1:S,1)}}},i},{isClass:!0});ne("bin",["typed","format"],n=>{var{typed:e,format:t}=n;return e("bin",{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number":function(i,o){return t(i,{notation:"bin",wordSize:o})}})});var CB="unaryMinus",Ble=ne(CB,["typed"],n=>{var{typed:e}=n;return e(CB,{number:g3,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>r=>{var i=r.clone();return i.value=e.find(t,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(t=>r=>or(r,t,!0))})}),Wle=ne("fraction",["typed","Fraction"],n=>{var{typed:e,Fraction:t}=n;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,o){return new t(i,o)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(r=>i=>or(i,r))})}),Yle=ne("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],n=>{var{typed:e,DenseMatrix:r,SparseMatrix:i}=n;return e("matrix",{"":function(){return o([])},string:function(a){return o([],a)},"string, string":function(a,l){return o([],a,l)},Array:function(a){return o(a)},Matrix:function(a){return o(a,a.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(s,a,l){if("dense"===a||"default"===a||void 0===a)return new r(s,l);if("sparse"===a)return new i(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),is=ne("matAlgo03xDSf",["typed"],n=>{var{typed:e}=n;return function(r,i,o,s){var a=r._data,l=r._size,c=r._datatype,u=i._values,d=i._index,h=i._ptr,f=i._size,m=i._datatype;if(l.length!==f.length)throw new On(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var _,p=l[0],g=l[1],b=0,v=o;"string"==typeof c&&c===m&&(b=e.convert(0,_=c),v=e.find(o,[_,_]));for(var y=[],w=0;w<p;w++)y[w]=[];for(var x=[],E=[],M=0;M<g;M++){for(var S=M+1,I=h[M+1],P=h[M];P<I;P++){var F=d[P];x[F]=s?v(u[P],a[F][M]):v(a[F][M],u[P]),E[F]=S}for(var R=0;R<p;R++)y[R][M]=E[R]===S?x[R]:s?v(b,a[R][M]):v(a[R][M],b)}return r.createDenseMatrix({data:y,size:[p,g],datatype:_})}}),Qy=ne("matAlgo05xSfSf",["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s){var a=i._values,l=i._index,c=i._ptr,u=i._size,d=i._datatype,h=o._values,f=o._index,m=o._ptr,p=o._size,g=o._datatype;if(u.length!==p.length)throw new On(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var v,_=u[0],b=u[1],y=t,w=0,x=s;"string"==typeof d&&d===g&&(y=e.find(t,[v=d,v]),w=e.convert(0,v),x=e.find(s,[v,v]));var R,z,O,T,E=a&&h?[]:void 0,M=[],S=[],C=E?[]:void 0,I=E?[]:void 0,P=[],F=[];for(z=0;z<b;z++){S[z]=M.length;var V=z+1;for(O=c[z],T=c[z+1];O<T;O++)M.push(R=l[O]),P[R]=V,C&&(C[R]=a[O]);for(O=m[z],T=m[z+1];O<T;O++)P[R=f[O]]!==V&&M.push(R),F[R]=V,I&&(I[R]=h[O]);if(E)for(O=S[z];O<M.length;){var D=P[R=M[O]],k=F[R];if(D===V||k===V){var X=x(D===V?C[R]:w,k===V?I[R]:w);y(X,w)?M.splice(O,1):(E.push(X),O++)}}}return S[b]=M.length,i.createSparseMatrix({values:E,index:M,ptr:S,size:[_,b],datatype:v})}}),Do=ne("matAlgo11xS0s",["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s,a){var l=i._values,c=i._index,u=i._ptr,d=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,f=d[0],m=d[1],g=t,_=0,b=s;"string"==typeof h&&(g=e.find(t,[p=h,p]),_=e.convert(0,p),o=e.convert(o,p),b=e.find(s,[p,p]));for(var v=[],y=[],w=[],x=0;x<m;x++){w[x]=y.length;for(var M=u[x+1],S=u[x];S<M;S++){var C=c[S],I=a?b(o,l[S]):b(l[S],o);g(I,_)||(y.push(C),v.push(I))}}return w[m]=y.length,i.createSparseMatrix({values:v,index:y,ptr:w,size:[f,m],datatype:p})}}),to=ne("matAlgo12xSfs",["typed","DenseMatrix"],n=>{var{typed:e,DenseMatrix:t}=n;return function(i,o,s,a){var l=i._values,c=i._index,u=i._ptr,d=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,f=d[0],m=d[1],g=s;"string"==typeof h&&(o=e.convert(o,p=h),g=e.find(s,[p,p]));for(var _=[],b=[],v=[],y=0;y<m;y++){for(var w=y+1,E=u[y+1],M=u[y];M<E;M++){var S=c[M];b[S]=l[M],v[S]=w}for(var C=0;C<f;C++)0===y&&(_[C]=[]),_[C][y]=v[C]===w?a?g(o,b[C]):g(b[C],o):a?g(o,0):g(0,o)}return new t({data:_,size:[f,m],datatype:p})}}),uce=ne("matAlgo13xDD",["typed"],n=>{var{typed:e}=n;return function(i,o,s){var a=i._data,l=i._size,c=i._datatype,u=o._data,d=o._size,h=o._datatype,f=[];if(l.length!==d.length)throw new On(l.length,d.length);for(var m=0;m<l.length;m++){if(l[m]!==d[m])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");f[m]=l[m]}var p,g=s;"string"==typeof c&&c===h&&(g=e.find(s,[p=c,p]));var _=f.length>0?t(g,0,f,f[0],a,u):[];return i.createDenseMatrix({data:_,size:f,datatype:p})};function t(r,i,o,s,a,l){var c=[];if(i===o.length-1)for(var u=0;u<s;u++)c[u]=r(a[u],l[u]);else for(var d=0;d<s;d++)c[d]=t(r,i+1,o,o[i+1],a[d],l[d]);return c}}),Xa=ne("matAlgo14xDs",["typed"],n=>{var{typed:e}=n;return function(i,o,s,a){var d,l=i._data,c=i._size,u=i._datatype,h=s;"string"==typeof u&&(o=e.convert(o,d=u),h=e.find(s,[d,d]));var f=c.length>0?t(h,0,c,c[0],l,o,a):[];return i.createDenseMatrix({data:f,size:mn(c),datatype:d})};function t(r,i,o,s,a,l,c){var u=[];if(i===o.length-1)for(var d=0;d<s;d++)u[d]=c?r(l,a[d]):r(a[d],l);else for(var h=0;h<s;h++)u[h]=t(r,i+1,o,o[i+1],a[h],l,c);return u}}),Hr=ne("matrixAlgorithmSuite",["typed","matrix"],n=>{var{typed:e,matrix:t}=n,r=uce({typed:e}),i=Xa({typed:e});return function(s){var c,a=s.elop,l=s.SD||s.DS;a?(c={"DenseMatrix, DenseMatrix":(f,m)=>r(f,m,a),"Array, Array":(f,m)=>r(t(f),t(m),a).valueOf(),"Array, DenseMatrix":(f,m)=>r(t(f),m,a),"DenseMatrix, Array":(f,m)=>r(f,t(m),a)},s.SS&&(c["SparseMatrix, SparseMatrix"]=(f,m)=>s.SS(f,m,a,!1)),s.DS&&(c["DenseMatrix, SparseMatrix"]=(f,m)=>s.DS(f,m,a,!1),c["Array, SparseMatrix"]=(f,m)=>s.DS(t(f),m,a,!1)),l&&(c["SparseMatrix, DenseMatrix"]=(f,m)=>l(m,f,a,!0),c["SparseMatrix, Array"]=(f,m)=>l(t(m),f,a,!0))):(c={"DenseMatrix, DenseMatrix":e.referToSelf(f=>(m,p)=>r(m,p,f)),"Array, Array":e.referToSelf(f=>(m,p)=>r(t(m),t(p),f).valueOf()),"Array, DenseMatrix":e.referToSelf(f=>(m,p)=>r(t(m),p,f)),"DenseMatrix, Array":e.referToSelf(f=>(m,p)=>r(m,t(p),f))},s.SS&&(c["SparseMatrix, SparseMatrix"]=e.referToSelf(f=>(m,p)=>s.SS(m,p,f,!1))),s.DS&&(c["DenseMatrix, SparseMatrix"]=e.referToSelf(f=>(m,p)=>s.DS(m,p,f,!1)),c["Array, SparseMatrix"]=e.referToSelf(f=>(m,p)=>s.DS(t(m),p,f,!1))),l&&(c["SparseMatrix, DenseMatrix"]=e.referToSelf(f=>(m,p)=>l(p,m,f,!0)),c["SparseMatrix, Array"]=e.referToSelf(f=>(m,p)=>l(t(p),m,f,!0))));var u=s.scalar||"any";(s.Ds||s.Ss)&&(a?(c["DenseMatrix,"+u]=(f,m)=>i(f,m,a,!1),c[u+", DenseMatrix"]=(f,m)=>i(m,f,a,!0),c["Array,"+u]=(f,m)=>i(t(f),m,a,!1).valueOf(),c[u+", Array"]=(f,m)=>i(t(m),f,a,!0).valueOf()):(c["DenseMatrix,"+u]=e.referToSelf(f=>(m,p)=>i(m,p,f,!1)),c[u+", DenseMatrix"]=e.referToSelf(f=>(m,p)=>i(p,m,f,!0)),c["Array,"+u]=e.referToSelf(f=>(m,p)=>i(t(m),p,f,!1).valueOf()),c[u+", Array"]=e.referToSelf(f=>(m,p)=>i(t(p),m,f,!0).valueOf())));var h=void 0!==s.sS?s.sS:s.Ss;return a?(s.Ss&&(c["SparseMatrix,"+u]=(f,m)=>s.Ss(f,m,a,!1)),h&&(c[u+", SparseMatrix"]=(f,m)=>h(m,f,a,!0))):(s.Ss&&(c["SparseMatrix,"+u]=e.referToSelf(f=>(m,p)=>s.Ss(m,p,f,!1))),h&&(c[u+", SparseMatrix"]=e.referToSelf(f=>(m,p)=>h(p,m,f,!0)))),a&&a.signatures&&function Lk(n,e){for(var t in e)Pr(e,t)&&(n[t]=e[t]);return n}(c,a.signatures),c}}),vu=ne("matAlgo01xDSid",["typed"],n=>{var{typed:e}=n;return function(r,i,o,s){var a=r._data,l=r._size,c=r._datatype,u=i._values,d=i._index,h=i._ptr,f=i._size,m=i._datatype;if(l.length!==f.length)throw new On(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v,y,p=l[0],g=l[1],_="string"==typeof c&&c===m?c:void 0,b=_?e.find(o,[_,_]):o,w=[];for(v=0;v<p;v++)w[v]=[];var x=[],E=[];for(y=0;y<g;y++){for(var M=y+1,C=h[y+1],I=h[y];I<C;I++)x[v=d[I]]=s?b(u[I],a[v][y]):b(a[v][y],u[I]),E[v]=M;for(v=0;v<p;v++)w[v][y]=E[v]===M?x[v]:a[v][y]}return r.createDenseMatrix({data:w,size:[p,g],datatype:_})}});function OB(){throw new Error('No "bignumber" implementation available')}function Mce(){throw new Error('No "fraction" implementation available')}var Ece=ne("numeric",["number","?bignumber","?fraction"],n=>{var{number:e,bignumber:t,fraction:r}=n,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:s=>e(s),BigNumber:t?s=>t(s):OB,Fraction:r?s=>r(s):Mce};return function(a){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number",c=arguments.length>2?arguments[2]:void 0;if(void 0!==c)throw new SyntaxError("numeric() takes one or two arguments");var u=zi(a);if(!(u in i))throw new TypeError("Cannot convert "+a+' of type "'+u+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+a+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===u?a:o[l](a)}}),Rce=ne("size",["typed","config","?matrix"],n=>{var{typed:e,config:t,matrix:r}=n;return e("size",{Matrix:function(o){return o.create(o.size())},Array:Ln,string:function(o){return"Array"===t.matrix?[o.length]:r([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return"Array"===t.matrix?[]:r?r([]):function NB(){throw new Error('No "matrix" implementation available')}()}})}),Od=ne("matAlgo10xSids",["typed","DenseMatrix"],n=>{var{typed:e,DenseMatrix:t}=n;return function(i,o,s,a){var l=i._values,c=i._index,u=i._ptr,d=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,f=d[0],m=d[1],g=s;"string"==typeof h&&(o=e.convert(o,p=h),g=e.find(s,[p,p]));for(var _=[],b=[],v=[],y=0;y<m;y++){for(var w=y+1,E=u[y+1],M=u[y];M<E;M++){var S=c[M];b[S]=l[M],v[S]=w}for(var C=0;C<f;C++)0===y&&(_[C]=[]),_[C][y]=v[C]===w?a?g(o,b[C]):g(b[C],o):o}return new t({data:_,size:[f,m],datatype:p})}}),UB="subtract",Zce=ne(UB,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:s}=n,a=vu({typed:e}),l=is({typed:e}),c=Qy({typed:e,equalScalar:r}),u=Od({typed:e,DenseMatrix:s}),d=to({typed:e,DenseMatrix:s}),h=Hr({typed:e,matrix:t});return e(UB,{"number, number":(f,m)=>f-m,"Complex, Complex":(f,m)=>f.sub(m),"BigNumber, BigNumber":(f,m)=>f.minus(m),"Fraction, Fraction":(f,m)=>f.sub(m),"Unit, Unit":e.referToSelf(f=>(m,p)=>{if(null===m.value)throw new Error("Parameter x contains a unit with undefined value");if(null===p.value)throw new Error("Parameter y contains a unit with undefined value");if(!m.equalBase(p))throw new Error("Units do not match");var g=m.clone();return g.value=e.find(f,[g.valueType(),p.valueType()])(g.value,p.value),g.fixPrefix=!1,g})},h({SS:c,DS:a,SD:l,Ss:d,sS:u}))}),n5="divideScalar",Due=ne(n5,["typed","numeric"],n=>{var{typed:e}=n;return e(n5,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})});function Yf(n,e,t,r){if(!(this instanceof Yf))throw new SyntaxError("Constructor must be called with the new operator");this.fn=n,this.count=e,this.min=t,this.max=r,this.message="Wrong number of arguments in function "+n+" ("+e+" provided, "+t+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}ne("equal",["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e("equal",{"any, any":function(i,o){return null===i?null===o:null===o?null===i:void 0===i?void 0===o:void 0===o?void 0===i:t(i,o)}})}),(Yf.prototype=new Error).constructor=Error,Yf.prototype.name="ArgumentsError",Yf.prototype.isArgumentsError=!0;var ob="unequal";ne(ob,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(ob,{"any, any":function(i,o){return null===i?null!==o:null===o?null!==i:void 0===i?void 0!==o:void 0===o?void 0!==i:!t(i,o)}})}),St(286);var ehe=ne("dot",["typed","addScalar","multiplyScalar","conj","size"],n=>{var{typed:e,addScalar:t,multiplyScalar:r,conj:i,size:o}=n;return e("dot",{"Array | DenseMatrix, Array | DenseMatrix":function a(u,d){var h=s(u,d),f=xn(u)?u._data:u,m=xn(u)?u._datatype:void 0,p=xn(d)?d._data:d,g=xn(d)?d._datatype:void 0,_=2===c(u).length,b=2===c(d).length,v=t,y=r;if(m&&g&&m===g&&"string"==typeof m){var w=m;v=e.find(t,[w,w]),y=e.find(r,[w,w])}if(!_&&!b){for(var x=y(i(f[0]),p[0]),E=1;E<h;E++)x=v(x,y(i(f[E]),p[E]));return x}if(!_&&b){for(var M=y(i(f[0]),p[0][0]),S=1;S<h;S++)M=v(M,y(i(f[S]),p[S][0]));return M}if(_&&!b){for(var C=y(i(f[0][0]),p[0]),I=1;I<h;I++)C=v(C,y(i(f[I][0]),p[I]));return C}if(_&&b){for(var P=y(i(f[0][0]),p[0][0]),F=1;F<h;F++)P=v(P,y(i(f[F][0]),p[F][0]));return P}},"SparseMatrix, SparseMatrix":function l(u,d){s(u,d);for(var h=u._index,f=u._values,m=d._index,p=d._values,g=0,_=t,b=r,v=0,y=0;v<h.length&&y<m.length;){var w=h[v],x=m[y];w<x?v++:w>x?y++:w===x&&(g=_(g,b(f[v],p[y])),v++,y++)}return g}});function s(u,d){var m,p,h=c(u),f=c(d);if(1===h.length)m=h[0];else{if(2!==h.length||1!==h[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");m=h[0]}if(1===f.length)p=f[0];else{if(2!==f.length||1!==f[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");p=f[0]}if(m!==p)throw new RangeError("Vectors must have equal length ("+m+" != "+p+")");if(0===m)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function c(u){return xn(u)?u.size():o(u)}}),N5="identity",ahe=ne(N5,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],n=>{var{typed:e,config:t,matrix:r,BigNumber:i,DenseMatrix:o,SparseMatrix:s}=n;return e(N5,{"":function(){return"Matrix"===t.matrix?r([]):[]},string:function(u){return r(u)},"number | BigNumber":function(u){return l(u,u,"Matrix"===t.matrix?"dense":void 0)},"number | BigNumber, string":function(u,d){return l(u,u,d)},"number | BigNumber, number | BigNumber":function(u,d){return l(u,d,"Matrix"===t.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(u,d,h){return l(u,d,h)},Array:function(u){return a(u)},"Array, string":function(u,d){return a(u,d)},Matrix:function(u){return a(u.valueOf(),u.storage())},"Matrix, string":function(u,d){return a(u.valueOf(),d)}});function a(c,u){switch(c.length){case 0:return u?r(u):[];case 1:return l(c[0],c[0],u);case 2:return l(c[0],c[1],u);default:throw new Error("Vector containing two values expected")}}function l(c,u,d){var h=mr(c)||mr(u)?i:null;if(mr(c)&&(c=c.toNumber()),mr(u)&&(u=u.toNumber()),!Xt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!Xt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");var f=h?new i(1):1,m=h?new h(0):0,p=[c,u];if(d){if("sparse"===d)return s.diagonal(p,f,0,m);if("dense"===d)return o.diagonal(p,f,0,m);throw new TypeError('Unknown matrix type "'.concat(d,'"'))}for(var g=zf([],p,m),_=c<u?c:u,b=0;b<_;b++)g[b][b]=f;return g}}),B5="multiply",bhe=ne(B5,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,equalScalar:o,dot:s}=n,a=Do({typed:e,equalScalar:o}),l=Xa({typed:e});function c(w,x){switch(w.length){case 1:switch(x.length){case 1:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+x[0]+")");break;case 2:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}var f=e("_multiplyMatrixVector",{"DenseMatrix, any":function p(w,x){var R,E=w._data,M=w._size,S=w._datatype,C=x._data,I=x._datatype,P=M[0],F=M[1],z=r,O=i;S&&I&&S===I&&"string"==typeof S&&(z=e.find(r,[R=S,R]),O=e.find(i,[R,R]));for(var T=[],V=0;V<P;V++){for(var D=E[V],k=O(D[0],C[0]),J=1;J<F;J++)k=z(k,O(D[J],C[J]));T[V]=k}return w.createDenseMatrix({data:T,size:[P],datatype:R})},"SparseMatrix, any":function b(w,x){var E=w._values,M=w._index,S=w._ptr,C=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var V,I=x._data,P=x._datatype,F=w._size[0],R=x._size[0],z=[],O=[],T=[],D=r,k=i,J=o,ce=0;C&&P&&C===P&&"string"==typeof C&&(D=e.find(r,[V=C,V]),k=e.find(i,[V,V]),J=e.find(o,[V,V]),ce=e.convert(0,V));var X=[],re=[];T[0]=0;for(var Ee=0;Ee<R;Ee++){var ie=I[Ee];if(!J(ie,ce))for(var Fe=S[Ee+1],He=S[Ee];He<Fe;He++){var me=M[He];re[me]?X[me]=D(X[me],k(ie,E[He])):(re[me]=!0,O.push(me),X[me]=k(ie,E[He]))}}for(var mt=O.length,De=0;De<mt;De++)z[De]=X[O[De]];return T[1]=O.length,w.createSparseMatrix({values:z,index:O,ptr:T,size:[F,1],datatype:V})}}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function g(w,x){var O,E=w._data,M=w._size,S=w._datatype,C=x._data,P=x._datatype,F=M[0],R=M[1],z=x._size[1],T=r,V=i;S&&P&&S===P&&"string"==typeof S&&(T=e.find(r,[O=S,O]),V=e.find(i,[O,O]));for(var D=[],k=0;k<F;k++){var J=E[k];D[k]=[];for(var ce=0;ce<z;ce++){for(var X=V(J[0],C[0][ce]),re=1;re<R;re++)X=T(X,V(J[re],C[re][ce]));D[k][ce]=X}}return w.createDenseMatrix({data:D,size:[F,z],datatype:O})},"DenseMatrix, SparseMatrix":function _(w,x){var E=w._data,M=w._size,S=w._datatype,C=x._values,I=x._index,P=x._ptr,F=x._size,R=x._datatype;if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var T,z=M[0],O=F[1],V=r,D=i,k=o,J=0;S&&R&&S===R&&"string"==typeof S&&(V=e.find(r,[T=S,T]),D=e.find(i,[T,T]),k=e.find(o,[T,T]),J=e.convert(0,T));for(var ce=[],X=[],re=[],Ee=x.createSparseMatrix({values:ce,index:X,ptr:re,size:[z,O],datatype:T}),ie=0;ie<O;ie++){re[ie]=X.length;var Ae=P[ie],Fe=P[ie+1];if(Fe>Ae)for(var He=0,me=0;me<z;me++){for(var mt=me+1,De=void 0,ve=Ae;ve<Fe;ve++){var ze=I[ve];He!==mt?(De=D(E[me][ze],C[ve]),He=mt):De=V(De,D(E[me][ze],C[ve]))}He===mt&&!k(De,J)&&(X.push(me),ce.push(De))}}return re[O]=X.length,Ee},"SparseMatrix, DenseMatrix":function v(w,x){var E=w._values,M=w._index,S=w._ptr,C=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var O,I=x._data,P=x._datatype,F=w._size[0],R=x._size[0],z=x._size[1],T=r,V=i,D=o,k=0;C&&P&&C===P&&"string"==typeof C&&(T=e.find(r,[O=C,O]),V=e.find(i,[O,O]),D=e.find(o,[O,O]),k=e.convert(0,O));for(var J=[],ce=[],X=[],re=w.createSparseMatrix({values:J,index:ce,ptr:X,size:[F,z],datatype:O}),Ee=[],ie=[],Ae=0;Ae<z;Ae++){X[Ae]=ce.length;for(var Fe=Ae+1,He=0;He<R;He++){var me=I[He][Ae];if(!D(me,k))for(var De=S[He+1],ve=S[He];ve<De;ve++){var ze=M[ve];ie[ze]!==Fe?(ie[ze]=Fe,ce.push(ze),Ee[ze]=V(me,E[ve])):Ee[ze]=T(Ee[ze],V(me,E[ve]))}}for(var $=ce.length,ye=X[Ae];ye<$;ye++)J[ye]=Ee[ce[ye]]}return X[z]=ce.length,re},"SparseMatrix, SparseMatrix":function y(w,x){var V,E=w._values,M=w._index,S=w._ptr,C=w._datatype,I=x._values,P=x._index,F=x._ptr,R=x._datatype,z=w._size[0],O=x._size[1],T=E&&I,D=r,k=i;C&&R&&C===R&&"string"==typeof C&&(D=e.find(r,[V=C,V]),k=e.find(i,[V,V]));for(var Ae,He,me,De,ve,ze,J=T?[]:void 0,ce=[],X=[],re=w.createSparseMatrix({values:J,index:ce,ptr:X,size:[z,O],datatype:V}),Ee=T?[]:void 0,ie=[],H=0;H<O;H++){X[H]=ce.length;var $=H+1;for(De=F[H+1],me=F[H];me<De;me++)if(ze=P[me],T)for(He=S[ze+1],Ae=S[ze];Ae<He;Ae++)ie[ve=M[Ae]]!==$?(ie[ve]=$,ce.push(ve),Ee[ve]=k(I[me],E[Ae])):Ee[ve]=D(Ee[ve],k(I[me],E[Ae]));else for(He=S[ze+1],Ae=S[ze];Ae<He;Ae++)ie[ve=M[Ae]]!==$&&(ie[ve]=$,ce.push(ve));if(T)for(var ge=ce.length,Ne=X[H];Ne<ge;Ne++)J[Ne]=Ee[ce[Ne]]}return X[O]=ce.length,re}});return e(B5,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(x,E)=>{c(Ln(x),Ln(E));var M=w(t(x),t(E));return xn(M)?M.valueOf():M}),"Matrix, Matrix":function(x,E){var M=x.size(),S=E.size();return c(M,S),1===M.length?1===S.length?function u(w,x,E){if(0===E)throw new Error("Cannot multiply two empty vectors");return s(w,x)}(x,E,M[0]):function d(w,x){if("dense"!==x.storage())throw new Error("Support for SparseMatrix not implemented");return function h(w,x){var z,E=w._data,S=w._datatype,C=x._data,P=x._datatype,F=w._size[0],R=x._size[1],O=r,T=i;S&&P&&S===P&&"string"==typeof S&&(O=e.find(r,[z=S,z]),T=e.find(i,[z,z]));for(var V=[],D=0;D<R;D++){for(var k=T(E[0],C[0][D]),J=1;J<F;J++)k=O(k,T(E[J],C[J][D]));V[D]=k}return w.createDenseMatrix({data:V,size:[R],datatype:z})}(w,x)}(x,E):1===S.length?f(x,E):m(x,E)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(x,E)=>w(x,t(E))),"Array, Matrix":e.referToSelf(w=>(x,E)=>w(t(x,E.storage()),E)),"SparseMatrix, any":function(x,E){return a(x,E,i,!1)},"DenseMatrix, any":function(x,E){return l(x,E,i,!1)},"any, SparseMatrix":function(x,E){return a(E,x,i,!0)},"any, DenseMatrix":function(x,E){return l(E,x,i,!0)},"Array, any":function(x,E){return l(t(x),E,i,!1).valueOf()},"any, Array":function(x,E){return l(t(E),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(x,E,M)=>{for(var S=w(x,E),C=0;C<M.length;C++)S=w(S,M[C]);return S})})}),gfe=ne("det",["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],n=>{var{typed:e,matrix:t,subtract:r,multiply:i,divideScalar:o,isZero:s,unaryMinus:a}=n;return e("det",{any:function(u){return mn(u)},"Array | Matrix":function(u){var d;switch((d=xn(u)?u.size():Array.isArray(u)?(u=t(u)).size():[]).length){case 0:return mn(u);case 1:if(1===d[0])return mn(u.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Qn(d)+")");case 2:var h=d[0];if(h===d[1])return function l(c,u,d){if(1===u)return mn(c[0][0]);if(2===u)return r(i(c[0][0],c[1][1]),i(c[1][0],c[0][1]));for(var h=!1,f=new Array(u).fill(0).map((E,M)=>M),m=0;m<u;m++){var p=f[m];if(s(c[p][m])){var g=void 0;for(g=m+1;g<u;g++)if(!s(c[f[g]][m])){p=f[g],f[g]=f[m],f[m]=p,h=!h;break}if(g===u)return c[p][m]}for(var _=c[p][m],b=0===m?1:c[f[m-1]][m-1],v=m+1;v<u;v++)for(var y=f[v],w=m+1;w<u;w++)c[y][w]=o(r(i(c[y][w],_),i(c[y][m],c[p][w])),b)}var x=c[f[u-1]][u-1];return h?a(x):x}(u.clone().valueOf(),h);throw new RangeError("Matrix must be square (size: "+Qn(d)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Qn(d)+")")}}})}),lpe=ne("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],n=>{var{typed:e,matrix:t,divideScalar:r,addScalar:i,multiply:o,unaryMinus:s,det:a,identity:l,abs:c}=n;return e("inv",{"Array | Matrix":function(h){var f=xn(h)?h.size():Ln(h);switch(f.length){case 1:if(1===f[0])return xn(h)?t([r(1,h.valueOf()[0])]):[r(1,h[0])];throw new RangeError("Matrix must be square (size: "+Qn(f)+")");case 2:var m=f[0],p=f[1];if(m===p)return xn(h)?t(u(h.valueOf(),m,p),h.storage()):u(h,m,p);throw new RangeError("Matrix must be square (size: "+Qn(f)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Qn(f)+")")}},any:function(h){return r(1,h)}});function u(d,h,f){var m,p,g,_,b;if(1===h){if(0===(_=d[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,_)]]}if(2===h){var v=a(d);if(0===v)throw Error("Cannot calculate inverse, determinant is zero");return[[r(d[1][1],v),r(s(d[0][1]),v)],[r(s(d[1][0]),v),r(d[0][0],v)]]}var y=d.concat();for(m=0;m<h;m++)y[m]=y[m].concat();for(var w=l(h).valueOf(),x=0;x<f;x++){var E=c(y[x][x]),M=x;for(m=x+1;m<h;)c(y[m][x])>E&&(E=c(y[m][x]),M=m),m++;if(0===E)throw Error("Cannot calculate inverse, determinant is zero");(m=M)!==x&&(b=y[x],y[x]=y[m],y[m]=b,b=w[x],w[x]=w[m],w[m]=b);var S=y[x],C=w[x];for(m=0;m<h;m++){var I=y[m],P=w[m];if(m!==x){if(0!==I[x]){for(g=r(s(I[x]),S[x]),p=x;p<f;p++)I[p]=i(I[p],o(g,S[p]));for(p=0;p<f;p++)P[p]=i(P[p],o(g,C[p]))}}else{for(g=S[x],p=x;p<f;p++)I[p]=r(I[p],g);for(p=0;p<f;p++)P[p]=r(P[p],g)}}}return w}}),Mt=Une({config:it}),ri=rre({}),Qf=Aie({}),VS=Pie({}),Nn=Yie({Matrix:VS}),pe=ioe({BigNumber:Mt,Complex:ri,DenseMatrix:Nn,Fraction:Qf}),js=moe({typed:pe}),no=Noe({typed:pe}),lb=Xoe({BigNumber:Mt,typed:pe}),Qg=fse({typed:pe}),ar=Cse({config:it,typed:pe}),Jf=rae({typed:pe}),Ai=vae({typed:pe}),ep=Sae({typed:pe}),yu=Wae({Matrix:VS,equalScalar:ar,typed:pe}),bc=Ble({typed:pe}),eV=Wle({Fraction:Qf,typed:pe}),Nt=Yle({DenseMatrix:Nn,Matrix:VS,SparseMatrix:yu,typed:pe}),ev=Ece({bignumber:lb,fraction:eV,number:ep}),As=Rce({matrix:Nt,config:it,typed:pe}),Ti=Zce({DenseMatrix:Nn,addScalar:no,equalScalar:ar,matrix:Nt,typed:pe,unaryMinus:bc}),pi=Due({numeric:ev,typed:pe}),$S=ehe({addScalar:no,conj:Qg,multiplyScalar:Ai,size:As,typed:pe}),Nd=ahe({BigNumber:Mt,DenseMatrix:Nn,SparseMatrix:yu,config:it,matrix:Nt,typed:pe}),Ii=bhe({addScalar:no,dot:$S,equalScalar:ar,matrix:Nt,multiplyScalar:Ai,typed:pe}),Rd=lpe({abs:js,addScalar:no,det:gfe({divideScalar:pi,isZero:Jf,matrix:Nt,multiply:Ii,subtract:Ti,typed:pe,unaryMinus:bc}),divideScalar:pi,identity:Nd,matrix:Nt,multiply:Ii,typed:pe,unaryMinus:bc});class on{constructor(e){this.components=[],this.components=e}static identity(e){let t=[];for(let r=0;r<e;++r){let i=[];for(let o=0;o<e;++o)i.push(o==r?1:0);t.push(i)}return new on(t)}invert(){return new on(Rd(this.components))}multiply(e){let t=this.components,r=e.components,i=t.length,o=t[0].length,a=r[0].length,l=new Array(i);for(var c=0;c<i;++c){l[c]=new Array(a);for(var u=0;u<a;++u){l[c][u]=0;for(var d=0;d<o;++d)l[c][u]+=t[c][d]*r[d][u]}}return new on(l)}add(e){let t=[],r=0,i=0;for(let o of this.components){let s=[];for(let a of o)s.push(a+e.components[r][i]),i+=1;t.push(s),r+=1,i=0}return new on(t)}scalarMultiply(e){let t=[],r=0,i=0;for(let o of this.components){let s=[];for(let a of o)s.push(a*e),i+=1;t.push(s),r+=1,i=0}return new on(t)}transpose(){let e=this.components.length,t=this.components[0].length,r=[];for(let i=0;i<t;i++)r.push([]);for(let i=0;i<t;i++)for(let o=0;o<e;o++)r[i].push(this.components[o][i]);return new on(r)}static basicRotationMatrix(e,t,r,i){let o=on.identity(e);return o.components[t][t]=Math.cos(i),o.components[r][t]=-Math.sin(i),o.components[r][r]=Math.cos(i),o.components[t][r]=Math.sin(i),o}}class dr{constructor(e){this.components=[],this.components=e}get dim(){return this.components.length}get(e){return this.components[e]}getNegative(){return new dr(this.components.map(e=>-e))}equal(e){return this.components.every((t,r)=>Math.abs(t-e.components[r])<.01)}getTranspose(){return new on([this.components])}asMatrix(){return new on([...this.components.map(e=>[e])])}length(){let e=0;return this.components.forEach(t=>e+=t*t),Math.sqrt(e)}multiplyOnLeftWithMatrix(e){let t=this.asMatrix(),r=e.multiply(t);return new dr(r.components.map(i=>i[0]))}normalized(){let e=this.length();return new dr(this.components.map(t=>t/e))}stretchedBy(e){return new dr(this.components.map(t=>t*e))}dotProduct(e){let t=this.components.map((i,o)=>i*e.components[o]),r=0;return t.forEach(i=>{r+=i}),r}add(e){let t=this.components.map((r,i)=>r+e.components[i]);return new dr(t)}crossProduct(e){return new dr([this.get(1)*e.get(2)-this.get(2)*e.get(1),this.get(2)*e.get(0)-this.get(0)*e.get(2),this.get(0)*e.get(1)-this.get(1)*e.get(0)])}}function cV(n,e,t,r,i,o,s){try{var a=n[o](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}const ss=1001,ro=1003,Ui=1006,Ld=1009,Bd=1014,wu=1015,ov=1016,up=1020,va=1023,Vd=1026,dp=1027,zd=3e3,wi=3001,Ec="srgb",Hd="srgb-linear";class Gd{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const o=i.indexOf(t);-1!==o&&i.splice(o,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const Go=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],jd=Math.PI/180,sv=180/Math.PI;function Ws(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Go[255&n]+Go[n>>8&255]+Go[n>>16&255]+Go[n>>24&255]+"-"+Go[255&e]+Go[e>>8&255]+"-"+Go[e>>16&15|64]+Go[e>>24&255]+"-"+Go[63&t|128]+Go[t>>8&255]+"-"+Go[t>>16&255]+Go[t>>24&255]+Go[255&r]+Go[r>>8&255]+Go[r>>16&255]+Go[r>>24&255]).toLowerCase()}function Pi(n,e,t){return Math.max(e,Math.min(t,n))}function av(n,e,t){return(1-t)*n+t*e}function uE(n){return 0==(n&n-1)&&0!==n}function wb(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Dc(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Yr(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}class Je{constructor(e=0,t=0){Je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class io{constructor(){io.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=o,u[5]=l,u[6]=r,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],m=r[8],p=i[0],g=i[3],_=i[6],b=i[1],v=i[4],y=i[7],w=i[2],x=i[5],E=i[8];return o[0]=s*p+a*b+l*w,o[3]=s*g+a*v+l*x,o[6]=s*_+a*y+l*E,o[1]=c*p+u*b+d*w,o[4]=c*g+u*v+d*x,o[7]=c*_+u*y+d*E,o[2]=h*p+f*b+m*w,o[5]=h*g+f*v+m*x,o[8]=h*_+f*y+m*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*s*u-t*a*c-r*o*u+r*a*l+i*o*c-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=a*l-u*o,f=c*o-s*l,m=t*d+r*h+i*f;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return e[0]=d*p,e[1]=(i*c-u*r)*p,e[2]=(a*r-i*s)*p,e[3]=h*p,e[4]=(u*t-i*l)*p,e[5]=(i*o-a*t)*p,e[6]=f*p,e[7]=(r*l-c*t)*p,e[8]=(s*t-r*o)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,o=i[0],s=i[3],a=i[6],l=i[1],c=i[4],u=i[7];return i[0]=t*o+r*l,i[3]=t*s+r*c,i[6]=t*a+r*u,i[1]=-r*o+t*l,i[4]=-r*s+t*c,i[7]=-r*a+t*u,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function qV(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function lv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Wd(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Mb(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const dE={[Ec]:{[Hd]:Wd},[Hd]:{[Ec]:Mb}},Ya={legacyMode:!0,get workingColorSpace(){return Hd},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(dE[e]&&void 0!==dE[e][t]){const r=dE[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},$V={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},oo={r:0,g:0,b:0},Za={h:0,s:0,l:0},Cb={h:0,s:0,l:0};function hE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function Sb(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let mp,jt=(()=>{class n{constructor(t,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===r&&void 0===i?this.set(t):this.setRGB(t,r,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Ec){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Ya.toWorkingColorSpace(this,r),this}setRGB(t,r,i,o=Hd){return this.r=t,this.g=r,this.b=i,Ya.toWorkingColorSpace(this,o),this}setHSL(t,r,i,o=Hd){if(t=function cE(n,e){return(n%e+e)%e}(t,1),r=Pi(r,0,1),i=Pi(i,0,1),0===r)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+r):i+r-i*r,a=2*i-s;this.r=hE(a,s,t+1/3),this.g=hE(a,s,t),this.b=hE(a,s,t-1/3)}return Ya.toWorkingColorSpace(this,o),this}setStyle(t,r=Ec){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const l=o[2];switch(o[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Ya.toWorkingColorSpace(this,r),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Ya.toWorkingColorSpace(this,r),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(s[1])/360,u=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return i(s[4]),this.setHSL(c,u,d,r)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=o[1],a=s.length;if(3===a)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Ya.toWorkingColorSpace(this,r),this;if(6===a)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Ya.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=Ec){const i=$V[t.toLowerCase()];return void 0!==i?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Wd(t.r),this.g=Wd(t.g),this.b=Wd(t.b),this}copyLinearToSRGB(t){return this.r=Mb(t.r),this.g=Mb(t.g),this.b=Mb(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ec){return Ya.fromWorkingColorSpace(Sb(this,oo),t),Pi(255*oo.r,0,255)<<16^Pi(255*oo.g,0,255)<<8^Pi(255*oo.b,0,255)<<0}getHexString(t=Ec){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Hd){Ya.fromWorkingColorSpace(Sb(this,oo),r);const i=oo.r,o=oo.g,s=oo.b,a=Math.max(i,o,s),l=Math.min(i,o,s);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case i:c=(o-s)/h+(o<s?6:0);break;case o:c=(s-i)/h+2;break;case s:c=(i-o)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,r=Hd){return Ya.fromWorkingColorSpace(Sb(this,oo),r),t.r=oo.r,t.g=oo.g,t.b=oo.b,t}getStyle(t=Ec){return Ya.fromWorkingColorSpace(Sb(this,oo),t),t!==Ec?`color(${t} ${oo.r} ${oo.g} ${oo.b})`:`rgb(${255*oo.r|0},${255*oo.g|0},${255*oo.b|0})`}offsetHSL(t,r,i){return this.getHSL(Za),Za.h+=t,Za.s+=r,Za.l+=i,this.setHSL(Za.h,Za.s,Za.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(Za),t.getHSL(Cb);const i=av(Za.h,Cb.h,r),o=av(Za.s,Cb.s,r),s=av(Za.l,Cb.l,r);return this.setHSL(i,o,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=$V,n})();class XV{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===mp&&(mp=lv("canvas")),mp.width=e.width,mp.height=e.height;const r=mp.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=mp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=lv("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=255*Wd(o[s]/255);return r.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Wd(t[r]/255)):Wd(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class gp{constructor(e=null){this.isSource=!0,this.uuid=Ws(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)o.push(fE(i[s].isDataTexture?i[s].image:i[s]))}else o=fE(i);r.url=o}return t||(e.images[this.uuid]=r),r}}function fE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?XV.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Uve=0,Mu=(()=>{class n extends Gd{constructor(t=n.DEFAULT_IMAGE,r=n.DEFAULT_MAPPING,i=ss,o=ss,s=Ui,a=1008,l=va,c=Ld,u=1,d=zd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Uve++}),this.uuid=Ws(),this.name="",this.source=new gp(t),this.mipmaps=[],this.mapping=r,this.wrapS=i,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new io,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case ss:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case ss:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class Gr{constructor(e=0,t=0,r=0,i=1){Gr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,o;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],p=l[2],g=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-p)<.01&&Math.abs(m-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+p)<.1&&Math.abs(m+g)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,y=(f+1)/2,w=(_+1)/2,x=(u+h)/4,E=(d+p)/4,M=(m+g)/4;return v>y&&v>w?v<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(v),i=x/r,o=E/r):y>w?y<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(y),r=x/i,o=M/i):w<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(w),r=E/o,i=M/o),this.set(r,i,o,t),this}let b=Math.sqrt((g-m)*(g-m)+(d-p)*(d-p)+(h-u)*(h-u));return Math.abs(b)<.001&&(b=1),this.x=(g-m)/b,this.y=(d-p)/b,this.z=(h-u)/b,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class qd extends Gd{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Gr(0,0,e,t),this.scissorTest=!1,this.viewport=new Gr(0,0,e,t),this.texture=new Mu({width:e,height:t,depth:1},r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Ui,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new gp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class pE extends Mu{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ro,this.minFilter=ro,this.wrapR=ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class YV extends Mu{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ro,this.minFilter=ro,this.wrapR=ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class as{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,o,s,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=o[s+0],f=o[s+1],m=o[s+2],p=o[s+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=m,void(e[t+3]=p);if(d!==p||l!==h||c!==f||u!==m){let g=1-a;const _=l*h+c*f+u*m+d*p,b=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){const w=Math.sqrt(v),x=Math.atan2(w,_*b);g=Math.sin(g*x)/w,a=Math.sin(a*x)/w}const y=a*b;if(l=l*g+h*y,c=c*g+f*y,u=u*g+m*y,d=d*g+p*y,g===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,o,s){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=o[s],h=o[s+1],f=o[s+2],m=o[s+3];return e[t]=a*m+u*d+l*f-c*h,e[t+1]=l*m+u*h+c*d-a*f,e[t+2]=c*m+u*f+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(o/2),h=l(r/2),f=l(i/2),m=l(o/2);switch(s){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(o-c)*f,this._z=(s-i)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(i+s)/f,this._z=(o+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(o-c)/f,this._x=(i+s)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(s-i)/f,this._x=(o+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Pi(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+s*a+i*c-o*l,this._y=i*u+s*l+o*a-r*c,this._z=o*u+s*c+r*l-i*a,this._w=s*u-r*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*s+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=s*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=o*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(o),r*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,t=0,r=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ZV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ZV.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*i,this.y=o[1]*t+o[4]*r+o[7]*i,this.z=o[2]*t+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*i-a*r,u=l*r+a*t-o*i,d=l*i+o*r-s*t,h=-o*t-s*r-a*i;return this.x=c*l+h*-o+u*-a-d*-s,this.y=u*l+h*-s+d*-o-c*-a,this.z=d*l+h*-a+c*-s-u*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i,this.y=o[1]*t+o[5]*r+o[9]*i,this.z=o[2]*t+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return mE.copy(this).projectOnVector(e),this.sub(mE)}reflect(e){return this.sub(mE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Pi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mE=new q,ZV=new as;class vp{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>o&&(o=u),d>s&&(s=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(o,s,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>o&&(o=u),d>s&&(s=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(o,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=$d.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const o=r.attributes.position;for(let s=0,a=o.count;s<a;s++)$d.fromBufferAttribute(o,s).applyMatrix4(e.matrixWorld),this.expandByPoint($d)}else null===r.boundingBox&&r.computeBoundingBox(),gE.copy(r.boundingBox),gE.applyMatrix4(e.matrixWorld),this.union(gE);const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$d),$d.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cv),Eb.subVectors(this.max,cv),_p.subVectors(e.a,cv),yp.subVectors(e.b,cv),bp.subVectors(e.c,cv),Cu.subVectors(yp,_p),Su.subVectors(bp,yp),Xd.subVectors(_p,bp);let t=[0,-Cu.z,Cu.y,0,-Su.z,Su.y,0,-Xd.z,Xd.y,Cu.z,0,-Cu.x,Su.z,0,-Su.x,Xd.z,0,-Xd.x,-Cu.y,Cu.x,0,-Su.y,Su.x,0,-Xd.y,Xd.x,0];return!(!vE(t,_p,yp,bp,Eb)||(t=[1,0,0,0,1,0,0,0,1],!vE(t,_p,yp,bp,Eb)))&&(Db.crossVectors(Cu,Su),t=[Db.x,Db.y,Db.z],vE(t,_p,yp,bp,Eb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return $d.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize($d).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ac[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ac[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ac[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ac[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ac[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ac[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ac[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ac[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ac)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ac=[new q,new q,new q,new q,new q,new q,new q,new q],$d=new q,gE=new vp,_p=new q,yp=new q,bp=new q,Cu=new q,Su=new q,Xd=new q,cv=new q,Eb=new q,Db=new q,Yd=new q;function vE(n,e,t,r,i){for(let o=0,s=n.length-3;o<=s;o+=3){Yd.fromArray(n,o);const a=i.x*Math.abs(Yd.x)+i.y*Math.abs(Yd.y)+i.z*Math.abs(Yd.z),l=e.dot(Yd),c=t.dot(Yd),u=r.dot(Yd);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Hve=new vp,uv=new q,_E=new q;class xp{constructor(e=new q,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):Hve.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;uv.subVectors(e,this.center);const t=uv.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=.5*(r-this.radius);this.center.addScaledVector(uv,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(_E.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(uv.copy(e.center).add(_E)),this.expandByPoint(uv.copy(e.center).sub(_E))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Tc=new q,yE=new q,Ab=new q,Eu=new q,bE=new q,Tb=new q,xE=new q;class Ib{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tc.copy(this.direction).multiplyScalar(t).add(this.origin),Tc.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){yE.copy(e).add(t).multiplyScalar(.5),Ab.copy(t).sub(e).normalize(),Eu.copy(this.origin).sub(yE);const o=.5*e.distanceTo(t),s=-this.direction.dot(Ab),a=Eu.dot(this.direction),l=-Eu.dot(Ab),c=Eu.lengthSq(),u=Math.abs(1-s*s);let d,h,f,m;if(u>0)if(d=s*l-a,h=s*a-l,m=o*u,d>=0)if(h>=-m)if(h<=m){const p=1/u;d*=p,h*=p,f=d*(d+s*h+2*a)+h*(s*d+h+2*l)+c}else h=o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h=-o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-s*o+a)),h=d>0?-o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(d=Math.max(0,-(s*o+a)),h=d>0?o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c);else h=s>0?-o:o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(Ab).multiplyScalar(h).add(yE),f}intersectSphere(e,t){Tc.subVectors(e.center,this.origin);const r=Tc.dot(this.direction),i=Tc.dot(Tc)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!=r)&&(r=a),(l<i||i!=i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return null!==this.intersectBox(e,Tc)}intersectTriangle(e,t,r,i,o){bE.subVectors(t,e),Tb.subVectors(r,e),xE.crossVectors(bE,Tb);let a,s=this.direction.dot(xE);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Eu.subVectors(this.origin,e);const l=a*this.direction.dot(Tb.crossVectors(Eu,Tb));if(l<0)return null;const c=a*this.direction.dot(bE.cross(Eu));if(c<0||l+c>s)return null;const u=-a*Eu.dot(xE);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Sn{constructor(){Sn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,o,s,a,l,c,u,d,h,f,m,p,g){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=o,_[5]=s,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=m,_[11]=p,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Sn).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/wp.setFromMatrixColumn(e,0).length(),o=1/wp.setFromMatrixColumn(e,1).length(),s=1/wp.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),d=Math.sin(o);if("XYZ"===e.order){const h=s*u,f=s*d,m=a*u,p=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+m*c,t[5]=h-p*c,t[9]=-a*l,t[2]=p-h*c,t[6]=m+f*c,t[10]=s*l}else if("YXZ"===e.order){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h+p*a,t[4]=m*a-f,t[8]=s*c,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=f*a-m,t[6]=p+h*a,t[10]=s*l}else if("ZXY"===e.order){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h-p*a,t[4]=-s*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=s*u,t[9]=p-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if("ZYX"===e.order){const h=s*u,f=s*d,m=a*u,p=a*d;t[0]=l*u,t[4]=m*c-f,t[8]=h*c+p,t[1]=l*d,t[5]=p*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=s*l}else if("YZX"===e.order){const h=s*l,f=s*c,m=a*l,p=a*c;t[0]=l*u,t[4]=p-h*d,t[8]=m*d+f,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+m,t[10]=h-p*d}else if("XZY"===e.order){const h=s*l,f=s*c,m=a*l,p=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+p,t[5]=s*u,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*u,t[10]=p*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Gve,e,jve)}lookAt(e,t,r){const i=this.elements;return qs.subVectors(e,t),0===qs.lengthSq()&&(qs.z=1),qs.normalize(),Du.crossVectors(r,qs),0===Du.lengthSq()&&(1===Math.abs(r.z)?qs.x+=1e-4:qs.z+=1e-4,qs.normalize(),Du.crossVectors(r,qs)),Du.normalize(),Pb.crossVectors(qs,Du),i[0]=Du.x,i[4]=Pb.x,i[8]=qs.x,i[1]=Du.y,i[5]=Pb.y,i[9]=qs.y,i[2]=Du.z,i[6]=Pb.z,i[10]=qs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],m=r[2],p=r[6],g=r[10],_=r[14],b=r[3],v=r[7],y=r[11],w=r[15],x=i[0],E=i[4],M=i[8],S=i[12],C=i[1],I=i[5],P=i[9],F=i[13],R=i[2],z=i[6],O=i[10],T=i[14],V=i[3],D=i[7],k=i[11],J=i[15];return o[0]=s*x+a*C+l*R+c*V,o[4]=s*E+a*I+l*z+c*D,o[8]=s*M+a*P+l*O+c*k,o[12]=s*S+a*F+l*T+c*J,o[1]=u*x+d*C+h*R+f*V,o[5]=u*E+d*I+h*z+f*D,o[9]=u*M+d*P+h*O+f*k,o[13]=u*S+d*F+h*T+f*J,o[2]=m*x+p*C+g*R+_*V,o[6]=m*E+p*I+g*z+_*D,o[10]=m*M+p*P+g*O+_*k,o[14]=m*S+p*F+g*T+_*J,o[3]=b*x+v*C+y*R+w*V,o[7]=b*E+v*I+y*z+w*D,o[11]=b*M+v*P+y*O+w*k,o[15]=b*S+v*F+y*T+w*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+o*l*d-i*c*d-o*a*h+r*c*h+i*a*f-r*l*f)+e[7]*(+t*l*f-t*c*h+o*s*h-i*s*f+i*c*u-o*l*u)+e[11]*(+t*c*d-t*a*f-o*s*d+r*s*f+o*a*u-r*c*u)+e[15]*(-i*a*u-t*l*d+t*a*h+i*s*d-r*s*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],p=e[13],g=e[14],_=e[15],b=d*g*c-p*h*c+p*l*f-a*g*f-d*l*_+a*h*_,v=m*h*c-u*g*c-m*l*f+s*g*f+u*l*_-s*h*_,y=u*p*c-m*d*c+m*a*f-s*p*f-u*a*_+s*d*_,w=m*d*l-u*p*l-m*a*h+s*p*h+u*a*g-s*d*g,x=t*b+r*v+i*y+o*w;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/x;return e[0]=b*E,e[1]=(p*h*o-d*g*o-p*i*f+r*g*f+d*i*_-r*h*_)*E,e[2]=(a*g*o-p*l*o+p*i*c-r*g*c-a*i*_+r*l*_)*E,e[3]=(d*l*o-a*h*o-d*i*c+r*h*c+a*i*f-r*l*f)*E,e[4]=v*E,e[5]=(u*g*o-m*h*o+m*i*f-t*g*f-u*i*_+t*h*_)*E,e[6]=(m*l*o-s*g*o-m*i*c+t*g*c+s*i*_-t*l*_)*E,e[7]=(s*h*o-u*l*o+u*i*c-t*h*c-s*i*f+t*l*f)*E,e[8]=y*E,e[9]=(m*d*o-u*p*o-m*r*f+t*p*f+u*r*_-t*d*_)*E,e[10]=(s*p*o-m*a*o+m*r*c-t*p*c-s*r*_+t*a*_)*E,e[11]=(u*a*o-s*d*o-u*r*c+t*d*c+s*r*f-t*a*f)*E,e[12]=w*E,e[13]=(u*p*i-m*d*i+m*r*h-t*p*h-u*r*g+t*d*g)*E,e[14]=(m*a*i-s*p*i-m*r*l+t*p*l+s*r*g-t*a*g)*E,e[15]=(s*d*i-u*a*i+u*r*l-t*d*l-s*r*h+t*a*h)*E,this}scale(e){const t=this.elements,r=e.x,i=e.y,o=e.z;return t[0]*=r,t[4]*=i,t[8]*=o,t[1]*=r,t[5]*=i,t[9]*=o,t[2]*=r,t[6]*=i,t[10]*=o,t[3]*=r,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),o=1-r,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*s,0,c*l-i*a,u*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,u=s+s,d=a+a,h=o*c,f=o*u,m=o*d,p=s*u,g=s*d,_=a*d,b=l*c,v=l*u,y=l*d,w=r.x,x=r.y,E=r.z;return i[0]=(1-(p+_))*w,i[1]=(f+y)*w,i[2]=(m-v)*w,i[3]=0,i[4]=(f-y)*x,i[5]=(1-(h+_))*x,i[6]=(g+b)*x,i[7]=0,i[8]=(m+v)*E,i[9]=(g-b)*E,i[10]=(1-(h+p))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let o=wp.set(i[0],i[1],i[2]).length();const s=wp.set(i[4],i[5],i[6]).length(),a=wp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Ka.copy(this);const c=1/o,u=1/s,d=1/a;return Ka.elements[0]*=c,Ka.elements[1]*=c,Ka.elements[2]*=c,Ka.elements[4]*=u,Ka.elements[5]*=u,Ka.elements[6]*=u,Ka.elements[8]*=d,Ka.elements[9]*=d,Ka.elements[10]*=d,t.setFromRotationMatrix(Ka),r.x=o,r.y=s,r.z=a,this}makePerspective(e,t,r,i,o,s){const a=this.elements,c=2*o/(r-i),u=(t+e)/(t-e),d=(r+i)/(r-i),h=-(s+o)/(s-o),f=-2*s*o/(s-o);return a[0]=2*o/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,o,s){const a=this.elements,l=1/(t-e),c=1/(r-i),u=1/(s-o),d=(t+e)*l,h=(r+i)*c,f=(s+o)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const wp=new q,Ka=new Sn,Gve=new q(0,0,0),jve=new q(1,1,1),Du=new q,Pb=new q,qs=new q,KV=new Sn,QV=new as;let Wve=(()=>{class n{constructor(t=0,r=0,i=0,o=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=r,this._z=i,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,i,o=this._order){return this._x=t,this._y=r,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,i=!0){const o=t.elements,s=o[0],a=o[4],l=o[8],c=o[1],u=o[5],d=o[9],h=o[2],f=o[6],m=o[10];switch(r){case"XYZ":this._y=Math.asin(Pi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Pi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Pi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Pi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Pi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-Pi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,r,i){return KV.makeRotationFromQuaternion(t),this.setFromRotationMatrix(KV,r,i)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return QV.setFromEuler(this),this.setFromQuaternion(QV,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class wE{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let qve=0;const JV=new q,Mp=new as,Ic=new Sn,Ob=new q,dv=new q,$ve=new q,Xve=new as,ez=new q(1,0,0),tz=new q(0,1,0),nz=new q(0,0,1),Yve={type:"added"},rz={type:"removed"};let $s=(()=>{class n extends Gd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qve++}),this.uuid=Ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new q,r=new Wve,i=new as,o=new q(1,1,1);r._onChange(function s(){i.setFromEuler(r,!1)}),i._onChange(function a(){r.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Sn},normalMatrix:{value:new io}}),this.matrix=new Sn,this.matrixWorld=new Sn,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new wE,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return Mp.setFromAxisAngle(t,r),this.quaternion.multiply(Mp),this}rotateOnWorldAxis(t,r){return Mp.setFromAxisAngle(t,r),this.quaternion.premultiply(Mp),this}rotateX(t){return this.rotateOnAxis(ez,t)}rotateY(t){return this.rotateOnAxis(tz,t)}rotateZ(t){return this.rotateOnAxis(nz,t)}translateOnAxis(t,r){return JV.copy(t).applyQuaternion(this.quaternion),this.position.add(JV.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(ez,t)}translateY(t){return this.translateOnAxis(tz,t)}translateZ(t){return this.translateOnAxis(nz,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ic.copy(this.matrixWorld).invert())}lookAt(t,r,i){t.isVector3?Ob.copy(t):Ob.set(t,r,i);const o=this.parent;this.updateWorldMatrix(!0,!1),dv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ic.lookAt(dv,Ob,this.up):Ic.lookAt(Ob,dv,this.up),this.quaternion.setFromRotationMatrix(Ic),o&&(Ic.extractRotation(o.matrixWorld),Mp.setFromRotationMatrix(Ic),this.quaternion.premultiply(Mp.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yve)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(rz)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const r=this.children[t];r.parent=null,r.dispatchEvent(rz)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ic.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ic.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ic),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let i=0,o=this.children.length;i<o;i++){const a=this.children[i].getObjectByProperty(t,r);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dv,t,$ve),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dv,Xve,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverseVisible(t)}traverseAncestors(t){const r=this.parent;null!==r&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let i=0,o=r.length;i<o;i++){const s=r[i];(!0===s.matrixWorldAutoUpdate||!0===t)&&s.updateMatrixWorld(t)}}updateWorldMatrix(t,r){const i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===r){const o=this.children;for(let s=0,a=o.length;s<a;s++){const l=o[s];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const r=void 0===t||"string"==typeof t,i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};function s(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)s(t.shapes,c[u]);else s(t.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(t.materials,this.material[c]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++)o.animations.push(s(t.animations,this.animations[l]))}if(r){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),m=a(t.animations),p=a(t.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),m.length>0&&(i.animations=m),p.length>0&&(i.nodes=p)}return i.object=o,i;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===r)for(let i=0;i<t.children.length;i++)this.add(t.children[i].clone());return this}}return n.DefaultUp=new q(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const Qa=new q,Pc=new q,ME=new q,Oc=new q,Cp=new q,Sp=new q,iz=new q,CE=new q,SE=new q,EE=new q;class Ja{constructor(e=new q,t=new q,r=new q){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Qa.subVectors(e,t),i.cross(Qa);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,r,i,o){Qa.subVectors(i,t),Pc.subVectors(r,t),ME.subVectors(e,t);const s=Qa.dot(Qa),a=Qa.dot(Pc),l=Qa.dot(ME),c=Pc.dot(Pc),u=Pc.dot(ME),d=s*c-a*a;if(0===d)return o.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,m=(s*u-a*l)*h;return o.set(1-f-m,m,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Oc),Oc.x>=0&&Oc.y>=0&&Oc.x+Oc.y<=1}static getUV(e,t,r,i,o,s,a,l){return this.getBarycoord(e,t,r,i,Oc),l.set(0,0),l.addScaledVector(o,Oc.x),l.addScaledVector(s,Oc.y),l.addScaledVector(a,Oc.z),l}static isFrontFacing(e,t,r,i){return Qa.subVectors(r,t),Pc.subVectors(e,t),Qa.cross(Pc).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qa.subVectors(this.c,this.b),Pc.subVectors(this.a,this.b),.5*Qa.cross(Pc).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ja.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ja.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,o){return Ja.getUV(e,this.a,this.b,this.c,t,r,i,o)}containsPoint(e){return Ja.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ja.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,o=this.c;let s,a;Cp.subVectors(i,r),Sp.subVectors(o,r),CE.subVectors(e,r);const l=Cp.dot(CE),c=Sp.dot(CE);if(l<=0&&c<=0)return t.copy(r);SE.subVectors(e,i);const u=Cp.dot(SE),d=Sp.dot(SE);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return s=l/(l-u),t.copy(r).addScaledVector(Cp,s);EE.subVectors(e,o);const f=Cp.dot(EE),m=Sp.dot(EE);if(m>=0&&f<=m)return t.copy(o);const p=f*c-l*m;if(p<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(r).addScaledVector(Sp,a);const g=u*m-f*d;if(g<=0&&d-u>=0&&f-m>=0)return iz.subVectors(o,i),a=(d-u)/(d-u+(f-m)),t.copy(i).addScaledVector(iz,a);const _=1/(g+p+h);return s=p*_,a=h*_,t.copy(r).addScaledVector(Cp,s).addScaledVector(Sp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Zve=0;class Zd extends Gd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zve++}),this.uuid=Ws(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const i=t.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Nc extends Zd{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hi=new q,Nb=new Je;class so{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Nb.fromBufferAttribute(this,t),Nb.applyMatrix3(e),this.setXY(t,Nb.x,Nb.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)Hi.fromBufferAttribute(this,t),Hi.applyMatrix3(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Hi.fromBufferAttribute(this,t),Hi.applyMatrix4(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Hi.fromBufferAttribute(this,t),Hi.applyNormalMatrix(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Hi.fromBufferAttribute(this,t),Hi.transformDirection(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Dc(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Dc(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Dc(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Dc(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Yr(t,this.array),r=Yr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Yr(t,this.array),r=Yr(r,this.array),i=Yr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=Yr(t,this.array),r=Yr(r,this.array),i=Yr(i,this.array),o=Yr(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class oz extends so{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class sz extends so{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Yt extends so{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Kve=0;const _a=new Sn,DE=new $s,Ep=new q,Xs=new vp,hv=new vp,go=new q;class Jn extends Gd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Kve++}),this.uuid=Ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(qV(e)?sz:oz)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const o=(new io).getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return _a.makeRotationFromQuaternion(e),this.applyMatrix4(_a),this}rotateX(e){return _a.makeRotationX(e),this.applyMatrix4(_a),this}rotateY(e){return _a.makeRotationY(e),this.applyMatrix4(_a),this}rotateZ(e){return _a.makeRotationZ(e),this.applyMatrix4(_a),this}translate(e,t,r){return _a.makeTranslation(e,t,r),this.applyMatrix4(_a),this}scale(e,t,r){return _a.makeScale(e,t,r),this.applyMatrix4(_a),this}lookAt(e){return DE.lookAt(e),DE.updateMatrix(),this.applyMatrix4(DE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ep).negate(),this.translate(Ep.x,Ep.y,Ep.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Yt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new vp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++)Xs.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(go.addVectors(this.boundingBox.min,Xs.min),this.boundingBox.expandByPoint(go),go.addVectors(this.boundingBox.max,Xs.max),this.boundingBox.expandByPoint(go)):(this.boundingBox.expandByPoint(Xs.min),this.boundingBox.expandByPoint(Xs.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new xp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new q,1/0);if(e){const r=this.boundingSphere.center;if(Xs.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++)hv.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(go.addVectors(Xs.min,hv.min),Xs.expandByPoint(go),go.addVectors(Xs.max,hv.max),Xs.expandByPoint(go)):(Xs.expandByPoint(hv.min),Xs.expandByPoint(hv.max));Xs.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)go.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(go));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)go.fromBufferAttribute(a,c),l&&(Ep.fromBufferAttribute(e,c),go.add(Ep)),i=Math.max(i,r.distanceToSquared(go))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,i=t.position.array,o=t.normal.array,s=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new so(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let C=0;C<a;C++)c[C]=new q,u[C]=new q;const d=new q,h=new q,f=new q,m=new Je,p=new Je,g=new Je,_=new q,b=new q;function v(C,I,P){d.fromArray(i,3*C),h.fromArray(i,3*I),f.fromArray(i,3*P),m.fromArray(s,2*C),p.fromArray(s,2*I),g.fromArray(s,2*P),h.sub(d),f.sub(d),p.sub(m),g.sub(m);const F=1/(p.x*g.y-g.x*p.y);!isFinite(F)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(F),b.copy(f).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(F),c[C].add(_),c[I].add(_),c[P].add(_),u[C].add(b),u[I].add(b),u[P].add(b))}let y=this.groups;0===y.length&&(y=[{start:0,count:r.length}]);for(let C=0,I=y.length;C<I;++C){const P=y[C],F=P.start;for(let z=F,O=F+P.count;z<O;z+=3)v(r[z+0],r[z+1],r[z+2])}const w=new q,x=new q,E=new q,M=new q;function S(C){E.fromArray(o,3*C),M.copy(E);const I=c[C];w.copy(I),w.sub(E.multiplyScalar(E.dot(I))).normalize(),x.crossVectors(M,I);const F=x.dot(u[C])<0?-1:1;l[4*C]=w.x,l[4*C+1]=w.y,l[4*C+2]=w.z,l[4*C+3]=F}for(let C=0,I=y.length;C<I;++C){const P=y[C],F=P.start;for(let z=F,O=F+P.count;z<O;z+=3)S(r[z+0]),S(r[z+1]),S(r[z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new so(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new q,o=new q,s=new q,a=new q,l=new q,c=new q,u=new q,d=new q;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),p=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,p),c.fromBufferAttribute(r,g),a.add(u),l.add(u),c.add(u),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(p,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)go.fromBufferAttribute(e,t),go.normalize(),e.setXYZ(t,go.x,go.y,go.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let p=0,g=l.length;p<g;p++){f=a.isInterleavedBufferAttribute?l[p]*a.data.stride+a.offset:l[p]*u;for(let _=0;_<u;_++)h[m++]=c[f++]}return new so(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jn,r=this.index.array,i=this.attributes;for(const a in i){const c=e(i[a],r);t.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r)e.data.attributes[l]=r[l].toJSON(e.data);const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i)this.setAttribute(c,i[c].clone(t));const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const az=new Sn,Dp=new Ib,AE=new xp,Au=new q,Tu=new q,Iu=new q,TE=new q,IE=new q,PE=new q,Rb=new q,Fb=new q,kb=new q,Lb=new Je,Bb=new Je,Vb=new Je,OE=new q,zb=new q;class _r extends $s{constructor(e=new Jn,t=new Nc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}raycast(e,t){const r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0===i||(null===r.boundingSphere&&r.computeBoundingSphere(),AE.copy(r.boundingSphere),AE.applyMatrix4(o),!1===e.ray.intersectsSphere(AE))||(az.copy(o).invert(),Dp.copy(e.ray).applyMatrix4(az),null!==r.boundingBox&&!1===Dp.intersectsBox(r.boundingBox)))return;let s;const a=r.index,l=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,d=r.attributes.uv,h=r.attributes.uv2,f=r.groups,m=r.drawRange;if(null!==a)if(Array.isArray(i))for(let p=0,g=f.length;p<g;p++){const _=f[p],b=i[_.materialIndex];for(let w=Math.max(_.start,m.start),x=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));w<x;w+=3){const E=a.getX(w),M=a.getX(w+1),S=a.getX(w+2);s=Ub(this,b,e,Dp,l,c,u,d,h,E,M,S),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else for(let _=Math.max(0,m.start),b=Math.min(a.count,m.start+m.count);_<b;_+=3){const v=a.getX(_),y=a.getX(_+1),w=a.getX(_+2);s=Ub(this,i,e,Dp,l,c,u,d,h,v,y,w),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}else if(void 0!==l)if(Array.isArray(i))for(let p=0,g=f.length;p<g;p++){const _=f[p],b=i[_.materialIndex];for(let w=Math.max(_.start,m.start),x=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));w<x;w+=3)s=Ub(this,b,e,Dp,l,c,u,d,h,w,w+1,w+2),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=_.materialIndex,t.push(s))}else for(let _=Math.max(0,m.start),b=Math.min(l.count,m.start+m.count);_<b;_+=3)s=Ub(this,i,e,Dp,l,c,u,d,h,_,_+1,_+2),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}function Ub(n,e,t,r,i,o,s,a,l,c,u,d){Au.fromBufferAttribute(i,c),Tu.fromBufferAttribute(i,u),Iu.fromBufferAttribute(i,d);const h=n.morphTargetInfluences;if(o&&h){Rb.set(0,0,0),Fb.set(0,0,0),kb.set(0,0,0);for(let m=0,p=o.length;m<p;m++){const g=h[m],_=o[m];0!==g&&(TE.fromBufferAttribute(_,c),IE.fromBufferAttribute(_,u),PE.fromBufferAttribute(_,d),s?(Rb.addScaledVector(TE,g),Fb.addScaledVector(IE,g),kb.addScaledVector(PE,g)):(Rb.addScaledVector(TE.sub(Au),g),Fb.addScaledVector(IE.sub(Tu),g),kb.addScaledVector(PE.sub(Iu),g)))}Au.add(Rb),Tu.add(Fb),Iu.add(kb)}n.isSkinnedMesh&&(n.boneTransform(c,Au),n.boneTransform(u,Tu),n.boneTransform(d,Iu));const f=function Qve(n,e,t,r,i,o,s,a){let l;if(l=1===e.side?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,2!==e.side,a),null===l)return null;zb.copy(a),zb.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(zb);return c<t.near||c>t.far?null:{distance:c,point:zb.clone(),object:n}}(n,e,t,r,Au,Tu,Iu,OE);if(f){a&&(Lb.fromBufferAttribute(a,c),Bb.fromBufferAttribute(a,u),Vb.fromBufferAttribute(a,d),f.uv=Ja.getUV(OE,Au,Tu,Iu,Lb,Bb,Vb,new Je)),l&&(Lb.fromBufferAttribute(l,c),Bb.fromBufferAttribute(l,u),Vb.fromBufferAttribute(l,d),f.uv2=Ja.getUV(OE,Au,Tu,Iu,Lb,Bb,Vb,new Je));const m={a:c,b:u,c:d,normal:new q,materialIndex:0};Ja.getNormal(Au,Tu,Iu,m.normal),f.face=m}return f}class Pu extends Jn{constructor(e=1,t=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let h=0,f=0;function m(p,g,_,b,v,y,w,x,E,M,S){const C=y/E,I=w/M,P=y/2,F=w/2,R=x/2,z=E+1,O=M+1;let T=0,V=0;const D=new q;for(let k=0;k<O;k++){const J=k*I-F;for(let ce=0;ce<z;ce++)D[p]=(ce*C-P)*b,D[g]=J*v,D[_]=R,c.push(D.x,D.y,D.z),D[p]=0,D[g]=0,D[_]=x>0?1:-1,u.push(D.x,D.y,D.z),d.push(ce/E),d.push(1-k/M),T+=1}for(let k=0;k<M;k++)for(let J=0;J<E;J++){const X=h+J+z*(k+1),re=h+(J+1)+z*(k+1),Ee=h+(J+1)+z*k;l.push(h+J+z*k,X,Ee),l.push(X,re,Ee),V+=6}a.addGroup(f,V,S),f+=V,h+=T}m("z","y","x",-1,-1,r,t,e,s,o,0),m("z","y","x",1,-1,r,t,-e,s,o,1),m("x","z","y",1,1,e,r,t,i,s,2),m("x","z","y",1,-1,e,r,-t,i,s,3),m("x","y","z",1,-1,e,t,r,i,o,4),m("x","y","z",-1,-1,e,t,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Yt(c,3)),this.setAttribute("normal",new Yt(u,3)),this.setAttribute("uv",new Yt(d,2))}static fromJSON(e){return new Pu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ap(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];e[t][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}}return e}function ls(n){const e={};for(let t=0;t<n.length;t++){const r=Ap(n[t]);for(const i in r)e[i]=r[i]}return e}const e0e={clone:Ap,merge:ls};class Ou extends Zd{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ap(e.uniforms),this.uniformsGroups=function Jve(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;t.uniforms[i]=s&&s.isTexture?{type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)!0===this.extensions[i]&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class NE extends $s{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Sn,this.projectionMatrix=new Sn,this.projectionMatrixInverse=new Sn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Oi extends NE{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*sv*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*jd*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*sv*Math.atan(Math.tan(.5*jd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,o,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*jd*this.fov)/this.zoom,r=2*t,i=this.aspect*r,o=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*i/l,t-=s.offsetY*r/c,i*=s.width/l,r*=s.height/c}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class r0e extends $s{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Oi(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new q(1,0,0)),this.add(i);const o=new Oi(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new q(-1,0,0)),this.add(o);const s=new Oi(90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new q(0,1,0)),this.add(s);const a=new Oi(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new q(0,-1,0)),this.add(a);const l=new Oi(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new q(0,0,1)),this.add(l);const c=new Oi(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new q(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[i,o,s,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class Hb extends Mu{constructor(e,t,r,i,o,s,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,i,o,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class i0e extends qd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1};this.texture=new Hb([r,r,r,r,r,r],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ui}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Pu(5,5,5),o=new Ou({name:"CubemapFromEquirect",uniforms:Ap(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new _r(i,o),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=Ui),new r0e(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(o)}}const RE=new q,o0e=new q,s0e=new io;class ya{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=RE.subVectors(r,t).cross(o0e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(RE),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(r).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||s0e.getNormalMatrix(e),i=this.coplanarPoint(RE).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Pp=new xp,Gb=new q;class FE{constructor(e=new ya,t=new ya,r=new ya,i=new ya,o=new ya,s=new ya){this.planes=[e,t,r,i,o,s]}set(e,t,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],m=r[10],p=r[11],g=r[12],_=r[13],b=r[14],v=r[15];return t[0].setComponents(a-i,d-l,p-h,v-g).normalize(),t[1].setComponents(a+i,d+l,p+h,v+g).normalize(),t[2].setComponents(a+o,d+c,p+f,v+_).normalize(),t[3].setComponents(a-o,d-c,p-f,v-_).normalize(),t[4].setComponents(a-s,d-u,p-m,v-b).normalize(),t[5].setComponents(a+s,d+u,p+m,v+b).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Pp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Pp)}intersectsSprite(e){return Pp.center.set(0,0,0),Pp.radius=.7071067811865476,Pp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Pp)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Gb.x=i.normal.x>0?e.max.x:e.min.x,Gb.y=i.normal.y>0?e.max.y:e.min.y,Gb.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Gb)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function lz(){let n=null,e=!1,t=null,r=null;function i(o,s){t(o,s),r=n.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function a0e(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);return void((!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);void 0===d?r.set(c,function i(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let m;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)m=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");m=5131}else m=5123;else if(d instanceof Int16Array)m=5122;else if(d instanceof Uint32Array)m=5125;else if(d instanceof Int32Array)m=5124;else if(d instanceof Int8Array)m=5120;else if(d instanceof Uint8Array)m=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);m=5121}return{buffer:f,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function o(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class Kd extends Jn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const o=e/2,s=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,h=t/l,f=[],m=[],p=[],g=[];for(let _=0;_<u;_++){const b=_*h-s;for(let v=0;v<c;v++)m.push(v*d-o,-b,0),p.push(0,0,1),g.push(v/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let b=0;b<a;b++){const y=b+c*(_+1),w=b+1+c*(_+1),x=b+1+c*_;f.push(b+c*_,y,x),f.push(y,w,x)}this.setIndex(f),this.setAttribute("position",new Yt(m,3)),this.setAttribute("normal",new Yt(p,3)),this.setAttribute("uv",new Yt(g,2))}static fromJSON(e){return new Kd(e.width,e.height,e.widthSegments,e.heightSegments)}}const Hn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Lt={common:{diffuse:{value:new jt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new io},uv2Transform:{value:new io},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new io}},sprite:{diffuse:{value:new jt(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new io}}},Rl={basic:{uniforms:ls([Lt.common,Lt.specularmap,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.fog]),vertexShader:Hn.meshbasic_vert,fragmentShader:Hn.meshbasic_frag},lambert:{uniforms:ls([Lt.common,Lt.specularmap,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.fog,Lt.lights,{emissive:{value:new jt(0)}}]),vertexShader:Hn.meshlambert_vert,fragmentShader:Hn.meshlambert_frag},phong:{uniforms:ls([Lt.common,Lt.specularmap,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.fog,Lt.lights,{emissive:{value:new jt(0)},specular:{value:new jt(1118481)},shininess:{value:30}}]),vertexShader:Hn.meshphong_vert,fragmentShader:Hn.meshphong_frag},standard:{uniforms:ls([Lt.common,Lt.envmap,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.roughnessmap,Lt.metalnessmap,Lt.fog,Lt.lights,{emissive:{value:new jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag},toon:{uniforms:ls([Lt.common,Lt.aomap,Lt.lightmap,Lt.emissivemap,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.gradientmap,Lt.fog,Lt.lights,{emissive:{value:new jt(0)}}]),vertexShader:Hn.meshtoon_vert,fragmentShader:Hn.meshtoon_frag},matcap:{uniforms:ls([Lt.common,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,Lt.fog,{matcap:{value:null}}]),vertexShader:Hn.meshmatcap_vert,fragmentShader:Hn.meshmatcap_frag},points:{uniforms:ls([Lt.points,Lt.fog]),vertexShader:Hn.points_vert,fragmentShader:Hn.points_frag},dashed:{uniforms:ls([Lt.common,Lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hn.linedashed_vert,fragmentShader:Hn.linedashed_frag},depth:{uniforms:ls([Lt.common,Lt.displacementmap]),vertexShader:Hn.depth_vert,fragmentShader:Hn.depth_frag},normal:{uniforms:ls([Lt.common,Lt.bumpmap,Lt.normalmap,Lt.displacementmap,{opacity:{value:1}}]),vertexShader:Hn.meshnormal_vert,fragmentShader:Hn.meshnormal_frag},sprite:{uniforms:ls([Lt.sprite,Lt.fog]),vertexShader:Hn.sprite_vert,fragmentShader:Hn.sprite_frag},background:{uniforms:{uvTransform:{value:new io},t2D:{value:null}},vertexShader:Hn.background_vert,fragmentShader:Hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Hn.backgroundCube_vert,fragmentShader:Hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hn.cube_vert,fragmentShader:Hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hn.equirect_vert,fragmentShader:Hn.equirect_frag},distanceRGBA:{uniforms:ls([Lt.common,Lt.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hn.distanceRGBA_vert,fragmentShader:Hn.distanceRGBA_frag},shadow:{uniforms:ls([Lt.lights,Lt.fog,{color:{value:new jt(0)},opacity:{value:1}}]),vertexShader:Hn.shadow_vert,fragmentShader:Hn.shadow_frag}};function sye(n,e,t,r,i,o,s){const a=new jt(0);let c,u,l=!0===o?0:1,d=null,h=0,f=null;function p(g,_){r.buffers.color.setClear(g.r,g.g,g.b,_,s)}return{getClearColor:function(){return a},setClearColor:function(g,_=1){a.set(g),l=_,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,p(a,l)},render:function m(g,_){let b=!1,v=!0===_.isScene?_.background:null;v&&v.isTexture&&(v=(_.backgroundBlurriness>0?t:e).get(v));const y=n.xr,w=y.getSession&&y.getSession();w&&"additive"===w.environmentBlendMode&&(v=null),null===v?p(a,l):v&&v.isColor&&(p(v,1),b=!0),(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===u&&(u=new _r(new Pu(1,1,1),new Ou({name:"BackgroundCubeMaterial",uniforms:Ap(Rl.backgroundCube.uniforms),vertexShader:Rl.backgroundCube.vertexShader,fragmentShader:Rl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,E,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,(d!==v||h!==v.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(void 0===c&&(c=new _r(new Kd(2,2),new Ou({name:"BackgroundMaterial",uniforms:Ap(Rl.background.uniforms),vertexShader:Rl.background.vertexShader,fragmentShader:Rl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),c.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||h!==v.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}}}function aye(n,e,t,r){const i=n.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=g(null);let c=l,u=!1;function f(R){return r.isWebGL2?n.bindVertexArray(R):o.bindVertexArrayOES(R)}function m(R){return r.isWebGL2?n.deleteVertexArray(R):o.deleteVertexArrayOES(R)}function g(R){const z=[],O=[],T=[];for(let V=0;V<i;V++)z[V]=0,O[V]=0,T[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:O,attributeDivisors:T,object:R,attributes:{},index:null}}function v(){const R=c.newAttributes;for(let z=0,O=R.length;z<O;z++)R[z]=0}function y(R){w(R,0)}function w(R,z){const T=c.enabledAttributes,V=c.attributeDivisors;c.newAttributes[R]=1,0===T[R]&&(n.enableVertexAttribArray(R),T[R]=1),V[R]!==z&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](R,z),V[R]=z)}function x(){const R=c.newAttributes,z=c.enabledAttributes;for(let O=0,T=z.length;O<T;O++)z[O]!==R[O]&&(n.disableVertexAttribArray(O),z[O]=0)}function E(R,z,O,T,V,D){!0!==r.isWebGL2||5124!==O&&5125!==O?n.vertexAttribPointer(R,z,O,T,V,D):n.vertexAttribIPointer(R,z,O,V,D)}function P(){F(),u=!0,c!==l&&(c=l,f(c.object))}function F(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(R,z,O,T,V){let D=!1;if(s){const k=function p(R,z,O){const T=!0===O.wireframe;let V=a[R.id];void 0===V&&(V={},a[R.id]=V);let D=V[z.id];void 0===D&&(D={},V[z.id]=D);let k=D[T];return void 0===k&&(k=g(function h(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}()),D[T]=k),k}(T,O,z);c!==k&&(c=k,f(c.object)),D=function _(R,z,O,T){const V=c.attributes,D=z.attributes;let k=0;const J=O.getAttributes();for(const ce in J)if(J[ce].location>=0){const re=V[ce];let Ee=D[ce];if(void 0===Ee&&("instanceMatrix"===ce&&R.instanceMatrix&&(Ee=R.instanceMatrix),"instanceColor"===ce&&R.instanceColor&&(Ee=R.instanceColor)),void 0===re||re.attribute!==Ee||Ee&&re.data!==Ee.data)return!0;k++}return c.attributesNum!==k||c.index!==T}(R,T,O,V),D&&function b(R,z,O,T){const V={},D=z.attributes;let k=0;const J=O.getAttributes();for(const ce in J)if(J[ce].location>=0){let re=D[ce];void 0===re&&("instanceMatrix"===ce&&R.instanceMatrix&&(re=R.instanceMatrix),"instanceColor"===ce&&R.instanceColor&&(re=R.instanceColor));const Ee={};Ee.attribute=re,re&&re.data&&(Ee.data=re.data),V[ce]=Ee,k++}c.attributes=V,c.attributesNum=k,c.index=T}(R,T,O,V)}else{const k=!0===z.wireframe;(c.geometry!==T.id||c.program!==O.id||c.wireframe!==k)&&(c.geometry=T.id,c.program=O.id,c.wireframe=k,D=!0)}null!==V&&t.update(V,34963),(D||u)&&(u=!1,function M(R,z,O,T){if(!1===r.isWebGL2&&(R.isInstancedMesh||T.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;v();const V=T.attributes,D=O.getAttributes(),k=z.defaultAttributeValues;for(const J in D){const ce=D[J];if(ce.location>=0){let X=V[J];if(void 0===X&&("instanceMatrix"===J&&R.instanceMatrix&&(X=R.instanceMatrix),"instanceColor"===J&&R.instanceColor&&(X=R.instanceColor)),void 0!==X){const re=X.normalized,Ee=X.itemSize,ie=t.get(X);if(void 0===ie)continue;const Ae=ie.buffer,Fe=ie.type,He=ie.bytesPerElement;if(X.isInterleavedBufferAttribute){const me=X.data,mt=me.stride,De=X.offset;if(me.isInstancedInterleavedBuffer){for(let ve=0;ve<ce.locationSize;ve++)w(ce.location+ve,me.meshPerAttribute);!0!==R.isInstancedMesh&&void 0===T._maxInstanceCount&&(T._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let ve=0;ve<ce.locationSize;ve++)y(ce.location+ve);n.bindBuffer(34962,Ae);for(let ve=0;ve<ce.locationSize;ve++)E(ce.location+ve,Ee/ce.locationSize,Fe,re,mt*He,(De+Ee/ce.locationSize*ve)*He)}else{if(X.isInstancedBufferAttribute){for(let me=0;me<ce.locationSize;me++)w(ce.location+me,X.meshPerAttribute);!0!==R.isInstancedMesh&&void 0===T._maxInstanceCount&&(T._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let me=0;me<ce.locationSize;me++)y(ce.location+me);n.bindBuffer(34962,Ae);for(let me=0;me<ce.locationSize;me++)E(ce.location+me,Ee/ce.locationSize,Fe,re,Ee*He,Ee/ce.locationSize*me*He)}}else if(void 0!==k){const re=k[J];if(void 0!==re)switch(re.length){case 2:n.vertexAttrib2fv(ce.location,re);break;case 3:n.vertexAttrib3fv(ce.location,re);break;case 4:n.vertexAttrib4fv(ce.location,re);break;default:n.vertexAttrib1fv(ce.location,re)}}}}x()}(R,z,O,T),null!==V&&n.bindBuffer(34963,t.get(V).buffer))},reset:P,resetDefaultState:F,dispose:function S(){P();for(const R in a){const z=a[R];for(const O in z){const T=z[O];for(const V in T)m(T[V].object),delete T[V];delete z[O]}delete a[R]}},releaseStatesOfGeometry:function C(R){if(void 0===a[R.id])return;const z=a[R.id];for(const O in z){const T=z[O];for(const V in T)m(T[V].object),delete T[V];delete z[O]}delete a[R.id]},releaseStatesOfProgram:function I(R){for(const z in a){const O=a[z];if(void 0===O[R.id])continue;const T=O[R.id];for(const V in T)m(T[V].object),delete T[V];delete O[R.id]}},initAttributes:v,enableAttribute:y,disableUnusedAttributes:x}}function lye(n,e,t,r){const i=r.isWebGL2;let o;this.setMode=function s(c){o=c},this.render=function a(c,u){n.drawArrays(o,c,u),t.update(u,o,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(i)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](o,c,u,d),t.update(u,o,d)}}function cye(n,e,t){let r;function o(E){if("highp"===E){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return"mediump"===E&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),m=n.getParameter(34076),p=n.getParameter(34921),g=n.getParameter(36347),_=n.getParameter(36348),b=n.getParameter(36349),v=h>0,y=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const E=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:b,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:s?n.getParameter(36183):0}}function uye(n){const e=this;let t=null,r=0,i=!1,o=!1;const s=new ya,a=new io,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,m){const p=null!==d?d.length:0;let g=null;if(0!==p){if(g=l.value,!0!==m||null===g){const _=f+4*p,b=h.matrixWorldInverse;a.getNormalMatrix(b),(null===g||g.length<_)&&(g=new Float32Array(_));for(let v=0,y=f;v!==p;++v,y+=4)s.copy(d[v]).applyMatrix4(b,a),s.normal.toArray(g,y),g[y+3]=s.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const m=0!==d.length||h||0!==r||i;return i=h,t=u(d,f,0),r=d.length,m},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(d,h,f){const m=d.clippingPlanes,p=d.clipIntersection,g=d.clipShadows,_=n.get(d);if(!i||null===m||0===m.length||o&&!g)o?u(null):c();else{const b=o?0:r,v=4*b;let y=_.clippingState||null;l.value=y,y=u(m,h,v,f);for(let w=0;w!==v;++w)y[w]=t[w];_.clippingState=y,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=b}}}function dye(n){let e=new WeakMap;function t(s,a){return 303===a?s.mapping=301:304===a&&(s.mapping=302),s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function r(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){const a=s.mapping;if(303===a||304===a){if(e.has(s))return t(e.get(s).texture,s.mapping);{const l=s.image;if(l&&l.height>0){const c=new i0e(l.height/2);return c.fromEquirectangularTexture(n,s),e.set(s,c),s.addEventListener("dispose",i),t(c.texture,s.mapping)}return null}}}return s},dispose:function o(){e=new WeakMap}}}Rl.physical={uniforms:ls([Rl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Je(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new jt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new jt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new jt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag};class kE extends NE{constructor(e=-1,t=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+t,l=i-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const cz=[.125,.215,.35,.446,.526,.582],LE=new kE,uz=new jt;let BE=null;const Jd=(1+Math.sqrt(5))/2,Np=1/Jd,dz=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,Jd,Np),new q(0,Jd,-Np),new q(Np,0,Jd),new q(-Np,0,Jd),new q(Jd,Np,0),new q(-Jd,Np,0)];class hz{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){BE=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=mz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=pz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(BE),e.scissorTest=!1,jb(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),BE=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Ui,minFilter:Ui,generateMipmaps:!1,type:ov,format:va,encoding:zd,depthBuffer:!1},i=fz(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=fz(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function hye(n){const e=[],t=[],r=[];let i=n;const o=n-4+1+cz.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);t.push(a);let l=1/a;s>n-4?l=cz[s-n+4-1]:0===s&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,p=3,g=2,_=1,b=new Float32Array(p*m*f),v=new Float32Array(g*m*f),y=new Float32Array(_*m*f);for(let x=0;x<f;x++){const E=x%3*2/3-1,M=x>2?0:-1;b.set([E,M,0,E+2/3,M,0,E+2/3,M+1,0,E,M,0,E+2/3,M+1,0,E,M+1,0],p*m*x),v.set(h,g*m*x),y.set([x,x,x,x,x,x],_*m*x)}const w=new Jn;w.setAttribute("position",new so(b,p)),w.setAttribute("uv",new so(v,g)),w.setAttribute("faceIndex",new so(y,_)),e.push(w),i>4&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(o)),this._blurMaterial=function fye(n,e,t){const r=new Float32Array(20),i=new q(0,1,0);return new Ou({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,e,t)}return i}_compileMaterial(e){const t=new _r(this._lodPlanes[0],e);this._renderer.compile(t,LE)}_sceneToCubeUV(e,t,r,i){const a=new Oi(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(uz),u.toneMapping=0,u.autoClear=!1;const f=new Nc({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),m=new _r(new Pu,f);let p=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,p=!0):(f.color.copy(uz),p=!0);for(let _=0;_<6;_++){const b=_%3;0===b?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===b?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const v=this._cubeSize;jb(i,b*v,_>2?v:0,v,v),u.setRenderTarget(i),p&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=g}_textureToCubeUV(e,t){const r=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=mz()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=pz());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new _r(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const l=this._cubeSize;jb(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,LE)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,o,dz[(i-1)%dz.length])}t.autoClear=r}_blur(e,t,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,t,r,i,o,s,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new _r(this._lodPlanes[i],c),h=c.uniforms,f=this._sizeLods[r]-1,m=isFinite(o)?Math.PI/(2*f):2*Math.PI/39,p=o/m,g=isFinite(o)?1+Math.floor(3*p):20;g>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let b=0;for(let E=0;E<20;++E){const M=E/p,S=Math.exp(-M*M/2);_.push(S),0===E?b+=S:E<g&&(b+=2*S)}for(let E=0;E<_.length;E++)_[E]=_[E]/b;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=m,h.mipInt.value=v-r;const y=this._sizeLods[i];jb(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),l.setRenderTarget(t),l.render(d,LE)}}function fz(n,e,t){const r=new qd(n,e,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function jb(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function pz(){return new Ou({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function mz(){return new Ou({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function pye(n){let e=new WeakMap,t=null;function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function r(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new hz(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function i(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new hz(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",o),h.texture}return null}}}return a},dispose:function s(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function mye(n){const e={};function t(r){if(void 0!==e[r])return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function gye(n,e,t,r){const i={},o=new WeakMap;function s(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",s),delete i[h.id];const f=o.get(h);f&&(e.remove(f),o.delete(h)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,m=d.attributes.position;let p=0;if(null!==f){const b=f.array;p=f.version;for(let v=0,y=b.length;v<y;v+=3){const w=b[v+0],x=b[v+1],E=b[v+2];h.push(w,x,x,E,E,w)}}else{p=m.version;for(let v=0,y=m.array.length/3-1;v<y;v+=3){const w=v+0,x=v+1,E=v+2;h.push(w,x,x,E,E,w)}}const g=new(qV(h)?sz:oz)(h,1);g.version=p;const _=o.get(d);_&&e.remove(_),o.set(d,g)}return{get:function a(d,h){return!0===i[h.id]||(h.addEventListener("dispose",s),i[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const m in h)e.update(h[m],34962);const f=d.morphAttributes;for(const m in f){const p=f[m];for(let g=0,_=p.length;g<_;g++)e.update(p[g],34962)}},getWireframeAttribute:function u(d){const h=o.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return o.get(d)}}}function vye(n,e,t,r){const i=r.isWebGL2;let o,a,l;this.setMode=function s(h){o=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(o,f,a,h*l),t.update(f,o,1)},this.renderInstances=function d(h,f,m){if(0===m)return;let p,g;if(i)p=n,g="drawElementsInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===p)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](o,f,a,h*l,m),t.update(f,o,m)}}function _ye(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(o,s,a){switch(t.calls++,s){case 4:t.triangles+=a*(o/3);break;case 1:t.lines+=a*(o/2);break;case 3:t.lines+=a*(o-1);break;case 2:t.lines+=a*o;break;case 0:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function yye(n,e){return n[0]-e[0]}function bye(n,e){return Math.abs(e[1])-Math.abs(n[1])}function xye(n,e,t){const r={},i=new Float32Array(8),o=new WeakMap,s=new Gr,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==m?m.length:0;let g=o.get(u);if(void 0===g||g.count!==p){let z=function(){F.dispose(),o.delete(u),u.removeEventListener("dispose",z)};void 0!==g&&g.texture.dispose();const v=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,w=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],E=u.morphAttributes.normal||[],M=u.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===w&&(S=3);let C=u.attributes.position.count*S,I=1;C>e.maxTextureSize&&(I=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const P=new Float32Array(C*I*4*p),F=new pE(P,C,I,p);F.type=wu,F.needsUpdate=!0;const R=4*S;for(let O=0;O<p;O++){const T=x[O],V=E[O],D=M[O],k=C*I*4*O;for(let J=0;J<T.count;J++){const ce=J*R;!0===v&&(s.fromBufferAttribute(T,J),P[k+ce+0]=s.x,P[k+ce+1]=s.y,P[k+ce+2]=s.z,P[k+ce+3]=0),!0===y&&(s.fromBufferAttribute(V,J),P[k+ce+4]=s.x,P[k+ce+5]=s.y,P[k+ce+6]=s.z,P[k+ce+7]=0),!0===w&&(s.fromBufferAttribute(D,J),P[k+ce+8]=s.x,P[k+ce+9]=s.y,P[k+ce+10]=s.z,P[k+ce+11]=4===D.itemSize?s.w:1)}}g={count:p,texture:F,size:new Je(C,I)},o.set(u,g),u.addEventListener("dispose",z)}let _=0;for(let v=0;v<f.length;v++)_+=f[v];const b=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",b),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const m=void 0===f?0:f.length;let p=r[u.id];if(void 0===p||p.length!==m){p=[];for(let y=0;y<m;y++)p[y]=[y,0];r[u.id]=p}for(let y=0;y<m;y++){const w=p[y];w[0]=y,w[1]=f[y]}p.sort(bye);for(let y=0;y<8;y++)y<m&&p[y][1]?(a[y][0]=p[y][0],a[y][1]=p[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(yye);const g=u.morphAttributes.position,_=u.morphAttributes.normal;let b=0;for(let y=0;y<8;y++){const w=a[y],x=w[0],E=w[1];x!==Number.MAX_SAFE_INTEGER&&E?(g&&u.getAttribute("morphTarget"+y)!==g[x]&&u.setAttribute("morphTarget"+y,g[x]),_&&u.getAttribute("morphNormal"+y)!==_[x]&&u.setAttribute("morphNormal"+y,_[x]),i[y]=E,b+=E):(g&&!0===u.hasAttribute("morphTarget"+y)&&u.deleteAttribute("morphTarget"+y),_&&!0===u.hasAttribute("morphNormal"+y)&&u.deleteAttribute("morphNormal"+y),i[y]=0)}const v=u.morphTargetsRelative?1:1-b;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}}}function wye(n,e,t,r){let i=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function o(l){const c=r.render.frame,d=e.get(l,l.geometry);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function s(){i=new WeakMap}}}const gz=new Mu,vz=new pE,_z=new YV,yz=new Hb,bz=[],xz=[],wz=new Float32Array(16),Mz=new Float32Array(9),Cz=new Float32Array(4);function Rp(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let o=bz[i];if(void 0===o&&(o=new Float32Array(i),bz[i]=o),0!==e){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function ao(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function lo(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Wb(n,e){let t=xz[e];void 0===t&&(t=new Int32Array(e),xz[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Mye(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Cye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ao(t,e))return;n.uniform2fv(this.addr,e),lo(t,e)}}function Sye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ao(t,e))return;n.uniform3fv(this.addr,e),lo(t,e)}}function Eye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ao(t,e))return;n.uniform4fv(this.addr,e),lo(t,e)}}function Dye(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(ao(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),lo(t,e)}else{if(ao(t,r))return;Cz.set(r),n.uniformMatrix2fv(this.addr,!1,Cz),lo(t,r)}}function Aye(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(ao(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),lo(t,e)}else{if(ao(t,r))return;Mz.set(r),n.uniformMatrix3fv(this.addr,!1,Mz),lo(t,r)}}function Tye(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(ao(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),lo(t,e)}else{if(ao(t,r))return;wz.set(r),n.uniformMatrix4fv(this.addr,!1,wz),lo(t,r)}}function Iye(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Pye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ao(t,e))return;n.uniform2iv(this.addr,e),lo(t,e)}}function Oye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ao(t,e))return;n.uniform3iv(this.addr,e),lo(t,e)}}function Nye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ao(t,e))return;n.uniform4iv(this.addr,e),lo(t,e)}}function Rye(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Fye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ao(t,e))return;n.uniform2uiv(this.addr,e),lo(t,e)}}function kye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ao(t,e))return;n.uniform3uiv(this.addr,e),lo(t,e)}}function Lye(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ao(t,e))return;n.uniform4uiv(this.addr,e),lo(t,e)}}function Bye(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||gz,i)}function Vye(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||_z,i)}function zye(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||yz,i)}function Uye(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||vz,i)}function Gye(n,e){n.uniform1fv(this.addr,e)}function jye(n,e){const t=Rp(e,this.size,2);n.uniform2fv(this.addr,t)}function Wye(n,e){const t=Rp(e,this.size,3);n.uniform3fv(this.addr,t)}function qye(n,e){const t=Rp(e,this.size,4);n.uniform4fv(this.addr,t)}function $ye(n,e){const t=Rp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Xye(n,e){const t=Rp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Yye(n,e){const t=Rp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Zye(n,e){n.uniform1iv(this.addr,e)}function Kye(n,e){n.uniform2iv(this.addr,e)}function Qye(n,e){n.uniform3iv(this.addr,e)}function Jye(n,e){n.uniform4iv(this.addr,e)}function ebe(n,e){n.uniform1uiv(this.addr,e)}function tbe(n,e){n.uniform2uiv(this.addr,e)}function nbe(n,e){n.uniform3uiv(this.addr,e)}function rbe(n,e){n.uniform4uiv(this.addr,e)}function ibe(n,e,t){const r=this.cache,i=e.length,o=Wb(t,i);ao(r,o)||(n.uniform1iv(this.addr,o),lo(r,o));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||gz,o[s])}function obe(n,e,t){const r=this.cache,i=e.length,o=Wb(t,i);ao(r,o)||(n.uniform1iv(this.addr,o),lo(r,o));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||_z,o[s])}function sbe(n,e,t){const r=this.cache,i=e.length,o=Wb(t,i);ao(r,o)||(n.uniform1iv(this.addr,o),lo(r,o));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||yz,o[s])}function abe(n,e,t){const r=this.cache,i=e.length,o=Wb(t,i);ao(r,o)||(n.uniform1iv(this.addr,o),lo(r,o));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||vz,o[s])}class cbe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=function Hye(n){switch(n){case 5126:return Mye;case 35664:return Cye;case 35665:return Sye;case 35666:return Eye;case 35674:return Dye;case 35675:return Aye;case 35676:return Tye;case 5124:case 35670:return Iye;case 35667:case 35671:return Pye;case 35668:case 35672:return Oye;case 35669:case 35673:return Nye;case 5125:return Rye;case 36294:return Fye;case 36295:return kye;case 36296:return Lye;case 35678:case 36198:case 36298:case 36306:case 35682:return Bye;case 35679:case 36299:case 36307:return Vye;case 35680:case 36300:case 36308:case 36293:return zye;case 36289:case 36303:case 36311:case 36292:return Uye}}(t.type)}}class ube{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function lbe(n){switch(n){case 5126:return Gye;case 35664:return jye;case 35665:return Wye;case 35666:return qye;case 35674:return $ye;case 35675:return Xye;case 35676:return Yye;case 5124:case 35670:return Zye;case 35667:case 35671:return Kye;case 35668:case 35672:return Qye;case 35669:case 35673:return Jye;case 5125:return ebe;case 36294:return tbe;case 36295:return nbe;case 36296:return rbe;case 35678:case 36198:case 36298:case 36306:case 35682:return ibe;case 35679:case 36299:case 36307:return obe;case 35680:case 36300:case 36308:case 36293:return sbe;case 36289:case 36303:case 36311:case 36292:return abe}}(t.type)}}class dbe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,t[a.id],r)}}}const zE=/(\w+)(\])?(\[|\.)?/g;function Sz(n,e){n.seq.push(e),n.map[e.id]=e}function hbe(n,e,t){const r=n.name,i=r.length;for(zE.lastIndex=0;;){const o=zE.exec(r),s=zE.lastIndex;let a=o[1];const c=o[3];if("]"===o[2]&&(a|=0),void 0===c||"["===c&&s+2===i){Sz(t,void 0===c?new cbe(a,n,e):new ube(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new dbe(a),Sz(t,d)),t=d}}}class qb{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const o=e.getActiveUniform(t,i);hbe(o,e.getUniformLocation(t,o.name),this)}}setValue(e,t,r,i){const o=this.map[t];void 0!==o&&o.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];void 0!==i&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let o=0,s=t.length;o!==s;++o){const a=t[o],l=r[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function Ez(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let fbe=0;function Dz(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return t.toUpperCase()+"\n\n"+i+"\n\n"+function pbe(n,e){const t=n.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return r.join("\n")}(n.getShaderSource(e),s)}return i}function gbe(n,e){const t=function mbe(n){switch(n){case zd:return["Linear","( value )"];case wi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function vbe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function fv(n){return""!==n}function Az(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Tz(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const xbe=/^[ \t]*#include +<([\w\d./]+)>/gm;function UE(n){return n.replace(xbe,wbe)}function wbe(n,e){const t=Hn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return UE(t)}const Mbe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Iz(n){return n.replace(Mbe,Cbe)}function Cbe(n,e,t,r){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Pz(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Ibe(n,e,t,r){const i=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=function Sbe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Ebe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function Dbe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function Abe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function Tbe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),f=t.isWebGL2?"":function _be(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(fv).join("\n")}(t),m=function ybe(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(o),p=i.createProgram();let g,_,b=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[m].filter(fv).join("\n"),g.length>0&&(g+="\n"),_=[f,m].filter(fv).join("\n"),_.length>0&&(_+="\n")):(g=[Pz(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fv).join("\n"),_=[f,Pz(t),"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Hn.tonemapping_pars_fragment:"",0!==t.toneMapping?vbe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Hn.encodings_pars_fragment,gbe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(fv).join("\n")),s=UE(s),s=Az(s,t),s=Tz(s,t),a=UE(a),a=Az(a,t),a=Tz(a,t),s=Iz(s),a=Iz(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(b="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const y=b+_+a,w=Ez(i,35633,b+g+s),x=Ez(i,35632,y);if(i.attachShader(p,w),i.attachShader(p,x),void 0!==t.index0AttributeName?i.bindAttribLocation(p,0,t.index0AttributeName):!0===t.morphTargets&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p),n.debug.checkShaderErrors){const S=i.getProgramInfoLog(p).trim(),C=i.getShaderInfoLog(w).trim(),I=i.getShaderInfoLog(x).trim();let P=!0,F=!0;if(!1===i.getProgramParameter(p,35714)){P=!1;const R=Dz(i,w,"vertex"),z=Dz(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,35715)+"\n\nProgram Info Log: "+S+"\n"+R+"\n"+z)}else""!==S?console.warn("THREE.WebGLProgram: Program Info Log:",S):(""===C||""===I)&&(F=!1);F&&(this.diagnostics={runnable:P,programLog:S,vertexShader:{log:C,prefix:g},fragmentShader:{log:I,prefix:_}})}let E,M;return i.deleteShader(w),i.deleteShader(x),this.getUniforms=function(){return void 0===E&&(E=new qb(i,p)),E},this.getAttributes=function(){return void 0===M&&(M=function bbe(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const o=n.getActiveAttrib(e,i),s=o.name;let a=1;35674===o.type&&(a=2),35675===o.type&&(a=3),35676===o.type&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}(i,p)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.name=t.shaderName,this.id=fbe++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=w,this.fragmentShader=x,this}let Pbe=0;class Obe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,i=this._getShaderStage(e.vertexShader),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(o)&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return void 0===r&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return void 0===r&&(r=new Nbe(e),t.set(e,r)),r}}class Nbe{constructor(e){this.id=Pbe++,this.code=e,this.usedTimes=0}}function Rbe(n,e,t,r,i,o,s){const a=new wE,l=new Obe,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function p(M,S,C,I,P){const F=I.fog,R=P.geometry,O=(M.isMeshStandardMaterial?t:e).get(M.envMap||(M.isMeshStandardMaterial?I.environment:null)),T=O&&306===O.mapping?O.image.height:null,V=m[M.type];null!==M.precision&&(f=i.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const D=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,k=void 0!==D?D.length:0;let ce,X,re,Ee,J=0;if(void 0!==R.morphAttributes.position&&(J=1),void 0!==R.morphAttributes.normal&&(J=2),void 0!==R.morphAttributes.color&&(J=3),V){const mt=Rl[V];ce=mt.vertexShader,X=mt.fragmentShader}else ce=M.vertexShader,X=M.fragmentShader,l.update(M),re=l.getVertexShaderID(M),Ee=l.getFragmentShaderID(M);const ie=n.getRenderTarget(),Fe=M.clearcoat>0,He=M.iridescence>0;return{isWebGL2:u,shaderID:V,shaderName:M.type,vertexShader:ce,fragmentShader:X,defines:M.defines,customVertexShaderID:re,customFragmentShaderID:Ee,isRawShaderMaterial:!0===M.isRawShaderMaterial,glslVersion:M.glslVersion,precision:f,instancing:!0===P.isInstancedMesh,instancingColor:!0===P.isInstancedMesh&&null!==P.instanceColor,supportsVertexTextures:h,outputEncoding:null===ie?n.outputEncoding:!0===ie.isXRRenderTarget?ie.texture.encoding:zd,map:!!M.map,matcap:!!M.matcap,envMap:!!O,envMapMode:O&&O.mapping,envMapCubeUVHeight:T,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:1===M.normalMapType,tangentSpaceNormalMap:0===M.normalMapType,decodeVideoTexture:!!M.map&&!0===M.map.isVideoTexture&&M.map.encoding===wi,clearcoat:Fe,clearcoatMap:Fe&&!!M.clearcoatMap,clearcoatRoughnessMap:Fe&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:Fe&&!!M.clearcoatNormalMap,iridescence:He,iridescenceMap:He&&!!M.iridescenceMap,iridescenceThicknessMap:He&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:!1===M.transparent&&1===M.blending,alphaMap:!!M.alphaMap,alphaTest:M.alphaTest>0,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!R.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:!0===M.vertexColors&&!!R.attributes.color&&4===R.attributes.color.itemSize,vertexUvs:!!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatMap||M.clearcoatRoughnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.displacementMap||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheenColorMap||M.sheenRoughnessMap),uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap||!M.displacementMap),fog:!!F,useFog:!0===M.fog,fogExp2:F&&F.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===P.isSkinnedMesh,morphTargets:void 0!==R.morphAttributes.position,morphNormals:void 0!==R.morphAttributes.normal,morphColors:void 0!==R.morphAttributes.color,morphTargetsCount:k,morphTextureStride:J,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&C.length>0,shadowMapType:n.shadowMap.type,toneMapping:M.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:2===M.side,flipSided:1===M.side,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}},getProgramCacheKey:function g(M){const S=[];if(M.shaderID?S.push(M.shaderID):(S.push(M.customVertexShaderID),S.push(M.customFragmentShaderID)),void 0!==M.defines)for(const C in M.defines)S.push(C),S.push(M.defines[C]);return!1===M.isRawShaderMaterial&&(function _(M,S){M.push(S.precision),M.push(S.outputEncoding),M.push(S.envMapMode),M.push(S.envMapCubeUVHeight),M.push(S.combine),M.push(S.vertexUvs),M.push(S.fogExp2),M.push(S.sizeAttenuation),M.push(S.morphTargetsCount),M.push(S.morphAttributeCount),M.push(S.numDirLights),M.push(S.numPointLights),M.push(S.numSpotLights),M.push(S.numSpotLightMaps),M.push(S.numHemiLights),M.push(S.numRectAreaLights),M.push(S.numDirLightShadows),M.push(S.numPointLightShadows),M.push(S.numSpotLightShadows),M.push(S.numSpotLightShadowsWithMaps),M.push(S.shadowMapType),M.push(S.toneMapping),M.push(S.numClippingPlanes),M.push(S.numClipIntersection),M.push(S.depthPacking)}(S,M),function b(M,S){a.disableAll(),S.isWebGL2&&a.enable(0),S.supportsVertexTextures&&a.enable(1),S.instancing&&a.enable(2),S.instancingColor&&a.enable(3),S.map&&a.enable(4),S.matcap&&a.enable(5),S.envMap&&a.enable(6),S.lightMap&&a.enable(7),S.aoMap&&a.enable(8),S.emissiveMap&&a.enable(9),S.bumpMap&&a.enable(10),S.normalMap&&a.enable(11),S.objectSpaceNormalMap&&a.enable(12),S.tangentSpaceNormalMap&&a.enable(13),S.clearcoat&&a.enable(14),S.clearcoatMap&&a.enable(15),S.clearcoatRoughnessMap&&a.enable(16),S.clearcoatNormalMap&&a.enable(17),S.iridescence&&a.enable(18),S.iridescenceMap&&a.enable(19),S.iridescenceThicknessMap&&a.enable(20),S.displacementMap&&a.enable(21),S.specularMap&&a.enable(22),S.roughnessMap&&a.enable(23),S.metalnessMap&&a.enable(24),S.gradientMap&&a.enable(25),S.alphaMap&&a.enable(26),S.alphaTest&&a.enable(27),S.vertexColors&&a.enable(28),S.vertexAlphas&&a.enable(29),S.vertexUvs&&a.enable(30),S.vertexTangents&&a.enable(31),S.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.physicallyCorrectLights&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.specularIntensityMap&&a.enable(15),S.specularColorMap&&a.enable(16),S.transmission&&a.enable(17),S.transmissionMap&&a.enable(18),S.thicknessMap&&a.enable(19),S.sheen&&a.enable(20),S.sheenColorMap&&a.enable(21),S.sheenRoughnessMap&&a.enable(22),S.decodeVideoTexture&&a.enable(23),S.opaque&&a.enable(24),M.push(a.mask)}(S,M),S.push(n.outputEncoding)),S.push(M.customProgramCacheKey),S.join()},getUniforms:function v(M){const S=m[M.type];let C;return C=S?e0e.clone(Rl[S].uniforms):M.uniforms,C},acquireProgram:function y(M,S){let C;for(let I=0,P=c.length;I<P;I++){const F=c[I];if(F.cacheKey===S){C=F,++C.usedTimes;break}}return void 0===C&&(C=new Ibe(n,S,M,o),c.push(C)),C},releaseProgram:function w(M){if(0==--M.usedTimes){const S=c.indexOf(M);c[S]=c[c.length-1],c.pop(),M.destroy()}},releaseShaderCache:function x(M){l.remove(M)},programs:c,dispose:function E(){l.dispose()}}}function Fbe(){let n=new WeakMap;return{get:function e(o){let s=n.get(o);return void 0===s&&(s={},n.set(o,s)),s},remove:function t(o){n.delete(o)},update:function r(o,s,a){n.get(o)[s]=a},dispose:function i(){n=new WeakMap}}}function kbe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Oz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Nz(){const n=[];let e=0;const t=[],r=[],i=[];function s(d,h,f,m,p,g){let _=n[e];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:p,group:g},n[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=m,_.renderOrder=d.renderOrder,_.z=p,_.group=g),e++,_}return{opaque:t,transmissive:r,transparent:i,init:function o(){e=0,t.length=0,r.length=0,i.length=0},push:function a(d,h,f,m,p,g){const _=s(d,h,f,m,p,g);f.transmission>0?r.push(_):!0===f.transparent?i.push(_):t.push(_)},unshift:function l(d,h,f,m,p,g){const _=s(d,h,f,m,p,g);f.transmission>0?r.unshift(_):!0===f.transparent?i.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||kbe),r.length>1&&r.sort(h||Oz),i.length>1&&i.sort(h||Oz)}}}function Lbe(){let n=new WeakMap;return{get:function e(r,i){const o=n.get(r);let s;return void 0===o?(s=new Nz,n.set(r,[s])):i>=o.length?(s=new Nz,o.push(s)):s=o[i],s},dispose:function t(){n=new WeakMap}}}function Bbe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new jt};break;case"SpotLight":t={position:new q,direction:new q,color:new jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new jt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new jt,groundColor:new jt};break;case"RectAreaLight":t={color:new jt,position:new q,halfWidth:new q,halfHeight:new q}}return n[e.id]=t,t}}}let zbe=0;function Ube(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Hbe(n,e){const t=new Bbe,r=function Vbe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new q);const o=new q,s=new Sn,a=new Sn;return{setup:function l(u,d){let h=0,f=0,m=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let p=0,g=0,_=0,b=0,v=0,y=0,w=0,x=0,E=0,M=0;u.sort(Ube);const S=!0!==d?Math.PI:1;for(let I=0,P=u.length;I<P;I++){const F=u[I],R=F.color,z=F.intensity,O=F.distance,T=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)h+=R.r*z*S,f+=R.g*z*S,m+=R.b*z*S;else if(F.isLightProbe)for(let V=0;V<9;V++)i.probe[V].addScaledVector(F.sh.coefficients[V],z);else if(F.isDirectionalLight){const V=t.get(F);if(V.color.copy(F.color).multiplyScalar(F.intensity*S),F.castShadow){const D=F.shadow,k=r.get(F);k.shadowBias=D.bias,k.shadowNormalBias=D.normalBias,k.shadowRadius=D.radius,k.shadowMapSize=D.mapSize,i.directionalShadow[p]=k,i.directionalShadowMap[p]=T,i.directionalShadowMatrix[p]=F.shadow.matrix,y++}i.directional[p]=V,p++}else if(F.isSpotLight){const V=t.get(F);V.position.setFromMatrixPosition(F.matrixWorld),V.color.copy(R).multiplyScalar(z*S),V.distance=O,V.coneCos=Math.cos(F.angle),V.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),V.decay=F.decay,i.spot[_]=V;const D=F.shadow;if(F.map&&(i.spotLightMap[E]=F.map,E++,D.updateMatrices(F),F.castShadow&&M++),i.spotLightMatrix[_]=D.matrix,F.castShadow){const k=r.get(F);k.shadowBias=D.bias,k.shadowNormalBias=D.normalBias,k.shadowRadius=D.radius,k.shadowMapSize=D.mapSize,i.spotShadow[_]=k,i.spotShadowMap[_]=T,x++}_++}else if(F.isRectAreaLight){const V=t.get(F);V.color.copy(R).multiplyScalar(z),V.halfWidth.set(.5*F.width,0,0),V.halfHeight.set(0,.5*F.height,0),i.rectArea[b]=V,b++}else if(F.isPointLight){const V=t.get(F);if(V.color.copy(F.color).multiplyScalar(F.intensity*S),V.distance=F.distance,V.decay=F.decay,F.castShadow){const D=F.shadow,k=r.get(F);k.shadowBias=D.bias,k.shadowNormalBias=D.normalBias,k.shadowRadius=D.radius,k.shadowMapSize=D.mapSize,k.shadowCameraNear=D.camera.near,k.shadowCameraFar=D.camera.far,i.pointShadow[g]=k,i.pointShadowMap[g]=T,i.pointShadowMatrix[g]=F.shadow.matrix,w++}i.point[g]=V,g++}else if(F.isHemisphereLight){const V=t.get(F);V.skyColor.copy(F.color).multiplyScalar(z*S),V.groundColor.copy(F.groundColor).multiplyScalar(z*S),i.hemi[v]=V,v++}}b>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=Lt.LTC_FLOAT_1,i.rectAreaLTC2=Lt.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Lt.LTC_HALF_1,i.rectAreaLTC2=Lt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=m;const C=i.hash;(C.directionalLength!==p||C.pointLength!==g||C.spotLength!==_||C.rectAreaLength!==b||C.hemiLength!==v||C.numDirectionalShadows!==y||C.numPointShadows!==w||C.numSpotShadows!==x||C.numSpotMaps!==E)&&(i.directional.length=p,i.spot.length=_,i.rectArea.length=b,i.point.length=g,i.hemi.length=v,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=x+E-M,i.spotLightMap.length=E,i.numSpotLightShadowsWithMaps=M,C.directionalLength=p,C.pointLength=g,C.spotLength=_,C.rectAreaLength=b,C.hemiLength=v,C.numDirectionalShadows=y,C.numPointShadows=w,C.numSpotShadows=x,C.numSpotMaps=E,i.version=zbe++)},setupView:function c(u,d){let h=0,f=0,m=0,p=0,g=0;const _=d.matrixWorldInverse;for(let b=0,v=u.length;b<v;b++){const y=u[b];if(y.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(y.matrixWorld),o.setFromMatrixPosition(y.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(_),h++}else if(y.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(y.matrixWorld),o.setFromMatrixPosition(y.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(_),m++}else if(y.isRectAreaLight){const w=i.rectArea[p];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(_),a.identity(),s.copy(y.matrixWorld),s.premultiply(_),a.extractRotation(s),w.halfWidth.set(.5*y.width,0,0),w.halfHeight.set(0,.5*y.height,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),p++}else if(y.isPointLight){const w=i.point[f];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(_),f++}else if(y.isHemisphereLight){const w=i.hemi[g];w.direction.setFromMatrixPosition(y.matrixWorld),w.direction.transformDirection(_),g++}}},state:i}}function Rz(n,e){const t=new Hbe(n,e),r=[],i=[];return{init:function o(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:function l(d){t.setup(r,d)},setupLightsView:function c(d){t.setupView(r,d)},pushLight:function s(d){r.push(d)},pushShadow:function a(d){i.push(d)}}}function Gbe(n,e){let t=new WeakMap;return{get:function r(o,s=0){const a=t.get(o);let l;return void 0===a?(l=new Rz(n,e),t.set(o,[l])):s>=a.length?(l=new Rz(n,e),a.push(l)):l=a[s],l},dispose:function i(){t=new WeakMap}}}class Fz extends Zd{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class kz extends Zd{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function qbe(n,e,t){let r=new FE;const i=new Je,o=new Je,s=new Gr,a=new Fz({depthPacking:3201}),l=new kz,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new Ou({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new Jn;m.setAttribute("position",new so(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new _r(m,h),g=this;function _(y,w){const x=e.update(p);h.defines.VSM_SAMPLES!==y.blurSamples&&(h.defines.VSM_SAMPLES=y.blurSamples,f.defines.VSM_SAMPLES=y.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===y.mapPass&&(y.mapPass=new qd(i.x,i.y)),h.uniforms.shadow_pass.value=y.map.texture,h.uniforms.resolution.value=y.mapSize,h.uniforms.radius.value=y.radius,n.setRenderTarget(y.mapPass),n.clear(),n.renderBufferDirect(w,null,x,h,p,null),f.uniforms.shadow_pass.value=y.mapPass.texture,f.uniforms.resolution.value=y.mapSize,f.uniforms.radius.value=y.radius,n.setRenderTarget(y.map),n.clear(),n.renderBufferDirect(w,null,x,f,p,null)}function b(y,w,x,E,M,S){let C=null;const I=!0===x.isPointLight?y.customDistanceMaterial:y.customDepthMaterial;if(C=void 0!==I?I:!0===x.isPointLight?l:a,n.localClippingEnabled&&!0===w.clipShadows&&Array.isArray(w.clippingPlanes)&&0!==w.clippingPlanes.length||w.displacementMap&&0!==w.displacementScale||w.alphaMap&&w.alphaTest>0){const P=C.uuid,F=w.uuid;let R=c[P];void 0===R&&(R={},c[P]=R);let z=R[F];void 0===z&&(z=C.clone(),R[F]=z),C=z}return C.visible=w.visible,C.wireframe=w.wireframe,C.side=3===S?null!==w.shadowSide?w.shadowSide:w.side:null!==w.shadowSide?w.shadowSide:d[w.side],C.alphaMap=w.alphaMap,C.alphaTest=w.alphaTest,C.clipShadows=w.clipShadows,C.clippingPlanes=w.clippingPlanes,C.clipIntersection=w.clipIntersection,C.displacementMap=w.displacementMap,C.displacementScale=w.displacementScale,C.displacementBias=w.displacementBias,C.wireframeLinewidth=w.wireframeLinewidth,C.linewidth=w.linewidth,!0===x.isPointLight&&!0===C.isMeshDistanceMaterial&&(C.referencePosition.setFromMatrixPosition(x.matrixWorld),C.nearDistance=E,C.farDistance=M),C}function v(y,w,x,E,M){if(!1===y.visible)return;if(y.layers.test(w.layers)&&(y.isMesh||y.isLine||y.isPoints)&&(y.castShadow||y.receiveShadow&&3===M)&&(!y.frustumCulled||r.intersectsObject(y))){y.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,y.matrixWorld);const I=e.update(y),P=y.material;if(Array.isArray(P)){const F=I.groups;for(let R=0,z=F.length;R<z;R++){const O=F[R],T=P[O.materialIndex];if(T&&T.visible){const V=b(y,T,E,x.near,x.far,M);n.renderBufferDirect(x,null,I,V,y,O)}}}else if(P.visible){const F=b(y,P,E,x.near,x.far,M);n.renderBufferDirect(x,null,I,F,y,null)}}const C=y.children;for(let I=0,P=C.length;I<P;I++)v(C[I],w,x,E,M)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(y,w,x){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===y.length)return;const E=n.getRenderTarget(),M=n.getActiveCubeFace(),S=n.getActiveMipmapLevel(),C=n.state;C.setBlending(0),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);for(let I=0,P=y.length;I<P;I++){const F=y[I],R=F.shadow;if(void 0===R){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(!1===R.autoUpdate&&!1===R.needsUpdate)continue;i.copy(R.mapSize);const z=R.getFrameExtents();i.multiply(z),o.copy(R.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/z.x),i.x=o.x*z.x,R.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/z.y),i.y=o.y*z.y,R.mapSize.y=o.y)),null===R.map&&(R.map=new qd(i.x,i.y,3!==this.type?{minFilter:ro,magFilter:ro}:{}),R.map.texture.name=F.name+".shadowMap",R.camera.updateProjectionMatrix()),n.setRenderTarget(R.map),n.clear();const O=R.getViewportCount();for(let T=0;T<O;T++){const V=R.getViewport(T);s.set(o.x*V.x,o.y*V.y,o.x*V.z,o.y*V.w),C.viewport(s),R.updateMatrices(F,T),r=R.getFrustum(),v(w,x,R.camera,F,this.type)}!0!==R.isPointLightShadow&&3===this.type&&_(R,x),R.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(E,M,S)}}function $be(n,e,t){const r=t.isWebGL2,a=new function i(){let Se=!1;const Ke=new Gr;let Ct=null;const Ht=new Gr(0,0,0,0);return{setMask:function(sn){Ct!==sn&&!Se&&(n.colorMask(sn,sn,sn,sn),Ct=sn)},setLocked:function(sn){Se=sn},setClear:function(sn,Nr,_o,qo,Ah){!0===Ah&&(sn*=qo,Nr*=qo,_o*=qo),Ke.set(sn,Nr,_o,qo),!1===Ht.equals(Ke)&&(n.clearColor(sn,Nr,_o,qo),Ht.copy(Ke))},reset:function(){Se=!1,Ct=null,Ht.set(-1,0,0,0)}}},l=new function o(){let Se=!1,Ke=null,Ct=null,Ht=null;return{setTest:function(sn){sn?Ae(2929):Fe(2929)},setMask:function(sn){Ke!==sn&&!Se&&(n.depthMask(sn),Ke=sn)},setFunc:function(sn){if(Ct!==sn){switch(sn){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}Ct=sn}},setLocked:function(sn){Se=sn},setClear:function(sn){Ht!==sn&&(n.clearDepth(sn),Ht=sn)},reset:function(){Se=!1,Ke=null,Ct=null,Ht=null}}},c=new function s(){let Se=!1,Ke=null,Ct=null,Ht=null,sn=null,Nr=null,_o=null,qo=null,Ah=null;return{setTest:function(ci){Se||(ci?Ae(2960):Fe(2960))},setMask:function(ci){Ke!==ci&&!Se&&(n.stencilMask(ci),Ke=ci)},setFunc:function(ci,Uc,Ca){(Ct!==ci||Ht!==Uc||sn!==Ca)&&(n.stencilFunc(ci,Uc,Ca),Ct=ci,Ht=Uc,sn=Ca)},setOp:function(ci,Uc,Ca){(Nr!==ci||_o!==Uc||qo!==Ca)&&(n.stencilOp(ci,Uc,Ca),Nr=ci,_o=Uc,qo=Ca)},setLocked:function(ci){Se=ci},setClear:function(ci){Ah!==ci&&(n.clearStencil(ci),Ah=ci)},reset:function(){Se=!1,Ke=null,Ct=null,Ht=null,sn=null,Nr=null,_o=null,qo=null,Ah=null}}},u=new WeakMap,d=new WeakMap;let h={},f={},m=new WeakMap,p=[],g=null,_=!1,b=null,v=null,y=null,w=null,x=null,E=null,M=null,S=!1,C=null,I=null,P=null,F=null,R=null;const z=n.getParameter(35661);let O=!1,T=0;const V=n.getParameter(7938);-1!==V.indexOf("WebGL")?(T=parseFloat(/^WebGL (\d)/.exec(V)[1]),O=T>=1):-1!==V.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),O=T>=2);let D=null,k={};const J=n.getParameter(3088),ce=n.getParameter(2978),X=(new Gr).fromArray(J),re=(new Gr).fromArray(ce);function Ee(Se,Ke,Ct){const Ht=new Uint8Array(4),sn=n.createTexture();n.bindTexture(Se,sn),n.texParameteri(Se,10241,9728),n.texParameteri(Se,10240,9728);for(let Nr=0;Nr<Ct;Nr++)n.texImage2D(Ke+Nr,0,6408,1,1,0,6408,5121,Ht);return sn}const ie={};function Ae(Se){!0!==h[Se]&&(n.enable(Se),h[Se]=!0)}function Fe(Se){!1!==h[Se]&&(n.disable(Se),h[Se]=!1)}ie[3553]=Ee(3553,3553,1),ie[34067]=Ee(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ae(2929),l.setFunc(3),$(!1),ye(1),Ae(2884),ze(0);const De={100:32774,101:32778,102:32779};if(r)De[103]=32775,De[104]=32776;else{const Se=e.get("EXT_blend_minmax");null!==Se&&(De[103]=Se.MIN_EXT,De[104]=Se.MAX_EXT)}const ve={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ze(Se,Ke,Ct,Ht,sn,Nr,_o,qo){if(0!==Se){if(!1===_&&(Ae(3042),_=!0),5===Se)sn=sn||Ke,Nr=Nr||Ct,_o=_o||Ht,(Ke!==v||sn!==x)&&(n.blendEquationSeparate(De[Ke],De[sn]),v=Ke,x=sn),(Ct!==y||Ht!==w||Nr!==E||_o!==M)&&(n.blendFuncSeparate(ve[Ct],ve[Ht],ve[Nr],ve[_o]),y=Ct,w=Ht,E=Nr,M=_o),b=Se,S=null;else if(Se!==b||qo!==S){if((100!==v||100!==x)&&(n.blendEquation(32774),v=100,x=100),qo)switch(Se){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se)}else switch(Se){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se)}y=null,w=null,E=null,M=null,b=Se,S=qo}}else!0===_&&(Fe(3042),_=!1)}function $(Se){C!==Se&&(n.frontFace(Se?2304:2305),C=Se)}function ye(Se){0!==Se?(Ae(2884),Se!==I&&n.cullFace(1===Se?1029:2===Se?1028:1032)):Fe(2884),I=Se}function Ne(Se,Ke,Ct){Se?(Ae(32823),(F!==Ke||R!==Ct)&&(n.polygonOffset(Ke,Ct),F=Ke,R=Ct)):Fe(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:Ae,disable:Fe,bindFramebuffer:function He(Se,Ke){return f[Se]!==Ke&&(n.bindFramebuffer(Se,Ke),f[Se]=Ke,r&&(36009===Se&&(f[36160]=Ke),36160===Se&&(f[36009]=Ke)),!0)},drawBuffers:function me(Se,Ke){let Ct=p,Ht=!1;if(Se)if(Ct=m.get(Ke),void 0===Ct&&(Ct=[],m.set(Ke,Ct)),Se.isWebGLMultipleRenderTargets){const sn=Se.texture;if(Ct.length!==sn.length||36064!==Ct[0]){for(let Nr=0,_o=sn.length;Nr<_o;Nr++)Ct[Nr]=36064+Nr;Ct.length=sn.length,Ht=!0}}else 36064!==Ct[0]&&(Ct[0]=36064,Ht=!0);else 1029!==Ct[0]&&(Ct[0]=1029,Ht=!0);Ht&&(t.isWebGL2?n.drawBuffers(Ct):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ct))},useProgram:function mt(Se){return g!==Se&&(n.useProgram(Se),g=Se,!0)},setBlending:ze,setMaterial:function H(Se,Ke){2===Se.side?Fe(2884):Ae(2884);let Ct=1===Se.side;Ke&&(Ct=!Ct),$(Ct),1===Se.blending&&!1===Se.transparent?ze(0):ze(Se.blending,Se.blendEquation,Se.blendSrc,Se.blendDst,Se.blendEquationAlpha,Se.blendSrcAlpha,Se.blendDstAlpha,Se.premultipliedAlpha),l.setFunc(Se.depthFunc),l.setTest(Se.depthTest),l.setMask(Se.depthWrite),a.setMask(Se.colorWrite);const Ht=Se.stencilWrite;c.setTest(Ht),Ht&&(c.setMask(Se.stencilWriteMask),c.setFunc(Se.stencilFunc,Se.stencilRef,Se.stencilFuncMask),c.setOp(Se.stencilFail,Se.stencilZFail,Se.stencilZPass)),Ne(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits),!0===Se.alphaToCoverage?Ae(32926):Fe(32926)},setFlipSided:$,setCullFace:ye,setLineWidth:function ge(Se){Se!==P&&(O&&n.lineWidth(Se),P=Se)},setPolygonOffset:Ne,setScissorTest:function Ye(Se){Se?Ae(3089):Fe(3089)},activeTexture:function gt(Se){void 0===Se&&(Se=33984+z-1),D!==Se&&(n.activeTexture(Se),D=Se)},bindTexture:function W(Se,Ke,Ct){void 0===Ct&&(Ct=null===D?33984+z-1:D);let Ht=k[Ct];void 0===Ht&&(Ht={type:void 0,texture:void 0},k[Ct]=Ht),(Ht.type!==Se||Ht.texture!==Ke)&&(D!==Ct&&(n.activeTexture(Ct),D=Ct),n.bindTexture(Se,Ke||ie[Se]),Ht.type=Se,Ht.texture=Ke)},unbindTexture:function G(){const Se=k[D];void 0!==Se&&void 0!==Se.type&&(n.bindTexture(Se.type,null),Se.type=void 0,Se.texture=void 0)},compressedTexImage2D:function Pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},compressedTexImage3D:function et(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texImage2D:function zt(){try{n.texImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texImage3D:function Bt(){try{n.texImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},updateUBOMapping:function Wn(Se,Ke){let Ct=d.get(Ke);void 0===Ct&&(Ct=new WeakMap,d.set(Ke,Ct));let Ht=Ct.get(Se);void 0===Ht&&(Ht=n.getUniformBlockIndex(Ke,Se.name),Ct.set(Se,Ht))},uniformBlockBinding:function er(Se,Ke){const Ht=d.get(Ke).get(Se);u.get(Se)!==Ht&&(n.uniformBlockBinding(Ke,Ht,Se.__bindingPointIndex),u.set(Se,Ht))},texStorage2D:function Te(){try{n.texStorage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texStorage3D:function Rt(){try{n.texStorage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texSubImage2D:function ct(){try{n.texSubImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texSubImage3D:function Dt(){try{n.texSubImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},compressedTexSubImage2D:function Jt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},compressedTexSubImage3D:function ue(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},scissor:function Kt(Se){!1===X.equals(Se)&&(n.scissor(Se.x,Se.y,Se.z,Se.w),X.copy(Se))},viewport:function Wt(Se){!1===re.equals(Se)&&(n.viewport(Se.x,Se.y,Se.z,Se.w),re.copy(Se))},reset:function jr(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===r&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},D=null,k={},f={},m=new WeakMap,p=[],g=null,_=!1,b=null,v=null,y=null,w=null,x=null,E=null,M=null,S=!1,C=null,I=null,P=null,F=null,R=null,X.set(0,0,n.canvas.width,n.canvas.height),re.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function Xbe(n,e,t,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),m=new WeakMap;let p;const g=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function b(W,G){return _?new OffscreenCanvas(W,G):lv("canvas")}function v(W,G,Pe,et){let ct=1;if((W.width>et||W.height>et)&&(ct=et/Math.max(W.width,W.height)),ct<1||!0===G){if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Dt=G?wb:Math.floor,Jt=Dt(ct*W.width),ue=Dt(ct*W.height);void 0===p&&(p=b(Jt,ue));const Te=Pe?b(Jt,ue):p;return Te.width=Jt,Te.height=ue,Te.getContext("2d").drawImage(W,0,0,Jt,ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+Jt+"x"+ue+")."),Te}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function y(W){return uE(W.width)&&uE(W.height)}function x(W,G){return W.generateMipmaps&&G&&W.minFilter!==ro&&W.minFilter!==Ui}function E(W){n.generateMipmap(W)}function M(W,G,Pe,et,ct=!1){if(!1===a)return G;if(null!==W){if(void 0!==n[W])return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Dt=G;return 6403===G&&(5126===Pe&&(Dt=33326),5131===Pe&&(Dt=33325),5121===Pe&&(Dt=33321)),33319===G&&(5126===Pe&&(Dt=33328),5131===Pe&&(Dt=33327),5121===Pe&&(Dt=33323)),6408===G&&(5126===Pe&&(Dt=34836),5131===Pe&&(Dt=34842),5121===Pe&&(Dt=et===wi&&!1===ct?35907:32856),32819===Pe&&(Dt=32854),32820===Pe&&(Dt=32855)),(33325===Dt||33326===Dt||33327===Dt||33328===Dt||34842===Dt||34836===Dt)&&e.get("EXT_color_buffer_float"),Dt}function S(W,G,Pe){return!0===x(W,Pe)||W.isFramebufferTexture&&W.minFilter!==ro&&W.minFilter!==Ui?Math.log2(Math.max(G.width,G.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?G.mipmaps.length:1}function C(W){return W===ro||1004===W||1005===W?9728:9729}function I(W){const G=W.target;G.removeEventListener("dispose",I),function F(W){const G=r.get(W);if(void 0===G.__webglInit)return;const Pe=W.source,et=g.get(Pe);if(et){const ct=et[G.__cacheKey];ct.usedTimes--,0===ct.usedTimes&&R(W),0===Object.keys(et).length&&g.delete(Pe)}r.remove(W)}(G),G.isVideoTexture&&m.delete(G)}function P(W){const G=W.target;G.removeEventListener("dispose",P),function z(W){const G=W.texture,Pe=r.get(W),et=r.get(G);if(void 0!==et.__webglTexture&&(n.deleteTexture(et.__webglTexture),s.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let ct=0;ct<6;ct++)n.deleteFramebuffer(Pe.__webglFramebuffer[ct]),Pe.__webglDepthbuffer&&n.deleteRenderbuffer(Pe.__webglDepthbuffer[ct]);else{if(n.deleteFramebuffer(Pe.__webglFramebuffer),Pe.__webglDepthbuffer&&n.deleteRenderbuffer(Pe.__webglDepthbuffer),Pe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Pe.__webglMultisampledFramebuffer),Pe.__webglColorRenderbuffer)for(let ct=0;ct<Pe.__webglColorRenderbuffer.length;ct++)Pe.__webglColorRenderbuffer[ct]&&n.deleteRenderbuffer(Pe.__webglColorRenderbuffer[ct]);Pe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Pe.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let ct=0,Dt=G.length;ct<Dt;ct++){const Jt=r.get(G[ct]);Jt.__webglTexture&&(n.deleteTexture(Jt.__webglTexture),s.memory.textures--),r.remove(G[ct])}r.remove(G),r.remove(W)}(G)}function R(W){const G=r.get(W);n.deleteTexture(G.__webglTexture),delete g.get(W.source)[G.__cacheKey],s.memory.textures--}let O=0;function k(W,G){const Pe=r.get(W);if(W.isVideoTexture&&function Ye(W){const G=s.render.frame;m.get(W)!==G&&(m.set(W,G),W.update())}(W),!1===W.isRenderTargetTexture&&W.version>0&&Pe.__version!==W.version){const et=W.image;if(null===et)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==et.complete)return void Fe(Pe,W,G);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,Pe.__webglTexture,33984+G)}const re={1e3:10497,[ss]:33071,1002:33648},Ee={[ro]:9728,1004:9984,1005:9986,[Ui]:9729,1007:9985,1008:9987};function ie(W,G,Pe){if(Pe?(n.texParameteri(W,10242,re[G.wrapS]),n.texParameteri(W,10243,re[G.wrapT]),(32879===W||35866===W)&&n.texParameteri(W,32882,re[G.wrapR]),n.texParameteri(W,10240,Ee[G.magFilter]),n.texParameteri(W,10241,Ee[G.minFilter])):(n.texParameteri(W,10242,33071),n.texParameteri(W,10243,33071),(32879===W||35866===W)&&n.texParameteri(W,32882,33071),(G.wrapS!==ss||G.wrapT!==ss)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(W,10240,C(G.magFilter)),n.texParameteri(W,10241,C(G.minFilter)),G.minFilter!==ro&&G.minFilter!==Ui&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const et=e.get("EXT_texture_filter_anisotropic");if(G.type===wu&&!1===e.has("OES_texture_float_linear")||!1===a&&G.type===ov&&!1===e.has("OES_texture_half_float_linear"))return;(G.anisotropy>1||r.get(G).__currentAnisotropy)&&(n.texParameterf(W,et.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),r.get(G).__currentAnisotropy=G.anisotropy)}}function Ae(W,G){let Pe=!1;void 0===W.__webglInit&&(W.__webglInit=!0,G.addEventListener("dispose",I));const et=G.source;let ct=g.get(et);void 0===ct&&(ct={},g.set(et,ct));const Dt=function D(W){const G=[];return G.push(W.wrapS),G.push(W.wrapT),G.push(W.wrapR||0),G.push(W.magFilter),G.push(W.minFilter),G.push(W.anisotropy),G.push(W.internalFormat),G.push(W.format),G.push(W.type),G.push(W.generateMipmaps),G.push(W.premultiplyAlpha),G.push(W.flipY),G.push(W.unpackAlignment),G.push(W.encoding),G.join()}(G);if(Dt!==W.__cacheKey){void 0===ct[Dt]&&(ct[Dt]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Pe=!0),ct[Dt].usedTimes++;const Jt=ct[W.__cacheKey];void 0!==Jt&&(ct[W.__cacheKey].usedTimes--,0===Jt.usedTimes&&R(G)),W.__cacheKey=Dt,W.__webglTexture=ct[Dt].texture}return Pe}function Fe(W,G,Pe){let et=3553;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(et=35866),G.isData3DTexture&&(et=32879);const ct=Ae(W,G),Dt=G.source;t.bindTexture(et,W.__webglTexture,33984+Pe);const Jt=r.get(Dt);if(Dt.version!==Jt.__version||!0===ct){t.activeTexture(33984+Pe),n.pixelStorei(37440,G.flipY),n.pixelStorei(37441,G.premultiplyAlpha),n.pixelStorei(3317,G.unpackAlignment),n.pixelStorei(37443,0);const ue=function w(W){return!a&&(W.wrapS!==ss||W.wrapT!==ss||W.minFilter!==ro&&W.minFilter!==Ui)}(G)&&!1===y(G.image);let Te=v(G.image,ue,!1,u);Te=gt(G,Te);const Rt=y(Te)||a,zt=o.convert(G.format,G.encoding);let Wt,Bt=o.convert(G.type),Kt=M(G.internalFormat,zt,Bt,G.encoding,G.isVideoTexture);ie(et,G,Rt);const Wn=G.mipmaps,er=a&&!0!==G.isVideoTexture,jr=void 0===Jt.__version||!0===ct,Se=S(G,Te,Rt);if(G.isDepthTexture)Kt=6402,a?Kt=G.type===wu?36012:G.type===Bd?33190:G.type===up?35056:33189:G.type===wu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Vd&&6402===Kt&&1012!==G.type&&G.type!==Bd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=Bd,Bt=o.convert(G.type)),G.format===dp&&6402===Kt&&(Kt=34041,G.type!==up&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=up,Bt=o.convert(G.type))),jr&&(er?t.texStorage2D(3553,1,Kt,Te.width,Te.height):t.texImage2D(3553,0,Kt,Te.width,Te.height,0,zt,Bt,null));else if(G.isDataTexture)if(Wn.length>0&&Rt){er&&jr&&t.texStorage2D(3553,Se,Kt,Wn[0].width,Wn[0].height);for(let Ke=0,Ct=Wn.length;Ke<Ct;Ke++)Wt=Wn[Ke],er?t.texSubImage2D(3553,Ke,0,0,Wt.width,Wt.height,zt,Bt,Wt.data):t.texImage2D(3553,Ke,Kt,Wt.width,Wt.height,0,zt,Bt,Wt.data);G.generateMipmaps=!1}else er?(jr&&t.texStorage2D(3553,Se,Kt,Te.width,Te.height),t.texSubImage2D(3553,0,0,0,Te.width,Te.height,zt,Bt,Te.data)):t.texImage2D(3553,0,Kt,Te.width,Te.height,0,zt,Bt,Te.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){er&&jr&&t.texStorage3D(35866,Se,Kt,Wn[0].width,Wn[0].height,Te.depth);for(let Ke=0,Ct=Wn.length;Ke<Ct;Ke++)Wt=Wn[Ke],G.format!==va?null!==zt?er?t.compressedTexSubImage3D(35866,Ke,0,0,0,Wt.width,Wt.height,Te.depth,zt,Wt.data,0,0):t.compressedTexImage3D(35866,Ke,Kt,Wt.width,Wt.height,Te.depth,0,Wt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):er?t.texSubImage3D(35866,Ke,0,0,0,Wt.width,Wt.height,Te.depth,zt,Bt,Wt.data):t.texImage3D(35866,Ke,Kt,Wt.width,Wt.height,Te.depth,0,zt,Bt,Wt.data)}else{er&&jr&&t.texStorage2D(3553,Se,Kt,Wn[0].width,Wn[0].height);for(let Ke=0,Ct=Wn.length;Ke<Ct;Ke++)Wt=Wn[Ke],G.format!==va?null!==zt?er?t.compressedTexSubImage2D(3553,Ke,0,0,Wt.width,Wt.height,zt,Wt.data):t.compressedTexImage2D(3553,Ke,Kt,Wt.width,Wt.height,0,Wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):er?t.texSubImage2D(3553,Ke,0,0,Wt.width,Wt.height,zt,Bt,Wt.data):t.texImage2D(3553,Ke,Kt,Wt.width,Wt.height,0,zt,Bt,Wt.data)}else if(G.isDataArrayTexture)er?(jr&&t.texStorage3D(35866,Se,Kt,Te.width,Te.height,Te.depth),t.texSubImage3D(35866,0,0,0,0,Te.width,Te.height,Te.depth,zt,Bt,Te.data)):t.texImage3D(35866,0,Kt,Te.width,Te.height,Te.depth,0,zt,Bt,Te.data);else if(G.isData3DTexture)er?(jr&&t.texStorage3D(32879,Se,Kt,Te.width,Te.height,Te.depth),t.texSubImage3D(32879,0,0,0,0,Te.width,Te.height,Te.depth,zt,Bt,Te.data)):t.texImage3D(32879,0,Kt,Te.width,Te.height,Te.depth,0,zt,Bt,Te.data);else if(G.isFramebufferTexture){if(jr)if(er)t.texStorage2D(3553,Se,Kt,Te.width,Te.height);else{let Ke=Te.width,Ct=Te.height;for(let Ht=0;Ht<Se;Ht++)t.texImage2D(3553,Ht,Kt,Ke,Ct,0,zt,Bt,null),Ke>>=1,Ct>>=1}}else if(Wn.length>0&&Rt){er&&jr&&t.texStorage2D(3553,Se,Kt,Wn[0].width,Wn[0].height);for(let Ke=0,Ct=Wn.length;Ke<Ct;Ke++)Wt=Wn[Ke],er?t.texSubImage2D(3553,Ke,0,0,zt,Bt,Wt):t.texImage2D(3553,Ke,Kt,zt,Bt,Wt);G.generateMipmaps=!1}else er?(jr&&t.texStorage2D(3553,Se,Kt,Te.width,Te.height),t.texSubImage2D(3553,0,0,0,zt,Bt,Te)):t.texImage2D(3553,0,Kt,zt,Bt,Te);x(G,Rt)&&E(et),Jt.__version=Dt.version,G.onUpdate&&G.onUpdate(G)}W.__version=G.version}function me(W,G,Pe,et,ct){const Dt=o.convert(Pe.format,Pe.encoding),Jt=o.convert(Pe.type),ue=M(Pe.internalFormat,Dt,Jt,Pe.encoding);r.get(G).__hasExternalTextures||(32879===ct||35866===ct?t.texImage3D(ct,0,ue,G.width,G.height,G.depth,0,Dt,Jt,null):t.texImage2D(ct,0,ue,G.width,G.height,0,Dt,Jt,null)),t.bindFramebuffer(36160,W),Ne(G)?h.framebufferTexture2DMultisampleEXT(36160,et,ct,r.get(Pe).__webglTexture,0,ge(G)):(3553===ct||ct>=34069&&ct<=34074)&&n.framebufferTexture2D(36160,et,ct,r.get(Pe).__webglTexture,0),t.bindFramebuffer(36160,null)}function mt(W,G,Pe){if(n.bindRenderbuffer(36161,W),G.depthBuffer&&!G.stencilBuffer){let et=33189;if(Pe||Ne(G)){const ct=G.depthTexture;ct&&ct.isDepthTexture&&(ct.type===wu?et=36012:ct.type===Bd&&(et=33190));const Dt=ge(G);Ne(G)?h.renderbufferStorageMultisampleEXT(36161,Dt,et,G.width,G.height):n.renderbufferStorageMultisample(36161,Dt,et,G.width,G.height)}else n.renderbufferStorage(36161,et,G.width,G.height);n.framebufferRenderbuffer(36160,36096,36161,W)}else if(G.depthBuffer&&G.stencilBuffer){const et=ge(G);Pe&&!1===Ne(G)?n.renderbufferStorageMultisample(36161,et,35056,G.width,G.height):Ne(G)?h.renderbufferStorageMultisampleEXT(36161,et,35056,G.width,G.height):n.renderbufferStorage(36161,34041,G.width,G.height),n.framebufferRenderbuffer(36160,33306,36161,W)}else{const et=!0===G.isWebGLMultipleRenderTargets?G.texture:[G.texture];for(let ct=0;ct<et.length;ct++){const Dt=et[ct],Jt=o.convert(Dt.format,Dt.encoding),ue=o.convert(Dt.type),Te=M(Dt.internalFormat,Jt,ue,Dt.encoding),Rt=ge(G);Pe&&!1===Ne(G)?n.renderbufferStorageMultisample(36161,Rt,Te,G.width,G.height):Ne(G)?h.renderbufferStorageMultisampleEXT(36161,Rt,Te,G.width,G.height):n.renderbufferStorage(36161,Te,G.width,G.height)}}n.bindRenderbuffer(36161,null)}function ve(W){const G=r.get(W),Pe=!0===W.isWebGLCubeRenderTarget;if(W.depthTexture&&!G.__autoAllocateDepthBuffer){if(Pe)throw new Error("target.depthTexture not supported in Cube render targets");!function De(W,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,W),!G.depthTexture||!G.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),k(G.depthTexture,0);const et=r.get(G.depthTexture).__webglTexture,ct=ge(G);if(G.depthTexture.format===Vd)Ne(G)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,et,0,ct):n.framebufferTexture2D(36160,36096,3553,et,0);else{if(G.depthTexture.format!==dp)throw new Error("Unknown depthTexture format");Ne(G)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,et,0,ct):n.framebufferTexture2D(36160,33306,3553,et,0)}}(G.__webglFramebuffer,W)}else if(Pe){G.__webglDepthbuffer=[];for(let et=0;et<6;et++)t.bindFramebuffer(36160,G.__webglFramebuffer[et]),G.__webglDepthbuffer[et]=n.createRenderbuffer(),mt(G.__webglDepthbuffer[et],W,!1)}else t.bindFramebuffer(36160,G.__webglFramebuffer),G.__webglDepthbuffer=n.createRenderbuffer(),mt(G.__webglDepthbuffer,W,!1);t.bindFramebuffer(36160,null)}function ge(W){return Math.min(d,W.samples)}function Ne(W){const G=r.get(W);return a&&W.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==G.__useRenderToTexture}function gt(W,G){const Pe=W.encoding,et=W.format,ct=W.type;return!0===W.isCompressedTexture||!0===W.isVideoTexture||1035===W.format||Pe!==zd&&(Pe===wi?!1===a?!0===e.has("EXT_sRGB")&&et===va?(W.format=1035,W.minFilter=Ui,W.generateMipmaps=!1):G=XV.sRGBToLinear(G):(et!==va||ct!==Ld)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Pe)),G}this.allocateTextureUnit=function V(){const W=O;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),O+=1,W},this.resetTextureUnits=function T(){O=0},this.setTexture2D=k,this.setTexture2DArray=function J(W,G){const Pe=r.get(W);W.version>0&&Pe.__version!==W.version?Fe(Pe,W,G):t.bindTexture(35866,Pe.__webglTexture,33984+G)},this.setTexture3D=function ce(W,G){const Pe=r.get(W);W.version>0&&Pe.__version!==W.version?Fe(Pe,W,G):t.bindTexture(32879,Pe.__webglTexture,33984+G)},this.setTextureCube=function X(W,G){const Pe=r.get(W);W.version>0&&Pe.__version!==W.version?function He(W,G,Pe){if(6!==G.image.length)return;const et=Ae(W,G),ct=G.source;t.bindTexture(34067,W.__webglTexture,33984+Pe);const Dt=r.get(ct);if(ct.version!==Dt.__version||!0===et){t.activeTexture(33984+Pe),n.pixelStorei(37440,G.flipY),n.pixelStorei(37441,G.premultiplyAlpha),n.pixelStorei(3317,G.unpackAlignment),n.pixelStorei(37443,0);const Jt=G.isCompressedTexture||G.image[0].isCompressedTexture,ue=G.image[0]&&G.image[0].isDataTexture,Te=[];for(let Ke=0;Ke<6;Ke++)Te[Ke]=Jt||ue?ue?G.image[Ke].image:G.image[Ke]:v(G.image[Ke],!1,!0,c),Te[Ke]=gt(G,Te[Ke]);const Rt=Te[0],zt=y(Rt)||a,Bt=o.convert(G.format,G.encoding),Kt=o.convert(G.type),Wt=M(G.internalFormat,Bt,Kt,G.encoding),Wn=a&&!0!==G.isVideoTexture,er=void 0===Dt.__version||!0===et;let Se,jr=S(G,Rt,zt);if(ie(34067,G,zt),Jt){Wn&&er&&t.texStorage2D(34067,jr,Wt,Rt.width,Rt.height);for(let Ke=0;Ke<6;Ke++){Se=Te[Ke].mipmaps;for(let Ct=0;Ct<Se.length;Ct++){const Ht=Se[Ct];G.format!==va?null!==Bt?Wn?t.compressedTexSubImage2D(34069+Ke,Ct,0,0,Ht.width,Ht.height,Bt,Ht.data):t.compressedTexImage2D(34069+Ke,Ct,Wt,Ht.width,Ht.height,0,Ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Wn?t.texSubImage2D(34069+Ke,Ct,0,0,Ht.width,Ht.height,Bt,Kt,Ht.data):t.texImage2D(34069+Ke,Ct,Wt,Ht.width,Ht.height,0,Bt,Kt,Ht.data)}}}else{Se=G.mipmaps,Wn&&er&&(Se.length>0&&jr++,t.texStorage2D(34067,jr,Wt,Te[0].width,Te[0].height));for(let Ke=0;Ke<6;Ke++)if(ue){Wn?t.texSubImage2D(34069+Ke,0,0,0,Te[Ke].width,Te[Ke].height,Bt,Kt,Te[Ke].data):t.texImage2D(34069+Ke,0,Wt,Te[Ke].width,Te[Ke].height,0,Bt,Kt,Te[Ke].data);for(let Ct=0;Ct<Se.length;Ct++){const sn=Se[Ct].image[Ke].image;Wn?t.texSubImage2D(34069+Ke,Ct+1,0,0,sn.width,sn.height,Bt,Kt,sn.data):t.texImage2D(34069+Ke,Ct+1,Wt,sn.width,sn.height,0,Bt,Kt,sn.data)}}else{Wn?t.texSubImage2D(34069+Ke,0,0,0,Bt,Kt,Te[Ke]):t.texImage2D(34069+Ke,0,Wt,Bt,Kt,Te[Ke]);for(let Ct=0;Ct<Se.length;Ct++){const Ht=Se[Ct];Wn?t.texSubImage2D(34069+Ke,Ct+1,0,0,Bt,Kt,Ht.image[Ke]):t.texImage2D(34069+Ke,Ct+1,Wt,Bt,Kt,Ht.image[Ke])}}}x(G,zt)&&E(34067),Dt.__version=ct.version,G.onUpdate&&G.onUpdate(G)}W.__version=G.version}(Pe,W,G):t.bindTexture(34067,Pe.__webglTexture,33984+G)},this.rebindTextures=function ze(W,G,Pe){const et=r.get(W);void 0!==G&&me(et.__webglFramebuffer,W,W.texture,36064,3553),void 0!==Pe&&ve(W)},this.setupRenderTarget=function H(W){const G=W.texture,Pe=r.get(W),et=r.get(G);W.addEventListener("dispose",P),!0!==W.isWebGLMultipleRenderTargets&&(void 0===et.__webglTexture&&(et.__webglTexture=n.createTexture()),et.__version=G.version,s.memory.textures++);const ct=!0===W.isWebGLCubeRenderTarget,Dt=!0===W.isWebGLMultipleRenderTargets,Jt=y(W)||a;if(ct){Pe.__webglFramebuffer=[];for(let ue=0;ue<6;ue++)Pe.__webglFramebuffer[ue]=n.createFramebuffer()}else{if(Pe.__webglFramebuffer=n.createFramebuffer(),Dt)if(i.drawBuffers){const ue=W.texture;for(let Te=0,Rt=ue.length;Te<Rt;Te++){const zt=r.get(ue[Te]);void 0===zt.__webglTexture&&(zt.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&W.samples>0&&!1===Ne(W)){const ue=Dt?G:[G];Pe.__webglMultisampledFramebuffer=n.createFramebuffer(),Pe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer);for(let Te=0;Te<ue.length;Te++){const Rt=ue[Te];Pe.__webglColorRenderbuffer[Te]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Pe.__webglColorRenderbuffer[Te]);const zt=o.convert(Rt.format,Rt.encoding),Bt=o.convert(Rt.type),Kt=M(Rt.internalFormat,zt,Bt,Rt.encoding,!0===W.isXRRenderTarget),Wt=ge(W);n.renderbufferStorageMultisample(36161,Wt,Kt,W.width,W.height),n.framebufferRenderbuffer(36160,36064+Te,36161,Pe.__webglColorRenderbuffer[Te])}n.bindRenderbuffer(36161,null),W.depthBuffer&&(Pe.__webglDepthRenderbuffer=n.createRenderbuffer(),mt(Pe.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(36160,null)}}if(ct){t.bindTexture(34067,et.__webglTexture),ie(34067,G,Jt);for(let ue=0;ue<6;ue++)me(Pe.__webglFramebuffer[ue],W,G,36064,34069+ue);x(G,Jt)&&E(34067),t.unbindTexture()}else if(Dt){const ue=W.texture;for(let Te=0,Rt=ue.length;Te<Rt;Te++){const zt=ue[Te],Bt=r.get(zt);t.bindTexture(3553,Bt.__webglTexture),ie(3553,zt,Jt),me(Pe.__webglFramebuffer,W,zt,36064+Te,3553),x(zt,Jt)&&E(3553)}t.unbindTexture()}else{let ue=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?ue=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ue,et.__webglTexture),ie(ue,G,Jt),me(Pe.__webglFramebuffer,W,G,36064,ue),x(G,Jt)&&E(ue),t.unbindTexture()}W.depthBuffer&&ve(W)},this.updateRenderTargetMipmap=function $(W){const G=y(W)||a,Pe=!0===W.isWebGLMultipleRenderTargets?W.texture:[W.texture];for(let et=0,ct=Pe.length;et<ct;et++){const Dt=Pe[et];if(x(Dt,G)){const Jt=W.isWebGLCubeRenderTarget?34067:3553,ue=r.get(Dt).__webglTexture;t.bindTexture(Jt,ue),E(Jt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function ye(W){if(a&&W.samples>0&&!1===Ne(W)){const G=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],Pe=W.width,et=W.height;let ct=16384;const Dt=[],Jt=W.stencilBuffer?33306:36096,ue=r.get(W),Te=!0===W.isWebGLMultipleRenderTargets;if(Te)for(let Rt=0;Rt<G.length;Rt++)t.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Rt,36161,null),t.bindFramebuffer(36160,ue.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Rt,3553,null,0);t.bindFramebuffer(36008,ue.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ue.__webglFramebuffer);for(let Rt=0;Rt<G.length;Rt++){Dt.push(36064+Rt),W.depthBuffer&&Dt.push(Jt);const zt=void 0!==ue.__ignoreDepthValues&&ue.__ignoreDepthValues;if(!1===zt&&(W.depthBuffer&&(ct|=256),W.stencilBuffer&&(ct|=1024)),Te&&n.framebufferRenderbuffer(36008,36064,36161,ue.__webglColorRenderbuffer[Rt]),!0===zt&&(n.invalidateFramebuffer(36008,[Jt]),n.invalidateFramebuffer(36009,[Jt])),Te){const Bt=r.get(G[Rt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Bt,0)}n.blitFramebuffer(0,0,Pe,et,0,0,Pe,et,ct,9728),f&&n.invalidateFramebuffer(36008,Dt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Te)for(let Rt=0;Rt<G.length;Rt++){t.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Rt,36161,ue.__webglColorRenderbuffer[Rt]);const zt=r.get(G[Rt]).__webglTexture;t.bindFramebuffer(36160,ue.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Rt,3553,zt,0)}t.bindFramebuffer(36009,ue.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ve,this.setupFrameBufferTexture=me,this.useMultisampledRTT=Ne}function Ybe(n,e,t){const r=t.isWebGL2;return{convert:function i(o,s=null){let a;if(o===Ld)return 5121;if(1017===o)return 32819;if(1018===o)return 32820;if(1010===o)return 5120;if(1011===o)return 5122;if(1012===o)return 5123;if(1013===o)return 5124;if(o===Bd)return 5125;if(o===wu)return 5126;if(o===ov)return r?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===o)return 6406;if(o===va)return 6408;if(1024===o)return 6409;if(1025===o)return 6410;if(o===Vd)return 6402;if(o===dp)return 34041;if(1028===o)return 6403;if(1022===o)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===o)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===o)return 36244;if(1030===o)return 33319;if(1031===o)return 33320;if(1033===o)return 36249;if(33776===o||33777===o||33778===o||33779===o)if(s===wi){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===o)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===o)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===o)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===o||37496===o){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===o)return s===wi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===o)return s===wi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===o){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===o)return s===wi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return o===up?r?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[o]?n[o]:null}}}class Zbe extends Oi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class vo extends $s{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Kbe={type:"move"};class HE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new vo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new vo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new vo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){s=!0;for(const p of e.hand.values()){const g=t.getJointPose(p,r);if(void 0===c.joints[p.jointName]){const b=new vo;b.matrixAutoUpdate=!1,b.visible=!1,c.joints[p.jointName]=b,c.add(b)}const _=c.joints[p.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),null!==o&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,r),null===i&&null!==o&&(i=o),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Kbe)))}return null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),null!==c&&(c.visible=null!==s),this}}class Qbe extends Mu{constructor(e,t,r,i,o,s,a,l,c,u){if((u=void 0!==u?u:Vd)!==Vd&&u!==dp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===Vd&&(r=Bd),void 0===r&&u===dp&&(r=up),super(null,i,o,s,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:ro,this.minFilter=void 0!==l?l:ro,this.flipY=!1,this.generateMipmaps=!1}}class Jbe extends Gd{constructor(e,t){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const m=t.getContextAttributes();let p=null,g=null;const _=[],b=[],v=new Oi;v.layers.enable(1),v.viewport=new Gr;const y=new Oi;y.layers.enable(2),y.viewport=new Gr;const w=[v,y],x=new Zbe;x.layers.enable(1),x.layers.enable(2);let E=null,M=null;function S(D){const k=b.indexOf(D.inputSource);if(-1===k)return;const J=_[k];void 0!==J&&J.dispatchEvent({type:D.type,data:D.inputSource})}function C(){i.removeEventListener("select",S),i.removeEventListener("selectstart",S),i.removeEventListener("selectend",S),i.removeEventListener("squeeze",S),i.removeEventListener("squeezestart",S),i.removeEventListener("squeezeend",S),i.removeEventListener("end",C),i.removeEventListener("inputsourceschange",I);for(let D=0;D<_.length;D++){const k=b[D];null!==k&&(b[D]=null,_[D].disconnect(k))}E=null,M=null,e.setRenderTarget(p),h=null,d=null,u=null,i=null,g=null,V.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function I(D){for(let k=0;k<D.removed.length;k++){const J=D.removed[k],ce=b.indexOf(J);ce>=0&&(b[ce]=null,_[ce].dispatchEvent({type:"disconnected",data:J}))}for(let k=0;k<D.added.length;k++){const J=D.added[k];let ce=b.indexOf(J);if(-1===ce){for(let re=0;re<_.length;re++){if(re>=b.length){b.push(J),ce=re;break}if(null===b[re]){b[re]=J,ce=re;break}}if(-1===ce)break}const X=_[ce];X&&X.dispatchEvent({type:"connected",data:J})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(D){let k=_[D];return void 0===k&&(k=new HE,_[D]=k),k.getTargetRaySpace()},this.getControllerGrip=function(D){let k=_[D];return void 0===k&&(k=new HE,_[D]=k),k.getGripSpace()},this.getHand=function(D){let k=_[D];return void 0===k&&(k=new HE,_[D]=k),k.getHandSpace()},this.setFramebufferScaleFactor=function(D){o=D,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(D){a=D,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(D){l=D},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=function(){var D=function Tge(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(l){cV(o,r,i,s,a,"next",l)}function a(l){cV(o,r,i,s,a,"throw",l)}s(void 0)})}}(function*(k){if(i=k,null!==i){if(p=e.getRenderTarget(),i.addEventListener("select",S),i.addEventListener("selectstart",S),i.addEventListener("selectend",S),i.addEventListener("squeeze",S),i.addEventListener("squeezestart",S),i.addEventListener("squeezeend",S),i.addEventListener("end",C),i.addEventListener("inputsourceschange",I),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||m.antialias,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:o}),i.updateRenderState({baseLayer:h}),g=new qd(h.framebufferWidth,h.framebufferHeight,{format:va,type:Ld,encoding:e.outputEncoding,stencilBuffer:m.stencil});else{let J=null,ce=null,X=null;m.depth&&(X=m.stencil?35056:33190,J=m.stencil?dp:Vd,ce=m.stencil?up:Bd);const re={colorFormat:32856,depthFormat:X,scaleFactor:o};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(re),i.updateRenderState({layers:[d]}),g=new qd(d.textureWidth,d.textureHeight,{format:va,type:Ld,depthTexture:new Qbe(d.textureWidth,d.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,J),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,s=yield i.requestReferenceSpace(a),V.setContext(i),V.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(k){return D.apply(this,arguments)}}();const P=new q,F=new q;function z(D,k){null===k?D.matrixWorld.copy(D.matrix):D.matrixWorld.multiplyMatrices(k.matrixWorld,D.matrix),D.matrixWorldInverse.copy(D.matrixWorld).invert()}this.updateCamera=function(D){if(null===i)return;x.near=y.near=v.near=D.near,x.far=y.far=v.far=D.far,(E!==x.near||M!==x.far)&&(i.updateRenderState({depthNear:x.near,depthFar:x.far}),E=x.near,M=x.far);const k=D.parent,J=x.cameras;z(x,k);for(let X=0;X<J.length;X++)z(J[X],k);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),D.matrix.copy(x.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale);const ce=D.children;for(let X=0,re=ce.length;X<re;X++)ce[X].updateMatrixWorld(!0);2===J.length?function R(D,k,J){P.setFromMatrixPosition(k.matrixWorld),F.setFromMatrixPosition(J.matrixWorld);const ce=P.distanceTo(F),X=k.projectionMatrix.elements,re=J.projectionMatrix.elements,Ee=X[14]/(X[10]-1),ie=X[14]/(X[10]+1),Ae=(X[9]+1)/X[5],Fe=(X[9]-1)/X[5],He=(X[8]-1)/X[0],me=(re[8]+1)/re[0],mt=Ee*He,De=Ee*me,ve=ce/(-He+me),ze=ve*-He;k.matrixWorld.decompose(D.position,D.quaternion,D.scale),D.translateX(ze),D.translateZ(ve),D.matrixWorld.compose(D.position,D.quaternion,D.scale),D.matrixWorldInverse.copy(D.matrixWorld).invert();const H=Ee+ve,$=ie+ve;D.projectionMatrix.makePerspective(mt-ze,De+(ce-ze),Ae*ie/$*H,Fe*ie/$*H,H,$)}(x,v,y):x.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(D){null!==d&&(d.fixedFoveation=D),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=D)};let O=null;const V=new lz;V.setAnimationLoop(function T(D,k){if(c=k.getViewerPose(l||s),f=k,null!==c){const J=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let ce=!1;J.length!==x.cameras.length&&(x.cameras.length=0,ce=!0);for(let X=0;X<J.length;X++){const re=J[X];let Ee=null;if(null!==h)Ee=h.getViewport(re);else{const Ae=u.getViewSubImage(d,re);Ee=Ae.viewport,0===X&&(e.setRenderTargetTextures(g,Ae.colorTexture,d.ignoreDepthValues?void 0:Ae.depthStencilTexture),e.setRenderTarget(g))}let ie=w[X];void 0===ie&&(ie=new Oi,ie.layers.enable(X),ie.viewport=new Gr,w[X]=ie),ie.matrix.fromArray(re.transform.matrix),ie.projectionMatrix.fromArray(re.projectionMatrix),ie.viewport.set(Ee.x,Ee.y,Ee.width,Ee.height),0===X&&x.matrix.copy(ie.matrix),!0===ce&&x.cameras.push(ie)}}for(let J=0;J<_.length;J++){const ce=b[J],X=_[J];null!==ce&&void 0!==X&&X.update(ce,k,l||s)}O&&O(D,k),f=null}),this.setAnimationLoop=function(D){O=D},this.dispose=function(){}}}function exe(n,e){function i(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,1===g.side&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),1===g.side&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(p.envMap.value=_,p.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;const y=!0!==n.physicallyCorrectLights?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*y}let b,v;g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity),g.map?b=g.map:g.specularMap?b=g.specularMap:g.displacementMap?b=g.displacementMap:g.normalMap?b=g.normalMap:g.bumpMap?b=g.bumpMap:g.roughnessMap?b=g.roughnessMap:g.metalnessMap?b=g.metalnessMap:g.alphaMap?b=g.alphaMap:g.emissiveMap?b=g.emissiveMap:g.clearcoatMap?b=g.clearcoatMap:g.clearcoatNormalMap?b=g.clearcoatNormalMap:g.clearcoatRoughnessMap?b=g.clearcoatRoughnessMap:g.iridescenceMap?b=g.iridescenceMap:g.iridescenceThicknessMap?b=g.iridescenceThicknessMap:g.specularIntensityMap?b=g.specularIntensityMap:g.specularColorMap?b=g.specularColorMap:g.transmissionMap?b=g.transmissionMap:g.thicknessMap?b=g.thicknessMap:g.sheenColorMap?b=g.sheenColorMap:g.sheenRoughnessMap&&(b=g.sheenRoughnessMap),void 0!==b&&(b.isWebGLRenderTarget&&(b=b.texture),!0===b.matrixAutoUpdate&&b.updateMatrix(),p.uvTransform.value.copy(b.matrix)),g.aoMap?v=g.aoMap:g.lightMap&&(v=g.lightMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uv2Transform.value.copy(v.matrix))}return{refreshFogUniforms:function t(p,g){p.fogColor.value.copy(g.color),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)},refreshMaterialUniforms:function r(p,g,_,b,v){g.isMeshBasicMaterial||g.isMeshLambertMaterial?i(p,g):g.isMeshToonMaterial?(i(p,g),function u(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}(p,g)):g.isMeshPhongMaterial?(i(p,g),function c(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}(p,g)):g.isMeshStandardMaterial?(i(p,g),function d(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}(p,g),g.isMeshPhysicalMaterial&&function h(p,g,_){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=_.texture,p.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}(p,g,v)):g.isMeshMatcapMaterial?(i(p,g),function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}(p,g)):g.isMeshDepthMaterial?i(p,g):g.isMeshDistanceMaterial?(i(p,g),function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}(p,g)):g.isMeshNormalMaterial?i(p,g):g.isLineBasicMaterial?(function o(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}(p,g),g.isLineDashedMaterial&&function s(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}(p,g)):g.isPointsMaterial?function a(p,g,_,b){let v;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*_,p.scale.value=.5*b,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}(p,g,_,b):g.isSpriteMaterial?function l(p,g){let _;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),p.uvTransform.value.copy(_.matrix))}(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function txe(n,e,t,r){let i={},o={},s=[];const a=t.isWebGL2?n.getParameter(35375):0;function f(b,v,y){const w=b.value;if(void 0===y[v])return y[v]="number"==typeof w?w:w.clone(),!0;if("number"==typeof w){if(y[v]!==w)return y[v]=w,!0}else{const x=y[v];if(!1===x.equals(w))return x.copy(w),!0}return!1}function p(b){const v=b.value,y={boundary:0,storage:0};return"number"==typeof v?(y.boundary=4,y.storage=4):v.isVector2?(y.boundary=8,y.storage=8):v.isVector3||v.isColor?(y.boundary=16,y.storage=12):v.isVector4?(y.boundary=16,y.storage=16):v.isMatrix3?(y.boundary=48,y.storage=48):v.isMatrix4?(y.boundary=64,y.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),y}function g(b){const v=b.target;v.removeEventListener("dispose",g);const y=s.indexOf(v.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(i[v.id]),delete i[v.id],delete o[v.id]}return{bind:function l(b,v){r.uniformBlockBinding(b,v.program)},update:function c(b,v){let y=i[b.id];void 0===y&&(function m(b){const v=b.uniforms;let y=0;let x=0;for(let E=0,M=v.length;E<M;E++){const S=v[E],C=p(S);if(S.__data=new Float32Array(C.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=y,E>0){x=y%16;const I=16-x;0!==x&&I-C.boundary<0&&(y+=16-x,S.__offset=y)}y+=C.storage}x=y%16,x>0&&(y+=16-x),b.__size=y,b.__cache={}}(b),y=function u(b){const v=function d(){for(let b=0;b<a;b++)if(-1===s.indexOf(b))return s.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=v;const y=n.createBuffer(),w=b.__size,x=b.usage;return n.bindBuffer(35345,y),n.bufferData(35345,w,x),n.bindBuffer(35345,null),n.bindBufferBase(35345,v,y),y}(b),i[b.id]=y,b.addEventListener("dispose",g)),r.updateUBOMapping(b,v.program);const x=e.render.frame;o[b.id]!==x&&(function h(b){const y=b.uniforms,w=b.__cache;n.bindBuffer(35345,i[b.id]);for(let x=0,E=y.length;x<E;x++){const M=y[x];if(!0===f(M,x,w)){const S=M.value,C=M.__offset;"number"==typeof S?(M.__data[0]=S,n.bufferSubData(35345,C,M.__data)):(M.value.isMatrix3?(M.__data[0]=M.value.elements[0],M.__data[1]=M.value.elements[1],M.__data[2]=M.value.elements[2],M.__data[3]=M.value.elements[0],M.__data[4]=M.value.elements[3],M.__data[5]=M.value.elements[4],M.__data[6]=M.value.elements[5],M.__data[7]=M.value.elements[0],M.__data[8]=M.value.elements[6],M.__data[9]=M.value.elements[7],M.__data[10]=M.value.elements[8],M.__data[11]=M.value.elements[0]):S.toArray(M.__data),n.bufferSubData(35345,C,M.__data))}}n.bindBuffer(35345,null)}(b),o[b.id]=x)},dispose:function _(){for(const b in i)n.deleteBuffer(i[b]);s=[],i={},o={}}}}function Fp(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function nxe(){const n=lv("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,i=void 0===n.stencil||n.stencil,o=void 0!==n.antialias&&n.antialias,s=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=zd,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const p=this;let g=!1,_=0,b=0,v=null,y=-1,w=null;const x=new Gr,E=new Gr;let M=null,S=e.width,C=e.height,I=1,P=null,F=null;const R=new Gr(0,0,S,C),z=new Gr(0,0,S,C);let O=!1;const T=new FE;let V=!1,D=!1,k=null;const J=new Sn,ce=new Je,X=new q,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return null===v?I:1}let Fe,He,me,mt,De,ve,ze,H,$,ye,ge,Ne,Ye,gt,W,G,Pe,et,ct,Dt,Jt,ue,Te,Rt,ie=t;function Ae(te,Ue){for(let Ze=0;Ze<te.length;Ze++){const Qe=e.getContext(te[Ze],Ue);if(null!==Qe)return Qe}return null}try{const te={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r146"),e.addEventListener("webglcontextlost",Kt,!1),e.addEventListener("webglcontextrestored",Wt,!1),e.addEventListener("webglcontextcreationerror",Wn,!1),null===ie){const Ue=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&Ue.shift(),ie=Ae(Ue,te),null===ie)throw Ae(Ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ie.getShaderPrecisionFormat&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(te){throw console.error("THREE.WebGLRenderer: "+te.message),te}function zt(){Fe=new mye(ie),He=new cye(ie,Fe,n),Fe.init(He),ue=new Ybe(ie,Fe,He),me=new $be(ie,Fe,He),mt=new _ye,De=new Fbe,ve=new Xbe(ie,Fe,me,De,He,ue,mt),ze=new dye(p),H=new pye(p),$=new a0e(ie,He),Te=new aye(ie,Fe,$,He),ye=new gye(ie,$,mt,Te),ge=new wye(ie,ye,$,mt),ct=new xye(ie,He,ve),G=new uye(De),Ne=new Rbe(p,ze,H,Fe,He,Te,G),Ye=new exe(p,De),gt=new Lbe,W=new Gbe(Fe,He),et=new sye(p,ze,H,me,ge,u,s),Pe=new qbe(p,ge,He),Rt=new txe(ie,mt,He,me),Dt=new lye(ie,Fe,mt,He),Jt=new vye(ie,Fe,mt,He),mt.programs=Ne.programs,p.capabilities=He,p.extensions=Fe,p.properties=De,p.renderLists=gt,p.shadowMap=Pe,p.state=me,p.info=mt}zt();const Bt=new Jbe(p,ie);function Kt(te){te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Wt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const te=mt.autoReset,Ue=Pe.enabled,Ze=Pe.autoUpdate,Re=Pe.needsUpdate,Qe=Pe.type;zt(),mt.autoReset=te,Pe.enabled=Ue,Pe.autoUpdate=Ze,Pe.needsUpdate=Re,Pe.type=Qe}function Wn(te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",te.statusMessage)}function er(te){const Ue=te.target;Ue.removeEventListener("dispose",er),function jr(te){(function Se(te){const Ue=De.get(te).programs;void 0!==Ue&&(Ue.forEach(function(Ze){Ne.releaseProgram(Ze)}),te.isShaderMaterial&&Ne.releaseShaderCache(te))})(te),De.remove(te)}(Ue)}this.xr=Bt,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const te=Fe.get("WEBGL_lose_context");te&&te.loseContext()},this.forceContextRestore=function(){const te=Fe.get("WEBGL_lose_context");te&&te.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(te){void 0!==te&&(I=te,this.setSize(S,C,!1))},this.getSize=function(te){return te.set(S,C)},this.setSize=function(te,Ue,Ze){Bt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(S=te,C=Ue,e.width=Math.floor(te*I),e.height=Math.floor(Ue*I),!1!==Ze&&(e.style.width=te+"px",e.style.height=Ue+"px"),this.setViewport(0,0,te,Ue))},this.getDrawingBufferSize=function(te){return te.set(S*I,C*I).floor()},this.setDrawingBufferSize=function(te,Ue,Ze){S=te,C=Ue,I=Ze,e.width=Math.floor(te*Ze),e.height=Math.floor(Ue*Ze),this.setViewport(0,0,te,Ue)},this.getCurrentViewport=function(te){return te.copy(x)},this.getViewport=function(te){return te.copy(R)},this.setViewport=function(te,Ue,Ze,Re){te.isVector4?R.set(te.x,te.y,te.z,te.w):R.set(te,Ue,Ze,Re),me.viewport(x.copy(R).multiplyScalar(I).floor())},this.getScissor=function(te){return te.copy(z)},this.setScissor=function(te,Ue,Ze,Re){te.isVector4?z.set(te.x,te.y,te.z,te.w):z.set(te,Ue,Ze,Re),me.scissor(E.copy(z).multiplyScalar(I).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(te){me.setScissorTest(O=te)},this.setOpaqueSort=function(te){P=te},this.setTransparentSort=function(te){F=te},this.getClearColor=function(te){return te.copy(et.getClearColor())},this.setClearColor=function(){et.setClearColor.apply(et,arguments)},this.getClearAlpha=function(){return et.getClearAlpha()},this.setClearAlpha=function(){et.setClearAlpha.apply(et,arguments)},this.clear=function(te=!0,Ue=!0,Ze=!0){let Re=0;te&&(Re|=16384),Ue&&(Re|=256),Ze&&(Re|=1024),ie.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Kt,!1),e.removeEventListener("webglcontextrestored",Wt,!1),e.removeEventListener("webglcontextcreationerror",Wn,!1),gt.dispose(),W.dispose(),De.dispose(),ze.dispose(),H.dispose(),ge.dispose(),Te.dispose(),Rt.dispose(),Ne.dispose(),Bt.dispose(),Bt.removeEventListener("sessionstart",Ht),Bt.removeEventListener("sessionend",sn),k&&(k.dispose(),k=null),Nr.stop()},this.renderBufferDirect=function(te,Ue,Ze,Re,Qe,un){null===Ue&&(Ue=re);const An=Qe.isMesh&&Qe.matrixWorld.determinant()<0,tr=function bPe(te,Ue,Ze,Re,Qe){!0!==Ue.isScene&&(Ue=re),ve.resetTextureUnits();const un=Ue.fog,tr=null===v?p.outputEncoding:!0===v.isXRRenderTarget?v.texture.encoding:zd,qn=(Re.isMeshStandardMaterial?H:ze).get(Re.envMap||(Re.isMeshStandardMaterial?Ue.environment:null)),Rr=!0===Re.vertexColors&&!!Ze.attributes.color&&4===Ze.attributes.color.itemSize,lr=!!Re.normalMap&&!!Ze.attributes.tangent,gr=!!Ze.morphAttributes.position,Ci=!!Ze.morphAttributes.normal,Th=!!Ze.morphAttributes.color,Cm=Re.toneMapped?p.toneMapping:0,Sm=Ze.morphAttributes.position||Ze.morphAttributes.normal||Ze.morphAttributes.color,ql=void 0!==Sm?Sm.length:0,Fr=De.get(Re),Em=h.state.lights;!0!==V||!0!==D&&te===w||G.setState(Re,te,te===w&&Re.id===y);let ji=!1;Re.version===Fr.__version?(Fr.needsLights&&Fr.lightsStateVersion!==Em.state.version||Fr.outputEncoding!==tr||Qe.isInstancedMesh&&!1===Fr.instancing||!Qe.isInstancedMesh&&!0===Fr.instancing||Qe.isSkinnedMesh&&!1===Fr.skinning||!Qe.isSkinnedMesh&&!0===Fr.skinning||Fr.envMap!==qn||!0===Re.fog&&Fr.fog!==un||void 0!==Fr.numClippingPlanes&&(Fr.numClippingPlanes!==G.numPlanes||Fr.numIntersection!==G.numIntersection)||Fr.vertexAlphas!==Rr||Fr.vertexTangents!==lr||Fr.morphTargets!==gr||Fr.morphNormals!==Ci||Fr.morphColors!==Th||Fr.toneMapping!==Cm||!0===He.isWebGL2&&Fr.morphTargetsCount!==ql)&&(ji=!0):(ji=!0,Fr.__version=Re.version);let Sa=Fr.currentProgram;!0===ji&&(Sa=Ca(Re,Ue,Qe));let td=!1,N0=!1,ET=!1;const ps=Sa.getUniforms(),Ih=Fr.uniforms;if(me.useProgram(Sa.program)&&(td=!0,N0=!0,ET=!0),Re.id!==y&&(y=Re.id,N0=!0),td||w!==te){if(ps.setValue(ie,"projectionMatrix",te.projectionMatrix),He.logarithmicDepthBuffer&&ps.setValue(ie,"logDepthBufFC",2/(Math.log(te.far+1)/Math.LN2)),w!==te&&(w=te,N0=!0,ET=!0),Re.isShaderMaterial||Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshStandardMaterial||Re.envMap){const ta=ps.map.cameraPosition;void 0!==ta&&ta.setValue(ie,X.setFromMatrixPosition(te.matrixWorld))}(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&ps.setValue(ie,"isOrthographic",!0===te.isOrthographicCamera),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial||Re.isShadowMaterial||Qe.isSkinnedMesh)&&ps.setValue(ie,"viewMatrix",te.matrixWorldInverse)}if(Qe.isSkinnedMesh){ps.setOptional(ie,Qe,"bindMatrix"),ps.setOptional(ie,Qe,"bindMatrixInverse");const ta=Qe.skeleton;ta&&(He.floatVertexTextures?(null===ta.boneTexture&&ta.computeBoneTexture(),ps.setValue(ie,"boneTexture",ta.boneTexture,ve),ps.setValue(ie,"boneTextureSize",ta.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const DT=Ze.morphAttributes;if((void 0!==DT.position||void 0!==DT.normal||void 0!==DT.color&&!0===He.isWebGL2)&&ct.update(Qe,Ze,Re,Sa),(N0||Fr.receiveShadow!==Qe.receiveShadow)&&(Fr.receiveShadow=Qe.receiveShadow,ps.setValue(ie,"receiveShadow",Qe.receiveShadow)),Re.isMeshGouraudMaterial&&null!==Re.envMap&&(Ih.envMap.value=qn,Ih.flipEnvMap.value=qn.isCubeTexture&&!1===qn.isRenderTargetTexture?-1:1),N0&&(ps.setValue(ie,"toneMappingExposure",p.toneMappingExposure),Fr.needsLights&&function xPe(te,Ue){te.ambientLightColor.needsUpdate=Ue,te.lightProbe.needsUpdate=Ue,te.directionalLights.needsUpdate=Ue,te.directionalLightShadows.needsUpdate=Ue,te.pointLights.needsUpdate=Ue,te.pointLightShadows.needsUpdate=Ue,te.spotLights.needsUpdate=Ue,te.spotLightShadows.needsUpdate=Ue,te.rectAreaLights.needsUpdate=Ue,te.hemisphereLights.needsUpdate=Ue}(Ih,ET),un&&!0===Re.fog&&Ye.refreshFogUniforms(Ih,un),Ye.refreshMaterialUniforms(Ih,Re,I,C,k),qb.upload(ie,Fr.uniformsList,Ih,ve)),Re.isShaderMaterial&&!0===Re.uniformsNeedUpdate&&(qb.upload(ie,Fr.uniformsList,Ih,ve),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&ps.setValue(ie,"center",Qe.center),ps.setValue(ie,"modelViewMatrix",Qe.modelViewMatrix),ps.setValue(ie,"normalMatrix",Qe.normalMatrix),ps.setValue(ie,"modelMatrix",Qe.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const ta=Re.uniformsGroups;for(let AT=0,MPe=ta.length;AT<MPe;AT++)if(He.isWebGL2){const H7=ta[AT];Rt.update(H7,Sa),Rt.bind(H7,Sa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Sa}(te,Ue,Ze,Re,Qe);me.setMaterial(Re,An);let qn=Ze.index;const Rr=Ze.attributes.position;if(null===qn){if(void 0===Rr||0===Rr.count)return}else if(0===qn.count)return;let lr=1;!0===Re.wireframe&&(qn=ye.getWireframeAttribute(Ze),lr=2),Te.setup(Qe,Re,tr,Ze,qn);let gr,Ci=Dt;null!==qn&&(gr=$.get(qn),Ci=Jt,Ci.setIndex(gr));const Th=null!==qn?qn.count:Rr.count,Cm=Ze.drawRange.start*lr,Sm=Ze.drawRange.count*lr,ql=null!==un?un.start*lr:0,Fr=null!==un?un.count*lr:1/0,Em=Math.max(Cm,ql),ji=Math.min(Th,Cm+Sm,ql+Fr)-1,Sa=Math.max(0,ji-Em+1);if(0!==Sa){if(Qe.isMesh)!0===Re.wireframe?(me.setLineWidth(Re.wireframeLinewidth*Ee()),Ci.setMode(1)):Ci.setMode(4);else if(Qe.isLine){let td=Re.linewidth;void 0===td&&(td=1),me.setLineWidth(td*Ee()),Ci.setMode(Qe.isLineSegments?1:Qe.isLineLoop?2:3)}else Qe.isPoints?Ci.setMode(0):Qe.isSprite&&Ci.setMode(4);if(Qe.isInstancedMesh)Ci.renderInstances(Em,Sa,Qe.count);else if(Ze.isInstancedBufferGeometry){const td=Math.min(Ze.instanceCount,Ze._maxInstanceCount);Ci.renderInstances(Em,Sa,td)}else Ci.render(Em,Sa)}},this.compile=function(te,Ue){function Ze(Re,Qe,un){!0===Re.transparent&&2===Re.side?(Re.side=1,Re.needsUpdate=!0,Ca(Re,Qe,un),Re.side=0,Re.needsUpdate=!0,Ca(Re,Qe,un),Re.side=2):Ca(Re,Qe,un)}h=W.get(te),h.init(),m.push(h),te.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Ue.layers)&&(h.pushLight(Re),Re.castShadow&&h.pushShadow(Re))}),h.setupLights(p.physicallyCorrectLights),te.traverse(function(Re){const Qe=Re.material;if(Qe)if(Array.isArray(Qe))for(let un=0;un<Qe.length;un++)Ze(Qe[un],te,Re);else Ze(Qe,te,Re)}),m.pop(),h=null};let Ke=null;function Ht(){Nr.stop()}function sn(){Nr.start()}const Nr=new lz;function _o(te,Ue,Ze,Re){if(!1===te.visible)return;if(te.layers.test(Ue.layers))if(te.isGroup)Ze=te.renderOrder;else if(te.isLOD)!0===te.autoUpdate&&te.update(Ue);else if(te.isLight)h.pushLight(te),te.castShadow&&h.pushShadow(te);else if(te.isSprite){if(!te.frustumCulled||T.intersectsSprite(te)){Re&&X.setFromMatrixPosition(te.matrixWorld).applyMatrix4(J);const An=ge.update(te),tr=te.material;tr.visible&&d.push(te,An,tr,Ze,X.z,null)}}else if((te.isMesh||te.isLine||te.isPoints)&&(te.isSkinnedMesh&&te.skeleton.frame!==mt.render.frame&&(te.skeleton.update(),te.skeleton.frame=mt.render.frame),!te.frustumCulled||T.intersectsObject(te))){Re&&X.setFromMatrixPosition(te.matrixWorld).applyMatrix4(J);const An=ge.update(te),tr=te.material;if(Array.isArray(tr)){const qn=An.groups;for(let Rr=0,lr=qn.length;Rr<lr;Rr++){const gr=qn[Rr],Ci=tr[gr.materialIndex];Ci&&Ci.visible&&d.push(te,An,Ci,Ze,X.z,gr)}}else tr.visible&&d.push(te,An,tr,Ze,X.z,null)}const un=te.children;for(let An=0,tr=un.length;An<tr;An++)_o(un[An],Ue,Ze,Re)}function qo(te,Ue,Ze,Re){const Qe=te.opaque,un=te.transmissive,An=te.transparent;h.setupLightsView(Ze),un.length>0&&function Ah(te,Ue,Ze){const Re=He.isWebGL2;null===k&&(k=new qd(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")?ov:Ld,minFilter:1008,samples:Re&&!0===o?4:0})),p.getDrawingBufferSize(ce),Re?k.setSize(ce.x,ce.y):k.setSize(wb(ce.x),wb(ce.y));const Qe=p.getRenderTarget();p.setRenderTarget(k),p.clear();const un=p.toneMapping;p.toneMapping=0,ci(te,Ue,Ze),p.toneMapping=un,ve.updateMultisampleRenderTarget(k),ve.updateRenderTargetMipmap(k),p.setRenderTarget(Qe)}(Qe,Ue,Ze),Re&&me.viewport(x.copy(Re)),Qe.length>0&&ci(Qe,Ue,Ze),un.length>0&&ci(un,Ue,Ze),An.length>0&&ci(An,Ue,Ze),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function ci(te,Ue,Ze){const Re=!0===Ue.isScene?Ue.overrideMaterial:null;for(let Qe=0,un=te.length;Qe<un;Qe++){const An=te[Qe],tr=An.object,qn=An.geometry,Rr=null===Re?An.material:Re,lr=An.group;tr.layers.test(Ze.layers)&&Uc(tr,Ue,Ze,qn,Rr,lr)}}function Uc(te,Ue,Ze,Re,Qe,un){te.onBeforeRender(p,Ue,Ze,Re,Qe,un),te.modelViewMatrix.multiplyMatrices(Ze.matrixWorldInverse,te.matrixWorld),te.normalMatrix.getNormalMatrix(te.modelViewMatrix),Qe.onBeforeRender(p,Ue,Ze,Re,te,un),!0===Qe.transparent&&2===Qe.side?(Qe.side=1,Qe.needsUpdate=!0,p.renderBufferDirect(Ze,Ue,Re,Qe,te,un),Qe.side=0,Qe.needsUpdate=!0,p.renderBufferDirect(Ze,Ue,Re,Qe,te,un),Qe.side=2):p.renderBufferDirect(Ze,Ue,Re,Qe,te,un),te.onAfterRender(p,Ue,Ze,Re,Qe,un)}function Ca(te,Ue,Ze){!0!==Ue.isScene&&(Ue=re);const Re=De.get(te),Qe=h.state.lights,An=Qe.state.version,tr=Ne.getParameters(te,Qe.state,h.state.shadowsArray,Ue,Ze),qn=Ne.getProgramCacheKey(tr);let Rr=Re.programs;Re.environment=te.isMeshStandardMaterial?Ue.environment:null,Re.fog=Ue.fog,Re.envMap=(te.isMeshStandardMaterial?H:ze).get(te.envMap||Re.environment),void 0===Rr&&(te.addEventListener("dispose",er),Rr=new Map,Re.programs=Rr);let lr=Rr.get(qn);if(void 0!==lr){if(Re.currentProgram===lr&&Re.lightsStateVersion===An)return U7(te,tr),lr}else tr.uniforms=Ne.getUniforms(te),te.onBuild(Ze,tr,p),te.onBeforeCompile(tr,p),lr=Ne.acquireProgram(tr,qn),Rr.set(qn,lr),Re.uniforms=tr.uniforms;const gr=Re.uniforms;(!te.isShaderMaterial&&!te.isRawShaderMaterial||!0===te.clipping)&&(gr.clippingPlanes=G.uniform),U7(te,tr),Re.needsLights=function wPe(te){return te.isMeshLambertMaterial||te.isMeshToonMaterial||te.isMeshPhongMaterial||te.isMeshStandardMaterial||te.isShadowMaterial||te.isShaderMaterial&&!0===te.lights}(te),Re.lightsStateVersion=An,Re.needsLights&&(gr.ambientLightColor.value=Qe.state.ambient,gr.lightProbe.value=Qe.state.probe,gr.directionalLights.value=Qe.state.directional,gr.directionalLightShadows.value=Qe.state.directionalShadow,gr.spotLights.value=Qe.state.spot,gr.spotLightShadows.value=Qe.state.spotShadow,gr.rectAreaLights.value=Qe.state.rectArea,gr.ltc_1.value=Qe.state.rectAreaLTC1,gr.ltc_2.value=Qe.state.rectAreaLTC2,gr.pointLights.value=Qe.state.point,gr.pointLightShadows.value=Qe.state.pointShadow,gr.hemisphereLights.value=Qe.state.hemi,gr.directionalShadowMap.value=Qe.state.directionalShadowMap,gr.directionalShadowMatrix.value=Qe.state.directionalShadowMatrix,gr.spotShadowMap.value=Qe.state.spotShadowMap,gr.spotLightMatrix.value=Qe.state.spotLightMatrix,gr.spotLightMap.value=Qe.state.spotLightMap,gr.pointShadowMap.value=Qe.state.pointShadowMap,gr.pointShadowMatrix.value=Qe.state.pointShadowMatrix);const Ci=lr.getUniforms(),Th=qb.seqWithValue(Ci.seq,gr);return Re.currentProgram=lr,Re.uniformsList=Th,lr}function U7(te,Ue){const Ze=De.get(te);Ze.outputEncoding=Ue.outputEncoding,Ze.instancing=Ue.instancing,Ze.skinning=Ue.skinning,Ze.morphTargets=Ue.morphTargets,Ze.morphNormals=Ue.morphNormals,Ze.morphColors=Ue.morphColors,Ze.morphTargetsCount=Ue.morphTargetsCount,Ze.numClippingPlanes=Ue.numClippingPlanes,Ze.numIntersection=Ue.numClipIntersection,Ze.vertexAlphas=Ue.vertexAlphas,Ze.vertexTangents=Ue.vertexTangents,Ze.toneMapping=Ue.toneMapping}Nr.setAnimationLoop(function Ct(te){Ke&&Ke(te)}),typeof self<"u"&&Nr.setContext(self),this.setAnimationLoop=function(te){Ke=te,Bt.setAnimationLoop(te),null===te?Nr.stop():Nr.start()},Bt.addEventListener("sessionstart",Ht),Bt.addEventListener("sessionend",sn),this.render=function(te,Ue){if(void 0===Ue||!0===Ue.isCamera){if(!0!==g){if(!0===te.matrixWorldAutoUpdate&&te.updateMatrixWorld(),null===Ue.parent&&!0===Ue.matrixWorldAutoUpdate&&Ue.updateMatrixWorld(),!0===Bt.enabled&&!0===Bt.isPresenting&&(!0===Bt.cameraAutoUpdate&&Bt.updateCamera(Ue),Ue=Bt.getCamera()),!0===te.isScene&&te.onBeforeRender(p,te,Ue,v),h=W.get(te,m.length),h.init(),m.push(h),J.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),T.setFromProjectionMatrix(J),D=this.localClippingEnabled,V=G.init(this.clippingPlanes,D,Ue),d=gt.get(te,f.length),d.init(),f.push(d),_o(te,Ue,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(P,F),!0===V&&G.beginShadows(),Pe.render(h.state.shadowsArray,te,Ue),!0===V&&G.endShadows(),!0===this.info.autoReset&&this.info.reset(),et.render(d,te),h.setupLights(p.physicallyCorrectLights),Ue.isArrayCamera){const Re=Ue.cameras;for(let Qe=0,un=Re.length;Qe<un;Qe++){const An=Re[Qe];qo(d,te,An,An.viewport)}}else qo(d,te,Ue);null!==v&&(ve.updateMultisampleRenderTarget(v),ve.updateRenderTargetMipmap(v)),!0===te.isScene&&te.onAfterRender(p,te,Ue),Te.resetDefaultState(),y=-1,w=null,m.pop(),h=m.length>0?m[m.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(te,Ue,Ze){De.get(te.texture).__webglTexture=Ue,De.get(te.depthTexture).__webglTexture=Ze;const Re=De.get(te);Re.__hasExternalTextures=!0,Re.__hasExternalTextures&&(Re.__autoAllocateDepthBuffer=void 0===Ze,Re.__autoAllocateDepthBuffer||!0===Fe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(te,Ue){const Ze=De.get(te);Ze.__webglFramebuffer=Ue,Ze.__useDefaultFramebuffer=void 0===Ue},this.setRenderTarget=function(te,Ue=0,Ze=0){v=te,_=Ue,b=Ze;let Re=!0,Qe=null,un=!1,An=!1;if(te){const qn=De.get(te);void 0!==qn.__useDefaultFramebuffer?(me.bindFramebuffer(36160,null),Re=!1):void 0===qn.__webglFramebuffer?ve.setupRenderTarget(te):qn.__hasExternalTextures&&ve.rebindTextures(te,De.get(te.texture).__webglTexture,De.get(te.depthTexture).__webglTexture);const Rr=te.texture;(Rr.isData3DTexture||Rr.isDataArrayTexture||Rr.isCompressedArrayTexture)&&(An=!0);const lr=De.get(te).__webglFramebuffer;te.isWebGLCubeRenderTarget?(Qe=lr[Ue],un=!0):Qe=He.isWebGL2&&te.samples>0&&!1===ve.useMultisampledRTT(te)?De.get(te).__webglMultisampledFramebuffer:lr,x.copy(te.viewport),E.copy(te.scissor),M=te.scissorTest}else x.copy(R).multiplyScalar(I).floor(),E.copy(z).multiplyScalar(I).floor(),M=O;if(me.bindFramebuffer(36160,Qe)&&He.drawBuffers&&Re&&me.drawBuffers(te,Qe),me.viewport(x),me.scissor(E),me.setScissorTest(M),un){const qn=De.get(te.texture);ie.framebufferTexture2D(36160,36064,34069+Ue,qn.__webglTexture,Ze)}else if(An){const qn=De.get(te.texture);ie.framebufferTextureLayer(36160,36064,qn.__webglTexture,Ze||0,Ue||0)}y=-1},this.readRenderTargetPixels=function(te,Ue,Ze,Re,Qe,un,An){if(!te||!te.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let tr=De.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&void 0!==An&&(tr=tr[An]),tr){me.bindFramebuffer(36160,tr);try{const qn=te.texture,Rr=qn.format,lr=qn.type;if(Rr!==va&&ue.convert(Rr)!==ie.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const gr=lr===ov&&(Fe.has("EXT_color_buffer_half_float")||He.isWebGL2&&Fe.has("EXT_color_buffer_float"));if(!(lr===Ld||ue.convert(lr)===ie.getParameter(35738)||lr===wu&&(He.isWebGL2||Fe.has("OES_texture_float")||Fe.has("WEBGL_color_buffer_float"))||gr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ue>=0&&Ue<=te.width-Re&&Ze>=0&&Ze<=te.height-Qe&&ie.readPixels(Ue,Ze,Re,Qe,ue.convert(Rr),ue.convert(lr),un)}finally{const qn=null!==v?De.get(v).__webglFramebuffer:null;me.bindFramebuffer(36160,qn)}}},this.copyFramebufferToTexture=function(te,Ue,Ze=0){const Re=Math.pow(2,-Ze),Qe=Math.floor(Ue.image.width*Re),un=Math.floor(Ue.image.height*Re);ve.setTexture2D(Ue,0),ie.copyTexSubImage2D(3553,Ze,0,0,te.x,te.y,Qe,un),me.unbindTexture()},this.copyTextureToTexture=function(te,Ue,Ze,Re=0){const Qe=Ue.image.width,un=Ue.image.height,An=ue.convert(Ze.format),tr=ue.convert(Ze.type);ve.setTexture2D(Ze,0),ie.pixelStorei(37440,Ze.flipY),ie.pixelStorei(37441,Ze.premultiplyAlpha),ie.pixelStorei(3317,Ze.unpackAlignment),Ue.isDataTexture?ie.texSubImage2D(3553,Re,te.x,te.y,Qe,un,An,tr,Ue.image.data):Ue.isCompressedTexture?ie.compressedTexSubImage2D(3553,Re,te.x,te.y,Ue.mipmaps[0].width,Ue.mipmaps[0].height,An,Ue.mipmaps[0].data):ie.texSubImage2D(3553,Re,te.x,te.y,An,tr,Ue.image),0===Re&&Ze.generateMipmaps&&ie.generateMipmap(3553),me.unbindTexture()},this.copyTextureToTexture3D=function(te,Ue,Ze,Re,Qe=0){if(p.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const un=te.max.x-te.min.x+1,An=te.max.y-te.min.y+1,tr=te.max.z-te.min.z+1,qn=ue.convert(Re.format),Rr=ue.convert(Re.type);let lr;if(Re.isData3DTexture)ve.setTexture3D(Re,0),lr=32879;else{if(!Re.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ve.setTexture2DArray(Re,0),lr=35866}ie.pixelStorei(37440,Re.flipY),ie.pixelStorei(37441,Re.premultiplyAlpha),ie.pixelStorei(3317,Re.unpackAlignment);const gr=ie.getParameter(3314),Ci=ie.getParameter(32878),Th=ie.getParameter(3316),Cm=ie.getParameter(3315),Sm=ie.getParameter(32877),ql=Ze.isCompressedTexture?Ze.mipmaps[0]:Ze.image;ie.pixelStorei(3314,ql.width),ie.pixelStorei(32878,ql.height),ie.pixelStorei(3316,te.min.x),ie.pixelStorei(3315,te.min.y),ie.pixelStorei(32877,te.min.z),Ze.isDataTexture||Ze.isData3DTexture?ie.texSubImage3D(lr,Qe,Ue.x,Ue.y,Ue.z,un,An,tr,qn,Rr,ql.data):Ze.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ie.compressedTexSubImage3D(lr,Qe,Ue.x,Ue.y,Ue.z,un,An,tr,qn,ql.data)):ie.texSubImage3D(lr,Qe,Ue.x,Ue.y,Ue.z,un,An,tr,qn,Rr,ql),ie.pixelStorei(3314,gr),ie.pixelStorei(32878,Ci),ie.pixelStorei(3316,Th),ie.pixelStorei(3315,Cm),ie.pixelStorei(32877,Sm),0===Qe&&Re.generateMipmaps&&ie.generateMipmap(lr),me.unbindTexture()},this.initTexture=function(te){te.isCubeTexture?ve.setTextureCube(te,0):te.isData3DTexture?ve.setTexture3D(te,0):te.isDataArrayTexture||te.isCompressedArrayTexture?ve.setTexture2DArray(te,0):ve.setTexture2D(te,0),me.unbindTexture()},this.resetState=function(){_=0,b=0,v=null,me.reset(),Te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class rxe extends Fp{}).prototype.isWebGL1Renderer=!0;class kp extends $s{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class eh extends Jn{constructor(e=1,t=1,r=1,i=8,o=1,s=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),o=Math.floor(o);const u=[],d=[],h=[],f=[];let m=0;const p=[],g=r/2;let _=0;function v(y){const w=m,x=new Je,E=new q;let M=0;const S=!0===y?e:t,C=!0===y?1:-1;for(let P=1;P<=i;P++)d.push(0,g*C,0),h.push(0,C,0),f.push(.5,.5),m++;const I=m;for(let P=0;P<=i;P++){const R=P/i*l+a,z=Math.cos(R),O=Math.sin(R);E.x=S*O,E.y=g*C,E.z=S*z,d.push(E.x,E.y,E.z),h.push(0,C,0),x.x=.5*z+.5,x.y=.5*O*C+.5,f.push(x.x,x.y),m++}for(let P=0;P<i;P++){const F=w+P,R=I+P;!0===y?u.push(R,R+1,F):u.push(R+1,R,F),M+=3}c.addGroup(_,M,!0===y?1:2),_+=M}(function b(){const y=new q,w=new q;let x=0;const E=(t-e)/r;for(let M=0;M<=o;M++){const S=[],C=M/o,I=C*(t-e)+e;for(let P=0;P<=i;P++){const F=P/i,R=F*l+a,z=Math.sin(R),O=Math.cos(R);w.x=I*z,w.y=-C*r+g,w.z=I*O,d.push(w.x,w.y,w.z),y.set(z,E,O).normalize(),h.push(y.x,y.y,y.z),f.push(F,1-C),S.push(m++)}p.push(S)}for(let M=0;M<i;M++)for(let S=0;S<o;S++){const I=p[S+1][M],P=p[S+1][M+1],F=p[S][M+1];u.push(p[S][M],I,F),u.push(I,P,F),x+=6}c.addGroup(_,x,0),_+=x})(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new Yt(d,3)),this.setAttribute("normal",new Yt(h,3)),this.setAttribute("uv",new Yt(f,2))}static fromJSON(e){return new eh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Nu extends Jn{constructor(e=1,t=32,r=16,i=0,o=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let c=0;const u=[],d=new q,h=new q,f=[],m=[],p=[],g=[];for(let _=0;_<=r;_++){const b=[],v=_/r;let y=0;0==_&&0==s?y=.5/t:_==r&&l==Math.PI&&(y=-.5/t);for(let w=0;w<=t;w++){const x=w/t;d.x=-e*Math.cos(i+x*o)*Math.sin(s+v*a),d.y=e*Math.cos(s+v*a),d.z=e*Math.sin(i+x*o)*Math.sin(s+v*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),p.push(h.x,h.y,h.z),g.push(x+y,1-v),b.push(c++)}u.push(b)}for(let _=0;_<r;_++)for(let b=0;b<t;b++){const v=u[_][b+1],y=u[_][b],w=u[_+1][b],x=u[_+1][b+1];(0!==_||s>0)&&f.push(v,y,x),(_!==r-1||l<Math.PI)&&f.push(y,w,x)}this.setIndex(f),this.setAttribute("position",new Yt(m,3)),this.setAttribute("normal",new Yt(p,3)),this.setAttribute("uv",new Yt(g,2))}static fromJSON(e){return new Nu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ru extends Jn{constructor(e=1,t=.4,r=8,i=6,o=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],c=[],u=new q,d=new q,h=new q;for(let f=0;f<=r;f++)for(let m=0;m<=i;m++){const p=m/i*o,g=f/r*Math.PI*2;d.x=(e+t*Math.cos(g))*Math.cos(p),d.y=(e+t*Math.cos(g))*Math.sin(p),d.z=t*Math.sin(g),a.push(d.x,d.y,d.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(m/i),c.push(f/r)}for(let f=1;f<=r;f++)for(let m=1;m<=i;m++){const g=(i+1)*(f-1)+m-1,_=(i+1)*(f-1)+m,b=(i+1)*f+m;s.push((i+1)*f+m-1,g,b),s.push(g,_,b)}this.setIndex(s),this.setAttribute("position",new Yt(a,3)),this.setAttribute("normal",new Yt(l,3)),this.setAttribute("uv",new Yt(c,2))}static fromJSON(e){return new Ru(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Fu extends Zd{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kl extends Zd{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function ba(n,e,t){return gD(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function rh(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function gD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}class hx{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],o=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let a=r+2;;){if(void 0===i){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=t[++r],e<i)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=t[--r-1],e>=o)break t}s=r,r=0}}for(;r<s;){const a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],o=t[r-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)t[s]=r[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class iwe extends hx{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:o=e,a=2*t-r;break;case 2402:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=r}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:s=e,l=2*r-t;break;case 2402:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const c=.5*(r-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(r-t)/(i-t),p=m*m,g=p*m,_=-h*g+2*h*p-h*m,b=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*m+1,v=(-1-f)*g+(1.5+f)*p+.5*m,y=f*g-f*p;for(let w=0;w!==a;++w)o[w]=_*s[u+w]+b*s[c+w]+v*s[l+w]+y*s[d+w];return o}}class x8 extends hx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==a;++h)o[h]=s[c+h]*d+s[l+h]*u;return o}}class owe extends hx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ll{constructor(e,t,r,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rh(t,this.TimeBufferType),this.values=rh(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:rh(e.times,Array),values:rh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new owe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new x8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new iwe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;-1!==s&&r[s]>t;)--s;if(++s,0!==o||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=ba(r,o,s),this.values=ba(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==s&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(void 0!==i&&gD(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ba(this.times),t=ba(this.values),r=this.getValueSize(),i=2302===this.getInterpolation(),o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(i)l=!0;else{const d=a*r,h=d-r,f=d+r;for(let m=0;m!==r;++m){const p=t[d+m];if(p!==t[h+m]||p!==t[f+m]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const d=a*r,h=s*r;for(let f=0;f!==r;++f)t[h+f]=t[d+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,c=0;c!==r;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=ba(e,0,s),this.values=ba(t,0,s*r)):(this.times=e,this.values=t),this}clone(){const e=ba(this.times,0),t=ba(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ll.prototype.TimeBufferType=Float32Array,Ll.prototype.ValueBufferType=Float32Array,Ll.prototype.DefaultInterpolation=2301;class jp extends Ll{}jp.prototype.ValueTypeName="bool",jp.prototype.ValueBufferType=Array,jp.prototype.DefaultInterpolation=2300,jp.prototype.InterpolantFactoryMethodLinear=void 0,jp.prototype.InterpolantFactoryMethodSmooth=void 0;(class w8 extends Ll{}).prototype.ValueTypeName="color";(class fx extends Ll{}).prototype.ValueTypeName="number";class swe extends hx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)as.slerpFlat(o,0,s,c-a,s,c,l);return o}}class Sv extends Ll{InterpolantFactoryMethodLinear(e){return new swe(this.times,this.values,this.getValueSize(),e)}}Sv.prototype.ValueTypeName="quaternion",Sv.prototype.DefaultInterpolation=2301,Sv.prototype.InterpolantFactoryMethodSmooth=void 0;class Wp extends Ll{}Wp.prototype.ValueTypeName="string",Wp.prototype.ValueBufferType=Array,Wp.prototype.DefaultInterpolation=2300,Wp.prototype.InterpolantFactoryMethodLinear=void 0,Wp.prototype.InterpolantFactoryMethodSmooth=void 0;(class px extends Ll{}).prototype.ValueTypeName="vector";class uwe extends Error{constructor(e,t){super(e),this.response=t}}class C8 extends $s{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new jt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const yD=new Sn,S8=new q,E8=new q;class hwe{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new Sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new FE,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new Gr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;S8.setFromMatrixPosition(e.matrixWorld),t.position.copy(S8),E8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(E8),t.updateMatrixWorld(),yD.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yD),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(yD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vwe extends hwe{constructor(){super(new kE(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $p extends C8{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($s.DefaultUp),this.updateMatrix(),this.target=new $s,this.shadow=new vwe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Xp extends C8{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}const wD="\\[\\]\\.:\\/",Awe=new RegExp("["+wD+"]","g"),MD="[^"+wD+"]",Twe="[^"+wD.replace("\\.","")+"]",Rwe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",MD)+/(WCOD+)?/.source.replace("WCOD",Twe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",MD)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",MD)+"$"),Fwe=["material","materials","bones","map"];class kwe{constructor(e,t,r){const i=r||ii.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let ii=(()=>{class n{constructor(t,r,i){this.path=r,this.parsedPath=i||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,i):new n(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Awe,"")}static parseTrackName(t){const r=Rwe.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=i.nodeName.substring(o+1);-1!==Fwe.indexOf(s)&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=s)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(r);if(void 0!==i)return i}if(t.children){const i=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===r||l.uuid===r)return l;const c=i(l.children);if(c)return c}return null},o=i(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)t[r++]=i[o]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)i[o]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)i[o]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)i[o]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,i=r.objectName,o=r.propertyName;let s=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let u=r.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+o+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=kwe,n})();ii.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ii.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ii.prototype.GetterByBindingType=[ii.prototype._getValue_direct,ii.prototype._getValue_array,ii.prototype._getValue_arrayElement,ii.prototype._getValue_toArray],ii.prototype.SetterByBindingTypeAndVersioning=[[ii.prototype._setValue_direct,ii.prototype._setValue_direct_setNeedsUpdate,ii.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_array,ii.prototype._setValue_array_setNeedsUpdate,ii.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_arrayElement,ii.prototype._setValue_arrayElement_setNeedsUpdate,ii.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_fromArray,ii.prototype._setValue_fromArray_setNeedsUpdate,ii.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class V8{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Pi(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const U8=new q,_x=new q;class H8{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){U8.subVectors(e,this.start),_x.subVectors(this.end,this.start);const r=_x.dot(_x);let o=_x.dot(U8)/r;return t&&(o=Pi(o,0,1)),o}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");const Z8={type:"change"},DD={type:"start"},K8={type:"end"};class Dv extends Gd{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new q,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ue){ue.addEventListener("keydown",gt),this._domElementKeyEvents=ue},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(Z8),r.update(),o=i.NONE},this.update=function(){const ue=new q,Te=(new as).setFromUnitVectors(e.up,new q(0,1,0)),Rt=Te.clone().invert(),zt=new q,Bt=new as,Kt=2*Math.PI;return function(){const Wn=r.object.position;ue.copy(Wn).sub(r.target),ue.applyQuaternion(Te),a.setFromVector3(ue),r.autoRotate&&o===i.NONE&&S(function E(){return 2*Math.PI/60/60*r.autoRotateSpeed}()),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let er=r.minAzimuthAngle,jr=r.maxAzimuthAngle;return isFinite(er)&&isFinite(jr)&&(er<-Math.PI?er+=Kt:er>Math.PI&&(er-=Kt),jr<-Math.PI?jr+=Kt:jr>Math.PI&&(jr-=Kt),a.theta=er<=jr?Math.max(er,Math.min(jr,a.theta)):a.theta>(er+jr)/2?Math.max(er,a.theta):Math.min(jr,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),!0===r.enableDamping?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),ue.setFromSpherical(a),ue.applyQuaternion(Rt),Wn.copy(r.target).add(ue),r.object.lookAt(r.target),!0===r.enableDamping?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||zt.distanceToSquared(r.object.position)>s||8*(1-Bt.dot(r.object.quaternion))>s)&&(r.dispatchEvent(Z8),zt.copy(r.object.position),Bt.copy(r.object.quaternion),d=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Pe),r.domElement.removeEventListener("pointerdown",ze),r.domElement.removeEventListener("pointercancel",ye),r.domElement.removeEventListener("wheel",Ye),r.domElement.removeEventListener("pointermove",H),r.domElement.removeEventListener("pointerup",$),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",gt)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const s=1e-6,a=new V8,l=new V8;let c=1;const u=new q;let d=!1;const h=new Je,f=new Je,m=new Je,p=new Je,g=new Je,_=new Je,b=new Je,v=new Je,y=new Je,w=[],x={};function M(){return Math.pow(.95,r.zoomSpeed)}function S(ue){l.theta-=ue}function C(ue){l.phi-=ue}const I=function(){const ue=new q;return function(Rt,zt){ue.setFromMatrixColumn(zt,0),ue.multiplyScalar(-Rt),u.add(ue)}}(),P=function(){const ue=new q;return function(Rt,zt){!0===r.screenSpacePanning?ue.setFromMatrixColumn(zt,1):(ue.setFromMatrixColumn(zt,0),ue.crossVectors(r.object.up,ue)),ue.multiplyScalar(Rt),u.add(ue)}}(),F=function(){const ue=new q;return function(Rt,zt){const Bt=r.domElement;if(r.object.isPerspectiveCamera){ue.copy(r.object.position).sub(r.target);let Wt=ue.length();Wt*=Math.tan(r.object.fov/2*Math.PI/180),I(2*Rt*Wt/Bt.clientHeight,r.object.matrix),P(2*zt*Wt/Bt.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(I(Rt*(r.object.right-r.object.left)/r.object.zoom/Bt.clientWidth,r.object.matrix),P(zt*(r.object.top-r.object.bottom)/r.object.zoom/Bt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function R(ue){r.object.isPerspectiveCamera?c/=ue:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*ue)),r.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function z(ue){r.object.isPerspectiveCamera?c*=ue:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/ue)),r.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function O(ue){h.set(ue.clientX,ue.clientY)}function V(ue){p.set(ue.clientX,ue.clientY)}function re(){1===w.length?h.set(w[0].pageX,w[0].pageY):h.set(.5*(w[0].pageX+w[1].pageX),.5*(w[0].pageY+w[1].pageY))}function Ee(){1===w.length?p.set(w[0].pageX,w[0].pageY):p.set(.5*(w[0].pageX+w[1].pageX),.5*(w[0].pageY+w[1].pageY))}function ie(){const ue=w[0].pageX-w[1].pageX,Te=w[0].pageY-w[1].pageY,Rt=Math.sqrt(ue*ue+Te*Te);b.set(0,Rt)}function He(ue){if(1==w.length)f.set(ue.pageX,ue.pageY);else{const Rt=Jt(ue);f.set(.5*(ue.pageX+Rt.x),.5*(ue.pageY+Rt.y))}m.subVectors(f,h).multiplyScalar(r.rotateSpeed);const Te=r.domElement;S(2*Math.PI*m.x/Te.clientHeight),C(2*Math.PI*m.y/Te.clientHeight),h.copy(f)}function me(ue){if(1===w.length)g.set(ue.pageX,ue.pageY);else{const Te=Jt(ue);g.set(.5*(ue.pageX+Te.x),.5*(ue.pageY+Te.y))}_.subVectors(g,p).multiplyScalar(r.panSpeed),F(_.x,_.y),p.copy(g)}function mt(ue){const Te=Jt(ue),Rt=ue.pageX-Te.x,zt=ue.pageY-Te.y,Bt=Math.sqrt(Rt*Rt+zt*zt);v.set(0,Bt),y.set(0,Math.pow(v.y/b.y,r.zoomSpeed)),R(y.y),b.copy(v)}function ze(ue){!1!==r.enabled&&(0===w.length&&(r.domElement.setPointerCapture(ue.pointerId),r.domElement.addEventListener("pointermove",H),r.domElement.addEventListener("pointerup",$)),function et(ue){w.push(ue)}(ue),"touch"===ue.pointerType?function W(ue){switch(Dt(ue),w.length){case 1:switch(r.touches.ONE){case 0:if(!1===r.enableRotate)return;re(),o=i.TOUCH_ROTATE;break;case 1:if(!1===r.enablePan)return;Ee(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case 2:if(!1===r.enableZoom&&!1===r.enablePan)return;(function Ae(){r.enableZoom&&ie(),r.enablePan&&Ee()})(),o=i.TOUCH_DOLLY_PAN;break;case 3:if(!1===r.enableZoom&&!1===r.enableRotate)return;(function Fe(){r.enableZoom&&ie(),r.enableRotate&&re()})(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(DD)}(ue):function ge(ue){let Te;switch(ue.button){case 0:Te=r.mouseButtons.LEFT;break;case 1:Te=r.mouseButtons.MIDDLE;break;case 2:Te=r.mouseButtons.RIGHT;break;default:Te=-1}switch(Te){case 1:if(!1===r.enableZoom)return;(function T(ue){b.set(ue.clientX,ue.clientY)})(ue),o=i.DOLLY;break;case 0:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(!1===r.enablePan)return;V(ue),o=i.PAN}else{if(!1===r.enableRotate)return;O(ue),o=i.ROTATE}break;case 2:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(!1===r.enableRotate)return;O(ue),o=i.ROTATE}else{if(!1===r.enablePan)return;V(ue),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(DD)}(ue))}function H(ue){!1!==r.enabled&&("touch"===ue.pointerType?function G(ue){switch(Dt(ue),o){case i.TOUCH_ROTATE:if(!1===r.enableRotate)return;He(ue),r.update();break;case i.TOUCH_PAN:if(!1===r.enablePan)return;me(ue),r.update();break;case i.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;(function De(ue){r.enableZoom&&mt(ue),r.enablePan&&me(ue)})(ue),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;(function ve(ue){r.enableZoom&&mt(ue),r.enableRotate&&He(ue)})(ue),r.update();break;default:o=i.NONE}}(ue):function Ne(ue){switch(o){case i.ROTATE:if(!1===r.enableRotate)return;!function D(ue){f.set(ue.clientX,ue.clientY),m.subVectors(f,h).multiplyScalar(r.rotateSpeed);const Te=r.domElement;S(2*Math.PI*m.x/Te.clientHeight),C(2*Math.PI*m.y/Te.clientHeight),h.copy(f),r.update()}(ue);break;case i.DOLLY:if(!1===r.enableZoom)return;!function k(ue){v.set(ue.clientX,ue.clientY),y.subVectors(v,b),y.y>0?R(M()):y.y<0&&z(M()),b.copy(v),r.update()}(ue);break;case i.PAN:if(!1===r.enablePan)return;!function J(ue){g.set(ue.clientX,ue.clientY),_.subVectors(g,p).multiplyScalar(r.panSpeed),F(_.x,_.y),p.copy(g),r.update()}(ue)}}(ue))}function $(ue){ct(ue),0===w.length&&(r.domElement.releasePointerCapture(ue.pointerId),r.domElement.removeEventListener("pointermove",H),r.domElement.removeEventListener("pointerup",$)),r.dispatchEvent(K8),o=i.NONE}function ye(ue){ct(ue)}function Ye(ue){!1===r.enabled||!1===r.enableZoom||o!==i.NONE||(ue.preventDefault(),r.dispatchEvent(DD),function ce(ue){ue.deltaY<0?z(M()):ue.deltaY>0&&R(M()),r.update()}(ue),r.dispatchEvent(K8))}function gt(ue){!1===r.enabled||!1===r.enablePan||function X(ue){let Te=!1;switch(ue.code){case r.keys.UP:F(0,r.keyPanSpeed),Te=!0;break;case r.keys.BOTTOM:F(0,-r.keyPanSpeed),Te=!0;break;case r.keys.LEFT:F(r.keyPanSpeed,0),Te=!0;break;case r.keys.RIGHT:F(-r.keyPanSpeed,0),Te=!0}Te&&(ue.preventDefault(),r.update())}(ue)}function Pe(ue){!1!==r.enabled&&ue.preventDefault()}function ct(ue){delete x[ue.pointerId];for(let Te=0;Te<w.length;Te++)if(w[Te].pointerId==ue.pointerId)return void w.splice(Te,1)}function Dt(ue){let Te=x[ue.pointerId];void 0===Te&&(Te=new Je,x[ue.pointerId]=Te),Te.set(ue.pageX,ue.pageY)}function Jt(ue){return x[(ue.pointerId===w[0].pointerId?w[1]:w[0]).pointerId]}r.domElement.addEventListener("contextmenu",Pe),r.domElement.addEventListener("pointerdown",ze),r.domElement.addEventListener("pointercancel",ye),r.domElement.addEventListener("wheel",Ye,{passive:!1}),this.update()}}var K=(()=>{return(n=K||(K={})).white="#ffffff",n.purple900="#252547",n.purple800="#2c2c54",n.purple500="#343466",n.purple400="#40407a",n.purple300="#706fd3",n.purple200="#abaafa",n.brightRed="#ff0066",n.brightGreen="#33d9b2",n.palePurple100="#c9b3ff",n.palePurple200="#8e63f2",n.palePurple300="#5f36bf",n.red="#fc5c65",n.orange="#fd9644",n.yellow="#f7b731",n.green="#26de81",n.blue="#4b7bec",n.turqouis="#2bcbba",n.pink="#ff9bd3",n.pinkDark="#ff58ae",n.redDark="#eb3b5a",n.orangeDark="#fa8231",n.yellowLight="#fed330",n.yellowGreenLight="#9ae89e",n.yellowGreenDark="#62b776",n.pinkRed="#f57b92",n.pinkRedDark="#e75272",n.greenDark="#20bf6b",n.turqouisDark="#0fb9b1",n.blueDark="#2d98da",n.azul="#4b7bec",n.azulDark="#3867d6",n.purple="#a55eea",n.purpleDark="#8854d0",n.gray="#d1d8e0",n.grayDark="#a5b1c2",K;var n})();class Bu{constructor(){this.pointGroup=new vo,this.otherObjectsGroup=new vo,this.sceneInitializedSubject=new Tn,this.sceneHasBeenInitialized=!1,this.prevDim=3}initalizeScene(e){this.canvas=e,this.scene=new kp,this.camera=new Oi(50,this.canvas.clientWidth/this.canvas.clientHeight,.1,1e3),this.renderer=new Fp({antialias:!0}),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.canvas.appendChild(this.renderer.domElement),this.renderer.setClearColor(K.purple800),this.camera.position.z=20,this.camera.position.y=0,this.camera.updateMatrix(),this.addOrbitControls(),this.addLight(),this.displayScene(),this.scene.add(this.pointGroup),this.scene.add(this.otherObjectsGroup),this.sceneInitializedSubject.next(),this.sceneHasBeenInitialized=!0}reinitializePoints(){this.pointGroup.removeFromParent(),this.pointGroup=new vo,this.scene.add(this.pointGroup)}reinitializeObjects(){this.otherObjectsGroup.removeFromParent(),this.otherObjectsGroup=new vo,this.scene.add(this.otherObjectsGroup)}addOrbitControls(){this.orbitControls=new Dv(this.camera,this.renderer.domElement)}disableOrbiting(){3==this.prevDim&&(this.orbitControls.reset(),this.orbitControls.enableRotate=!1,this.camera.position.set(0,0,30),this.prevDim=2,this.camera.updateMatrix())}enableOrbiting(){this.prevDim=3,this.orbitControls.enableRotate=!0}set3DView(){this.prevDim=3,console.log(this.camera.rotation),Math.abs(this.camera.rotation.x)<.05&&Math.abs(this.camera.rotation.y)<.05&&Math.abs(this.camera.rotation.z)<.05&&(this.orbitControls.reset(),this.camera.position.z=15,this.camera.position.y=15,this.camera.position.x=15,this.camera.updateMatrix(),this.orbitControls.update())}displayScene(){requestAnimationFrame(()=>this.displayScene()),this.renderer.render(this.scene,this.camera)}addLight(){const e=new Xp(16777215,.7),t=new $p(16777215,.7);t.position.set(0,20,0),this.scene.add(e),this.scene.add(t)}drawToPointGroup(e){this.pointGroup.add(e)}drawToObjectGroup(e){this.otherObjectsGroup.add(e)}}Bu.\u0275fac=function(e){return new(e||Bu)},Bu.\u0275prov=_t({token:Bu,factory:Bu.\u0275fac,providedIn:"root"});class Yp{constructor(){}stereographicProjectionFromND(e,t){let r=e.dim,i=e;for(;r>t;){let o=i.components[i.dim-1];i=i.normalized(),i=new dr(i.components.map(s=>s/(1-o))),r-=1}return console.log(i),i}projectOntoHyperplane(e,t){t=t.normalized();const r=e.dotProduct(t);return e.add(t.stretchedBy(r).getNegative())}projectWithMatrix(e,t,r){let i=e.dim,o=on.identity(e.dim),s=[],a=[];for(let l=r;l<i;l++){let c=new dr(o.components[l]).multiplyOnLeftWithMatrix(t);e=e.add(c.getNegative().stretchedBy(e.dotProduct(c))),a.push(c),s.push(c.components)}return e}}Yp.\u0275fac=function(e){return new(e||Yp)},Yp.\u0275prov=_t({token:Yp,factory:Yp.\u0275fac,providedIn:"root"});class Zp{constructor(e,t){this.projectionService=e,this.canvasService=t,this.scaleFactor=3}projectPointsOrthogonallyWithMatrix(e,t,r,i){let o=[];console.log("Rotate with",r);let s=new Array(e[0].dim).fill(0);2==i?s[2]=1:s[3]=1;let a=new dr(s).multiplyOnLeftWithMatrix(r),l=on.identity(i);l=this.rotateToNormalCube(a,new dr(s));for(let c of e){let u=this.projectionService.projectWithMatrix(c,r,i);o.push(u.multiplyOnLeftWithMatrix(r.transpose()))}console.log(o),this.drawPoints(o,t,i)}projectPointsStereographically(e,t,r,i){let o=[];for(let s of e){let a=s.multiplyOnLeftWithMatrix(r),l=this.projectionService.stereographicProjectionFromND(a,i);o.push(l)}this.drawPoints(o,t,i)}drawPoints(e,t,r){let i=0;for(let o of e){const s=new Nu(.3,16,16);let a=new Fu({color:t[i]});2==r&&(a=new Nc({color:t[i]}));const l=new _r(s,a);l.position.set(o.get(0)*this.scaleFactor,o.get(1)*this.scaleFactor,2==r?0:o.get(2)*this.scaleFactor),this.canvasService.drawToPointGroup(l),i+=1}}rotateToNormalCube(e,t){let r=t.dim;t=t.normalized(),e=e.normalized();let i=t.normalized(),o=i.asMatrix().scalarMultiply(i.getTranspose().multiply(e.asMatrix()).components[0][0]),s=e.asMatrix().add(o.scalarMultiply(-1)),a=i.asMatrix().multiply(i.getTranspose()),l=s.multiply(s.transpose()),c=1*t.dotProduct(e)/(t.length()*e.length()),u=Math.sqrt(1-c*c),d=new on([[c,-u],[u,c]]),h=new on([[...i.components],[...s.components.map(g=>g[0])]]),m=h.transpose().multiply(d).multiply(h);return on.identity(r).add(a.scalarMultiply(-1)).add(l.scalarMultiply(-1)).add(m).transpose()}drawPlane(){var e=new Kd(14,14,10,10),t=new Fu({color:K.purple200,side:2,opacity:.1,transparent:!0});let r=new _r(e,t);r.position.set(0,0,0),this.canvasService.drawToObjectGroup(r)}drawCube(){var e=new Pu(12,12,12),t=new Fu({color:K.purple200,side:2,opacity:.05,transparent:!0});let r=new _r(e,t),i=new eh(.05,.05,12,32),o=new Fu({color:K.purple400,side:2,opacity:.2,transparent:!1}),s=new _r(i,o),a=new _r(i,o),l=new _r(i,o);r.position.set(0,0,0),s.position.set(-6,0,-6),a.position.set(-6,-6,0),a.rotateX(Math.PI/2),l.position.set(0,-6,-6),l.rotateZ(Math.PI/2),this.canvasService.drawToObjectGroup(r),this.canvasService.drawToObjectGroup(s),this.canvasService.drawToObjectGroup(a),this.canvasService.drawToObjectGroup(l)}}Zp.\u0275fac=function(e){return new(e||Zp)(Oe(Yp),Oe(Bu))},Zp.\u0275prov=_t({token:Zp,factory:Zp.\u0275fac,providedIn:"root"});class el{constructor(e,t){this.canvasService=e,this.paintService=t,this.startDimension=3,this.endDimension=2,this.rootList=[],this.normals=[new dr([0,0,1])],this.colorList=[],this.rotationMatrix=on.identity(4),this.dimensionsChanged=new Tn,this.rotationsChanged=new Tn,this.rootSystemIdentifier="A3",this.projectionType=Lc.orthogonal}setStartDimension(e){this.startDimension=e,this.dimensionsChanged.next()}setEndDimension(e){this.endDimension=e,this.dimensionsChanged.next()}setRotationMatrix(e){this.rotationMatrix=e,this.paintProjection(),this.normals=this.getNormal(),this.rotationsChanged.next()}getNormal(){let e=new Array(this.startDimension).fill(0),t=new dr(e),r=[];for(let i=this.endDimension;i<this.startDimension;++i){let o=[...t.components];o[i]=1;let s=new dr(o).multiplyOnLeftWithMatrix(this.rotationMatrix);r.push(s)}return r}setProjectionType(e){this.projectionType=e,this.normals=this.getNormal(),this.rotationsChanged.next()}setPoints(e,t){this.rootList=e,this.rootSystemIdentifier=t}setColors(e){this.colorList=e}removePoints(){this.canvasService.reinitializePoints()}initializeView(e){this.canvasService.initalizeScene(e),this.paintObjectForDimension()}paintObjectForDimension(){this.canvasService.reinitializeObjects(),2==this.endDimension?(this.paintService.drawPlane(),this.canvasService.disableOrbiting()):3==this.endDimension&&(this.canvasService.set3DView(),this.paintService.drawCube(),this.canvasService.enableOrbiting())}paintProjection(){switch(this.removePoints(),this.paintObjectForDimension(),this.rotationMatrix.components.length!=this.startDimension&&(this.rotationMatrix=on.identity(this.startDimension),this.normals=this.getNormal(),this.rotationsChanged.next()),this.projectionType){case Lc.orthogonal:this.paintService.projectPointsOrthogonallyWithMatrix(this.rootList,this.colorList,this.rotationMatrix,this.endDimension);break;case Lc.stereographic:this.paintService.projectPointsStereographically(this.rootList,this.colorList,this.rotationMatrix,this.endDimension)}}}el.\u0275fac=function(e){return new(e||el)(Oe(Bu),Oe(Zp))},el.\u0275prov=_t({token:el,factory:el.\u0275fac,providedIn:"root"});var Lc=(()=>{return(n=Lc||(Lc={}))[n.orthogonal=0]="orthogonal",n[n.stereographic=1]="stereographic",Lc;var n})();class Q8{}class Wwe{}const Bc="*";function tl(n,e){return{type:7,name:n,definitions:e,options:{}}}function nl(n,e=null){return{type:4,styles:e,timings:n}}function J8(n,e=null){return{type:2,steps:n,options:e}}function Cr(n){return{type:6,styles:n,offset:null}}function Jr(n,e,t){return{type:0,name:n,styles:e,options:t}}function xa(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function eU(n){Promise.resolve().then(n)}class Av{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){eU(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class tU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?eU(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}let TD;try{TD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{TD=!1}let Tv,Sx,ch,ID,rl=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function MK(n){return n===PR}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!TD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Oe(UM))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cx(n){return function Xwe(){if(null==Tv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Tv=!0}))}finally{Tv=Tv||!1}return Tv}()?n:!!n.capture}function rU(){if(null==ch){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ch=!1,ch;if("scrollBehavior"in document.documentElement.style)ch=!0;else{const n=Element.prototype.scrollTo;ch=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ch}function Iv(){if("object"!=typeof document||!document)return 0;if(null==Sx){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),Sx=0,0===n.scrollLeft&&(n.scrollLeft=1,Sx=0===n.scrollLeft?1:2),n.remove()}return Sx}function Vu(n){return n.composedPath?n.composedPath()[0]:n.target}function PD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function iU(n){return ja((e,t)=>n<=t)}function r1e(n,e){return n===e}function Pv(n){return br((e,t)=>{fr(n).subscribe(zr(t,()=>t.complete(),L)),!t.closed&&e.subscribe(t)})}function us(n){return null!=n&&"false"!=`${n}`}function Bl(n,e=0){return function i1e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Ex(n){return Array.isArray(n)?n:[n]}function Gi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Qp(n){return n instanceof ni?n.nativeElement:n}class o1e extends st{constructor(e,t){super()}schedule(e,t=0){return this}}const Dx={setInterval(n,e,...t){const{delegate:r}=Dx;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Dx;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class OD extends o1e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Dx.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Dx.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ke(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const oU={now:()=>(oU.delegate||Date).now(),delegate:void 0};class Ov{constructor(e,t=Ov.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ov.now=oU.now;class ND extends Ov{constructor(e,t=Ov.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const RD=new ND(OD),s1e=RD,sU=new Set;let Jp,l1e=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):u1e}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function c1e(n){if(!sU.has(n))try{Jp||(Jp=document.createElement("style"),Jp.setAttribute("type","text/css"),document.head.appendChild(Jp)),Jp.sheet&&(Jp.sheet.insertRule(`@media ${n} {body{ }}`,0),sU.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(rl))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function u1e(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let d1e=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Tn}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return aU(Ex(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=TC(aU(Ex(t)).map(s=>this._registerQuery(s).observable));return o=sy(o.pipe(iu(1)),o.pipe(iU(1),function a1e(n,e=RD){return br((t,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function l(){const c=s+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(zr(r,c=>{o=c,s=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(0))),o.pipe(Gt(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new _n(s=>{const a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(PC(r),Gt(({matches:s})=>({query:t,matches:s})),Pv(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(Oe(l1e),Oe(Zn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aU(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function dU(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function hU(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const y1e=new bt("cdk-input-modality-detector-options"),b1e={ignoreKeys:[18,17,224,91,16]},em=Cx({passive:!0,capture:!0});let x1e=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new fa(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vu(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(dU(s)?"keyboard":"mouse"),this._mostRecentTarget=Vu(s))},this._onTouchstart=s=>{hU(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vu(s))},this._options={...b1e,...o},this.modalityDetected=this._modality.pipe(iU(1)),this.modalityChanged=this.modalityDetected.pipe(function n1e(n,e=dn){return n=n??r1e,br((t,r)=>{let i,o=!0;t.subscribe(zr(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,em),i.addEventListener("mousedown",this._onMousedown,em),i.addEventListener("touchstart",this._onTouchstart,em)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,em),document.removeEventListener("mousedown",this._onMousedown,em),document.removeEventListener("touchstart",this._onTouchstart,em))}}return n.\u0275fac=function(t){return new(t||n)(Oe(rl),Oe(Zn),Oe(rr),Oe(y1e,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const M1e=new bt("cdk-focus-monitor-default-options"),Ax=Cx({passive:!0,capture:!0});let C1e=(()=>{class n{constructor(t,r,i,o,s){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Tn,this._rootNodeFocusAndBlurListener=a=>{for(let c=Vu(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,r=!1){const i=Qp(t);if(!this._platform.isBrowser||1!==i.nodeType)return Zt(null);const o=function Zwe(n){if(function Ywe(){if(null==ID){const n=typeof document<"u"?document.head:null;ID=!(!n||!n.createShadowRoot&&!n.attachShadow)}return ID}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;const a={checkChildren:r,subject:new Tn,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Qp(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Qp(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=Vu(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ax),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ax)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pv(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ax),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ax),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Oe(Zn),Oe(rl),Oe(x1e),Oe(rr,8),Oe(M1e,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pU="cdk-high-contrast-black-on-white",mU="cdk-high-contrast-white-on-black",FD="cdk-high-contrast-active";let S1e=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Vn(d1e).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(FD,pU,mU),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(FD,pU):2===r&&t.add(FD,mU)}}}return n.\u0275fac=function(t){return new(t||n)(Oe(rl),Oe(rr))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const E1e=new bt("cdk-dir-doc",{providedIn:"root",factory:function D1e(){return Vn(rr)}}),A1e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Tx=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new pr,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function T1e(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?A1e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Oe(E1e,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({}),n})();const P1e=new bt("mat-sanity-checks",{providedIn:"root",factory:function I1e(){return!0}});let ds=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!PD()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Oe(S1e),Oe(P1e,8),Oe(rr))},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[Nv,Nv]}),n})();function O1e(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=us(e)}}}function _U(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function yU(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=us(e)}}}function bU(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Bl(t):this.defaultTabIndex}}}class R1e{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const xU=Cx({passive:!0,capture:!0});class F1e{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Vu(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,r,i){const o=this._events.get(t);if(o){const s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,xU)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const o=i.get(t);!o||(o.delete(r),0===o.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,xU)))}}const wU={enterDuration:225,exitDuration:150},MU=Cx({passive:!0,capture:!0}),CU=["mousedown","touchstart"],SU=["mouseup","mouseleave","touchend","touchcancel"];class Fv{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Qp(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...wU,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const s=r.radius||function L1e(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-s+"px",u.style.top=l-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,m="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===i.width&&0===i.height,p=new R1e(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",p.state=0,r.persistent||(this._mostRecentTransientRipple=p);let g=null;return!m&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(p),b=()=>this._destroyRipple(p);u.addEventListener("transitionend",_),u.addEventListener("transitioncancel",b),g={onTransitionEnd:_,onTransitionCancel:b}}),this._activeRipples.set(p,g),(m||!c)&&this._finishRippleTransition(p),p}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...wU,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Qp(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,CU.forEach(r=>{Fv._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{SU.forEach(t=>{this._triggerElement.addEventListener(t,this,MU)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=dU(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!hU(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(CU.forEach(t=>Fv._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&SU.forEach(t=>e.removeEventListener(t,this,MU)))}}Fv._eventManager=new F1e;const B1e=new bt("mat-ripple-global-options");let kD=(()=>{class n{constructor(t,r,i,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Fv(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(Me(ni),Me(Zn),Me(rl),Me(B1e,8),Me(Mf,8))},n.\u0275dir=tn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&ai("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Ix=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ds,ds]}),n})(),V1e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ds]}),n})(),EU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[Ix,Ef,ds,V1e]}),n})();class LD{}class zu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof zu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new zu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof zu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class z1e{encodeKey(e){return TU(e)}encodeValue(e){return TU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const H1e=/%(\d[a-f0-9])/gi,G1e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TU(n){return encodeURIComponent(n).replace(H1e,(e,t)=>G1e[t]??e)}function Px(n){return`${n}`}class Uu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new z1e,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function U1e(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Px):[Px(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Uu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Px(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Px(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class j1e{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function IU(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function PU(n){return typeof Blob<"u"&&n instanceof Blob}function OU(n){return typeof FormData<"u"&&n instanceof FormData}class kv{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function W1e(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new zu),this.context||(this.context=new j1e),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Uu,this.urlWithParams=t}serializeBody(){return null===this.body?null:IU(this.body)||PU(this.body)||OU(this.body)||function q1e(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Uu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||OU(this.body)?null:PU(this.body)?this.body.type||null:IU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Uu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new kv(t,r,o,{params:c,headers:l,context:u,reportProgress:a,responseType:i,withCredentials:s})}}var Ao=(()=>((Ao=Ao||{})[Ao.Sent=0]="Sent",Ao[Ao.UploadProgress=1]="UploadProgress",Ao[Ao.ResponseHeader=2]="ResponseHeader",Ao[Ao.DownloadProgress=3]="DownloadProgress",Ao[Ao.Response=4]="Response",Ao[Ao.User=5]="User",Ao))();class $1e{constructor(e,t=200,r="OK"){this.headers=e.headers||new zu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class BD extends $1e{constructor(e={}){super(e),this.type=Ao.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new BD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function VD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let zD=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof kv)o=t;else{let l,c;l=i.headers instanceof zu?i.headers:new zu(i.headers),i.params&&(c=i.params instanceof Uu?i.params:new Uu({fromObject:i.params})),o=new kv(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Zt(o).pipe(su(l=>this.handler.handle(l)));if(t instanceof kv||"events"===i.observe)return s;const a=s.pipe(ja(l=>l instanceof BD));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Gt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Gt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Gt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Gt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Uu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,VD(i,r))}post(t,r,i={}){return this.request("POST",t,VD(i,r))}put(t,r,i={}){return this.request("PUT",t,VD(i,r))}}return n.\u0275fac=function(t){return new(t||n)(Oe(LD))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const sMe=["*"];let Nx;function Lv(n){return function aMe(){if(void 0===Nx&&(Nx=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Nx=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Nx}()?.createHTML(n)||n}function zU(n){return Error(`Unable to find icon with the name "${n}"`)}function UU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function HU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class uh{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Rx=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new uh(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const s=this._sanitizer.sanitize(Mr.HTML,i);if(!s)throw HU(i);const a=Lv(s);return this._addSvgIconConfig(t,r,new uh("",a,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new uh(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Mr.HTML,r);if(!o)throw HU(r);const s=Lv(o);return this._addSvgIconSetConfig(t,new uh("",s,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Mr.RESOURCE_URL,t);if(!r)throw UU(t);const i=this._cachedIconsByUrl.get(r);return i?Zt(Fx(i)):this._loadSvgIconFromConfig(new uh(t,null)).pipe(Ji(o=>this._cachedIconsByUrl.set(r,o)),Gt(o=>Fx(o)))}getNamedSvgIcon(t,r=""){const i=GU(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(t,s):Df(zU(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Zt(Fx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Gt(r=>Fx(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Zt(i):function DU(...n){const e=sd(n),{args:t,keys:r}=oF(n),i=new _n(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;fr(t[u]).subscribe(zr(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?sF(r,a):a),o.complete())}))}});return e?i.pipe(AC(e)):i}(r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(uc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Mr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Zt(null)})))).pipe(Gt(()=>{const s=this._extractIconWithNameFromAnySet(t,r);if(!s)throw zU(t);return s}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ji(r=>t.svgText=r),Gt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Zt(null):this._fetchIcon(t).pipe(Ji(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,i);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),i);const a=this._svgElementFromString(Lv("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Lv("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:s,value:a}=i[o];"id"!==s&&r.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function lMe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const s=this._sanitizer.sanitize(Mr.RESOURCE_URL,r);if(!s)throw UU(r);const a=this._inProgressUrlFetches.get(s);if(a)return a;const l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Gt(c=>Lv(c)),ly(()=>this._inProgressUrlFetches.delete(s)),fl());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(GU(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return uMe(o)?new uh(o.url,null,o.options):new uh(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(Oe(zD,8),Oe(DC),Oe(rr,8),Oe(rc))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fx(n){return n.cloneNode(!0)}function GU(n,e){return n+":"+e}function uMe(n){return!(!n.url||!n.options)}const dMe=_U(class{constructor(n){this._elementRef=n}}),hMe=new bt("MAT_ICON_DEFAULT_OPTIONS"),fMe=new bt("mat-icon-location",{providedIn:"root",factory:function pMe(){const n=Vn(rr),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),jU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],mMe=jU.map(n=>`[${n}]`).join(", "),gMe=/^url\(['"]?#(.*?)['"]?\)$/;let Hu=(()=>{class n extends dMe{constructor(t,r,i,o,s,a){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=st.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=us(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(mMe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)jU.forEach(s=>{const a=r[o],l=a.getAttribute(s),c=l?l.match(gMe):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(iu(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(Me(ni),Me(Rx),fd("aria-hidden"),Me(fMe),Me(rc),Me(hMe,8))},n.\u0275cmp=Dr({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,r){2&t&&(zo("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),ai("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[zn],ngContentSelectors:sMe,decls:1,vars:0,template:function(t,r){1&t&&(lg(),cg(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),vMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ds,ds]}),n})();const _Me=["wheelCenter"];class rm{constructor(){this.angle=90,this.color=K.blue,this.angleChanged=new pr,this.changeActivated=!1}startChangingAngle(){console.log("Ok"),this.changeActivated=!0}stopChangingAngle(){this.changeActivated=!1}changeAngle(e){let t=e.clientX,r=e.clientY;if(null==t&&(t=e.touches[0].clientX,r=e.touches[0].clientY),console.log(t),this.changeActivated){var i=this.wheelCenterElement.nativeElement.getBoundingClientRect();const a=Math.atan2(t-(i.left+i.width/2),r-(i.top+i.height/2));this.angle=a/(2*Math.PI)*360,Math.abs(this.angle-45)<8?this.angle=45:Math.abs(this.angle)<8&&(this.angle=0),Math.abs(this.angle-90)<8&&(this.angle=90),Math.abs(this.angle-135)<8&&(this.angle=135),Math.abs(this.angle-180)<8&&(this.angle=180),Math.abs(this.angle+45)<8&&(this.angle=-45),Math.abs(this.angle+90)<8&&(this.angle=-90),Math.abs(this.angle+135)<8&&(this.angle=-135),Math.abs(this.angle+180)<8&&(this.angle=-180),this.angleChanged.next(this.angle/360*2*Math.PI+Math.PI/2)}}}rm.\u0275fac=function(e){return new(e||rm)},rm.\u0275cmp=Dr({type:rm,selectors:[["app-rotation-control"]],viewQuery:function(e,t){if(1&e&&po(_Me,5),2&e){let r;ki(r=Li())&&(t.wheelCenterElement=r.first)}},inputs:{angle:"angle",color:"color"},outputs:{angleChanged:"angleChanged"},decls:6,vars:8,consts:[["id","rotation-control",3,"mouseup","touchend","mousedown","touchstart","touchmove","mousemove"],["id","axis-horizontal"],["id","axis-vertical"],["id","angle-indicator"],["id","center-point"],["wheelCenter",""]],template:function(e,t){1&e&&(he(0,"div",0),Et("mouseup",function(){return t.stopChangingAngle()})("touchend",function(){return t.stopChangingAngle()})("mousedown",function(){return t.startChangingAngle()})("touchstart",function(){return t.startChangingAngle()})("touchmove",function(i){return t.changeAngle(i)})("mousemove",function(i){return t.changeAngle(i)}),At(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4,5),be()),2&e&&(Uo("border-color",t.color),Le(3),Uo("background-color",t.color)("transform","rotate("+-t.angle+"deg)"),Le(1),Uo("border-color",t.color))},styles:["#rotation-control[_ngcontent-%COMP%]{height:60px;width:60px;background-color:#fff;border-radius:50%;position:relative;display:grid;justify-content:center;align-content:center;overflow:hidden;border:6px solid var(--azul)}#rotation-control[_ngcontent-%COMP%]   #axis-horizontal[_ngcontent-%COMP%], #rotation-control[_ngcontent-%COMP%]   #axis-vertical[_ngcontent-%COMP%]{height:200px;width:8px;background-color:var(--purple-light);position:absolute}#rotation-control[_ngcontent-%COMP%]   #axis-vertical[_ngcontent-%COMP%]{left:26px}#rotation-control[_ngcontent-%COMP%]   #axis-horizontal[_ngcontent-%COMP%]{height:8px;width:290px;top:26px}#rotation-control[_ngcontent-%COMP%]   #angle-indicator[_ngcontent-%COMP%]{position:absolute;top:30px;left:26px;width:8px;height:100px;transform-origin:50% 0%;transform:rotate(-30deg);cursor:grab}#rotation-control[_ngcontent-%COMP%]   #center-point[_ngcontent-%COMP%]{background-color:var(--background-color);height:16px;border:3px solid var(--azul);width:16px;position:relative;border-radius:50%}"]});const yMe=["canvas"];class Bv{constructor(){this.rotateX=0,this.rotateY=0,this.rotateZ=0}ngOnChanges(){this.adjustRotationToInput()}ngAfterViewInit(){this.initalizeThree()}initalizeThree(){const e=this.canvas.nativeElement;this.scene=new kp,this.camera=new Oi(50,e.clientWidth/e.clientHeight,.1,1e3),this.renderer=new Fp({antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),e.appendChild(this.renderer.domElement),this.renderer.setClearColor(K.purple800),this.camera.position.z=20,this.camera.position.y=4,this.camera.updateMatrix(),this.addOrbitControls(),this.addLight(),this.drawPlane(),this.addCircles(),this.displayScene()}adjustRotationToInput(){this.plane?.rotation.set(this.rotateX,this.rotateY,this.rotateZ)}addOrbitControls(){new Dv(this.camera,this.renderer.domElement)}displayScene(){requestAnimationFrame(()=>this.displayScene()),this.renderer.render(this.scene,this.camera)}drawSphere(){const e=new Nu(4,16,16),t=new Fu({color:K.purple200,wireframe:!0}),r=new _r(e,t);r.position.set(0,0,0),this.scene.add(r)}drawPlane(){var e=new q(0,-1,0),t=new q(0,0,0),r=new ya;r.setFromNormalAndCoplanarPoint(e,t).normalize();var i=new Kd(9,9,9,9),o=new q;r.coplanarPoint(o);var s=(new q).copy(o).add(r.normal);i.lookAt(s),i.translate(o.x,o.y,o.z);var a=new Fu({color:K.white,side:2,opacity:.8});this.plane=new _r(i,a),this.plane.rotateX(0),this.plane.rotateY(0),this.plane.rotateZ(0),this.scene.add(this.plane)}addLight(){const e=new Xp(16777215,.8),t=new $p(16777215,.7);t.position.set(0,30,0),this.scene.add(e),this.scene.add(t)}addCircles(){const e=new Ru(3,.4,16,100),t=new kl({color:K.red}),r=new _r(e,t);r.rotateY(Math.PI/2),this.scene.add(r);const i=new Ru(3,.4,16,100),o=new kl({color:K.blue}),s=new _r(i,o);s.rotateX(Math.PI/2),this.scene.add(s);const a=new Ru(3,.4,16,100),l=new kl({color:K.yellow}),c=new _r(a,l);s.rotateZ(Math.PI/2),this.scene.add(c)}}Bv.\u0275fac=function(e){return new(e||Bv)},Bv.\u0275cmp=Dr({type:Bv,selectors:[["app-projection-plane-control"]],viewQuery:function(e,t){if(1&e&&po(yMe,5),2&e){let r;ki(r=Li())&&(t.canvas=r.first)}},inputs:{rotateX:"rotateX",rotateY:"rotateY",rotateZ:"rotateZ"},features:[Qo],decls:2,vars:0,consts:[["id","canvas"],["canvas",""]],template:function(e,t){1&e&&At(0,"div",0,1)},styles:["#canvas[_ngcontent-%COMP%]{height:150px;width:150px}"]});class Vv{constructor(e){this.projectionManager=e,this.Colors=K,this.angleX=Math.PI,this.angleY=Math.PI,this.angleZ=Math.PI,this.isExpanded=!0,window.innerWidth<1300&&(this.isExpanded=!1)}toggleExpand(){this.isExpanded=!this.isExpanded}changeAngle(e,t){switch(e){case"x":this.angleX=t;break;case"y":this.angleY=t;break;case"z":this.angleZ=t}this.applyRotation()}applyRotation(){let e=on.basicRotationMatrix(3,1,2,this.angleX),t=on.basicRotationMatrix(3,0,2,this.angleY),r=on.basicRotationMatrix(3,0,1,this.angleZ),i=e.multiply(t).multiply(r);this.projectionManager.setRotationMatrix(i)}}Vv.\u0275fac=function(e){return new(e||Vv)(Me(el))},Vv.\u0275cmp=Dr({type:Vv,selectors:[["app-projection-control-section"]],decls:23,vars:8,consts:[["id","wrapper"],[3,"click"],["id","expand-button"],[3,"fontIcon"],["id","heading"],["id","inner-content"],[1,"divider"],["id","projection-control-section"],["id","projection-display",3,"rotateX","rotateY","rotateZ"],["id","projection-controls"],[1,"projection-control-item"],[1,"projection-control-item-text"],[3,"color","angleChanged"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"div",1),Et("click",function(){return t.toggleExpand()}),he(2,"button",2),At(3,"mat-icon",3),be(),he(4,"h3",4),ht(5,"Rotation"),be()(),he(6,"div",5),At(7,"div",6),he(8,"section",7),At(9,"app-projection-plane-control",8),he(10,"div",9)(11,"div",10)(12,"h5",11),ht(13,"Rotate around X-Axis"),be(),he(14,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("x",i)}),be()(),he(15,"div",10)(16,"h5",11),ht(17,"Rotate around Z-Axis"),be(),he(18,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("z",i)}),be()(),he(19,"div",10)(20,"h5",11),ht(21,"Rotate around Y-Axis"),be(),he(22,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("y",i)}),be()()()()()()),2&e&&(Le(3),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(3),ot("@expanded",t.isExpanded),Le(3),ot("rotateX",t.angleX)("rotateY",t.angleY)("rotateZ",t.angleZ),Le(5),ot("color",t.Colors.red),Le(4),ot("color",t.Colors.yellow),Le(4),ot("color",t.Colors.blue))},dependencies:[Hu,rm,Bv],styles:["@media (max-width: 1300px){[_nghost-%COMP%]{display:block;width:100%}#projection-control-section[_ngcontent-%COMP%]{max-height:calc(100vh - 300px);width:100%!important;max-width:100%!important;height:max-content!important;overflow-y:auto}#projection-display[_ngcontent-%COMP%]{visibility:hidden;height:0;overflow:hidden}#projection-controls[_ngcontent-%COMP%]{margin-top:0!important;grid-template-columns:1fr 1fr 1fr;grid-auto-flow:row;text-align:center}}#wrapper[_ngcontent-%COMP%]{padding:16px;background-color:#fff;border-radius:8px;box-shadow:var(--light-shadow);overflow-y:auto;overflow-x:hidden;position:relative;box-sizing:border-box;max-height:calc(100vh - 320px)}#wrapper[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:6px 0 16px;width:100%;background-color:var(--purple-light)}#wrapper[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden}#wrapper[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#wrapper[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#wrapper[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 4px;padding:0;color:var(--text-dark)}#wrapper[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:12px 0;width:100%;background-color:var(--purple-light)}#projection-control-section[_ngcontent-%COMP%]{width:100%;display:grid;justify-items:center}#projection-control-section[_ngcontent-%COMP%]   #projection-controls[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px;display:grid;justify-content:center;justify-items:center;row-gap:8px}#projection-control-section[_ngcontent-%COMP%]   #projection-controls[_ngcontent-%COMP%]   .projection-control-item[_ngcontent-%COMP%]{display:grid;justify-items:center}#projection-control-section[_ngcontent-%COMP%]   #projection-controls[_ngcontent-%COMP%]   .projection-control-item[_ngcontent-%COMP%]   .projection-control-item-text[_ngcontent-%COMP%]{margin:0;padding:12px 0 6px;font-size:12px;color:var(--text-medium);font-weight:700}#projection-control-section[_ngcontent-%COMP%]   #projection-display[_ngcontent-%COMP%]{overflow:hidden;border-radius:16px}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]}});const bMe=["canvas"];class zv{constructor(){this.rotateX=Math.PI/4,this.rotateY=0,this.color1=K.red,this.color2=K.blue}ngOnChanges(){this.adjustRotationToInput()}ngAfterViewInit(){this.initalizeThree()}initalizeThree(){const e=this.canvas.nativeElement;this.scene=new kp,this.camera=new Oi(50,e.clientWidth/e.clientHeight,.1,1e3),this.renderer=new Fp({antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),e.appendChild(this.renderer.domElement),this.renderer.setClearColor(K.purple800),this.camera.position.z=20,this.camera.position.y=4,this.camera.updateMatrix(),this.addOrbitControls(),this.addLight(),this.drawCube(),this.addCircles(),this.displayScene()}adjustRotationToInput(){this.cube?.rotation.set(this.rotateX,this.rotateY,0)}addOrbitControls(){new Dv(this.camera,this.renderer.domElement)}displayScene(){requestAnimationFrame(()=>this.displayScene()),this.renderer.render(this.scene,this.camera)}drawSphere(){const e=new Nu(4,16,16),t=new Fu({color:K.purple200,wireframe:!0}),r=new _r(e,t);r.position.set(0,0,0),this.scene.add(r)}drawCube(){const e=new Pu(4,4,4);var t=new kl({color:K.white});this.cube=new _r(e,t),this.cube.rotateX(this.rotateX),this.cube.rotateY(this.rotateY),this.scene.add(this.cube)}addLight(){const e=new Xp(16777215,.8),t=new $p(16777215,.6);t.position.set(10,50,0),this.scene.add(e),this.scene.add(t)}addCircles(){const e=new Ru(5,.5,16,100),t=new kl({color:this.color1}),r=new _r(e,t);r.rotateY(Math.PI/2),this.scene.add(r);const i=new Ru(5,.5,16,100),o=new kl({color:this.color2}),s=new _r(i,o);s.rotateX(Math.PI/2),this.scene.add(s)}}zv.\u0275fac=function(e){return new(e||zv)},zv.\u0275cmp=Dr({type:zv,selectors:[["app-projection-cubes-control"]],viewQuery:function(e,t){if(1&e&&po(bMe,5),2&e){let r;ki(r=Li())&&(t.canvas=r.first)}},inputs:{rotateX:"rotateX",rotateY:"rotateY",color1:"color1",color2:"color2"},features:[Qo],decls:2,vars:0,consts:[["id","canvas"],["canvas",""]],template:function(e,t){1&e&&At(0,"div",0,1)},styles:["#canvas[_ngcontent-%COMP%]{height:100px;width:100px}"]});class Uv{constructor(e){this.projectionManager=e,this.isExpanded=!0,this.zw=Math.PI,this.yw=Math.PI,this.yz=Math.PI,this.xw=Math.PI,this.xz=Math.PI,this.xy=Math.PI,this.Colors=K,window.innerWidth<1300&&(this.isExpanded=!1)}changeAngle(e,t){switch(e){case"zw":this.zw=t;break;case"yw":this.yw=t;break;case"yz":this.yz=t;break;case"xw":this.xw=t;break;case"xz":this.xz=t;break;case"xy":this.xy=t}this.applyRotation()}toggleExpand(){this.isExpanded=!this.isExpanded}applyRotation(){new dr([0,0,0,1]);let t=new on([[Math.cos(this.zw),-Math.sin(this.zw),0,0],[Math.sin(this.zw),Math.cos(this.zw),0,0],[0,0,1,0],[0,0,0,1]]),r=new on([[Math.cos(this.yw),0,-Math.sin(this.yw),0],[0,1,0,0],[Math.sin(this.yw),0,Math.cos(this.yw),0],[0,0,0,1]]),i=new on([[Math.cos(this.yz),0,0,-Math.sin(this.yz)],[0,1,0,0],[0,0,1,0],[Math.sin(this.yz),0,0,Math.cos(this.yz)]]),o=new on([[1,0,0,0],[0,Math.cos(this.xw),-Math.sin(this.xw),0],[0,Math.sin(this.xw),Math.cos(this.xw),0],[0,0,0,1]]),s=new on([[1,0,0,0],[0,Math.cos(this.xz),0,-Math.sin(this.xz)],[0,0,1,0],[0,Math.sin(this.xz),0,Math.cos(this.xz)]]),a=new on([[1,0,0,0],[0,1,0,0],[0,0,Math.cos(this.xy),-Math.sin(this.xy)],[0,0,Math.sin(this.xy),Math.cos(this.xy)]]),l=t.multiply(r).multiply(i).multiply(o).multiply(s).multiply(a);console.log("Rotate by",l),this.projectionManager.setRotationMatrix(l)}}Uv.\u0275fac=function(e){return new(e||Uv)(Me(el))},Uv.\u0275cmp=Dr({type:Uv,selectors:[["app-projection-control-section3-d"]],decls:25,vars:18,consts:[["id","wrapper"],["id","expand-button",3,"click"],[3,"fontIcon"],["id","heading"],["id","inner-content"],[1,"divider"],["id","projection-control-section"],["id","cubes-section"],[1,"rotating-cube-display",3,"rotateX","rotateY"],[1,"rotating-cube-display",3,"rotateX","rotateY","color1","color2"],["id","projection-controls"],[1,"projection-control-item"],[3,"color","angleChanged"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"button",1),Et("click",function(){return t.toggleExpand()}),At(2,"mat-icon",2),be(),he(3,"h3",3),ht(4,"Rotation"),be(),he(5,"div",4),At(6,"div",5),he(7,"section",6)(8,"div",7),At(9,"app-projection-cubes-control",8)(10,"app-projection-cubes-control",9)(11,"app-projection-cubes-control",9),be(),he(12,"div",10)(13,"div",11)(14,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("xy",i)}),be()(),he(15,"div",11)(16,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("zw",i)}),be()(),he(17,"div",11)(18,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("xz",i)}),be()(),he(19,"div",11)(20,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("yw",i)}),be()(),he(21,"div",11)(22,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("xw",i)}),be()(),he(23,"div",11)(24,"app-rotation-control",12),Et("angleChanged",function(i){return t.changeAngle("yz",i)}),be()()()()()()),2&e&&(Le(2),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(3),ot("@expanded",t.isExpanded),Le(4),ot("rotateX",t.xy)("rotateY",t.zw),Le(1),ot("rotateX",t.xz)("rotateY",t.yw)("color1",t.Colors.yellow)("color2",t.Colors.green),Le(1),ot("rotateX",t.xw)("rotateY",t.yz)("color1",t.Colors.orange)("color2",t.Colors.turqouis),Le(3),ot("color",t.Colors.red),Le(2),ot("color",t.Colors.blue),Le(2),ot("color",t.Colors.yellow),Le(2),ot("color",t.Colors.green),Le(2),ot("color",t.Colors.orange),Le(2),ot("color",t.Colors.turqouis))},dependencies:[Hu,rm,zv],styles:["@media (max-width: 1300px){[_nghost-%COMP%]{display:block;width:100%}#projection-control-section[_ngcontent-%COMP%]{max-height:calc(100vh - 400px)!important;height:max-content!important;width:100%!important;max-width:100%!important}}#wrapper[_ngcontent-%COMP%]{position:relative;padding:16px;background-color:#fff;border-radius:8px;box-shadow:var(--light-shadow);max-height:calc(100vh - 340px)}#wrapper[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:6px 0 16px;width:100%;background-color:var(--purple-light)}#wrapper[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden}#wrapper[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#wrapper[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#wrapper[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 4px;padding:0;color:var(--text-dark)}#wrapper[_ngcontent-%COMP%]   #projection-control-section[_ngcontent-%COMP%]{display:grid;overflow-y:auto;overflow-x:hidden}#wrapper[_ngcontent-%COMP%]   #projection-control-section[_ngcontent-%COMP%]   #projection-controls[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px;display:grid;justify-content:center;justify-items:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr 1fr;grid-auto-flow:column;row-gap:8px}#wrapper[_ngcontent-%COMP%]   #projection-control-section[_ngcontent-%COMP%]   #projection-controls[_ngcontent-%COMP%]   .projection-control-item[_ngcontent-%COMP%]{display:grid;justify-items:center}#wrapper[_ngcontent-%COMP%]   #projection-control-section[_ngcontent-%COMP%]   #projection-controls[_ngcontent-%COMP%]   .projection-control-item[_ngcontent-%COMP%]   .projection-control-item-text[_ngcontent-%COMP%]{margin:0;padding:12px 0 6px;font-size:12px;color:var(--text-medium);font-weight:700}#wrapper[_ngcontent-%COMP%]   #projection-control-section[_ngcontent-%COMP%]   #cubes-section[_ngcontent-%COMP%]{display:grid;justify-content:center;grid-template-columns:max-content max-content max-content;column-gap:12px}#wrapper[_ngcontent-%COMP%]   #projection-control-section[_ngcontent-%COMP%]   #cubes-section[_ngcontent-%COMP%]   .rotating-cube-display[_ngcontent-%COMP%]{overflow:hidden;border-radius:16px;height:max-content;width:max-content}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]}});class rn{constructor(e,t,r){this.x=e,this.y=t,this.z=r}getNegative(){return new rn(-this.x,-this.y,-this.z)}equal(e){return Math.abs(this.x-e.x)<.01&&Math.abs(this.y-e.y)<.01&&Math.abs(this.z-e.z)<.01}static getZero(){return new rn(0,0,0)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalized(){return new rn(this.x/this.length(),this.y/this.length(),this.z/this.length())}stretchedBy(e){return new rn(this.x*e,this.y*e,this.z*e)}dotProduct(e){return e.x*this.x+e.y*this.y+e.z*this.z}add(e){return new rn(this.x+e.x,this.y+e.y,this.z+e.z)}}class HD{constructor(e,t=rn.getZero(),r=K.white){this.normalVector=e,this.point=t,this.color=r}getNormalVectorAsThreeVector(){return new q(this.normalVector.x,this.normalVector.y,this.normalVector.z).normalize()}getIntersectionWithTwoOtherPlanes(e,t){let r=this.getIntersectionWithOtherPlanes(e);if(null==r)return;const i=r[1],o=r[0],s=new q(100*i.x+o.x,100*i.y+o.y,100*i.z+o.z),a=new q(-1e3*i.x+o.x,-1e3*i.y+o.y,-1e3*i.z+o.z);var l=new H8(s,a);let c=new q;return t.intersectLine(l,c),new rn(c.x,c.y,c.z)}getIntersectionLineWithOtherPlane(e){const t=this.getIntersectionWithOtherPlanes(e);if(null==t)return null;const r=t[1],i=t[0],o=new q(100*r.x+i.x,100*r.y+i.y,100*r.z+i.z),s=new q(-1e3*r.x+i.x,-1e3*r.y+i.y,-1e3*r.z+i.z);return new H8(o,s)}getIntersectionWithOtherPlanes(e){let t=new ya(this.getNormalVectorAsThreeVector(),this.point.length());function r(u,d,h,f,m){var p=f.normal[d],g=f.normal[h],_=f.constant,b=m.normal[d],v=m.normal[h],y=m.constant,w=(v*_-g*y)/(p*v-b*g),x=(p*y-b*_)/(p*v-b*g),E=new q;return E[u]=0,E[d]=w,E[h]=x,E}var i=(new q).crossVectors(t.normal,e.normal);if(0===i.distanceTo(new q(0,0,0)))return null;var s=Math.abs(i.x),a=Math.abs(i.y),l=Math.abs(i.z);return[l>=s&&l>=a?r("z","x","y",t,e):a>=l&&a>=s?r("y","z","x",t,e):r("x","y","z",t,e),i]}getPlaneAsThreePlane(){return new ya(this.getNormalVectorAsThreeVector(),this.point.length())}}class xMe{constructor(e){this.centerPoint=rn.getZero(),this.edgePoints=[],this.size=1e4,this.size=null!=e.size?e.size:this.size,this.edgePoints=e.edgePoints.map(t=>t.normalized())}}class Br{constructor(e){this.isSimple=!1,this.isPositive=!0,this.direction=e.vector.normalized(),this.length=e.vector.length(),this.isSimple=e.isSimple,this.name=`(${this.getVector().x}, ${this.getVector().y}, ${this.getVector().z})`,this.isPositive=null==e.isPositive||e.isPositive}getNegative(){return new Br({vector:this.direction.getNegative().stretchedBy(this.length),isSimple:!1,isPositive:!this.isPositive})}plus(e){const t=new rn(this.direction.x*this.length+e.direction.x*e.length,this.direction.y*this.length+e.direction.y*e.length,this.direction.z*this.length+e.direction.z*e.length);return new Br({vector:t,isSimple:!1})}times(e){return new Br({vector:this.direction.normalized().stretchedBy(this.length*e),isSimple:!1})}equal(e){return e.direction.equal(this.direction)&&Math.abs(e.length-this.length)<.01}getVector(){return new rn(this.direction.x*this.length,this.direction.y*this.length,this.direction.z*this.length)}getHyperplane(){return new HD(this.direction,rn.getZero())}getDual(){let e=this.getVector(),t=e.dotProduct(e);return new rn(2*e.x*1/t,2*e.y*1/t,2*e.z*1/t)}}class GD{constructor(e,t,r,i){this._simpleRoots=[],this._positiveRoots=[],this.coxeterMatrix=[],this.orderOfWeylGroup=0,this.orderOfWeylGroup=t,this.type=e,this.coxeterMatrix=r,this._positiveRoots=i,this._simpleRoots=this._positiveRoots.filter(o=>o.isSimple)}getBase(){return this._simpleRoots}getRoots(){let e=[...this._positiveRoots];return this._positiveRoots.forEach(t=>{e.push(t.getNegative())}),e}getPositiveRoots(){return this._positiveRoots}getNegativeRoots(){let e=[...this._positiveRoots];return this._positiveRoots.forEach(t=>{e.push(t.getNegative())}),e}getHyperplanesToSimpleRoots(){const e=[];for(let t of this._simpleRoots)t.direction.x>=0&&e.push(this.getHyperplaneToRoot(t));return e}getAllHyperplanes(){let e=this.getRoots();const t=[];for(let r of e)r.direction.x>=0&&t.push(this.getHyperplaneToRoot(r));return t}getHyperplaneToRoot(e){return new HD(e.direction,rn.getZero())}getFundamentalWeylChamber(){const e=[],t=[];for(let a of this._simpleRoots){const l=this.getHyperplaneToRoot(a);e.push(new ya(l.getNormalVectorAsThreeVector(),1e3)),t.push(l)}let r=[],i=[],o=0;for(let a of e){for(let l of e)if(a!=l){let u=t[o].getIntersectionWithOtherPlanes(l)[1],d=new rn(u.x,u.y,u.z);r.push(d)}o++}for(let a of r)for(let l of this._simpleRoots)l.direction.dotProduct(a)>=.01&&i.push(a);return new xMe({edgePoints:i})}getLengthOfTransformation(e){let t=(new io).identity();for(let s of e){const{x:a,y:l,z:c}=s.getVector().normalized();t=(new io).fromArray([1-2*a*a,-2*a*l,-2*a*c,-2*a*l,1-2*l*l,-2*l*c,-2*a*c,-2*l*c,1-2*c*c]).multiply(t)}const r=this.getPositiveRoots();return r.map(s=>{const a=s.getVector(),l=new q(a.x,a.y,a.z).applyMatrix3(t);return new Br({vector:new rn(l.x,l.y,l.z),isSimple:!1})}).filter(s=>r.every(a=>!a.equal(s))).length}}var dh=(()=>{return(n=dh||(dh={})).A3="A3",n.B3="B3",n.C3="C3",dh;var n})();const Gu={A3:new GD(dh.A3,24,[1,3,2,3,1,3,2,3,1],[new Br({vector:new rn(0,1,-1),isSimple:!0}),new Br({vector:new rn(1,-1,0),isSimple:!0}),new Br({vector:new rn(0,1,1),isSimple:!0}),new Br({vector:new rn(1,0,-1),isSimple:!1}),new Br({vector:new rn(1,1,0),isSimple:!1}),new Br({vector:new rn(1,0,1),isSimple:!1})]),B3:new GD(dh.B3,48,[1,4,2,4,1,3,2,3,1],[new Br({vector:new rn(0,0,1),isSimple:!0}),new Br({vector:new rn(0,1,-1),isSimple:!0}),new Br({vector:new rn(1,-1,0),isSimple:!0}),new Br({vector:new rn(1,0,0),isSimple:!1}),new Br({vector:new rn(0,1,0),isSimple:!1}),new Br({vector:new rn(1,1,0),isSimple:!1}),new Br({vector:new rn(0,1,1),isSimple:!1}),new Br({vector:new rn(1,0,1),isSimple:!1}),new Br({vector:new rn(1,0,-1),isSimple:!1})]),C3:new GD(dh.C3,48,[1,4,2,4,1,3,2,3,1],[new Br({vector:new rn(0,0,2),isSimple:!0}),new Br({vector:new rn(0,1,-1),isSimple:!0}),new Br({vector:new rn(1,-1,0),isSimple:!0}),new Br({vector:new rn(1,1,0),isSimple:!1}),new Br({vector:new rn(0,1,1),isSimple:!1}),new Br({vector:new rn(1,0,1),isSimple:!1}),new Br({vector:new rn(1,0,-1),isSimple:!1}),new Br({vector:new rn(2,0,0),isSimple:!1}),new Br({vector:new rn(0,2,0),isSimple:!1})])},Hv={A4:[[1140/721,-1/3970316,-2/3448195,0],[570/721,2718287/1985158,-2/3448195,0],[-570/721,5436575/3970316,0,0],[570/721,1812191/3970316,4451596/3448195,0],[-570/721,1032/2261,4451598/3448195,0],[0,-1603/1756,4451598/3448195,0],[570/721,1812191/3970316,1112898/3448195,5/4],[-570/721,1032/2261,620/1921,5/4],[0,-1603/1756,620/1921,5/4],[0,0,-1738/1795,5/4]],B4:[[1,-1,0,0],[1,1,0,0],[1,0,-1,0],[1,0,1,0],[1,0,0,-1],[1,0,0,1],[0,1,-1,0],[0,1,1,0],[0,1,0,-1],[0,1,0,1],[0,0,1,-1],[0,0,1,1],[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],C4:[[1,1,0,0],[1,0,1,0],[0,1,1,0],[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,-1,0,0],[1,0,-1,0],[0,1,-1,0],[1,0,0,-1],[0,1,0,-1],[0,0,1,-1],[2,0,0,0],[0,2,0,0],[0,0,2,0],[0,0,0,2]],D4:[[1,1,0,0],[1,0,1,0],[0,1,1,0],[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,-1,0,0],[1,0,-1,0],[0,1,-1,0],[1,0,0,-1],[0,1,0,-1],[0,0,1,-1]],F4:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1],[1,1,0,0],[1,0,1,0],[1,0,0,1],[0,1,1,0],[0,1,0,1],[0,0,1,1],[1,-1,0,0],[1,0,-1,0],[1,0,0,-1],[0,1,-1,0],[0,1,0,-1],[0,0,1,-1],[.5,.5,.5,.5],[.5,.5,.5,-.5],[.5,.5,-.5,.5],[.5,.5,-.5,-.5],[.5,-.5,.5,.5],[.5,-.5,.5,-.5],[.5,-.5,-.5,.5],[.5,-.5,-.5,-.5]]},kx={A5:[[1055/681,0,0,-2/25979803,0],[1055/1362,915/682,0,-2/25979803,0],[-1055/1362,915/682,0,0,0],[1055/1362,305/682,721/570,-2/25979803,0],[-1055/1362,305/682,721/570,0,0],[0,-305/341,721/570,0,0],[1055/1362,305/682,721/2280,31818631/25979803,0],[-1055/1362,305/682,721/2280,31818633/25979803,0],[0,-305/341,721/2280,31818633/25979803,0],[0,0,-721/760,31818633/25979803,0],[1055/1362,305/682,721/2280,6363725/25979803,1.2],[-1055/1362,305/682,721/2280,1273/5197,1.2],[0,-305/341,721/2280,1273/5197,1.2],[0,0,-721/760,1273/5197,1.2],[0,0,0,-4898/4999,1.2]],B5:[[1,-1,0,0,0],[1,1,0,0,0],[1,0,-1,0,0],[1,0,1,0,0],[1,0,0,-1,0],[1,0,0,1,0],[1,0,0,0,-1],[1,0,0,0,1],[0,1,-1,0,0],[0,1,1,0,0],[0,1,0,-1,0],[0,1,0,1,0],[0,1,0,0,-1],[0,1,0,0,1],[0,0,1,-1,0],[0,0,1,1,0],[0,0,1,0,-1],[0,0,1,0,1],[0,0,0,1,-1],[0,0,0,1,1],[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],C5:[[1,1,0,0,0],[1,0,1,0,0],[0,1,1,0,0],[1,0,0,1,0],[0,1,0,1,0],[0,0,1,1,0],[1,0,0,0,1],[0,1,0,0,1],[0,0,1,0,1],[0,0,0,1,1],[1,-1,0,0,0],[1,0,-1,0,0],[0,1,-1,0,0],[1,0,0,-1,0],[0,1,0,-1,0],[0,0,1,-1,0],[1,0,0,0,-1],[0,1,0,0,-1],[0,0,1,0,-1],[0,0,0,1,-1],[2,0,0,0,0],[0,2,0,0,0],[0,0,2,0,0],[0,0,0,2,0],[0,0,0,0,2]],D5:[[1,1,0,0,0],[1,0,1,0,0],[0,1,1,0,0],[1,0,0,1,0],[0,1,0,1,0],[0,0,1,1,0],[1,0,0,0,1],[0,1,0,0,1],[0,0,1,0,1],[0,0,0,1,1],[1,-1,0,0,0],[1,0,-1,0,0],[0,1,-1,0,0],[1,0,0,-1,0],[0,1,0,-1,0],[0,0,1,-1,0],[1,0,0,0,-1],[0,1,0,0,-1],[0,0,1,0,-1],[0,0,0,1,-1]]},Gv={A6:[[333/218,0,-1/2172002,0,-1/971256,0],[333/436,2487/1880,-1/2172002,0,-1/971256,0],[-333/436,2487/1880,0,0,0,0],[333/436,829/1880,1354481/1086001,0,-1/971256,0],[-333/436,829/1880,2708963/2172002,0,0,0],[0,-829/940,2708963/2172002,0,0,0],[333/436,829/1880,338620/1086001,2315/1917,-1/971256,0],[-333/436,829/1880,729/2338,2315/1917,0,0],[0,-829/940,729/2338,2315/1917,0,0],[0,0,-869/929,2315/1917,0,0],[333/436,829/1880,338620/1086001,463/1917,2873011/2428140,0],[-333/436,829/1880,729/2338,463/1917,5746027/4856280,0],[0,-829/940,729/2338,463/1917,5746027/4856280,0],[0,0,-869/929,463/1917,5746027/4856280,0],[0,0,0,-1852/1917,5746027/4856280,0],[333/436,829/1880,338620/1086001,463/1917,957667/4856280,7/6],[-333/436,829/1880,729/2338,463/1917,141/715,7/6],[0,-829/940,729/2338,463/1917,141/715,7/6],[0,0,-869/929,463/1917,141/715,7/6],[0,0,0,-1852/1917,141/715,7/6],[0,0,0,0,-6697/6792,7/6]],B6:[[1,-1,0,0,0,0],[1,1,0,0,0,0],[1,0,-1,0,0,0],[1,0,1,0,0,0],[1,0,0,-1,0,0],[1,0,0,1,0,0],[1,0,0,0,-1,0],[1,0,0,0,1,0],[1,0,0,0,0,-1],[1,0,0,0,0,1],[0,1,-1,0,0,0],[0,1,1,0,0,0],[0,1,0,-1,0,0],[0,1,0,1,0,0],[0,1,0,0,-1,0],[0,1,0,0,1,0],[0,1,0,0,0,-1],[0,1,0,0,0,1],[0,0,1,-1,0,0],[0,0,1,1,0,0],[0,0,1,0,-1,0],[0,0,1,0,1,0],[0,0,1,0,0,-1],[0,0,1,0,0,1],[0,0,0,1,-1,0],[0,0,0,1,1,0],[0,0,0,1,0,-1],[0,0,0,1,0,1],[0,0,0,0,1,-1],[0,0,0,0,1,1],[1,0,0,0,0,0],[0,1,0,0,0,0],[0,0,1,0,0,0],[0,0,0,1,0,0],[0,0,0,0,1,0],[0,0,0,0,0,1]],C6:[[1,1,0,0,0,0],[1,0,1,0,0,0],[0,1,1,0,0,0],[1,0,0,1,0,0],[0,1,0,1,0,0],[0,0,1,1,0,0],[1,0,0,0,1,0],[0,1,0,0,1,0],[0,0,1,0,1,0],[0,0,0,1,1,0],[1,0,0,0,0,1],[0,1,0,0,0,1],[0,0,1,0,0,1],[0,0,0,1,0,1],[0,0,0,0,1,1],[1,-1,0,0,0,0],[1,0,-1,0,0,0],[0,1,-1,0,0,0],[1,0,0,-1,0,0],[0,1,0,-1,0,0],[0,0,1,-1,0,0],[1,0,0,0,-1,0],[0,1,0,0,-1,0],[0,0,1,0,-1,0],[0,0,0,1,-1,0],[1,0,0,0,0,-1],[0,1,0,0,0,-1],[0,0,1,0,0,-1],[0,0,0,1,0,-1],[0,0,0,0,1,-1],[2,0,0,0,0,0],[0,2,0,0,0,0],[0,0,2,0,0,0],[0,0,0,2,0,0],[0,0,0,0,2,0],[0,0,0,0,0,2]],D6:[[1,1,0,0,0,0],[1,0,1,0,0,0],[0,1,1,0,0,0],[1,0,0,1,0,0],[0,1,0,1,0,0],[0,0,1,1,0,0],[1,0,0,0,1,0],[0,1,0,0,1,0],[0,0,1,0,1,0],[0,0,0,1,1,0],[1,0,0,0,0,1],[0,1,0,0,0,1],[0,0,1,0,0,1],[0,0,0,1,0,1],[0,0,0,0,1,1],[1,-1,0,0,0,0],[1,0,-1,0,0,0],[0,1,-1,0,0,0],[1,0,0,-1,0,0],[0,1,0,-1,0,0],[0,0,1,-1,0,0],[1,0,0,0,-1,0],[0,1,0,0,-1,0],[0,0,1,0,-1,0],[0,0,0,1,-1,0],[1,0,0,0,0,-1],[0,1,0,0,0,-1],[0,0,1,0,0,-1],[0,0,0,1,0,-1],[0,0,0,0,1,-1]],E6:[[1,1,0,0,0,0],[1,0,1,0,0,0],[1,0,0,1,0,0],[1,0,0,0,1,0],[0,1,1,0,0,0],[0,1,0,1,0,0],[0,1,0,0,1,0],[0,0,1,1,0,0],[0,0,1,0,1,0],[0,0,0,1,1,0],[-1,1,0,0,0,0],[-1,0,1,0,0,0],[-1,0,0,1,0,0],[-1,0,0,0,1,0],[0,-1,1,0,0,0],[0,-1,0,1,0,0],[0,-1,0,0,1,0],[0,0,-1,1,0,0],[0,0,-1,0,1,0],[0,0,0,-1,1,0],[-.5,.5,.5,.5,.5,Math.sqrt(3)/2],[.5,-.5,.5,.5,.5,Math.sqrt(3)/2],[.5,.5,-.5,.5,.5,Math.sqrt(3)/2],[.5,.5,.5,-.5,.5,Math.sqrt(3)/2],[.5,.5,.5,.5,-.5,Math.sqrt(3)/2],[.5,.5,.5,.5,.5,-Math.sqrt(3)/2],[-.5,-.5,-.5,.5,.5,Math.sqrt(3)/2],[-.5,-.5,.5,-.5,.5,Math.sqrt(3)/2],[-.5,-.5,.5,.5,-.5,Math.sqrt(3)/2],[-.5,-.5,.5,-.5,.5,-Math.sqrt(3)/2],[-.5,.5,-.5,-.5,.5,Math.sqrt(3)/2],[-.5,.5,-.5,.5,-.5,Math.sqrt(3)/2],[-.5,.5,-.5,.5,.5,-Math.sqrt(3)/2],[-.5,.5,.5,-.5,-.5,Math.sqrt(3)/2],[-.5,.5,.5,-.5,.5,-Math.sqrt(3)/2],[.5,-.5,-.5,-.5,.5,Math.sqrt(3)/2],[.5,-.5,-.5,.5,-.5,Math.sqrt(3)/2],[.5,-.5,-.5,.5,-.5,-Math.sqrt(3)/2],[.5,-.5,.5,-.5,-.5,Math.sqrt(3)/2],[.5,-.5,.5,-.5,.5,-Math.sqrt(3)/2],[.5,-.5,.5,.5,-.5,-Math.sqrt(3)/2],[.5,.5,-.5,-.5,-.5,Math.sqrt(3)/2],[.5,.5,-.5,.5,-.5,-Math.sqrt(3)/2],[.5,.5,.5,-.5,-.5,Math.sqrt(3)/2],[.5,.5,.5,.5,-.5,-Math.sqrt(3)/2],[.5,.5,.5,-.5,-.5,-Math.sqrt(3)/2]]},Is={A4:Hv.A4.map(n=>new dr(n)),B4:Hv.B4.map(n=>new dr(n)),C4:Hv.C4.map(n=>new dr(n)),D4:Hv.D4.map(n=>new dr(n)),F4:Hv.F4.map(n=>new dr(n)),A5:kx.A5.map(n=>new dr(n)),B5:kx.B5.map(n=>new dr(n)),C5:kx.C5.map(n=>new dr(n)),D5:kx.D5.map(n=>new dr(n)),A6:Gv.A6.map(n=>new dr(n)),B6:Gv.B6.map(n=>new dr(n)),C6:Gv.C6.map(n=>new dr(n)),D6:Gv.D6.map(n=>new dr(n)),E6:Gv.E6.map(n=>new dr(n))};var To=(()=>{return(n=To||(To={}))[n.base=0]="base",n[n.positiveRoots=1]="positiveRoots",n[n.highlight=2]="highlight",To;var n})();const yr={A1:[K.red],A1_A1:[K.red,K.blue],A2:[K.blue,K.red,K.yellow],D2:[K.red,K.blue],B2:[K.red,K.blue,K.yellow,K.green],G2:[K.red,K.orange,K.yellow,K.turqouis,K.green,K.blue],C2:[K.red,K.blue,K.yellow,K.green],A3:[K.red,K.orange,K.yellow,K.turqouis,K.green,K.blue],D3:[K.red,K.orange,K.yellow,K.turqouis,K.green,K.blue],C3:[K.redDark,K.red,K.orange,K.yellow,K.turqouis,K.green,K.greenDark,K.azul,K.purpleDark],B3:[K.redDark,K.red,K.orange,K.yellow,K.turqouis,K.green,K.greenDark,K.azul,K.purpleDark],D4:[K.redDark,K.red,K.orange,K.yellow,K.turqouis,K.blue,K.green,K.greenDark,K.azul,K.purple,K.purpleDark,K.pinkRed],A4:[K.redDark,K.red,K.orange,K.yellow,K.turqouis,K.blue,K.green,K.azul,K.purple,K.purpleDark],B4:[K.green,K.redDark,K.red,K.orangeDark,K.orange,K.purpleDark,K.yellow,K.yellowLight,K.turqouis,K.turqouisDark,K.blue,K.azulDark,K.greenDark,K.azul,K.purple,K.pinkRed],C4:[K.redDark,K.red,K.orangeDark,K.orange,K.yellow,K.turqouis,K.turqouisDark,K.blue,K.yellowGreenLight,K.green,K.greenDark,K.azul,K.purple,K.purpleDark,K.pinkRed,K.pinkRedDark],F4:[K.redDark,K.red,K.orangeDark,K.orange,K.yellow,K.yellowLight,K.turqouis,K.turqouisDark,K.blue,K.blueDark,K.yellowGreenLight,K.yellowGreenDark,K.green,K.greenDark,K.azul,K.azulDark,K.purple,K.purpleDark,K.pinkRed,K.pinkRedDark,K.pink,K.pinkDark,K.palePurple300,K.palePurple200],A5:[K.redDark,K.red,K.orangeDark,K.orange,K.yellow,K.turqouis,K.turqouisDark,K.blue,K.yellowGreenLight,K.green,K.greenDark,K.azul,K.purple,K.purpleDark,K.pinkRed],B5:[K.redDark,K.red,K.orangeDark,K.orange,K.yellow,K.yellowLight,K.turqouis,K.turqouisDark,K.blue,K.blueDark,K.yellowGreenLight,K.yellowGreenDark,K.green,K.greenDark,K.yellowGreenLight,K.azul,K.azulDark,K.purple,K.purpleDark,K.pinkRed,K.pinkRedDark,K.pink,K.pinkDark,K.palePurple300,K.palePurple200],D5:[K.redDark,K.red,K.orangeDark,K.orange,K.yellow,K.yellowLight,K.turqouis,K.turqouisDark,K.blue,K.blueDark,K.green,K.greenDark,K.yellowGreenLight,K.azul,K.azulDark,K.purple,K.purpleDark,K.pinkRed,K.pinkRedDark,K.pink,K.pinkDark],A6:[K.redDark,K.red,K.orangeDark,K.orange,K.yellow,K.yellowLight,K.turqouis,K.turqouisDark,K.blue,K.blueDark,K.yellowGreenLight,K.yellowGreenDark,K.green,K.greenDark,K.yellowGreenLight,K.azul,K.azulDark,K.purple,K.purpleDark,K.pinkRed,K.pinkRedDark,K.pink,K.pinkDark,K.palePurple300,K.palePurple200,K.yellowLight,K.turqouis,K.turqouisDark]};let SMe=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ps=new bt("NgValueAccessor"),qv=new bt("CallSetDisabledState",{providedIn:"root",factory:()=>eA}),eA="always";let P6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({}),n})(),ECe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[P6]}),n})(),DCe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qv,useValue:t.callSetDisabledState??eA}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ECe]}),n})();const TCe=["input"],ICe=["*"];let X6=0;class Y6{constructor(e,t){this.source=e,this.value=t}}const PCe={provide:Ps,useExisting:$n(()=>fA),multi:!0},Z6=new bt("MatRadioGroup"),OCe=new bt("mat-radio-default-options",{providedIn:"root",factory:function NCe(){return{color:"accent"}}});let RCe=(()=>{class n{constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+X6++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new pr}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=us(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=us(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(r=>{r.checked=this.value===r.value,r.checked&&(this._selected=r)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Y6(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(Me(rs))},n.\u0275dir=tn({type:n,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),n})();class FCe{constructor(e){this._elementRef=e}}const kCe=yU(bU(FCe));let LCe=(()=>{class n extends kCe{constructor(t,r,i,o,s,a,l,c){super(r),this._changeDetector=i,this._focusMonitor=o,this._radioDispatcher=s,this._providerOverride=l,this._uniqueId="mat-radio-"+ ++X6,this.id=this._uniqueId,this.change=new pr,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===a,c&&(this.tabIndex=Bl(c,0))}get checked(){return this._checked}set checked(t){const r=us(t);this._checked!==r&&(this._checked=r,r&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!r&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),r&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled(us(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=us(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((t,r)=>{t!==this.id&&r===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Y6(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const r=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),r&&this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_updateTabIndex(){const t=this.radioGroup;let r;if(r=t&&t.selected&&!this.disabled?t.selected===this?this.tabIndex:-1:this.tabIndex,r!==this._previousTabIndex){const i=this._inputElement?.nativeElement;i&&(i.setAttribute("tabindex",r+""),this._previousTabIndex=r)}}}return n.\u0275fac=function(t){v_()},n.\u0275dir=tn({type:n,viewQuery:function(t,r){if(1&t&&po(TCe,5),2&t){let i;ki(i=Li())&&(r._inputElement=i.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[zn]}),n})(),fA=(()=>{class n extends RCe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Xi(n)))(r||n)}}(),n.\u0275dir=tn({type:n,selectors:[["mat-radio-group"]],contentQueries:function(t,r,i){if(1&t&&function FM(n,e,t,r){const i=ur();if(i.firstCreatePass){const o=wo();mN(i,new hN(e,t,r),o.index),function XX(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}pN(i,lt(),t)}(i,qx,5),2&t){let o;ki(o=Li())&&(r._radios=o)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],exportAs:["matRadioGroup"],features:[Tr([PCe,{provide:Z6,useExisting:n}]),zn]}),n})(),qx=(()=>{class n extends LCe{constructor(t,r,i,o,s,a,l,c){super(t,r,i,o,s,a,l,c)}}return n.\u0275fac=function(t){return new(t||n)(Me(Z6,8),Me(ni),Me(rs),Me(C1e),Me(SMe),Me(Mf,8),Me(OCe,8),fd("tabindex"))},n.\u0275cmp=Dr({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(t,r){1&t&&Et("focus",function(){return r._inputElement.nativeElement.focus()}),2&t&&(zo("id",r.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),ai("mat-primary","primary"===r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("mat-mdc-radio-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[zn],ngContentSelectors:ICe,decls:13,vars:17,consts:[[1,"mdc-form-field"],["formField",""],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"id","checked","disabled","required","change"],["input",""],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[3,"for"]],template:function(t,r){if(1&t&&(lg(),he(0,"div",0,1)(2,"div",2)(3,"div",3),Et("click",function(o){return r._onInputInteraction(o)}),be(),he(4,"input",4,5),Et("change",function(o){return r._onInputInteraction(o)}),be(),he(6,"div",6),At(7,"div",7)(8,"div",8),be(),he(9,"div",9),At(10,"div",10),be()(),he(11,"label",11),cg(12),be()()),2&t){const i=E_(1);ai("mdc-form-field--align-end","before"==r.labelPosition),Le(2),ai("mdc-radio--disabled",r.disabled),Le(2),ot("id",r.inputId)("checked",r.checked)("disabled",r.disabled)("required",r.required),zo("name",r.name)("value",r.value)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),Le(5),ot("matRippleTrigger",i)("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",!0),Le(2),ot("for",r.inputId)}},dependencies:[kD],styles:['.mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mdc-radio[hidden]{display:none}.mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mdc-radio__native-control:checked+.mdc-radio__background,.mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio--disabled{cursor:default;pointer-events:none}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:disabled+.mdc-radio__background,[aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px) / 2)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-focus-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-hover-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, #000)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, #000)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{top:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control{top:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);right:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);left:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{background-color:var(--mat-mdc-radio-ripple-color, transparent)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-mdc-radio-checked-ripple-color, transparent)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-mdc-radio-checked-ripple-color, transparent)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}[dir=rtl] .mat-mdc-radio-touch-target{left:0;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0}),n})(),BCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ds,Ef,Ix,ds]}),n})();function VCe(n,e){if(1&n){const t=ho();he(0,"div",9),Et("click",function(){const o=qr(t).$implicit,s=pn();return $r(s.setProjectionDim(o,s.projectionEnd))}),At(1,"mat-radio-button",10),he(2,"p",11),ht(3),be()()}if(2&n){const t=e.$implicit,r=pn();Le(1),ot("checked",r.projectionStart==t)("value",t),Le(2),fo("",t,"D")}}function zCe(n,e){if(1&n){const t=ho();he(0,"div")(1,"div",19),Et("click",function(){const o=qr(t).$implicit;return $r(pn(3).loadRootSystem(o.ref,o.colors,o.text))}),At(2,"mat-radio-button",10),he(3,"p",20),ht(4),be()()()}if(2&n){const t=e.$implicit,r=pn(3);Le(2),ot("checked",r.selectedRootSystem==t.text)("value",t.text),Le(2),Jc(t.text)}}function UCe(n,e){if(1&n&&(he(0,"mat-radio-group",18),Yn(1,zCe,5,3,"div",16),be()),2&n){const t=pn().$implicit;Le(1),ot("ngForOf",t.systems)}}function HCe(n,e){if(1&n&&(he(0,"div"),Yn(1,UCe,2,1,"mat-radio-group",17),be()),2&n){const t=e.$implicit,r=pn();Le(1),ot("ngIf",t.dim==r.projectionStart)}}class Yv{constructor(e,t){this.projectionManager=e,this.canvasService=t,this.ProjectionType=Lc,this.isExpanded=!0,this.projectionStart=3,this.projectionEnd=2,this.selectedRootSystem="A3",this.possibleStartDimensions=[3,4,5,6],this.projectionType=Lc.orthogonal,this.rootSystems=[{dim:3,systems:[{text:"A3",ref:Gu.A3.getPositiveRoots().map(r=>{let i=r.getVector();return new dr([i.x,i.y,i.z])}),colors:yr.A3},{text:"B3",ref:Gu.B3.getPositiveRoots().map(r=>{let i=r.getVector();return new dr([i.x,i.y,i.z])}),colors:yr.B3},{text:"C3",ref:Gu.C3.getPositiveRoots().map(r=>{let i=r.getVector();return new dr([i.x,i.y,i.z])}),colors:yr.C3}]},{dim:4,systems:[{text:"A4",ref:Is.A4,colors:yr.A4},{text:"B4",ref:Is.B4,colors:yr.B4},{text:"C4",ref:Is.C4,colors:yr.C4},{text:"D4",ref:Is.D4,colors:yr.D4},{text:"F4",ref:Is.F4,colors:yr.F4}]},{dim:5,systems:[{text:"A5",ref:Is.A5,colors:yr.A5},{text:"B5",ref:Is.B5,colors:yr.B5},{text:"C5",ref:Is.C5,colors:yr.B5},{text:"D5",ref:Is.D5,colors:yr.D5}]},{dim:6,systems:[{text:"A6",ref:Is.A6,colors:yr.A6},{text:"B6",ref:Is.B6,colors:yr.A6},{text:"C6",ref:Is.C6,colors:yr.A6},{text:"D6",ref:Is.D6,colors:yr.A6},{text:"E6",ref:Is.E6,colors:yr.A6}]}],this.canvasService.sceneInitializedSubject.subscribe(()=>{if(0==this.projectionManager.rootList.length){let r=this.rootSystems.findIndex(o=>o.dim==this.projectionStart),i=this.rootSystems[r].systems[0];this.loadRootSystem(i.ref,i.colors,i.text)}this.paintRootSystem()}),window.innerWidth<1300&&(this.isExpanded=!1)}ngAfterViewInit(){this.projectionType=this.projectionManager.projectionType,this.projectionEnd=this.projectionManager.endDimension,this.projectionStart=this.projectionManager.startDimension,this.selectedRootSystem=this.projectionManager.rootSystemIdentifier}toggleExpand(){this.isExpanded=!this.isExpanded}loadRootSystem(e,t,r){this.selectedRootSystem=r,this.projectionManager.setPoints([...e,...e.map(i=>i.getNegative())],r),this.projectionManager.setColors([...t,...t]),this.paintRootSystem()}setProjectionDim(e,t){this.projectionStart=e,this.projectionManager.setStartDimension(e),this.projectionEnd=t,this.projectionManager.setEndDimension(t);let r=this.rootSystems.findIndex(o=>o.dim==this.projectionStart),i=this.rootSystems[r].systems[0];this.loadRootSystem(i.ref,i.colors,i.text),this.paintRootSystem()}setProjectionType(e){this.projectionType=e,this.projectionManager.setProjectionType(e),this.paintRootSystem()}paintRootSystem(){this.projectionManager.paintProjection()}}Yv.\u0275fac=function(e){return new(e||Yv)(Me(el),Me(Bu))},Yv.\u0275cmp=Dr({type:Yv,selectors:[["app-projection-settings-panel"]],decls:40,vars:14,consts:[["id","projection-settings-panel"],[3,"click"],["id","expand-button"],[3,"fontIcon"],["id","heading"],["id","inner-content"],[1,"divider"],[1,"subsection-heading"],[1,"projection-type-container"],[1,"projection-item",3,"click"],[3,"checked","value"],[1,"projection-text"],[3,"checked","value","disabled"],[3,"checked","disabled","value"],["id","start-dimension-container",1,"projection-type-container"],["class","projection-item",3,"click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","root-system-list",4,"ngIf"],[1,"root-system-list"],[1,"root-system-item",3,"click"],[1,"root-system-text"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"div",1),Et("click",function(){return t.toggleExpand()}),he(2,"button",2),At(3,"mat-icon",3),be(),he(4,"h3",4),ht(5,"Projection Settings"),be()(),he(6,"div",5),At(7,"div",6),he(8,"h4",7),ht(9,"Type of Projection"),be(),he(10,"mat-radio-group",8)(11,"div",9),Et("click",function(){return t.setProjectionType(t.ProjectionType.orthogonal)}),At(12,"mat-radio-button",10),he(13,"p",11),ht(14,"Orthogonal"),be()(),he(15,"div",9),Et("click",function(){return t.setProjectionType(t.ProjectionType.stereographic)}),At(16,"mat-radio-button",12),he(17,"p",11),ht(18,"Stereographic"),be()()(),At(19,"div",6),he(20,"h4",7),ht(21,"Projection Space "),be(),he(22,"mat-radio-group",8)(23,"div",9),Et("click",function(){return t.setProjectionDim(t.projectionStart,2)}),At(24,"mat-radio-button",10),he(25,"p",11),ht(26,"2D"),be()(),he(27,"div",9),Et("click",function(){return 3!=t.projectionStart?t.setProjectionDim(t.projectionStart,3):0}),At(28,"mat-radio-button",13),he(29,"p",11),ht(30,"3D"),be()()(),At(31,"div",6),he(32,"h4",7),ht(33,"Starting Space"),be(),he(34,"mat-radio-group",14),Yn(35,VCe,4,3,"div",15),be(),At(36,"div",6),he(37,"h4",7),ht(38,"Root Systems"),be(),Yn(39,HCe,2,1,"div",16),be()()),2&e&&(Le(3),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(3),ot("@expanded",t.isExpanded),Le(6),ot("checked",t.projectionType==t.ProjectionType.orthogonal)("value",!0),Le(4),ot("checked",t.projectionType==t.ProjectionType.stereographic)("value",!1)("disabled",t.projectionStart-t.projectionEnd>1),Le(8),ot("checked",2==t.projectionEnd)("value",3),Le(4),ot("checked",3==t.projectionEnd)("disabled",3==t.projectionStart)("value",2),Le(7),ot("ngForOf",t.possibleStartDimensions),Le(4),ot("ngForOf",t.rootSystems))},dependencies:[tu,nu,Hu,fA,qx],styles:["@media (max-width: 1300px){#projection-settings-panel[_ngcontent-%COMP%]{max-height:calc(100vh - 150px)!important;width:100%!important;max-width:100%!important;left:auto!important;right:auto!important}}#projection-settings-panel[_ngcontent-%COMP%]{width:max-content;padding:16px;box-sizing:border-box;background-color:#fff;border-radius:8px;box-shadow:var(--light-shadow);display:grid;align-content:flex-start;align-items:flex-start;max-width:calc(50vw - 30px);z-index:100;max-height:calc(100vh - 150px);overflow-y:auto;position:relative}#projection-settings-panel[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden;padding:0 16px}#projection-settings-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#projection-settings-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#projection-settings-panel[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 4px;padding:0;color:var(--text-dark)}#projection-settings-panel[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin:0;padding:0;color:var(--text-light)}#projection-settings-panel[_ngcontent-%COMP%]   .subsection-heading[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0;padding:0;color:var(--text-medium)}#projection-settings-panel[_ngcontent-%COMP%]   .projection-type-container[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .root-system-list[_ngcontent-%COMP%]{padding:8px 0;display:grid;grid-template-rows:max-content}#projection-settings-panel[_ngcontent-%COMP%]   .projection-type-container[_ngcontent-%COMP%]   .projection-item[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .projection-type-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .root-system-list[_ngcontent-%COMP%]   .projection-item[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .root-system-list[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:center;cursor:pointer}#projection-settings-panel[_ngcontent-%COMP%]   .projection-type-container[_ngcontent-%COMP%]   .projection-item[_ngcontent-%COMP%]   .projection-text[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .projection-type-container[_ngcontent-%COMP%]   .projection-item[_ngcontent-%COMP%]   .root-system-text[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .projection-type-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .projection-text[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .projection-type-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .root-system-text[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .root-system-list[_ngcontent-%COMP%]   .projection-item[_ngcontent-%COMP%]   .projection-text[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .root-system-list[_ngcontent-%COMP%]   .projection-item[_ngcontent-%COMP%]   .root-system-text[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .root-system-list[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .projection-text[_ngcontent-%COMP%], #projection-settings-panel[_ngcontent-%COMP%]   .root-system-list[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .root-system-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-dark);font-weight:700;margin:0;padding:0}#projection-settings-panel[_ngcontent-%COMP%]   #start-dimension-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}#projection-settings-panel[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:6px 0 12px;width:100%;background-color:var(--purple-light)}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]},changeDetection:0});class Zv{constructor(){this.degreeChanged=new pr,this.degree=0,this.base1=0,this.base2=0}changeDegree(e){this.degree=e,this.degreeChanged.emit(e)}getRoundedDegree(){return Math.round(this.degree)}}function GCe(n,e){if(1&n){const t=ho();he(0,"app-rotation-slider",10,11),Et("degreeChanged",function(i){const s=qr(t).index;return $r(pn().setAngle(s,i))}),be()}if(2&n){const t=e.$implicit;ot("base1",t[1])("base2",t[0])}}Zv.\u0275fac=function(e){return new(e||Zv)},Zv.\u0275cmp=Dr({type:Zv,selectors:[["app-rotation-slider"]],inputs:{degree:"degree",base1:"base1",base2:"base2"},outputs:{degreeChanged:"degreeChanged"},decls:5,vars:3,consts:[["id","rotation-control"],["id","rotation-slider-text"],["type","range","min","0","max","360","value","0","id","slider",3,"input"],["slider",""]],template:function(e,t){if(1&e){const r=ho();he(0,"section",0)(1,"p",1),ht(2),be(),he(3,"input",2,3),Et("input",function(){qr(r);const o=E_(4);return $r(t.changeDegree(o.value))}),be()()}2&e&&(Le(2),gM("(X",t.base1,", X",t.base2,")-Plane (",t.getRoundedDegree(),"\xb0)"))},styles:["#rotation-control[_ngcontent-%COMP%]{width:100%;display:grid;justify-content:stretch;margin-top:14px}#rotation-control[_ngcontent-%COMP%]   #rotation-slider-text[_ngcontent-%COMP%]{margin:0;padding:0;font-size:12px;font-weight:700;color:var(--text-dark);-webkit-user-select:none;user-select:none}#rotation-control[_ngcontent-%COMP%]   #slider[_ngcontent-%COMP%]{margin:14px 0;-webkit-appearance:none;width:100%;height:4px;background:var(--text-light);outline:none;opacity:.7;border-radius:4px;transition:opacity .2s}#rotation-control[_ngcontent-%COMP%]   #slider[_ngcontent-%COMP%]:hover{opacity:1}#rotation-control[_ngcontent-%COMP%]   #slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;border-radius:50%;height:16px;background:#764fd0;border:2px solid #603cb2;cursor:pointer}#rotation-control[_ngcontent-%COMP%]   #slider[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;border-radius:50%;height:16px;background:#764fd0;border:2px solid #603cb2;cursor:pointer}"]});class Kv{constructor(e){this.projectionManager=e,this.angles=[],this.sliders=[],this.isExpanded=!0,this.dimension=4,this.numberOfSliders=2,window.innerWidth<1300&&(this.isExpanded=!1)}ngOnInit(){this.generateSliders(),this.angles=Array.apply(null,Array(this.sliders.length)).map(e=>0),this.rotationMatrix=on.identity(this.dimension)}toggleExpand(){this.isExpanded=!this.isExpanded}ngOnChanges(e){e.dimension&&(this.generateSliders(),this.angles=Array.apply(null,Array(this.sliders.length)).map(t=>0),this.rotationMatrix=on.identity(this.dimension))}generateSliders(){for(let e=1;e<=this.dimension;++e)for(let t=1;t<e;++t)this.sliders.push([e,t])}setAngle(e,t){this.angles[e]=t,this.generateMatrix()}generateMatrix(){let e=on.identity(this.dimension),t=0;for(let r of this.sliders){let i=on.basicRotationMatrix(this.dimension,r[0]-1,r[1]-1,this.angles[t]/360*Math.PI*2);e=e.multiply(i),t++,console.log(i)}this.rotationMatrix=e,this.projectionManager.setRotationMatrix(this.rotationMatrix)}}function jCe(n,e){1&n&&At(0,"img",3)}function WCe(n,e){1&n&&At(0,"img",4)}Kv.\u0275fac=function(e){return new(e||Kv)(Me(el))},Kv.\u0275cmp=Dr({type:Kv,selectors:[["app-projection-ndrotation-control"]],inputs:{dimension:"dimension"},features:[Qo],decls:11,vars:3,consts:[["id","nd-rotation-control"],[3,"click"],["id","expand-button"],[3,"fontIcon"],["id","heading"],["id","inner-content"],[1,"divider"],["id","content"],["id","rotation-control"],[3,"base1","base2","degreeChanged",4,"ngFor","ngForOf"],[3,"base1","base2","degreeChanged"],["slider",""]],template:function(e,t){1&e&&(he(0,"div",0)(1,"div",1),Et("click",function(){return t.toggleExpand()}),he(2,"button",2),At(3,"mat-icon",3),be(),he(4,"h3",4),ht(5,"Rotation"),be()(),he(6,"div",5),At(7,"div",6),he(8,"div",7)(9,"section",8),Yn(10,GCe,2,2,"app-rotation-slider",9),be()()()()),2&e&&(Le(3),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(3),ot("@expanded",t.isExpanded),Le(4),ot("ngForOf",t.sliders))},dependencies:[tu,Hu,Zv],styles:["@media (max-width: 1300px){[_nghost-%COMP%]{display:block;width:100%}#nd-rotation-control[_ngcontent-%COMP%]{max-height:calc(100vh - 300px)!important;height:max-content!important;width:100%!important;max-width:100%!important}}#nd-rotation-control[_ngcontent-%COMP%]{min-width:330px;width:max-content;padding:16px;background-color:#fff;border-radius:8px;box-shadow:var(--light-shadow);display:grid;align-content:flex-start;justify-content:stretch;align-items:flex-start;z-index:100;overflow-y:auto;position:relative;box-sizing:border-box;max-height:calc(100vh - 420px)}#nd-rotation-control[_ngcontent-%COMP%]   #rotation-control[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;justify-content:center;column-gap:16px;padding:8px}#nd-rotation-control[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden}#nd-rotation-control[_ngcontent-%COMP%]   #content[_ngcontent-%COMP%]{height:max-content}#nd-rotation-control[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#nd-rotation-control[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#nd-rotation-control[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 4px;padding:0;color:var(--text-dark)}#nd-rotation-control[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin:0;padding:0;color:var(--text-light)}#nd-rotation-control[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:12px 0;width:100%;background-color:var(--purple-light)}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]}});class Qv{constructor(){this.endDimension=2}}function qCe(n,e){if(1&n&&(he(0,"p"),ht(1),be()),2&n){const t=e.$implicit;Le(1),Jc("-0.0"==t.toFixed(1)?-t.toFixed(1):t.toFixed(1))}}function $Ce(n,e){if(1&n&&(he(0,"div",5),Yn(1,qCe,2,1,"p",6),be()),2&n){const t=e.$implicit;Le(1),ot("ngForOf",t)}}function XCe(n,e){if(1&n&&(he(0,"p",9),ht(1),be()),2&n){const t=e.$implicit;Le(1),fo("(",t,")")}}function YCe(n,e){if(1&n&&(he(0,"div",7)(1,"p",1),ht(2,"Normals to projection hyperplane:"),be(),Yn(3,XCe,2,1,"p",8),be()),2&n){const t=pn();Le(3),ot("ngForOf",t.rotationNormals)}}Qv.\u0275fac=function(e){return new(e||Qv)},Qv.\u0275cmp=Dr({type:Qv,selectors:[["app-dimension-indicator"]],inputs:{endDimension:"endDimension"},decls:3,vars:2,consts:[["id","dimension-indicator"],["src","assets/2D.svg",4,"ngIf"],["src","assets/3D.svg",4,"ngIf"],["src","assets/2D.svg"],["src","assets/3D.svg"]],template:function(e,t){1&e&&(he(0,"div",0),Yn(1,jCe,1,0,"img",1),Yn(2,WCe,1,0,"img",2),be()),2&e&&(Le(1),ot("ngIf",2==t.endDimension),Le(1),ot("ngIf",3==t.endDimension))},dependencies:[nu],styles:["#dimension-indicator[_ngcontent-%COMP%]{height:50px;width:50px;background-color:#fff;border-radius:8px;padding:14px 14px 8px 8px;opacity:.8}"]});class Jv{constructor(e,t){this.projectionManager=e,this.cd=t,this.rotationMatrix=on.identity(3),this.rotationNormals=[],this.rotationNormals=this.getNormals(),e.rotationsChanged.subscribe(()=>{this.rotationMatrix=this.projectionManager.rotationMatrix,this.rotationNormals=e.projectionType==Lc.orthogonal?this.getNormals():[],this.cd.detectChanges()})}getNormals(){return this.projectionManager.normals.map(e=>e.components.map(t=>"-0.0"!=t.toFixed(1)?t.toFixed(1):"0.0").join(", "))}}Jv.\u0275fac=function(e){return new(e||Jv)(Me(el),Me(rs))},Jv.\u0275cmp=Dr({type:Jv,selectors:[["app-rotation-matrix-display"]],decls:6,vars:2,consts:[["id","rotation-matrix-display"],[1,"description-text"],[1,"matrix3"],["class","row",4,"ngFor","ngForOf"],["id","normal-container",4,"ngIf"],[1,"row"],[4,"ngFor","ngForOf"],["id","normal-container"],["class","description-text normal-vector",4,"ngFor","ngForOf"],[1,"description-text","normal-vector"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"p",1),ht(2,"Rotation Matrix: "),be(),he(3,"div",2),Yn(4,$Ce,2,1,"div",3),be(),Yn(5,YCe,4,1,"div",4),be()),2&e&&(Le(4),ot("ngForOf",t.rotationMatrix.components),Le(1),ot("ngIf",t.rotationNormals.length>0))},dependencies:[tu,nu],styles:["#rotation-matrix-display[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;height:max-content;min-width:140px;padding:16px;margin-bottom:24px;box-sizing:border-box;display:grid;justify-items:flex-start;align-content:flex-start;position:relative;max-width:280px}#rotation-matrix-display[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{margin:0 0 6px;padding:0;font-size:14px;font-weight:600;color:var(--text-dark)}#rotation-matrix-display[_ngcontent-%COMP%]   #normal-container[_ngcontent-%COMP%]{margin-top:12px;display:grid}#rotation-matrix-display[_ngcontent-%COMP%]   .normal-vector[_ngcontent-%COMP%]{color:var(--text-medium);justify-self:center}#rotation-matrix-display[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]{display:grid;justify-content:center;justify-self:center;gap:6px;position:relative;box-sizing:border-box;width:max-content;background-color:var(--purple-light);padding:5px;border-radius:2px;border-right:var(--text-medium) 2px solid;border-left:var(--text-medium) 2px solid}#rotation-matrix-display[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;gap:5px}#rotation-matrix-display[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 4px}#rotation-matrix-display[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;display:block;font-size:13px;color:var(--text-dark);font-weight:700;text-align:center}"],changeDetection:0});const ZCe=["threeCanvas"];function KCe(n,e){1&n&&At(0,"app-projection-control-section3-d",11)}function QCe(n,e){1&n&&At(0,"app-projection-control-section",12)}function JCe(n,e){1&n&&At(0,"app-projection-ndrotation-control",13),2&n&&ot("dimension",pn().projectionStartDim)}class e0{constructor(e,t){this.projectionManager=e,this.cd=t,this.projectionStartDim=3,this.projectionEndDim=2,e.dimensionsChanged.subscribe(()=>{this.updateProjectionType(),this.cd.detectChanges()})}ngAfterViewInit(){this.projectionManager.initializeView(this.canvas.nativeElement)}updateProjectionType(){this.projectionStartDim=this.projectionManager.startDimension,this.projectionEndDim=this.projectionManager.endDimension}}e0.\u0275fac=function(e){return new(e||e0)(Me(el),Me(rs))},e0.\u0275cmp=Dr({type:e0,selectors:[["app-projected-root-systems"]],viewQuery:function(e,t){if(1&e&&po(ZCe,5),2&e){let r;ki(r=Li())&&(t.canvas=r.first)}},decls:11,vars:6,consts:[["id","projected-root-systems"],["id","overlay"],["id","dimension-indicator",3,"endDimension"],["id","settings-panel"],["id","rotation-section"],["id","projection-cubes",4,"ngIf"],["id","projection-control-section",4,"ngIf"],["id","ND-rotation-control",3,"dimension",4,"ngIf"],["id","rotation-matrix-display"],["id","canvas"],["threeCanvas",""],["id","projection-cubes"],["id","projection-control-section"],["id","ND-rotation-control",3,"dimension"]],template:function(e,t){1&e&&(he(0,"section",0)(1,"div",1),At(2,"app-dimension-indicator",2)(3,"app-projection-settings-panel",3),he(4,"section",4),Yn(5,KCe,1,0,"app-projection-control-section3-d",5),Yn(6,QCe,1,0,"app-projection-control-section",6),Yn(7,JCe,1,1,"app-projection-ndrotation-control",7),At(8,"app-rotation-matrix-display",8),be()(),At(9,"div",9,10),be()),2&e&&(Le(2),ot("endDimension",t.projectionEndDim),Le(2),ai("wide",4==t.projectionStartDim),Le(1),ot("ngIf",4==t.projectionStartDim),Le(1),ot("ngIf",3==t.projectionStartDim),Le(1),ot("ngIf",t.projectionStartDim>4))},dependencies:[nu,Vv,Uv,Yv,Kv,Qv,Jv],styles:["@media (max-width: 1300px){#dimension-indicator[_ngcontent-%COMP%], #rotation-matrix-display[_ngcontent-%COMP%]{display:none}#projected-root-systems[_ngcontent-%COMP%]   #overlay[_ngcontent-%COMP%]{width:100%;height:100vh;bottom:0;position:absolute;width:90%;display:grid;justify-content:center;justify-items:center;align-content:flex-end;align-items:flex-end}#projected-root-systems[_ngcontent-%COMP%]   #overlay[_ngcontent-%COMP%]   #settings-panel[_ngcontent-%COMP%]{position:absolute;max-height:calc(100vh - 200px);top:auto;bottom:16px;left:0;z-index:1;width:calc(50% - 8px)}#projected-root-systems[_ngcontent-%COMP%]   #overlay[_ngcontent-%COMP%]   #rotation-section[_ngcontent-%COMP%]{position:absolute;top:auto;bottom:16px;width:calc(50% - 8px);left:calc(50% + 16px);z-index:30;grid-template-rows:max-content;align-content:flex-end;align-items:flex-end}}@media (max-width: 800px){#projected-root-systems[_ngcontent-%COMP%]   #overlay[_ngcontent-%COMP%]{width:100%;height:100vh;bottom:0;position:absolute;width:380px;max-width:90%;display:grid;justify-content:center;justify-items:center;align-content:flex-end;align-items:flex-end}#projected-root-systems[_ngcontent-%COMP%]   #overlay[_ngcontent-%COMP%]   #settings-panel[_ngcontent-%COMP%]{position:absolute;max-height:calc(100vh - 200px);top:auto;bottom:180px!important;left:0;z-index:1;width:380px;max-width:100%}#projected-root-systems[_ngcontent-%COMP%]   #overlay[_ngcontent-%COMP%]   #rotation-section[_ngcontent-%COMP%]{position:absolute;top:auto;bottom:120px!important;width:380px;left:0!important;height:max-content;min-height:24px;z-index:30;max-width:100%;display:block}#projected-root-systems[_ngcontent-%COMP%]   #overlay[_ngcontent-%COMP%]   #rotation-section[_ngcontent-%COMP%]   #ND-rotation-control[_ngcontent-%COMP%]{top:-16px;position:relative}}#projected-root-systems[_ngcontent-%COMP%]{background-color:var(--background-color);padding:0;margin:0;height:100vh;width:100vw;position:relative;display:grid;justify-items:center}#projected-root-systems[_ngcontent-%COMP%]   #settings-panel[_ngcontent-%COMP%]{position:absolute;right:24px;top:24px;display:block;max-height:calc(100vh - 200px)}#projected-root-systems[_ngcontent-%COMP%]   #rotation-section[_ngcontent-%COMP%]{height:calc(100% - 84px);z-index:100;position:absolute;width:250px;left:24px;top:92px;display:grid;grid-template-rows:1fr max-content;row-gap:16px;justify-content:stretch;justify-items:stretch;grid-template-columns:1fr}#projected-root-systems[_ngcontent-%COMP%]   #rotation-section.wide[_ngcontent-%COMP%]{width:380px;grid-template-columns:380px}#projected-root-systems[_ngcontent-%COMP%]   #dimension-indicator[_ngcontent-%COMP%]{position:absolute;right:24px;bottom:24px;z-index:2}#projected-root-systems[_ngcontent-%COMP%]   #canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100vw}"],changeDetection:0});const pA={},K6=[];function Rn(n,e){if(Array.isArray(n))for(const t of n)Rn(t,e);else if("object"!=typeof n)Q6(Object.getOwnPropertyNames(e)),pA[n]=Object.assign(pA[n]||{},e);else for(const t in n)Rn(t,n[t])}function Os(n){return pA[n]||{}}function Q6(n){K6.push(...n)}function $x(n,e){let t;const r=n.length,i=[];for(t=0;t<r;t++)i.push(e(n[t]));return i}function J6(n,e){let t;const r=n.length,i=[];for(t=0;t<r;t++)e(n[t])&&i.push(n[t]);return i}function Xx(n){return n%360*Math.PI/180}function t0(n){return n.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function eH(n){return n.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function mA(n){return n.charAt(0).toUpperCase()+n.slice(1)}function ph(n,e,t,r){return(null==e||null==t)&&(r=r||n.bbox(),null==e?e=r.width/r.height*t:null==t&&(t=r.height/r.width*e)),{width:e,height:t}}function Yx(n,e){const t=n.origin;let r=null!=n.ox?n.ox:null!=n.originX?n.originX:"center",i=null!=n.oy?n.oy:null!=n.originY?n.originY:"center";null!=t&&([r,i]=Array.isArray(t)?t:"object"==typeof t?[t.x,t.y]:[t,t]);const o="string"==typeof r,s="string"==typeof i;if(o||s){const{height:a,width:l,x:c,y:u}=e.bbox();o&&(r=r.includes("left")?c:r.includes("right")?c+l:c+l/2),s&&(i=i.includes("top")?u:i.includes("bottom")?u+a:u+a/2)}return[r,i]}const Zx="http://www.w3.org/2000/svg",n0="http://www.w3.org/2000/xmlns/",om="http://www.w3.org/1999/xlink",Gn={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};class gA{}const mh={},vA="___SYMBOL___ROOT___";function r0(n,e=Zx){return Gn.document.createElementNS(e,n)}function fs(n,e=!1){if(n instanceof gA)return n;if("object"==typeof n)return Qx(n);if(null==n)return new mh[vA];if("string"==typeof n&&"<"!==n.charAt(0))return Qx(Gn.document.querySelector(n));const t=e?Gn.document.createElement("div"):r0("svg");return t.innerHTML=n,n=Qx(t.firstChild),t.removeChild(t.firstChild),n}function oi(n,e){return e&&e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node?e:r0(n)}function Zs(n){if(!n)return null;if(n.instance instanceof gA)return n.instance;if("#document-fragment"===n.nodeName)return new mh.Fragment(n);let e=mA(n.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":mh[e]||(e="Dom"),new mh[e](n)}let Qx=Zs;function hr(n,e=n.name,t=!1){return mh[e]=n,t&&(mh[vA]=n),Q6(Object.getOwnPropertyNames(n.prototype)),n}let sSe=1e3;function rH(n){return"Svgjs"+mA(n)+sSe++}function iH(n){for(let e=n.children.length-1;e>=0;e--)iH(n.children[e]);return n.id&&(n.id=rH(n.nodeName)),n}function sr(n,e){let t,r;for(r=(n=Array.isArray(n)?n:[n]).length-1;r>=0;r--)for(t in e)n[r].prototype[t]=e[t]}function si(n){return function(...e){const t=e[e.length-1];return!t||t.constructor!==Object||t instanceof Array?n.apply(this,e):n.apply(this,e.slice(0,-1)).attr(t)}}Rn("Dom",{siblings:function aSe(){return this.parent().children()},position:function lSe(){return this.parent().index(this)},next:function cSe(){return this.siblings()[this.position()+1]},prev:function uSe(){return this.siblings()[this.position()-1]},forward:function dSe(){const n=this.position();return this.parent().add(this.remove(),n+1),this},backward:function hSe(){const n=this.position();return this.parent().add(this.remove(),n?n-1:0),this},front:function fSe(){return this.parent().add(this.remove()),this},back:function pSe(){return this.parent().add(this.remove(),0),this},before:function mSe(n){(n=fs(n)).remove();const e=this.position();return this.parent().add(n,e),this},after:function gSe(n){(n=fs(n)).remove();const e=this.position();return this.parent().add(n,e+1),this},insertBefore:function vSe(n){return(n=fs(n)).before(this),this},insertAfter:function _Se(n){return(n=fs(n)).after(this),this}});const _A=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,oH=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,sH=/rgb\((\d+),(\d+),(\d+)\)/,aH=/(#[a-z_][a-z0-9\-_]*)/i,lH=/\)\s*,?\s*/,cH=/\s/g,yA=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,bA=/^rgb\(/,xA=/^(\s+)?$/,wA=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,uH=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Vl=/[\s,]+/,Jx=/[MLHVCSQTAZ]/i;function NSe(n){const e=Math.round(n),r=Math.max(0,Math.min(255,e)).toString(16);return 1===r.length?"0"+r:r}function sm(n,e){for(let t=e.length;t--;)if(null==n[e[t]])return!1;return!0}function MA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}Rn("Dom",{classes:function ySe(){const n=this.attr("class");return null==n?[]:n.trim().split(Vl)},hasClass:function bSe(n){return-1!==this.classes().indexOf(n)},addClass:function xSe(n){if(!this.hasClass(n)){const e=this.classes();e.push(n),this.attr("class",e.join(" "))}return this},removeClass:function wSe(n){return this.hasClass(n)&&this.attr("class",this.classes().filter(function(e){return e!==n}).join(" ")),this},toggleClass:function MSe(n){return this.hasClass(n)?this.removeClass(n):this.addClass(n)}}),Rn("Dom",{css:function CSe(n,e){const t={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter(function(r){return!!r.length}).forEach(function(r){const i=r.split(/\s*:\s*/);t[i[0]]=i[1]}),t;if(arguments.length<2){if(Array.isArray(n)){for(const r of n){const i=t0(r);t[r]=this.node.style[i]}return t}if("string"==typeof n)return this.node.style[t0(n)];if("object"==typeof n)for(const r in n)this.node.style[t0(r)]=null==n[r]||xA.test(n[r])?"":n[r]}return 2===arguments.length&&(this.node.style[t0(n)]=null==e||xA.test(e)?"":e),this},show:function SSe(){return this.css("display","")},hide:function ESe(){return this.css("display","none")},visible:function DSe(){return"none"!==this.css("display")}}),Rn("Dom",{data:function ASe(n,e,t){if(null==n)return this.data($x(J6(this.node.attributes,r=>0===r.nodeName.indexOf("data-")),r=>r.nodeName.slice(5)));if(n instanceof Array){const r={};for(const i of n)r[i]=this.data(i);return r}if("object"==typeof n)for(e in n)this.data(e,n[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+n))}catch{return this.attr("data-"+n)}else this.attr("data-"+n,null===e?null:!0===t||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),Rn("Dom",{remember:function TSe(n,e){if("object"==typeof arguments[0])for(const t in n)this.remember(t,n[t]);else{if(1===arguments.length)return this.memory()[n];this.memory()[n]=e}return this},forget:function ISe(){if(0===arguments.length)this._memory={};else for(let n=arguments.length-1;n>=0;n--)delete this.memory()[arguments[n]];return this},memory:function PSe(){return this._memory=this._memory||{}}});class Vr{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof Vr||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b}static random(e="vibrant",t,r){const{random:i,round:o,sin:s,PI:a}=Math;if("vibrant"===e){const l=24*i()+57,c=38*i()+45,u=360*i();return new Vr(l,c,u,"lch")}if("sine"===e){const l=o(80*s(2*a*(t=t??i())/.5+.01)+150),c=o(50*s(2*a*t/.5+4.6)+200),u=o(100*s(2*a*t/.5+2.3)+150);return new Vr(l,c,u)}if("pastel"===e){const l=8*i()+86,c=17*i()+9,u=360*i();return new Vr(l,c,u,"lch")}if("dark"===e){const l=10+10*i(),c=50*i()+86,u=360*i();return new Vr(l,c,u,"lch")}if("rgb"===e){const l=255*i(),c=255*i(),u=255*i();return new Vr(l,c,u)}if("lab"===e){const l=100*i(),c=256*i()-128,u=256*i()-128;return new Vr(l,c,u,"lab")}if("grey"===e){const l=255*i();return new Vr(l,l,l)}throw new Error("Unsupported random color mode")}static test(e){return"string"==typeof e&&(yA.test(e)||bA.test(e))}cmyk(){const{_a:e,_b:t,_c:r}=this.rgb(),[i,o,s]=[e,t,r].map(h=>h/255),a=Math.min(1-i,1-o,1-s);return 1===a?new Vr(0,0,0,1,"cmyk"):new Vr((1-i-a)/(1-a),(1-o-a)/(1-a),(1-s-a)/(1-a),a,"cmyk")}hsl(){const{_a:e,_b:t,_c:r}=this.rgb(),[i,o,s]=[e,t,r].map(p=>p/255),a=Math.max(i,o,s),l=Math.min(i,o,s),c=(a+l)/2,u=a===l,d=a-l;return new Vr(360*(u?0:a===i?((o-s)/d+(o<s?6:0))/6:a===o?((s-i)/d+2)/6:a===s?((i-o)/d+4)/6:0),100*(u?0:c>.5?d/(2-a-l):d/(a+l)),100*c,"hsl")}init(e=0,t=0,r=0,i=0,o="rgb"){if(e=e||0,this.space)for(const d in this.space)delete this[this.space[d]];if("number"==typeof e)o="string"==typeof i?i:o,i="string"==typeof i?0:i,Object.assign(this,{_a:e,_b:t,_c:r,_d:i,space:o});else if(e instanceof Array)this.space=t||("string"==typeof e[3]?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const d=function RSe(n,e){const t=sm(n,"rgb")?{_a:n.r,_b:n.g,_c:n.b,_d:0,space:"rgb"}:sm(n,"xyz")?{_a:n.x,_b:n.y,_c:n.z,_d:0,space:"xyz"}:sm(n,"hsl")?{_a:n.h,_b:n.s,_c:n.l,_d:0,space:"hsl"}:sm(n,"lab")?{_a:n.l,_b:n.a,_c:n.b,_d:0,space:"lab"}:sm(n,"lch")?{_a:n.l,_b:n.c,_c:n.h,_d:0,space:"lch"}:sm(n,"cmyk")?{_a:n.c,_b:n.m,_c:n.y,_d:n.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return t.space=e||t.space,t}(e,t);Object.assign(this,d)}else if("string"==typeof e)if(bA.test(e)){const d=e.replace(cH,""),[h,f,m]=sH.exec(d).slice(1,4).map(p=>parseInt(p));Object.assign(this,{_a:h,_b:f,_c:m,_d:0,space:"rgb"})}else{if(!yA.test(e))throw Error("Unsupported string format, can't construct Color");{const d=p=>parseInt(p,16),[,h,f,m]=oH.exec(function OSe(n){return 4===n.length?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n}(e)).map(d);Object.assign(this,{_a:h,_b:f,_c:m,_d:0,space:"rgb"})}}const{_a:s,_b:a,_c:l,_d:c}=this;Object.assign(this,"rgb"===this.space?{r:s,g:a,b:l}:"xyz"===this.space?{x:s,y:a,z:l}:"hsl"===this.space?{h:s,s:a,l}:"lab"===this.space?{l:s,a,b:l}:"lch"===this.space?{l:s,c:a,h:l}:"cmyk"===this.space?{c:s,m:a,y:l,k:c}:{})}lab(){const{x:e,y:t,z:r}=this.xyz();return new Vr(116*t-16,500*(e-t),200*(t-r),"lab")}lch(){const{l:e,a:t,b:r}=this.lab(),i=Math.sqrt(t**2+r**2);let o=180*Math.atan2(r,t)/Math.PI;return o<0&&(o*=-1,o=360-o),new Vr(e,i,o,"lch")}rgb(){if("rgb"===this.space)return this;if(function FSe(n){return"lab"===n||"xyz"===n||"lch"===n}(this.space)){let{x:e,y:t,z:r}=this;if("lab"===this.space||"lch"===this.space){let{l:f,a:m,b:p}=this;if("lch"===this.space){const{c:x,h:E}=this,M=Math.PI/180;m=x*Math.cos(M*E),p=x*Math.sin(M*E)}const g=(f+16)/116,_=m/500+g,b=g-p/200,v=16/116,y=.008856,w=7.787;e=.95047*(_**3>y?_**3:(_-v)/w),t=1*(g**3>y?g**3:(g-v)/w),r=1.08883*(b**3>y?b**3:(b-v)/w)}const i=3.2406*e+-1.5372*t+-.4986*r,o=-.9689*e+1.8758*t+.0415*r,s=.0557*e+-.204*t+1.057*r,a=Math.pow,l=.0031308,c=i>l?1.055*a(i,1/2.4)-.055:12.92*i,u=o>l?1.055*a(o,1/2.4)-.055:12.92*o,d=s>l?1.055*a(s,1/2.4)-.055:12.92*s;return new Vr(255*c,255*u,255*d)}if("hsl"===this.space){let{h:e,s:t,l:r}=this;if(e/=360,t/=100,r/=100,0===t)return r*=255,new Vr(r,r,r);const i=r<.5?r*(1+t):r+t-r*t,o=2*r-i,s=255*MA(o,i,e+1/3),a=255*MA(o,i,e),l=255*MA(o,i,e-1/3);return new Vr(s,a,l)}if("cmyk"===this.space){const{c:e,m:t,y:r,k:i}=this,o=255*(1-Math.min(1,e*(1-i)+i)),s=255*(1-Math.min(1,t*(1-i)+i)),a=255*(1-Math.min(1,r*(1-i)+i));return new Vr(o,s,a)}return this}toArray(){const{_a:e,_b:t,_c:r,_d:i,space:o}=this;return[e,t,r,i,o]}toHex(){const[e,t,r]=this._clamped().map(NSe);return`#${e}${t}${r}`}toRgb(){const[e,t,r]=this._clamped();return`rgb(${e},${t},${r})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:t,_c:r}=this.rgb(),[i,o,s]=[e,t,r].map(_=>_/255),a=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,l=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,c=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,u=(.4124*a+.3576*l+.1805*c)/.95047,d=(.2126*a+.7152*l+.0722*c)/1,h=(.0193*a+.1192*l+.9505*c)/1.08883,f=u>.008856?Math.pow(u,1/3):7.787*u+16/116,m=d>.008856?Math.pow(d,1/3):7.787*d+16/116,p=h>.008856?Math.pow(h,1/3):7.787*h+16/116;return new Vr(f,m,p,"xyz")}_clamped(){const{_a:e,_b:t,_c:r}=this.rgb(),{max:i,min:o,round:s}=Math;return[e,t,r].map(l=>i(0,o(s(l),255)))}}class Ri{constructor(...e){this.init(...e)}clone(){return new Ri(this)}init(e,t){const i=Array.isArray(e)?{x:e[0],y:e[1]}:"object"==typeof e?{x:e.x,y:e.y}:{x:e,y:t};return this.x=null==i.x?0:i.x,this.y=null==i.y?0:i.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){an.isMatrixLike(e)||(e=new an(e));const{x:t,y:r}=this;return this.x=e.a*t+e.c*r+e.e,this.y=e.b*t+e.d*r+e.f,this}}function am(n,e,t){return Math.abs(e-n)<(t||1e-6)}class an{constructor(...e){this.init(...e)}static formatTransforms(e){const t="both"===e.flip||!0===e.flip,r=e.flip&&(t||"x"===e.flip)?-1:1,i=e.flip&&(t||"y"===e.flip)?-1:1,o=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,s=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,a=e.scale&&e.scale.length?e.scale[0]*r:isFinite(e.scale)?e.scale*r:isFinite(e.scaleX)?e.scaleX*r:r,l=e.scale&&e.scale.length?e.scale[1]*i:isFinite(e.scale)?e.scale*i:isFinite(e.scaleY)?e.scaleY*i:i,c=e.shear||0,u=e.rotate||e.theta||0,d=new Ri(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),h=d.x,f=d.y,m=new Ri(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),p=m.x,g=m.y,_=new Ri(e.translate||e.tx||e.translateX,e.ty||e.translateY),b=_.x,v=_.y,y=new Ri(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:a,scaleY:l,skewX:o,skewY:s,shear:c,theta:u,rx:y.x,ry:y.y,tx:b,ty:v,ox:h,oy:f,px:p,py:g}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return null!=e.a||null!=e.b||null!=e.c||null!=e.d||null!=e.e||null!=e.f}static matrixMultiply(e,t,r){const o=e.b*t.a+e.d*t.b,s=e.a*t.c+e.c*t.d,a=e.b*t.c+e.d*t.d,l=e.e+e.a*t.e+e.c*t.f,c=e.f+e.b*t.e+e.d*t.f;return r.a=e.a*t.a+e.c*t.b,r.b=o,r.c=s,r.d=a,r.e=l,r.f=c,r}around(e,t,r){return this.clone().aroundO(e,t,r)}aroundO(e,t,r){const i=e||0,o=t||0;return this.translateO(-i,-o).lmultiplyO(r).translateO(i,o)}clone(){return new an(this)}decompose(e=0,t=0){const r=this.a,i=this.b,o=this.c,s=this.d,a=this.e,l=this.f,c=r*s-i*o,u=c>0?1:-1,d=u*Math.sqrt(r*r+i*i),h=Math.atan2(u*i,u*r),f=180/Math.PI*h,m=Math.cos(h),p=Math.sin(h),g=(r*o+i*s)/c,_=o*d/(g*r-i)||s*d/(g*i+r);return{scaleX:d,scaleY:_,shear:g,rotate:f,translateX:a-e+e*m*d+t*(g*m*d-p*_),translateY:l-t+e*p*d+t*(g*p*d+m*_),originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const t=new an(e);return am(this.a,t.a)&&am(this.b,t.b)&&am(this.c,t.c)&&am(this.d,t.d)&&am(this.e,t.e)&&am(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return"x"===e?this.scaleO(-1,1,t,0):"y"===e?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){const t=an.fromArray([1,0,0,1,0,0]);return e=e instanceof zl?e.matrixify():"string"==typeof e?an.fromArray(e.split(Vl).map(parseFloat)):Array.isArray(e)?an.fromArray(e):"object"==typeof e&&an.isMatrixLike(e)?e:"object"==typeof e?(new an).transform(e):6===arguments.length?an.fromArray([].slice.call(arguments)):t,this.a=null!=e.a?e.a:t.a,this.b=null!=e.b?e.b:t.b,this.c=null!=e.c?e.c:t.c,this.d=null!=e.d?e.d:t.d,this.e=null!=e.e?e.e:t.e,this.f=null!=e.f?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,t=this.b,r=this.c,i=this.d,o=this.e,s=this.f,a=e*i-t*r;if(!a)throw new Error("Cannot invert "+this);const l=i/a,c=-t/a,u=-r/a,d=e/a,h=-(l*o+u*s),f=-(c*o+d*s);return this.a=l,this.b=c,this.c=u,this.d=d,this.e=h,this.f=f,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const r=e instanceof an?e:new an(e);return an.matrixMultiply(r,this,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const r=e instanceof an?e:new an(e);return an.matrixMultiply(this,r,this)}rotate(e,t,r){return this.clone().rotateO(e,t,r)}rotateO(e,t=0,r=0){e=Xx(e);const i=Math.cos(e),o=Math.sin(e),{a:s,b:a,c:l,d:c,e:u,f:d}=this;return this.a=s*i-a*o,this.b=a*i+s*o,this.c=l*i-c*o,this.d=c*i+l*o,this.e=u*i-d*o+r*o-t*i+t,this.f=d*i+u*o-t*o-r*i+r,this}scale(e,t,r,i){return this.clone().scaleO(...arguments)}scaleO(e,t=e,r=0,i=0){3===arguments.length&&(i=r,r=t,t=e);const{a:o,b:s,c:a,d:l,e:c,f:u}=this;return this.a=o*e,this.b=s*t,this.c=a*e,this.d=l*t,this.e=c*e-r*e+r,this.f=u*t-i*t+i,this}shear(e,t,r){return this.clone().shearO(e,t,r)}shearO(e,t=0,r=0){const{a:i,b:o,c:s,d:a,e:l,f:c}=this;return this.a=i+o*e,this.c=s+a*e,this.e=l+c*e-r*e,this}skew(e,t,r,i){return this.clone().skewO(...arguments)}skewO(e,t=e,r=0,i=0){3===arguments.length&&(i=r,r=t,t=e),e=Xx(e),t=Xx(t);const o=Math.tan(e),s=Math.tan(t),{a,b:l,c,d:u,e:d,f:h}=this;return this.a=a+l*o,this.b=l+a*s,this.c=c+u*o,this.d=u+c*s,this.e=d+h*o-i*o,this.f=h+d*s-r*s,this}skewX(e,t,r){return this.skew(e,0,t,r)}skewY(e,t,r){return this.skew(0,e,t,r)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(an.isMatrixLike(e))return new an(e).multiplyO(this);const t=an.formatTransforms(e),{x:i,y:o}=new Ri(t.ox,t.oy).transform(this),s=(new an).translateO(t.rx,t.ry).lmultiplyO(this).translateO(-i,-o).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(i,o);if(isFinite(t.px)||isFinite(t.py)){const a=new Ri(i,o).transform(s),l=isFinite(t.px)?t.px-a.x:0,c=isFinite(t.py)?t.py-a.y:0;s.translateO(l,c)}return s.translateO(t.tx,t.ty),s}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function $u(){if(!$u.nodes){const n=fs().size(2,0);n.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),n.attr("focusable","false"),n.attr("aria-hidden","true");const e=n.path().node;$u.nodes={svg:n,path:e}}return $u.nodes.svg.node.parentNode||$u.nodes.svg.addTo(Gn.document.body||Gn.document.documentElement),$u.nodes}function dH(n){return!(n.width||n.height||n.x||n.y)}hr(an,"Matrix");class jo{constructor(...e){this.init(...e)}addOffset(){return this.x+=Gn.window.pageXOffset,this.y+=Gn.window.pageYOffset,new jo(this)}init(e){return e="string"==typeof e?e.split(Vl).map(parseFloat):Array.isArray(e)?e:"object"==typeof e?[null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return dH(this)}merge(e){const t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width)-t,o=Math.max(this.y+this.height,e.y+e.height)-r;return new jo(t,r,i,o)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof an||(e=new an(e));let t=1/0,r=-1/0,i=1/0,o=-1/0;return[new Ri(this.x,this.y),new Ri(this.x2,this.y),new Ri(this.x,this.y2),new Ri(this.x2,this.y2)].forEach(function(a){a=a.transform(e),t=Math.min(t,a.x),r=Math.max(r,a.x),i=Math.min(i,a.y),o=Math.max(o,a.y)}),new jo(t,i,r-t,o-i)}}function hH(n,e,t){let r;try{if(r=e(n.node),dH(r)&&!function VSe(n){return n===Gn.document||(Gn.document.documentElement.contains||function(e){for(;e.parentNode;)e=e.parentNode;return e===Gn.document}).call(Gn.document.documentElement,n)}(n.node))throw new Error("Element not in the dom")}catch{r=t(n)}return r}Rn({viewbox:{viewbox(n,e,t,r){return null==n?new jo(this.attr("viewBox")):this.attr("viewBox",new jo(n,e,t,r))},zoom(n,e){let{width:t,height:r}=this.attr(["width","height"]);if((!t&&!r||"string"==typeof t||"string"==typeof r)&&(t=this.node.clientWidth,r=this.node.clientHeight),!t||!r)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const i=this.viewbox(),o=t/i.width,s=r/i.height,a=Math.min(o,s);if(null==n)return a;let l=a/n;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new Ri(t/2/o+i.x,r/2/s+i.y);const c=new jo(i).transform(new an({scale:l,origin:e}));return this.viewbox(c)}}}),hr(jo,"Box");class gh extends Array{constructor(e=[],...t){if(super(e,...t),"number"==typeof e)return this;this.length=0,this.push(...e)}}sr([gh],{each(n,...e){return this.map("function"==typeof n?(t,r,i)=>n.call(t,t,r,i):t=>t[n](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const GSe=["toArray","constructor","each"];function lm(n,e){return new gh($x((e||Gn.document).querySelectorAll(n),function(t){return Zs(t)}))}gh.extend=function(n){n=n.reduce((e,t)=>(GSe.includes(t)||"_"===t[0]||(e[t]=function(...r){return this.each(t,...r)}),e),{}),sr([gh],n)};let qSe=0;const fH={};function pH(n){let e=n.getEventHolder();return e===Gn.window&&(e=fH),e.events||(e.events={}),e.events}function CA(n){return n.getEventTarget()}function SA(n,e,t,r,i){const o=t.bind(r||n),s=fs(n),a=pH(s),l=CA(s);e=Array.isArray(e)?e:e.split(Vl),t._svgjsListenerId||(t._svgjsListenerId=++qSe),e.forEach(function(c){const u=c.split(".")[0],d=c.split(".")[1]||"*";a[u]=a[u]||{},a[u][d]=a[u][d]||{},a[u][d][t._svgjsListenerId]=o,l.addEventListener(u,o,i||!1)})}function cm(n,e,t,r){const i=fs(n),o=pH(i),s=CA(i);"function"==typeof t&&!(t=t._svgjsListenerId)||(e=Array.isArray(e)?e:(e||"").split(Vl)).forEach(function(a){const l=a&&a.split(".")[0],c=a&&a.split(".")[1];let u,d;if(t)o[l]&&o[l][c||"*"]&&(s.removeEventListener(l,o[l][c||"*"][t],r||!1),delete o[l][c||"*"][t]);else if(l&&c){if(o[l]&&o[l][c]){for(d in o[l][c])cm(s,[l,c].join("."),d);delete o[l][c]}}else if(c)for(a in o)for(u in o[a])c===u&&cm(s,[a,c].join("."));else if(l){if(o[l]){for(u in o[l])cm(s,[l,u].join("."));delete o[l]}}else{for(a in o)cm(s,a);!function $Se(n){let e=n.getEventHolder();e===Gn.window&&(e=fH),e.events&&(e.events={})}(i)}})}class o0 extends gA{addEventListener(){}dispatch(e,t,r){return function XSe(n,e,t,r){const i=CA(n);return e instanceof Gn.window.Event||(e=new Gn.window.CustomEvent(e,{detail:t,cancelable:!0,...r})),i.dispatchEvent(e),e}(this,e,t,r)}dispatchEvent(e){const t=this.getEventHolder().events;if(!t)return!0;const r=t[e.type];for(const i in r)for(const o in r[i])r[i][o](e);return!e.defaultPrevented}fire(e,t,r){return this.dispatch(e,t,r),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,r){return cm(this,e,t,r),this}on(e,t,r,i){return SA(this,e,t,r,i),this}removeEventListener(){}}function EA(){}hr(o0,"EventTarget");const um_duration=400,um_ease=">",um_delay=0,mH={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class dm extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return"number"==typeof e||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split(Vl).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class En{constructor(...e){this.init(...e)}convert(e){return new En(this.value,e)}divide(e){return e=new En(e),new En(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(_A))&&(this.value=parseFloat(t[1]),"%"===t[5]?this.value/=100:"s"===t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof En&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new En(e),new En(this-e,this.unit||e.unit)}plus(e){return e=new En(e),new En(this+e,this.unit||e.unit)}times(e){return e=new En(e),new En(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const gH=[];class Xu extends o0{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return(e=fs(e)).removeNamespace&&this.node instanceof Gn.window.SVGElement&&e.removeNamespace(),null==t?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return fs(e).put(this,t)}children(){return new gh($x(this.node.children,function(e){return Zs(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0){return this.writeDataToDom(),new this.constructor(iH(this.node.cloneNode(e)))}each(e,t){const r=this.children();let i,o;for(i=0,o=r.length;i<o;i++)e.apply(r[i],[i,r]),t&&r[i].each(e,t);return this}element(e,t){return this.put(new Xu(r0(e),t))}first(){return Zs(this.node.firstChild)}get(e){return Zs(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,"http://www.w3.org/1999/xhtml")}id(e){return typeof e>"u"&&!this.node.id&&(this.node.id=rH(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return Zs(this.node.lastChild)}matches(e){const t=this.node,r=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return r&&r.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=Zs(t.node.parentNode),!e)return t;do{if("string"==typeof e?t.matches(e):t instanceof e)return t}while(t=Zs(t.node.parentNode));return t}put(e,t){return e=fs(e),this.add(e,t),e}putIn(e,t){return fs(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=fs(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){const r=10**e,i=this.attr(t);for(const o in i)"number"==typeof i[o]&&(i[o]=Math.round(i[o]*r)/r);return this.attr(i),this}svg(e,t){return this.xml(e,t,Zx)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const t=this.parent();if(!t)return this.addTo(e);const r=t.index(this);return t.put(e,r).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,t,r){if("boolean"==typeof e&&(r=t,t=e,e=null),null==e||"function"==typeof e){t=t??!0,this.writeDataToDom();let a=this;if(null!=e){if(a=Zs(a.node.cloneNode(!0)),t){const l=e(a);if(a=l||a,!1===l)return""}a.each(function(){const l=e(this),c=l||this;!1===l?this.remove():l&&this!==c&&this.replace(c)},!0)}return t?a.node.outerHTML:a.node.innerHTML}t=t??!1;const i=r0("wrapper",r),o=Gn.document.createDocumentFragment();i.innerHTML=e;for(let a=i.children.length;a--;)o.appendChild(i.firstElementChild);const s=this.parent();return t?this.replace(o)&&s:this.add(o)}}sr(Xu,{attr:function ZSe(n,e,t){if(null==n){n={},e=this.node.attributes;for(const r of e)n[r.nodeName]=wA.test(r.nodeValue)?parseFloat(r.nodeValue):r.nodeValue;return n}if(n instanceof Array)return n.reduce((r,i)=>(r[i]=this.attr(i),r),{});if("object"==typeof n&&n.constructor===Object)for(e in n)this.attr(e,n[e]);else if(null===e)this.node.removeAttribute(n);else{if(null==e)return null==(e=this.node.getAttribute(n))?mH[n]:wA.test(e)?parseFloat(e):e;"number"==typeof(e=gH.reduce((r,i)=>i(n,r,this),e))?e=new En(e):Vr.isColor(e)?e=new Vr(e):e.constructor===Array&&(e=new dm(e)),"leading"===n?this.leading&&this.leading(e):"string"==typeof t?this.node.setAttributeNS(t,n,e.toString()):this.node.setAttribute(n,e.toString()),this.rebuild&&("font-size"===n||"x"===n)&&this.rebuild()}return this},find:function jSe(n){return lm(n,this.node)},findOne:function WSe(n){return Zs(this.node.querySelector(n))}}),hr(Xu,"Dom");class zl extends Xu{constructor(e,t){super(e,t),this.dom={},this.node.instance=this,e.hasAttribute("svgjs:data")&&this.setData(JSON.parse(e.getAttribute("svgjs:data"))||{})}center(e,t){return this.cx(e).cy(t)}cx(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)}cy(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)}defs(){const e=this.root();return e&&e.defs()}dmove(e,t){return this.dx(e).dy(t)}dx(e=0){return this.x(new En(e).plus(this.x()))}dy(e=0){return this.y(new En(e).plus(this.y()))}getEventHolder(){return this}height(e){return this.attr("height",e)}move(e,t){return this.x(e).y(t)}parents(e=this.root()){const t="string"==typeof e;t||(e=fs(e));const r=new gh;let i=this;for(;(i=i.parent())&&i.node!==Gn.document&&"#document-fragment"!==i.nodeName&&(r.push(i),!(!t&&i.node===e.node||t&&i.matches(e)));)if(i.node===this.root().node)return null;return r}reference(e){if(!(e=this.attr(e)))return null;const t=(e+"").match(aH);return t?fs(t[1]):null}root(){const e=this.parent(function oSe(n){return mh[n]}(vA));return e&&e.root()}setData(e){return this.dom=e,this}size(e,t){const r=ph(this,e,t);return this.width(new En(r.width)).height(new En(r.height))}width(e){return this.attr("width",e)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(e){return this.attr("x",e)}y(e){return this.attr("y",e)}}sr(zl,{bbox:function zSe(){const t=hH(this,i=>i.getBBox(),i=>{try{const o=i.clone().addTo($u().svg).show(),s=o.node.getBBox();return o.remove(),s}catch(o){throw new Error(`Getting bbox of element "${i.node.nodeName}" is not possible: ${o.toString()}`)}});return new jo(t)},rbox:function USe(n){const r=hH(this,o=>o.getBoundingClientRect(),o=>{throw new Error(`Getting rbox of element "${o.node.nodeName}" is not possible`)}),i=new jo(r);return n?i.transform(n.screenCTM().inverseO()):i.addOffset()},inside:function HSe(n,e){const t=this.bbox();return n>t.x&&e>t.y&&n<t.x+t.width&&e<t.y+t.height},point:function kSe(n,e){return new Ri(n,e).transform(this.screenCTM().inverse())},ctm:function LSe(){return new an(this.node.getCTM())},screenCTM:function BSe(){if("function"==typeof this.isRoot&&!this.isRoot()){const n=this.rect(1,1),e=n.node.getScreenCTM();return n.remove(),new an(e)}return new an(this.node.getScreenCTM())}}),hr(zl,"Element");const s0={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(n,e){return"color"===e?n:n+"-"+e}};["fill","stroke"].forEach(function(n){const e={};let t;e[n]=function(r){if(typeof r>"u")return this.attr(n);if("string"==typeof r||r instanceof Vr||Vr.isRgb(r)||r instanceof zl)this.attr(n,r);else for(t=s0[n].length-1;t>=0;t--)null!=r[s0[n][t]]&&this.attr(s0.prefix(n,s0[n][t]),r[s0[n][t]]);return this},Rn(["Element","Runner"],e)}),Rn(["Element","Runner"],{matrix:function(n,e,t,r,i,o){return null==n?new an(this):this.attr("transform",new an(n,e,t,r,i,o))},rotate:function(n,e,t){return this.transform({rotate:n,ox:e,oy:t},!0)},skew:function(n,e,t,r){return this.transform(1===arguments.length||3===arguments.length?{skew:n,ox:e,oy:t}:{skew:[n,e],ox:t,oy:r},!0)},shear:function(n,e,t){return this.transform({shear:n,ox:e,oy:t},!0)},scale:function(n,e,t,r){return this.transform(1===arguments.length||3===arguments.length?{scale:n,ox:e,oy:t}:{scale:[n,e],ox:t,oy:r},!0)},translate:function(n,e){return this.transform({translate:[n,e]},!0)},relative:function(n,e){return this.transform({relative:[n,e]},!0)},flip:function(n="both",e="center"){return-1==="xybothtrue".indexOf(n)&&(e=n,n="both"),this.transform({flip:n,origin:e},!0)},opacity:function(n){return this.attr("opacity",n)}}),Rn("radius",{radius:function(n,e=n){return"radialGradient"===(this._element||this).type?this.attr("r",new En(n)):this.rx(n).ry(e)}}),Rn("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(n){return new Ri(this.node.getPointAtLength(n))}}),Rn(["Element","Runner"],{font:function(n,e){if("object"==typeof n){for(e in n)this.font(e,n[e]);return this}return"leading"===n?this.leading(e):this.attr("anchor"===n?"text-anchor":"size"===n||"family"===n||"weight"===n||"stretch"===n||"variant"===n||"style"===n?"font-"+n:n,e)}}),Rn("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(n,e){return n[e]=function(r){return null===r?this.off(e):this.on(e,r),this},n},{})),Rn("Element",{untransform:function QSe(){return this.attr("transform",null)},matrixify:function JSe(){return(this.attr("transform")||"").split(lH).slice(0,-1).map(function(e){const t=e.trim().split("(");return[t[0],t[1].split(Vl).map(function(r){return parseFloat(r)})]}).reverse().reduce(function(e,t){return"matrix"===t[0]?e.lmultiply(an.fromArray(t[1])):e[t[0]].apply(e,t[1])},new an)},toParent:function eEe(n,e){if(this===n)return this;const t=this.screenCTM(),r=n.screenCTM().inverse();return this.addTo(n,e).untransform().transform(r.multiply(t)),this},toRoot:function tEe(n){return this.toParent(this.root(),n)},transform:function nEe(n,e){if(null==n||"string"==typeof n){const i=new an(this).decompose();return null==n?i:i[n]}an.isMatrixLike(n)||(n={...n,origin:Yx(n,this)});const r=new an(!0===e?this:e||!1).transform(n);return this.attr("transform",r)}});class Ns extends zl{flatten(e=this,t){return this.each(function(){if(this instanceof Ns)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),t=e.index(this)){return t=-1===t?e.children().length:t,this.each(function(r,i){return i[i.length-r-1].toParent(e,t)}),this.remove()}}hr(Ns,"Container");class DA extends Ns{constructor(e,t=e){super(oi("defs",e),t)}flatten(){return this}ungroup(){return this}}hr(DA,"Defs");class Ks extends zl{}function AA(n){return this.attr("rx",n)}function TA(n){return this.attr("ry",n)}function vH(n){return null==n?this.cx()-this.rx():this.cx(n+this.rx())}function _H(n){return null==n?this.cy()-this.ry():this.cy(n+this.ry())}function yH(n){return this.attr("cx",n)}function bH(n){return this.attr("cy",n)}function xH(n){return null==n?2*this.rx():this.rx(new En(n).divide(2))}function wH(n){return null==n?2*this.ry():this.ry(new En(n).divide(2))}hr(Ks,"Shape");var rEe={__proto__:null,rx:AA,ry:TA,x:vH,y:_H,cx:yH,cy:bH,width:xH,height:wH};class ew extends Ks{constructor(e,t=e){super(oi("ellipse",e),t)}size(e,t){const r=ph(this,e,t);return this.rx(new En(r.width).divide(2)).ry(new En(r.height).divide(2))}}sr(ew,rEe),Rn("Container",{ellipse:si(function(n=0,e=n){return this.put(new ew).size(n,e).move(0,0)})}),hr(ew,"Ellipse");class MH extends Xu{constructor(e=Gn.document.createDocumentFragment()){super(e)}xml(e,t,r){if("boolean"==typeof e&&(r=t,t=e,e=null),null==e||"function"==typeof e){const i=new Xu(r0("wrapper",r));return i.add(this.node.cloneNode(!0)),i.xml(!1,r)}return super.xml(e,!1,r)}}function CH(n,e){return this.attr("radialGradient"===(this._element||this).type?{fx:new En(n),fy:new En(e)}:{x1:new En(n),y1:new En(e)})}function SH(n,e){return this.attr("radialGradient"===(this._element||this).type?{cx:new En(n),cy:new En(e)}:{x2:new En(n),y2:new En(e)})}hr(MH,"Fragment");var iEe={__proto__:null,from:CH,to:SH};class a0 extends Ns{constructor(e,t){super(oi(e+"Gradient","string"==typeof e?null:e),t)}attr(e,t,r){return"transform"===e&&(e="gradientTransform"),super.attr(e,t,r)}bbox(){return new jo}targets(){return lm('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(e){return this.clear(),"function"==typeof e&&e.call(this,this),this}url(){return'url("#'+this.id()+'")'}}sr(a0,iEe),Rn({Container:{gradient(...n){return this.defs().gradient(...n)}},Defs:{gradient:si(function(n,e){return this.put(new a0(n)).update(e)})}}),hr(a0,"Gradient");class l0 extends Ns{constructor(e,t=e){super(oi("pattern",e),t)}attr(e,t,r){return"transform"===e&&(e="patternTransform"),super.attr(e,t,r)}bbox(){return new jo}targets(){return lm('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(e){return this.clear(),"function"==typeof e&&e.call(this,this),this}url(){return'url("#'+this.id()+'")'}}Rn({Container:{pattern(...n){return this.defs().pattern(...n)}},Defs:{pattern:si(function(n,e,t){return this.put(new l0).update(t).attr({x:0,y:0,width:n,height:e,patternUnits:"userSpaceOnUse"})})}}),hr(l0,"Pattern");class tw extends Ks{constructor(e,t=e){super(oi("image",e),t)}load(e,t){if(!e)return this;const r=new Gn.window.Image;return SA(r,"load",function(i){const o=this.parent(l0);0===this.width()&&0===this.height()&&this.size(r.width,r.height),o instanceof l0&&0===o.width()&&0===o.height()&&o.size(this.width(),this.height()),"function"==typeof t&&t.call(this,i)},this),SA(r,"load error",function(){cm(r)}),this.attr("href",r.src=e,om)}}(function YSe(n){gH.push(n)})(function(n,e,t){return("fill"===n||"stroke"===n)&&uH.test(e)&&(e=t.root().defs().image(e)),e instanceof tw&&(e=t.root().defs().pattern(0,0,r=>{r.add(e)})),e}),Rn({Container:{image:si(function(n,e){return this.put(new tw).size(0,0).load(n,e)})}}),hr(tw,"Image");class Yu extends dm{bbox(){let e=-1/0,t=-1/0,r=1/0,i=1/0;return this.forEach(function(o){e=Math.max(o[0],e),t=Math.max(o[1],t),r=Math.min(o[0],r),i=Math.min(o[1],i)}),new jo(r,i,e-r,t-i)}move(e,t){const r=this.bbox();if(e-=r.x,t-=r.y,!isNaN(e)&&!isNaN(t))for(let i=this.length-1;i>=0;i--)this[i]=[this[i][0]+e,this[i][1]+t];return this}parse(e=[0,0]){const t=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split(Vl).map(parseFloat)).length%2!=0&&e.pop();for(let r=0,i=e.length;r<i;r+=2)t.push([e[r],e[r+1]]);return t}size(e,t){let r;const i=this.bbox();for(r=this.length-1;r>=0;r--)i.width&&(this[r][0]=(this[r][0]-i.x)*e/i.width+i.x),i.height&&(this[r][1]=(this[r][1]-i.y)*t/i.height+i.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let t=0,r=this.length;t<r;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){an.isMatrixLike(e)||(e=new an(e));for(let t=this.length;t--;){const[r,i]=this[t];this[t][0]=e.a*r+e.c*i+e.e,this[t][1]=e.b*r+e.d*i+e.f}return this}}var IA={__proto__:null,MorphArray:Yu,x:function sEe(n){return null==n?this.bbox().x:this.move(n,this.bbox().y)},y:function aEe(n){return null==n?this.bbox().y:this.move(this.bbox().x,n)},width:function lEe(n){const e=this.bbox();return null==n?e.width:this.size(n,e.height)},height:function cEe(n){const e=this.bbox();return null==n?e.height:this.size(e.width,n)}};class c0 extends Ks{constructor(e,t=e){super(oi("line",e),t)}array(){return new Yu([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(e,t){return this.attr(this.array().move(e,t).toLine())}plot(e,t,r,i){return null==e?this.array():(e=typeof t<"u"?{x1:e,y1:t,x2:r,y2:i}:new Yu(e).toLine(),this.attr(e))}size(e,t){const r=ph(this,e,t);return this.attr(this.array().size(r.width,r.height).toLine())}}sr(c0,IA),Rn({Container:{line:si(function(...n){return c0.prototype.plot.apply(this.put(new c0),null!=n[0]?n:[0,0,0,0])})}}),hr(c0,"Line");class nw extends Ns{constructor(e,t=e){super(oi("marker",e),t)}height(e){return this.attr("markerHeight",e)}orient(e){return this.attr("orient",e)}ref(e,t){return this.attr("refX",e).attr("refY",t)}toString(){return"url(#"+this.id()+")"}update(e){return this.clear(),"function"==typeof e&&e.call(this,this),this}width(e){return this.attr("markerWidth",e)}}function hm(n,e){return function(t){return null==t?this[n]:(this[n]=t,e&&e.call(this),this)}}Rn({Container:{marker(...n){return this.defs().marker(...n)}},Defs:{marker:si(function(n,e,t){return this.put(new nw).size(n,e).ref(n/2,e/2).viewbox(0,0,n,e).attr("orient","auto").update(t)})},marker:{marker(n,e,t,r){let i=["marker"];return"all"!==n&&i.push(n),i=i.join("-"),n=arguments[1]instanceof nw?arguments[1]:this.defs().marker(e,t,r),this.attr(i,n)}}}),hr(nw,"Marker");const uEe={"-":function(n){return n},"<>":function(n){return-Math.cos(n*Math.PI)/2+.5},">":function(n){return Math.sin(n*Math.PI/2)},"<":function(n){return 1-Math.cos(n*Math.PI/2)},bezier:function(n,e,t,r){return function(i){return i<0?n>0?e/n*i:t>0?r/t*i:0:i>1?t<1?(1-r)/(1-t)*i+(r-t)/(1-t):n<1?(1-e)/(1-n)*i+(e-n)/(1-n):1:3*i*(1-i)**2*e+3*i**2*(1-i)*r+i**3}},steps:function(n,e="end"){e=e.split("-").reverse()[0];let t=n;return"none"===e?--t:"both"===e&&++t,(r,i=!1)=>{let o=Math.floor(r*n);const s=r*o%1==0;return("start"===e||"both"===e)&&++o,i&&s&&--o,r>=0&&o<0&&(o=0),r<=1&&o>t&&(o=t),o/t}}};class PA{done(){return!1}}class OA extends PA{constructor(e=um_ease){super(),this.ease=uEe[e]||e}step(e,t,r){return"number"!=typeof e?r<1?e:t:e+(t-e)*this.ease(r)}}class rw extends PA{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,r,i){return this.stepper(e,t,r,i)}}function EH(){const n=(this._duration||500)/1e3,r=Math.PI,i=Math.log((this._overshoot||0)/100+1e-10),o=-i/Math.sqrt(r*r+i*i),s=3.9/(o*n);this.d=2*o*s,this.k=s*s}sr(class dEe extends rw{constructor(e=500,t=0){super(),this.duration(e).overshoot(t)}step(e,t,r,i){if("string"==typeof e)return e;if(i.done=r===1/0,r===1/0)return t;if(0===r)return e;r>100&&(r=16);const o=i.velocity||0,s=-this.d*o-this.k*(e-t),a=e+o*(r/=1e3)+s*r*r/2;return i.velocity=o+s*r,i.done=Math.abs(t-a)+Math.abs(o)<.002,i.done?t:a}},{duration:hm("_duration",EH),overshoot:hm("_overshoot",EH)}),sr(class hEe extends rw{constructor(e=.1,t=.01,r=0,i=1e3){super(),this.p(e).i(t).d(r).windup(i)}step(e,t,r,i){if("string"==typeof e)return e;if(i.done=r===1/0,r===1/0)return t;if(0===r)return e;const o=t-e;let s=(i.integral||0)+o*r;const a=(o-(i.error||0))/r,l=this._windup;return!1!==l&&(s=Math.max(-l,Math.min(s,l))),i.error=o,i.integral=s,i.done=Math.abs(o)<.001,i.done?t:e+(this.P*o+this.I*s+this.D*a)}},{windup:hm("_windup"),p:hm("P"),i:hm("I"),d:hm("D")});const fEe={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},NA={M:function(n,e,t){return e.x=t.x=n[0],e.y=t.y=n[1],["M",e.x,e.y]},L:function(n,e){return e.x=n[0],e.y=n[1],["L",n[0],n[1]]},H:function(n,e){return e.x=n[0],["H",n[0]]},V:function(n,e){return e.y=n[0],["V",n[0]]},C:function(n,e){return e.x=n[4],e.y=n[5],["C",n[0],n[1],n[2],n[3],n[4],n[5]]},S:function(n,e){return e.x=n[2],e.y=n[3],["S",n[0],n[1],n[2],n[3]]},Q:function(n,e){return e.x=n[2],e.y=n[3],["Q",n[0],n[1],n[2],n[3]]},T:function(n,e){return e.x=n[0],e.y=n[1],["T",n[0],n[1]]},Z:function(n,e,t){return e.x=t.x,e.y=t.y,["Z"]},A:function(n,e){return e.x=n[5],e.y=n[6],["A",n[0],n[1],n[2],n[3],n[4],n[5],n[6]]}},RA="mlhvqtcsaz".split("");for(let n=0,e=RA.length;n<e;++n)NA[RA[n]]=function(t){return function(r,i,o){if("H"===t)r[0]=r[0]+i.x;else if("V"===t)r[0]=r[0]+i.y;else if("A"===t)r[5]=r[5]+i.x,r[6]=r[6]+i.y;else for(let s=0,a=r.length;s<a;++s)r[s]=r[s]+(s%2?i.y:i.x);return NA[t](r,i,o)}}(RA[n].toUpperCase());function FA(n){return n.segment.length&&n.segment.length-1===fEe[n.segment[0].toUpperCase()]}function mEe(n,e){n.inNumber&&vh(n,!1);const t=Jx.test(e);if(t)n.segment=[e];else{const r=n.lastCommand,i=r.toLowerCase(),o=r===i;n.segment=["m"===i?o?"l":"L":r]}return n.inSegment=!0,n.lastCommand=n.segment[0],t}function vh(n,e){if(!n.inNumber)throw new Error("Parser Error");n.number&&n.segment.push(parseFloat(n.number)),n.inNumber=e,n.number="",n.pointSeen=!1,n.hasExponent=!1,FA(n)&&kA(n)}function kA(n){n.inSegment=!1,n.absolute&&(n.segment=function pEe(n){return NA[n.segment[0]](n.segment.slice(1),n.p,n.p0)}(n)),n.segments.push(n.segment)}function gEe(n){if(!n.segment.length)return!1;const e="A"===n.segment[0].toUpperCase(),t=n.segment.length;return e&&(4===t||5===t)}function vEe(n){return"E"===n.lastToken.toUpperCase()}class _h extends dm{bbox(){return $u().path.setAttribute("d",this.toString()),new jo($u.nodes.path.getBBox())}move(e,t){const r=this.bbox();if(e-=r.x,t-=r.y,!isNaN(e)&&!isNaN(t))for(let i,o=this.length-1;o>=0;o--)i=this[o][0],"M"===i||"L"===i||"T"===i?(this[o][1]+=e,this[o][2]+=t):"H"===i?this[o][1]+=e:"V"===i?this[o][1]+=t:"C"===i||"S"===i||"Q"===i?(this[o][1]+=e,this[o][2]+=t,this[o][3]+=e,this[o][4]+=t,"C"===i&&(this[o][5]+=e,this[o][6]+=t)):"A"===i&&(this[o][6]+=e,this[o][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),function _Ee(n,e=!0){let t=0,r="";const i={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new Ri,p:new Ri};for(;i.lastToken=r,r=n.charAt(t++);)if(i.inSegment||!mEe(i,r)){if("."===r){if(i.pointSeen||i.hasExponent){vh(i,!1),--t;continue}i.inNumber=!0,i.pointSeen=!0,i.number+=r;continue}if(!isNaN(parseInt(r))){if("0"===i.number||gEe(i)){i.inNumber=!0,i.number=r,vh(i,!0);continue}i.inNumber=!0,i.number+=r;continue}if(" "===r||","===r){i.inNumber&&vh(i,!1);continue}if("-"===r){if(i.inNumber&&!vEe(i)){vh(i,!1),--t;continue}i.number+=r,i.inNumber=!0;continue}if("E"===r.toUpperCase()){i.number+=r,i.hasExponent=!0;continue}if(Jx.test(r)){if(i.inNumber)vh(i,!1);else{if(!FA(i))throw new Error("parser Error");kA(i)}--t}}return i.inNumber&&vh(i,!1),i.inSegment&&FA(i)&&kA(i),i.segments}(e)}size(e,t){const r=this.bbox();let i,o;for(r.width=0===r.width?1:r.width,r.height=0===r.height?1:r.height,i=this.length-1;i>=0;i--)o=this[i][0],"M"===o||"L"===o||"T"===o?(this[i][1]=(this[i][1]-r.x)*e/r.width+r.x,this[i][2]=(this[i][2]-r.y)*t/r.height+r.y):"H"===o?this[i][1]=(this[i][1]-r.x)*e/r.width+r.x:"V"===o?this[i][1]=(this[i][1]-r.y)*t/r.height+r.y:"C"===o||"S"===o||"Q"===o?(this[i][1]=(this[i][1]-r.x)*e/r.width+r.x,this[i][2]=(this[i][2]-r.y)*t/r.height+r.y,this[i][3]=(this[i][3]-r.x)*e/r.width+r.x,this[i][4]=(this[i][4]-r.y)*t/r.height+r.y,"C"===o&&(this[i][5]=(this[i][5]-r.x)*e/r.width+r.x,this[i][6]=(this[i][6]-r.y)*t/r.height+r.y)):"A"===o&&(this[i][1]=this[i][1]*e/r.width,this[i][2]=this[i][2]*t/r.height,this[i][6]=(this[i][6]-r.x)*e/r.width+r.x,this[i][7]=(this[i][7]-r.y)*t/r.height+r.y);return this}toString(){return function yEe(n){let e="";for(let t=0,r=n.length;t<r;t++)e+=n[t][0],null!=n[t][1]&&(e+=n[t][1],null!=n[t][2]&&(e+=" ",e+=n[t][2],null!=n[t][3]&&(e+=" ",e+=n[t][3],e+=" ",e+=n[t][4],null!=n[t][5]&&(e+=" ",e+=n[t][5],e+=" ",e+=n[t][6],null!=n[t][7]&&(e+=" ",e+=n[t][7])))));return e+" "}(this)}}const DH=n=>{const e=typeof n;return"number"===e?En:"string"===e?Vr.isColor(n)?Vr:Vl.test(n)?Jx.test(n)?_h:dm:_A.test(n)?En:LA:BA.indexOf(n.constructor)>-1?n.constructor:Array.isArray(n)?dm:"object"===e?u0:LA};class yh{constructor(e){this._stepper=e||new OA("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(t,r){return t&&r},!0)}from(e){return null==e?this._from:(this._from=this._set(e),this)}stepper(e){return null==e?this._stepper:(this._stepper=e,this)}to(e){return null==e?this._to:(this._to=this._set(e),this)}type(e){return null==e?this._type:(this._type=e,this)}_set(e){this._type||this.type(DH(e));let t=new this._type(e);return this._type===Vr&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===u0&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map(function(r){return r.done=!0,r}),t}}class LA{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}let AH=(()=>{class n{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,n.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}return n.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0},n})();const bEe=(n,e)=>n[0]<e[0]?-1:n[0]>e[0]?1:0;class u0{constructor(...e){this.init(...e)}align(e){const t=this.values;for(let r=0,i=t.length;r<i;++r){if(t[r+1]===e[r+1]){if(t[r+1]===Vr&&e[r+7]!==t[r+7]){const a=e[r+7],l=new Vr(this.values.splice(r+3,5))[a]().toArray();this.values.splice(r+3,0,...l)}r+=t[r+2]+2;continue}if(!e[r+1])return this;const o=(new e[r+1]).toArray();t.splice(r,t[r+2]+3,e[r],e[r+1],e[r+2],...o),r+=t[r+2]+2}return this}init(e){if(this.values=[],Array.isArray(e))return void(this.values=e.slice());e=e||{};const t=[];for(const r in e){const i=DH(e[r]),o=new i(e[r]).toArray();t.push([r,i,o.length,...o])}return t.sort(bEe),this.values=t.reduce((r,i)=>r.concat(i),[]),this}toArray(){return this.values}valueOf(){const e={},t=this.values;for(;t.length;){const r=t.shift(),i=t.shift(),o=t.shift(),s=t.splice(0,o);e[r]=new i(s)}return e}}const BA=[LA,AH,u0];class fm extends Ks{constructor(e,t=e){super(oi("path",e),t)}array(){return this._array||(this._array=new _h(this.attr("d")))}clear(){return delete this._array,this}height(e){return null==e?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new _h(e))}size(e,t){const r=ph(this,e,t);return this.attr("d",this.array().size(r.width,r.height))}width(e){return null==e?this.bbox().width:this.size(e,this.bbox().height)}x(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)}y(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)}}fm.prototype.MorphArray=_h,Rn({Container:{path:si(function(n){return this.put(new fm).plot(n||new _h)})}}),hr(fm,"Path");var TH={__proto__:null,array:function MEe(){return this._array||(this._array=new Yu(this.attr("points")))},clear:function CEe(){return delete this._array,this},move:function SEe(n,e){return this.attr("points",this.array().move(n,e))},plot:function EEe(n){return null==n?this.array():this.clear().attr("points","string"==typeof n?n:this._array=new Yu(n))},size:function DEe(n,e){const t=ph(this,n,e);return this.attr("points",this.array().size(t.width,t.height))}};class d0 extends Ks{constructor(e,t=e){super(oi("polygon",e),t)}}Rn({Container:{polygon:si(function(n){return this.put(new d0).plot(n||new Yu)})}}),sr(d0,IA),sr(d0,TH),hr(d0,"Polygon");class h0 extends Ks{constructor(e,t=e){super(oi("polyline",e),t)}}Rn({Container:{polyline:si(function(n){return this.put(new h0).plot(n||new Yu)})}}),sr(h0,IA),sr(h0,TH),hr(h0,"Polyline");class iw extends Ks{constructor(e,t=e){super(oi("rect",e),t)}}sr(iw,{rx:AA,ry:TA}),Rn({Container:{rect:si(function(n,e){return this.put(new iw).size(n,e)})}}),hr(iw,"Rect");class VA{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const t=typeof e.next<"u"?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const Or={nextDraw:null,frames:new VA,timeouts:new VA,immediates:new VA,timer:()=>Gn.window.performance||Gn.window.Date,transforms:[],frame(n){const e=Or.frames.push({run:n});return null===Or.nextDraw&&(Or.nextDraw=Gn.window.requestAnimationFrame(Or._draw)),e},timeout(n,e){e=e||0;const t=Or.timer().now()+e,r=Or.timeouts.push({run:n,time:t});return null===Or.nextDraw&&(Or.nextDraw=Gn.window.requestAnimationFrame(Or._draw)),r},immediate(n){const e=Or.immediates.push(n);return null===Or.nextDraw&&(Or.nextDraw=Gn.window.requestAnimationFrame(Or._draw)),e},cancelFrame(n){null!=n&&Or.frames.remove(n)},clearTimeout(n){null!=n&&Or.timeouts.remove(n)},cancelImmediate(n){null!=n&&Or.immediates.remove(n)},_draw(n){let e=null;const t=Or.timeouts.last();for(;(e=Or.timeouts.shift())&&(n>=e.time?e.run():Or.timeouts.push(e),e!==t););let r=null;const i=Or.frames.last();for(;r!==i&&(r=Or.frames.shift());)r.run(n);let o=null;for(;o=Or.immediates.shift();)o();Or.nextDraw=Or.timeouts.first()||Or.frames.first()?Gn.window.requestAnimationFrame(Or._draw):null}},AEe=function(n){const e=n.start,t=n.runner.duration();return{start:e,duration:t,end:e+t,runner:n.runner}},TEe=function(){const n=Gn.window;return(n.performance||n.Date).now()};class IH extends o0{constructor(e=TEe){super(),this._timeSource=e,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){const e=this._runners.map(t=>t.start+t.runner.duration());return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return null==e?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const t=this.speed();if(null==e)return this.speed(-t);const r=Math.abs(t);return this.speed(e?-r:r)}schedule(e,t,r){if(null==e)return this._runners.map(AEe);let i=0;const o=this.getEndTime();if(t=t||0,null==r||"last"===r||"after"===r)i=o;else if("absolute"===r||"start"===r)i=t,t=0;else if("now"===r)i=this._time;else if("relative"===r){const l=this.getRunnerInfoById(e.id);l&&(i=l.start+t,t=0)}else{if("with-last"!==r)throw new Error('Invalid value for the "when" parameter');{const l=this.getLastRunnerInfo();i=l?l.start:this._time}}e.unschedule(),e.timeline(this);const s=e.persist(),a={persist:null===s?this._persist:s,start:i+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(a),this._runners.sort((l,c)=>l.start-c.start),this._runnerIds=this._runners.map(l=>l.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return null==e?this._timeSource:(this._timeSource=e,this)}speed(e){return null==e?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return null==e?this._time:(this._time=e,this._continue(!0))}unschedule(e){const t=this._runnerIds.indexOf(e.id);return t<0||(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return Or.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():(this._paused||(this._nextFrame=Or.frame(this._step)),this)}_stepFn(e=!1){const t=this._timeSource();let r=t-this._lastSourceTime;e&&(r=0);const i=this._speed*r+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=i,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let s=this._runners.length;s--;){const a=this._runners[s],l=a.runner;this._time-a.start<=0&&l.reset()}let o=!1;for(let s=0,a=this._runners.length;s<a;s++){const l=this._runners[s],c=l.runner;let u=i;const d=this._time-l.start;d<=0?o=!0:(d<u&&(u=d),c.active()&&(c.step(u).done?!0!==l.persist&&c.duration()-c.time()+this._time+l.persist<this._time&&(c.unschedule(),--s,--a):o=!0))}return o&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}Rn({Element:{timeline:function(n){return null==n?(this._timeline=this._timeline||new IH,this._timeline):(this._timeline=n,this)}}});let Zu=(()=>{class n extends o0{constructor(t){super(),this.id=n.id++,t="function"==typeof(t=t??um_duration)?new rw(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof rw,this._stepper=this._isDeclarative?t:new OA,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new an,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,r,i){let o=1,s=!1,a=0;return r=r||um_delay,i=i||"last","object"==typeof(t=t||um_duration)&&!(t instanceof PA)&&(r=t.delay||r,i=t.when||i,s=t.swing||s,o=t.times||o,a=t.wait||a,t=t.duration||um_duration),{duration:t,delay:r,swing:s,times:o,wait:a,when:i}}active(t){return null==t?this.enabled:(this.enabled=t,this)}addTransform(t,r){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,r,i){const o=n.sanitise(t,r,i),s=new n(o.duration);return this._timeline&&s.timeline(this._timeline),this._element&&s.element(this._element),s.loop(o).schedule(o.delay,o.when)}clearTransform(){return this.transforms=new an,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new OA(t),this}element(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,r,i){return"object"==typeof t&&(r=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=r||!1,this._wait=i||0,!0===this._times&&(this._times=1/0),this}loops(t){const r=this._duration+this._wait;if(null==t){const a=Math.floor(this._time/r);return Math.min(a+(this._time-a*r)/this._duration,this._times)}const i=Math.floor(t);return this.time(r*i+this._duration*(t%1))}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){const r=this._time,i=this._duration,o=this._wait,a=this._swing,l=this._reverse;let c;if(null==t){const f=function(p){const g=a*Math.floor(p%(2*(o+i))/(o+i)),_=g&&!l||!g&&l,b=Math.pow(-1,_)*(p%(o+i))/i+_;return Math.max(Math.min(b,1),0)},m=this._times*(o+i)-o;return c=r<=0?Math.round(f(1e-5)):r<m?f(r):Math.round(f(m-1e-5)),c}const u=Math.floor(this.loops()),d=a&&u%2==0;return c=u+(d&&!l||l&&d?t:1-t),this.loops(c)}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,r,i,o){return this._queue.push({initialiser:t||EA,runner:r||EA,retarget:i,isTransform:o,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=t??!this._reverse,this}schedule(t,r,i){if(t instanceof IH||(i=r,r=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,r,i),this}step(t){if(!this.enabled)return this;this._time+=t=t??16;const r=this.position(),i=this._lastPosition!==r&&this._time>=0;this._lastPosition=r;const o=this.duration(),s=this._lastTime<=0&&this._time>0,a=this._lastTime<o&&this._time>=o;this._lastTime=this._time,s&&this.fire("start",this);const l=this._isDeclarative;this.done=!l&&!a&&this._time>=o,this._reseted=!1;let c=!1;return(i||l)&&(this._initialise(i),this.transforms=new an,c=this._run(l?t:r),this.fire("step",this)),this.done=this.done||c&&l,a&&this.fire("finished",this),this}time(t){return null==t?this._time:(this.step(t-this._time),this)}timeline(t){return typeof t>"u"?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let r=0,i=this._queue.length;r<i;++r){const o=this._queue[r],s=this._isDeclarative||!o.initialised&&t;t=!o.finished,s&&t&&(o.initialiser.call(this),o.initialised=!0)}}_rememberMorpher(t,r){if(this._history[t]={morpher:r,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(t){let r=!0;for(let i=0,o=this._queue.length;i<o;++i){const s=this._queue[i],a=s.runner.call(this,t);s.finished=s.finished||!0===a,r=r&&s.finished}return r}_tryRetarget(t,r,i){if(this._history[t]){if(!this._history[t].caller.initialised){const s=this._queue.indexOf(this._history[t].caller);return this._queue.splice(s,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,r,i):this._history[t].morpher.to(r),this._history[t].caller.finished=!1;const o=this.timeline();return o&&o.play(),!0}return!1}}return n.id=0,n})();class ow{constructor(e=new an,t=-1,r=!0){this.transforms=e,this.id=t,this.done=r}clearTransformsFromQueue(){}}sr([Zu,ow],{mergeWith(n){return new ow(n.transforms.lmultiply(this.transforms),n.id)}});const PH=(n,e)=>n.lmultiplyO(e),OH=n=>n.transforms;function IEe(){const e=this._transformationRunners.runners.map(OH).reduce(PH,new an);this.transform(e),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class PEe{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){const t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new ow).forEach(r=>r.clearTransformsFromQueue()),this}edit(e,t){const r=this.ids.indexOf(e+1);return this.ids.splice(r,1,e+1),this.runners.splice(r,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){const r=this.runners[t];if(!(e&&r.done&&e.done)||r._timeline&&r._timeline._runnerIds.includes(r.id)||e._timeline&&e._timeline._runnerIds.includes(e.id))e=r;else{this.remove(r.id);const o=r.mergeWith(e);this.edit(e.id,o),e=o,--t}}return this}remove(e){const t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}Rn({Element:{animate(n,e,t){const r=Zu.sanitise(n,e,t),i=this.timeline();return new Zu(r.duration).loop(r).element(this).timeline(i.play()).schedule(r.delay,r.when)},delay(n,e){return this.animate(0,n,e)},_clearTransformRunnersBefore(n){this._transformationRunners.clearBefore(n.id)},_currentTransform(n){return this._transformationRunners.runners.filter(e=>e.id<=n.id).map(OH).reduce(PH,new an)},_addRunner(n){this._transformationRunners.add(n),Or.cancelImmediate(this._frameId),this._frameId=Or.immediate(IEe.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new PEe).add(new ow(new an(this))))}}}),sr(Zu,{attr(n,e){return this.styleAttr("attr",n,e)},css(n,e){return this.styleAttr("css",n,e)},styleAttr(n,e,t){if("string"==typeof e)return this.styleAttr(n,{[e]:t});let r=e;if(this._tryRetarget(n,r))return this;let i=new yh(this._stepper).to(r),o=Object.keys(r);return this.queue(function(){i=i.from(this.element()[n](o))},function(s){return this.element()[n](i.at(s).valueOf()),i.done()},function(s){const a=Object.keys(s),l=((n,e)=>n.filter(t=>!e.includes(t)))(a,o);if(l.length){const u=this.element()[n](l),d=new u0(i.from()).valueOf();Object.assign(d,u),i.from(d)}const c=new u0(i.to()).valueOf();Object.assign(c,s),i.to(c),o=a,r=s}),this._rememberMorpher(n,i),this},zoom(n,e){if(this._tryRetarget("zoom",n,e))return this;let t=new yh(this._stepper).to(new En(n));return this.queue(function(){t=t.from(this.element().zoom())},function(r){return this.element().zoom(t.at(r),e),t.done()},function(r,i){e=i,t.to(r)}),this._rememberMorpher("zoom",t),this},transform(n,e,t){if(e=n.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",n))return this;const r=an.isMatrixLike(n);t=null!=n.affine?n.affine:t??!r;const i=new yh(this._stepper).type(t?AH:an);let o,s,a,l,c;return this.queue(function u(){s=s||this.element(),o=o||Yx(n,s),c=new an(e?void 0:s),s._addRunner(this),e||s._clearTransformRunnersBefore(this)},function d(f){e||this.clearTransform();const{x:m,y:p}=new Ri(o).transform(s._currentTransform(this));let g=new an({...n,origin:[m,p]}),_=this._isDeclarative&&a?a:c;if(t){g=g.decompose(m,p),_=_.decompose(m,p);const v=g.rotate,y=_.rotate,w=[v-360,v,v+360],x=w.map(S=>Math.abs(S-y)),E=Math.min(...x),M=x.indexOf(E);g.rotate=w[M]}e&&(r||(g.rotate=n.rotate||0),this._isDeclarative&&l&&(_.rotate=l)),i.from(_),i.to(g);const b=i.at(f);return l=b.rotate,a=new an(b),this.addTransform(a),s._addRunner(this),i.done()},function h(f){(f.origin||"center").toString()!==(n.origin||"center").toString()&&(o=Yx(f,s)),n={...f,origin:o}},!0),this._isDeclarative&&this._rememberMorpher("transform",i),this},x(n,e){return this._queueNumber("x",n)},y(n){return this._queueNumber("y",n)},dx(n=0){return this._queueNumberDelta("x",n)},dy(n=0){return this._queueNumberDelta("y",n)},dmove(n,e){return this.dx(n).dy(e)},_queueNumberDelta(n,e){if(e=new En(e),this._tryRetarget(n,e))return this;const t=new yh(this._stepper).to(e);let r=null;return this.queue(function(){r=this.element()[n](),t.from(r),t.to(r+e)},function(i){return this.element()[n](t.at(i)),t.done()},function(i){t.to(r+new En(i))}),this._rememberMorpher(n,t),this},_queueObject(n,e){if(this._tryRetarget(n,e))return this;const t=new yh(this._stepper).to(e);return this.queue(function(){t.from(this.element()[n]())},function(r){return this.element()[n](t.at(r)),t.done()}),this._rememberMorpher(n,t),this},_queueNumber(n,e){return this._queueObject(n,new En(e))},cx(n){return this._queueNumber("cx",n)},cy(n){return this._queueNumber("cy",n)},move(n,e){return this.x(n).y(e)},center(n,e){return this.cx(n).cy(e)},size(n,e){let t;return(!n||!e)&&(t=this._element.bbox()),n||(n=t.width/t.height*e),e||(e=t.height/t.width*n),this.width(n).height(e)},width(n){return this._queueNumber("width",n)},height(n){return this._queueNumber("height",n)},plot(n,e,t,r){if(4===arguments.length)return this.plot([n,e,t,r]);if(this._tryRetarget("plot",n))return this;const i=new yh(this._stepper).type(this._element.MorphArray).to(n);return this.queue(function(){i.from(this._element.array())},function(o){return this._element.plot(i.at(o)),i.done()}),this._rememberMorpher("plot",i),this},leading(n){return this._queueNumber("leading",n)},viewbox(n,e,t,r){return this._queueObject("viewbox",new jo(n,e,t,r))},update(n){return"object"!=typeof n?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=n.opacity&&this.attr("stop-opacity",n.opacity),null!=n.color&&this.attr("stop-color",n.color),null!=n.offset&&this.attr("offset",n.offset),this)}}),sr(Zu,{rx:AA,ry:TA,from:CH,to:SH}),hr(Zu,"Runner");class zA extends Ns{constructor(e,t=e){super(oi("svg",e),t),this.namespace()}defs(){return this.isRoot()?Zs(this.node.querySelector("defs"))||this.put(new DA):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof Gn.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:Zx,version:"1.1"}).attr("xmlns:xlink",om,n0).attr("xmlns:svgjs","http://svgjs.dev/svgjs",n0):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,n0).attr("xmlns:svgjs",null,n0)}root(){return this.isRoot()?this:super.root()}}Rn({Container:{nested:si(function(){return this.put(new zA)})}}),hr(zA,"Svg",!0);class UA extends Ns{constructor(e,t=e){super(oi("symbol",e),t)}}Rn({Container:{symbol:si(function(){return this.put(new UA)})}}),hr(UA,"Symbol");var NH={__proto__:null,plain:function NEe(n){return!1===this._build&&this.clear(),this.node.appendChild(Gn.document.createTextNode(n)),this},length:function REe(){return this.node.getComputedTextLength()},x:function FEe(n,e=this.bbox()){return null==n?e.x:this.attr("x",this.attr("x")+n-e.x)},y:function kEe(n,e=this.bbox()){return null==n?e.y:this.attr("y",this.attr("y")+n-e.y)},move:function LEe(n,e,t=this.bbox()){return this.x(n,t).y(e,t)},cx:function BEe(n,e=this.bbox()){return null==n?e.cx:this.attr("x",this.attr("x")+n-e.cx)},cy:function VEe(n,e=this.bbox()){return null==n?e.cy:this.attr("y",this.attr("y")+n-e.cy)},center:function zEe(n,e,t=this.bbox()){return this.cx(n,t).cy(e,t)},ax:function UEe(n){return this.attr("x",n)},ay:function HEe(n){return this.attr("y",n)},amove:function GEe(n,e){return this.ax(n).ay(e)},build:function jEe(n){return this._build=!!n,this}};class il extends Ks{constructor(e,t=e){super(oi("text",e),t),this.dom.leading=new En(1.3),this._rebuild=!0,this._build=!1}leading(e){return null==e?this.dom.leading:(this.dom.leading=new En(e),this.rebuild())}rebuild(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){const t=this;let r=0;const i=this.dom.leading;this.each(function(o){const s=Gn.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=i*new En(s);this.dom.newLined&&(this.attr("x",t.attr("x")),"\n"===this.text()?r+=a:(this.attr("dy",o?a+r:0),r=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new En(e.leading||1.3),this}text(e){if(void 0===e){const t=this.node.childNodes;let r=0;e="";for(let i=0,o=t.length;i<o;++i)"textPath"!==t[i].nodeName?(i!==r&&3!==t[i].nodeType&&!0===Zs(t[i]).dom.newLined&&(e+="\n"),e+=t[i].textContent):0===i&&(r=1);return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else for(let t=0,r=(e=(e+"").split("\n")).length;t<r;t++)this.newLine(e[t]);return this.build(!1).rebuild()}}sr(il,NH),Rn({Container:{text:si(function(n=""){return this.put(new il).text(n)}),plain:si(function(n=""){return this.put(new il).plain(n)})}}),hr(il,"Text");class sw extends Ks{constructor(e,t=e){super(oi("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof il))return this;const t=e.index(this),r=Gn.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=e.dom.leading*new En(r);return this.dy(t?i:0).attr("x",e.x())}text(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}sr(sw,NH),Rn({Tspan:{tspan:si(function(n=""){const e=new sw;return this._build||this.clear(),this.put(e).text(n)})},Text:{newLine:function(n=""){return this.tspan(n).newLine()}}}),hr(sw,"Tspan");class HA extends Ks{constructor(e,t=e){super(oi("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new En(e).divide(2))}}sr(HA,{x:vH,y:_H,cx:yH,cy:bH,width:xH,height:wH}),Rn({Container:{circle:si(function(n=0){return this.put(new HA).size(n).move(0,0)})}}),hr(HA,"Circle");class GA extends Ns{constructor(e,t=e){super(oi("clipPath",e),t)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return lm('svg [clip-path*="'+this.id()+'"]')}}Rn({Container:{clip:si(function(){return this.defs().put(new GA)})},Element:{clipper(){return this.reference("clip-path")},clipWith(n){const e=n instanceof GA?n:this.parent().clip().add(n);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip(){return this.attr("clip-path",null)}}}),hr(GA,"ClipPath");class RH extends zl{constructor(e,t=e){super(oi("foreignObject",e),t)}}Rn({Container:{foreignObject:si(function(n,e){return this.put(new RH).size(n,e)})}}),hr(RH,"ForeignObject");var FH={__proto__:null,dmove:function WEe(n,e){return this.children().forEach((t,r)=>{let i;try{i=t.bbox()}catch{return}const o=new an(t),s=o.translate(n,e).transform(o.inverse()),a=new Ri(i.x,i.y).transform(s);t.move(a.x,a.y)}),this},dx:function qEe(n){return this.dmove(n,0)},dy:function $Ee(n){return this.dmove(0,n)},height:function XEe(n,e=this.bbox()){return null==n?e.height:this.size(e.width,n,e)},move:function YEe(n=0,e=0,t=this.bbox()){return this.dmove(n-t.x,e-t.y)},size:function ZEe(n,e,t=this.bbox()){const r=ph(this,n,e,t),i=r.width/t.width,o=r.height/t.height;return this.children().forEach((s,a)=>{const l=new Ri(t).transform(new an(s).inverse());s.scale(i,o,l.x,l.y)}),this},width:function KEe(n,e=this.bbox()){return null==n?e.width:this.size(n,e.height,e)},x:function QEe(n,e=this.bbox()){return null==n?e.x:this.move(n,e.y,e)},y:function JEe(n,e=this.bbox()){return null==n?e.y:this.move(e.x,n,e)}};class jA extends Ns{constructor(e,t=e){super(oi("g",e),t)}}sr(jA,FH),Rn({Container:{group:si(function(){return this.put(new jA)})}}),hr(jA,"G");class aw extends Ns{constructor(e,t=e){super(oi("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,om)}}sr(aw,FH),Rn({Container:{link:si(function(n){return this.put(new aw).to(n)})},Element:{unlink(){const n=this.linker();if(!n)return this;const e=n.parent();if(!e)return this.remove();const t=e.index(n);return e.add(this,t),n.remove(),this},linkTo(n){let e=this.linker();return e||(e=new aw,this.wrap(e)),"function"==typeof n?n.call(e,e):e.to(n),this},linker(){const n=this.parent();return n&&"a"===n.node.nodeName.toLowerCase()?n:null}}}),hr(aw,"A");class WA extends Ns{constructor(e,t=e){super(oi("mask",e),t)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return lm('svg [mask*="'+this.id()+'"]')}}Rn({Container:{mask:si(function(){return this.defs().put(new WA)})},Element:{masker(){return this.reference("mask")},maskWith(n){const e=n instanceof WA?n:this.parent().mask().add(n);return this.attr("mask",'url("#'+e.id()+'")')},unmask(){return this.attr("mask",null)}}}),hr(WA,"Mask");class kH extends zl{constructor(e,t=e){super(oi("stop",e),t)}update(e){return("number"==typeof e||e instanceof En)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new En(e.offset)),this}}Rn({Gradient:{stop:function(n,e,t){return this.put(new kH).update(n,e,t)}}}),hr(kH,"Stop");class qA extends zl{constructor(e,t=e){super(oi("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,r={}){return this.rule("@font-face",{fontFamily:e,src:t,...r})}rule(e,t){return this.addText(function eDe(n,e){if(!n)return"";if(!e)return n;let t=n+"{";for(const r in e)t+=eH(r)+":"+e[r]+";";return t+="}",t}(e,t))}}Rn("Dom",{style(n,e){return this.put(new qA).rule(n,e)},fontface(n,e,t){return this.put(new qA).font(n,e,t)}}),hr(qA,"Style");class $A extends il{constructor(e,t=e){super(oi("textPath",e),t)}array(){const e=this.track();return e?e.array():null}plot(e){const t=this.track();let r=null;return t&&(r=t.plot(e)),null==e?r:this}track(){return this.reference("href")}}Rn({Container:{textPath:si(function(n,e){return n instanceof il||(n=this.text(n)),n.path(e)})},Text:{path:si(function(n,e=!0){const t=new $A;let r;if(n instanceof fm||(n=this.defs().path(n)),t.attr("href","#"+n,om),e)for(;r=this.node.firstChild;)t.node.appendChild(r);return this.put(t)}),textPath(){return this.findOne("textPath")}},Path:{text:si(function(n){return n instanceof il||(n=(new il).addTo(this.parent()).text(n)),n.path(this)}),targets(){return lm("svg textPath").filter(n=>(n.attr("href")||"").includes(this.id()))}}}),$A.prototype.MorphArray=_h,hr($A,"TextPath");class LH extends Ks{constructor(e,t=e){super(oi("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,om)}}Rn({Container:{use:si(function(n,e){return this.put(new LH).use(n,e)})}}),hr(LH,"Use");const tDe=fs;sr([zA,UA,tw,l0,nw],Os("viewbox")),sr([c0,h0,d0,fm],Os("marker")),sr(il,Os("Text")),sr(fm,Os("Path")),sr(DA,Os("Defs")),sr([il,sw],Os("Tspan")),sr([iw,ew,a0,Zu],Os("radius")),sr(o0,Os("EventTarget")),sr(Xu,Os("Dom")),sr(zl,Os("Element")),sr(Ks,Os("Shape")),sr([Ns,MH],Os("Container")),sr(a0,Os("Gradient")),sr(Zu,Os("Runner")),gh.extend(function eSe(){return[...new Set(K6)]}()),function xEe(n=[]){BA.push(...[].concat(n))}([En,Vr,jo,an,dm,Yu,_h,Ri]),function wEe(){sr(BA,{to(n){return(new yh).type(this.constructor).from(this.toArray()).to(n)},fromArray(n){return this.init(n),this},toConsumable(){return this.toArray()},morph(n,e,t,r,i){return this.fromArray(n.map(function(s,a){return r.step(s,e[a],t,i[a],i)}))}})}();class co{constructor(e){this.dashed=!1,this.dashString="",this.opacity=1,this.start=e.start,this.end=e.end,this.color=e.color??K.white,this.width=e.width??3,this.dashed=null!=e.dashed&&e.dashed,this.dashString=null!=e.dashString?e.dashString:"",this.opacity=e.opacity??1}}class Ot{constructor(e,t){this.x=e,this.y=t}equal(e){return Math.abs(e.x-this.x)<.01&&Math.abs(e.y-this.y)<.01}multiply(e){return new Ot(this.x*e,this.y*e)}add(e){return new Ot(this.x+e.x,this.y+e.y)}normalized(){const e=Math.sqrt(this.x*this.x+this.y*this.y);return new Ot(this.x/e,this.y/e)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}dot(e){return this.x*e.x+this.y*e.y}}class nDe{constructor(e){this.offsetTop=0,this.height=e.height,this.width=e.width,this.pixelsInOneUnit=e.pixelsInOneUnit,this.offsetTop=e.offsetTop??0}}class Ul{constructor(){this.paintLayers=[],this.miniViewPaintLayers=[]}adjustPixelsInUnit(e){this.canvas.pixelsInOneUnit=e}initializeCanvas(e){this.canvas=e}initializeMiniView(e){this.miniViewCanvas=e}initializeMiniViewPaintLayers(e){this.miniViewPaintLayers=e}initializePaintLayers(e){this.paintLayers=e}get height(){return this.canvas.height}get width(){return this.canvas.width}get pixelsInOneUnit(){return this.canvas.pixelsInOneUnit}getPaintLayer(e){switch(e){case jn.layer0:return this.paintLayers[0];case jn.layer1:return this.paintLayers[1];case jn.layer2:return this.paintLayers[2];case jn.layer3:return this.paintLayers[3];case jn.layer4:return this.paintLayers[4]}return this.paintLayers[2]}getMiniViewPaintLayer(e){switch(e){case jn.layer0:return this.miniViewPaintLayers[0];case jn.layer1:return this.miniViewPaintLayers[1];case jn.layer2:return this.miniViewPaintLayers[2];case jn.layer3:return this.miniViewPaintLayers[3];case jn.layer4:return this.miniViewPaintLayers[4]}return this.miniViewPaintLayers[2]}}Ul.\u0275fac=function(e){return new(e||Ul)},Ul.\u0275prov=_t({token:Ul,factory:Ul.\u0275fac,providedIn:"root"});class ol{constructor(e){this.c=e,this.topOffset=-100}getCenterPoint(){return new Ot(this.c.width/2,this.c.height/2+this.c.canvas.offsetTop)}getCoordinateSystemDimensions(){const e={left:-this.convertToMathsCoordinates(new Ot(0,this.c.height/2)).x,right:this.convertToMathsCoordinates(new Ot(this.c.width,this.c.height/2)).x,top:-this.convertToMathsCoordinates(new Ot(this.c.width/2,0)).y,bottom:this.convertToMathsCoordinates(new Ot(this.c.width/2,this.c.height)).y};return{left:e.left,right:e.right,top:e.top,bottom:e.bottom,height:e.top+e.bottom,width:e.left+e.right}}getCrossLength(){const e=this.getCoordinateSystemDimensions();return Math.sqrt(Math.pow(e.width,2)+Math.pow(e.height,2))}convertToPaintCoordinates(e){let t=this.getCenterPoint();return new Ot(e.x*this.c.pixelsInOneUnit+t.x,t.y-e.y*this.c.pixelsInOneUnit)}convertToMathsCoordinates(e){let t=this.getCenterPoint();return new Ot((e.x-t.x)/this.c.pixelsInOneUnit,(e.y-t.y)/this.c.pixelsInOneUnit)}}ol.\u0275fac=function(e){return new(e||ol)(Oe(Ul))},ol.\u0275prov=_t({token:ol,factory:ol.\u0275fac,providedIn:"root"});var jn=(()=>{return(n=jn||(jn={}))[n.default=0]="default",n[n.layer0=1]="layer0",n[n.layer1=2]="layer1",n[n.layer2=3]="layer2",n[n.layer3=4]="layer3",n[n.layer4=5]="layer4",jn;var n})();class Hl{constructor(e,t){this.canvas=e,this.coord=t}paintLine(e,t=jn.layer2){const r=this.coord.convertToPaintCoordinates(e.start),i=this.coord.convertToPaintCoordinates(e.end);return this.canvas.getPaintLayer(t).line(r.x,r.y,i.x,i.y).opacity(e.opacity).stroke({width:e.width,color:e.color,dasharray:e.dashed?e.dashString:""})}paintCircle(e,t=jn.layer2){const r=this.coord.convertToPaintCoordinates(e.center);return this.canvas.getPaintLayer(t).circle(2*e.radius).move(r.x-e.radius,r.y-e.radius).attr({fill:e.color})}paintPolygon(e,t=jn.layer2){const r=[];for(let o of e.points)r.push(this.coord.convertToPaintCoordinates(o));let i="";return r.forEach(o=>{i+=`${o.x},${o.y} `}),this.canvas.getPaintLayer(t).polygon(i).fill({color:e.color})}}Hl.\u0275fac=function(e){return new(e||Hl)(Oe(Ul),Oe(ol))},Hl.\u0275prov=_t({token:Hl,factory:Hl.\u0275fac,providedIn:"root"});class f0{constructor(e){this.center=e.center,this.radius=e.radius,this.color=e.color}}class pm{constructor(e,t,r){this.c=e,this.p=t,this.coord=r,this.linesBetweenUnit=4,this.paintLayer=jn.default}paint(e){this.paintHorizontalLines(),this.paintVerticalLines(),this.paintCoordinateSystem(),this.paintNullPoint(),e&&(this.paintLayer=e)}paintNullPoint(){this.p.paintCircle(new f0({center:new Ot(0,0),radius:16,color:"#ffffff"}),jn.layer4)}paintHorizontalLines(){const e=this.coord.getCoordinateSystemDimensions(),t=e.height*this.linesBetweenUnit,r=1/this.linesBetweenUnit;for(let i=0;i<=t/2;i++){let o=-r*i;i%this.linesBetweenUnit==0?this.paintFullUnitGridLine(-e.left,o,e.right,o):this.paintBetweenGridLine(-e.left,o,e.right,o)}for(let i=0;i<=t/2;i++){let o=r*i;i%this.linesBetweenUnit==0?this.paintFullUnitGridLine(-e.left,o,e.right,o):this.paintBetweenGridLine(-e.left,o,e.right,o)}}paintVerticalLines(){const e=this.coord.getCoordinateSystemDimensions(),t=e.width*this.linesBetweenUnit,r=1/this.linesBetweenUnit;for(let i=0;i<=t/2;i++){let o=-r*i;i%this.linesBetweenUnit==0?this.paintFullUnitGridLine(o,e.top,o,-e.bottom):this.paintBetweenGridLine(o,e.top,o,-e.bottom)}for(let i=0;i<=t/2;i++){let o=r*i;i%this.linesBetweenUnit==0?this.paintFullUnitGridLine(o,e.top,o,-e.bottom):this.paintBetweenGridLine(o,e.top,o,-e.bottom)}}paintCoordinateSystem(){const e=this.coord.getCoordinateSystemDimensions();this.paintLine(new co({start:new Ot(-e.left,0),end:new Ot(e.right,0),color:K.purple300,width:7})),this.paintLine(new co({start:new Ot(0,e.top),end:new Ot(0,-e.bottom),color:K.purple300,width:7}))}paintFullUnitGridLine(e,t,r,i){const o=new co({start:new Ot(e,t),end:new Ot(r,i),color:K.purple400,width:5});this.paintLine(o)}paintBetweenGridLine(e,t,r,i){const o=new co({start:new Ot(e,t),end:new Ot(r,i),color:K.purple500,width:2,dashed:!0,dashString:"12 12"});this.paintLine(o)}paintLine(e){this.p.paintLine(e,this.paintLayer)}}pm.\u0275fac=function(e){return new(e||pm)(Oe(Ul),Oe(Hl),Oe(ol))},pm.\u0275prov=_t({token:pm,factory:pm.\u0275fac,providedIn:"root"});class p0{constructor(e,t){for(this.anchorPoint=new Ot(0,0);e>2*Math.PI;)e-=2*Math.PI;for(;e<0;)e+=2*Math.PI;this.angle=e,this.anchorPoint=t??new Ot(0,0)}getNormalVector(){return new Ot(Math.cos(this.angle+Math.PI/2),Math.sin(this.angle+Math.PI/2)).normalized()}withTransformation(e){const t=this.getNormalVector(),i=new q(t.x,t.y,0).applyMatrix3(e),o=new Ot(i.x,i.y);return console.log(o.x),new p0(Math.atan(o.y/o.x)+Math.PI/2)}getDirection(){return new Ot(Math.cos(this.angle),Math.sin(this.angle))}getDirectionLine(e=100){let t=this.getDirection();return new co({start:this.anchorPoint.add(t.multiply(e)),end:this.anchorPoint.add(t.multiply(-e))})}reflect(e){return function(r,i){let o,s,a,l,c,u;return o=i.end.x-i.start.x,s=i.end.y-i.start.y,a=(o*o-s*s)/(o*o+s*s),l=2*o*s/(o*o+s*s),c=a*(r.x-i.start.x)+l*(r.y-i.start.y)+i.start.x,u=l*(r.x-i.start.x)-a*(r.y-i.start.y)+i.start.y,new Ot(c,u)}(e,this.getDirectionLine())}moveBy(e){return new p0(this.angle,this.anchorPoint.add(e))}}class m0{constructor(e,t){for(this.spanningAngle=t;e>=2*Math.PI;)e-=2*Math.PI;for(;e<=0;)e+=2*Math.PI;Math.abs(e-2*Math.PI)<.1&&(e=0),this.startAngle=e}getStartBoundingVector(){return new Ot(Math.cos(this.startAngle),Math.sin(this.startAngle))}getEndBoundingVector(){return new Ot(Math.cos(this.startAngle+this.spanningAngle),Math.sin(this.startAngle+this.spanningAngle))}getTransformedWeylChamber(e){const r=new q(Math.cos(this.startAngle),Math.sin(this.startAngle),0).applyMatrix3(e);let i=Math.atan(r.y/r.x);r.x<0&&(i+=Math.PI);const s=new q(Math.cos(this.spanningAngle+this.startAngle),Math.sin(this.spanningAngle+this.startAngle),0).applyMatrix3(e);let a=Math.atan(s.y/s.x);return s.x<0&&(a+=Math.PI),console.log("Start",i),console.log("End",a),i<a?new m0(i,a-i):new m0(a,i-a)}}let rDe=St(77);class Wo{constructor(e){this.isSimple=!1,this.isPositive=!0,this.isHighestRoot=!1,this.angle=e.angle,this.length=e.length,this.isSimple=e.isSimple,this.isPositive=null==e.isPositive||e.isPositive,this.isHighestRoot=null!=e.isHighestRoot&&e.isHighestRoot}equal(e){return e.getVector().equal(this.getVector())}getNegative(){return new Wo({angle:this.angle+Math.PI,length:this.length,isSimple:!1,isPositive:!1})}getVector(){return new Ot(Math.cos(this.angle)*this.length,Math.sin(this.angle)*this.length)}getVectorUnderTransformation(e){const t=this.getVector(),i=new q(t.x,t.y,0).applyMatrix3(e);return new Ot(i.x,i.y)}get name(){let t=this.getVector();return`(${Math.round(t.x)}, ${Math.round(t.y)})`}getHyperplane(){return new p0(this.angle+Math.PI/2)}getDual(){let e=this.getVector(),t=e.dot(e);return new Ot(2*e.x*1/t,2*e.y*1/t)}}class lw{constructor(e,t,r,i,o,s,a){this._positiveRoots=[],this.weylGroup=[],this.orderOfWeylGroup=0,this.fundamentalWeights=[],this.coxeterMatrix=[],this.type=e,this.orderOfWeylGroup=t,this.coxeterMatrix=o,this._positiveRoots=s,this._minimumAngle=a,this.weylGroup=r,this.fundamentalWeights=i}getAllRoots(){const e=[...this._positiveRoots];return this._positiveRoots.forEach(t=>{e.push(t.getNegative())}),e}getCoxeterMatrix(){return this.coxeterMatrix}hasHighestRoot(){return this._positiveRoots.some(e=>e.isHighestRoot)}getHighestRoot(){return this._positiveRoots.find(e=>e.isHighestRoot)}getAffineReflectionBase(){if(this.hasHighestRoot()){let e=this.getHighestRoot();return[...this.getBase().map(r=>({root:r,hyperplane:r.getHyperplane()})),{root:e,hyperplane:e.getHyperplane().moveBy(e.getVector())}]}return[...this.getBase().map(e=>({root:e,hyperplane:e.getHyperplane()}))]}getWeightsToHighestWeight(e){let t=this.weylGroup,i=t.map(f=>e.multiplyOnLeftWithMatrix(f)),o=t.map(f=>(f=>{let m=f.length();return f.normalized().stretchedBy(m+.4)})(e.multiplyOnLeftWithMatrix(f)));o.sort((f,m)=>((f,m)=>{let p=new Ot(0,0);if(f.x-p.x>=0&&m.x-p.x<0)return!0;if(f.x-p.x<0&&m.x-p.x>=0)return!1;if(f.x-p.x==0&&m.x-p.x==0)return f.y-p.y>=0||m.y-p.y>=0?f.y>m.y:m.y>f.y;let g=(f.x-p.x)*(m.y-p.y)-(m.x-p.x)*(f.y-p.y);return g<0||!(g>0)&&(f.x-p.x)*(f.x-p.x)+(f.y-p.y)*(f.y-p.y)>(m.x-p.x)*(m.x-p.x)+(m.y-p.y)*(m.y-p.y)})(new Ot(f.get(0),f.get(1)),new Ot(m.get(0),m.get(1)))?1:-1);let a=o.map(f=>f.components),l=[e],c=this.getAllRoots().map(f=>new dr([f.getVector().x,f.getVector().y]));const h=(f,m)=>{let p=f.add(m);if(l.filter(_=>_.equal(p)).length<=2&&(f=>1!=rDe(a,f.components))(p)){l.push(p);for(let _ of c)h(p,_)}};for(let f of c)h(e,f);return[...i,...l]}getHyperplanes(){const e=[];for(let t of this._positiveRoots)e.push(new p0(t.angle+Math.PI/2));return e.sort((t,r)=>t.angle<r.angle?-1:t.angle===r.angle?0:1),e}getPositiveRoots(){return this._positiveRoots}getAllWeylChambers(){const e=[],t=this.getHyperplanes();for(let r of t){const i=new m0(r.angle,this._minimumAngle),o=new m0(r.angle+Math.PI,this._minimumAngle);e.push(i),e.push(o)}return console.log(e),e.sort((r,i)=>r.startAngle<i.startAngle?-1:r.startAngle===i.startAngle?0:1),e}getFundamentalWeylChamber(){return this.getAllWeylChambers().filter(t=>this.getBase().every(o=>o.getVector().dot(t.getStartBoundingVector())>=-.01))[0]}getBase(){return this.getPositiveRoots().filter(e=>e.isSimple)}getLengthOfTransformation(e){let t=this.getPositiveRoots();return t.map(o=>o.getVectorUnderTransformation(e)).filter(o=>t.every(s=>!s.getVector().equal(o))).length}}var sl=(()=>{return(n=sl||(sl={})).A1="A1",n.A2="A2",n.B2="B2",n.G2="G2",sl;var n})();const cw={A1:new lw(sl.A1,2,[new on([[1,0],[0,1]]),new on([[-1,0],[0,1]])],[new Ot(1,0)],[1],[new Wo({angle:0,length:1,isSimple:!0})],Math.PI),A2:new lw(sl.A2,6,[new on([[1,0],[0,1]]),new on([[-1,0],[0,1]]),new on([[.5,.86602539],[.86602539,-.5]]),new on([[.5,-.8660254],[-.8660254,-.5]]),new on([[.5,-.8660254],[-.8660254,-.5]]).multiply(new on([[.5,.86602539],[.86602539,-.5]])),new on([[-1,0],[0,1]]).multiply(new on([[.5,.86602539],[.86602539,-.5]]))],[new Ot(0,.58),new Ot(-.8660254037844388,-.4999999999999997).normalized().multiply(.575)],[1,3,3,1],[new Wo({angle:Math.PI/2+Math.PI/6,length:1,isSimple:!0}),new Wo({angle:Math.PI/2+Math.PI/3+Math.PI+Math.PI/6,length:1,isSimple:!0}),new Wo({angle:Math.PI/2-Math.PI/3+Math.PI/6,length:1,isSimple:!1,isHighestRoot:!0})],Math.PI/3),B2:new lw(sl.B2,8,[new on([[1,0],[0,1]]),new on([[0,-1],[-1,0]]),new on([[1,0],[0,-1]]),new on([[0,1],[-1,0]]),new on([[0,1],[1,0]]),new on([[-1,0],[0,-1]]),new on([[0,-1],[1,0]]),new on([[-1,0],[0,1]])],[new Ot(1,0),new Ot(.5,.5)],[1,4,4,1],[new Wo({angle:0,length:1,isSimple:!0}),new Wo({angle:Math.PI/4,length:Math.sqrt(2),isSimple:!1}),new Wo({angle:Math.PI/2,length:1,isSimple:!1,isHighestRoot:!0}),new Wo({angle:3*Math.PI/4,length:Math.sqrt(2),isSimple:!0})],Math.PI/4),G2:new lw(sl.G2,12,[new on([[-1,0],[0,1]]),new on([[-.5,-.8660254],[-.8660254,.5]]),new on([[.5,-.8660254],[-.8660254,-.5]]),new on([[1,0],[0,-1]]),new on([[.5,.8660254],[.8660254,-.5]]),new on([[-.5,.8660254],[.8660254,.5]])],[new Ot(0,989/571),new Ot(.5,.8660254)],[1,6,6,1],[new Wo({angle:0,length:1,isSimple:!0}),new Wo({angle:Math.PI/6,length:Math.sqrt(3),isSimple:!1}),new Wo({angle:2*Math.PI/6,length:1,isSimple:!1,isHighestRoot:!0}),new Wo({angle:Math.PI/2,length:Math.sqrt(3),isSimple:!1}),new Wo({angle:Math.PI/6+Math.PI/2,length:1,isSimple:!1}),new Wo({angle:2*Math.PI/6+Math.PI/2,length:Math.sqrt(3),isSimple:!0})],Math.PI/6)};class mm{constructor(e){this.points=[],this.points=e.points,this.color=e.color}}class gm{constructor(e){this.walls=[],this.walls=e}get points(){let e=this.walls.map(t=>t.start);return e.push(this.walls[this.walls.length-1].start),e}static fromPoints(e){return new gm([new co({start:e[0],end:e[1]}),new co({start:e[1],end:e[2]}),new co({start:e[2],end:e[3]})])}static fromRootSystem(e){function t(r,i){if(r.start.x===r.end.x&&r.start.y===r.end.y||i.start.x===i.end.x&&i.start.y===i.end.y)return!1;let o=(i.end.y-i.start.y)*(r.end.x-r.start.x)-(i.end.x-i.start.x)*(r.end.y-r.start.y);if(0===o)return!1;let s=((i.end.x-i.start.x)*(r.start.y-i.start.y)-(i.end.y-i.start.y)*(r.start.x-i.start.x))/o,a=((r.end.x-r.start.x)*(r.start.y-i.start.y)-(r.end.y-r.start.y)*(r.start.x-i.start.x))/o;return!(s<0||s>1||a<0||a>1)&&new Ot(r.start.x+s*(r.end.x-r.start.x),r.start.y+s*(r.end.y-r.start.y))}if(e.hasHighestRoot()){let r=e.getHighestRoot(),i=r.getHyperplane(),o=new Ot(Math.cos(i.angle),Math.sin(i.angle)),s=o.add(r.getVector()),a=new co({start:s.add(o.multiply(100)),end:s.add(o.multiply(-100))}),l=e.getFundamentalWeylChamber(),c=l.getStartBoundingVector(),u=l.getEndBoundingVector(),d=new co({start:u.multiply(100),end:u.multiply(-100)}),h=new co({start:c.multiply(100),end:c.multiply(-100)}),f=new Ot(0,0),m=t(d,a),p=t(h,a);return new gm([new co({start:f,end:m}),new co({start:m,end:p}),new co({start:p,end:f})])}return null}}class Qs{constructor(){this.rootSystem=cw.A2,this.repaintEvent=new Tn}switchRootSystem(e){e.type!=this.rootSystem.type&&(this.rootSystem=e,this.repaintEvent.next())}getRoots(){return this.rootSystem.getAllRoots()}getPositiveRoots(){return this.rootSystem.getPositiveRoots()}getWeylChambers(){return this.rootSystem.getAllWeylChambers()}getFundamentalWeylChamber(){return this.rootSystem.getFundamentalWeylChamber()}getType(){return this.rootSystem.type}getBase(){return this.rootSystem.getBase()}getAffineReflectionBase(){return this.rootSystem.getAffineReflectionBase()}}Qs.\u0275fac=function(e){return new(e||Qs)},Qs.\u0275prov=_t({token:Qs,factory:Qs.\u0275fac,providedIn:"root"});class bh{constructor(e,t,r){this.rootSystem=e,this.coord=t,this.painter=r,this.appliedReflections=[]}paint(e){for(let t of this.rootSystem.getPositiveRoots())this.paintAffineHyperplanes(t);this.paintFundamentalAlcove(),this.applyReflections(),this.paintReflectionBase()}paintAffineHyperplanes(e){let t=K.purple300;const o=e.getHyperplane().angle/(2*Math.PI)*360,s=this.coord.getCrossLength()/2;let a=e.getVector();for(let l=-10;l<=10;++l){let c=new Ot(0,0).add(a.multiply(l));const u=new co({start:new Ot(-s,0).add(c),end:new Ot(s,0).add(c),color:t,width:2});this.painter.paintLine(u,jn.layer2).transform({rotate:-o})}}addReflection(e,t){this.appliedReflections.push({root:e,hyperplane:t}),this.applyReflections()}applyReflections(){this.clearAlcoveObject();let e=gm.fromRootSystem(this.rootSystem.rootSystem);if(null==e)return;let t=[];for(let r of e.points){let i=r;for(let o of this.appliedReflections)i=o.hyperplane.reflect(i);t.push(i)}this.reflectedAlcoveObject=this.paintAlcove(gm.fromPoints(t))}resetReflection(){this.appliedReflections=[],this.clearAlcoveObject()}clearAlcoveObject(){null!=this.reflectedAlcoveObject&&this.reflectedAlcoveObject.remove()}paintFundamentalAlcove(){let e=gm.fromRootSystem(this.rootSystem.rootSystem);null!=e&&this.paintAlcove(e)}paintAlcove(e){return this.painter.paintPolygon(new mm({points:[e?.walls[0].start,e?.walls[1].start,e?.walls[2].start,e?.walls[0].start],color:K.purple200}),jn.layer2).opacity(.5)}paintReflectionBase(){let e=this.rootSystem.getAffineReflectionBase();const t=yr[this.rootSystem.rootSystem.type];for(let r of e){let i=r.root,o=r.hyperplane,s=t[this.rootSystem.rootSystem.getPositiveRoots().findIndex(h=>h.equal(i))];const l=o.angle/(2*Math.PI)*360,c=this.coord.getCrossLength()/2;let u=o.anchorPoint;const d=new co({start:new Ot(-c,0).add(u),end:new Ot(c,0).add(u),color:s,width:5,opacity:1});this.painter.paintLine(d,jn.layer4).transform({rotate:-l})}}}bh.\u0275fac=function(e){return new(e||bh)(Oe(Qs),Oe(ol),Oe(Hl))},bh.\u0275prov=_t({token:bh,factory:bh.\u0275fac,providedIn:"root"});class Vc{constructor(){this.currentTranformation=(new io).identity(),this.appliedMirrorings=[],this.transformationChanged=new Tn,this.objectsTransformationActsOn=["ROOTS","WEYL_CHAMBERS"]}transformationAppliedTo(e){return this.objectsTransformationActsOn.includes(e)}getCurrentTransformedObjects(){return this.objectsTransformationActsOn}addTransformedObjectType(e){this.objectsTransformationActsOn.push(e),this.transformationChanged.next()}removeTransformedObjectType(e){this.objectsTransformationActsOn=this.objectsTransformationActsOn.filter(t=>t!=e),this.transformationChanged.next()}resetTransformation(){this.appliedMirrorings=[],this.currentTranformation=(new io).identity(),this.transformationChanged.next()}mirrorOnPlaneOfRoot(e){this.appliedMirrorings.push(e);const r=e.getHyperplane().getNormalVector().normalized(),i=(new io).fromArray([1-2*r.x*r.x,-2*r.x*r.y,0,-2*r.x*r.y,1-2*r.y*r.y,0,0,0,1]);this.currentTranformation=i.multiply(this.currentTranformation),this.transformationChanged.next()}}Vc.\u0275fac=function(e){return new(e||Vc)},Vc.\u0275prov=_t({token:Vc,factory:Vc.\u0275fac,providedIn:"root"});class Ku{constructor(e,t,r,i,o,s){this.canvas=e,this.rootSystem=t,this.coord=r,this.painter=i,this.affinePainter=o,this.transformService=s,this.paintLayer=jn.default,this.colorMode=To.base,this.showAffineVersion=!1,this.repaintEvent=new Tn,this.highlightedRoots=[],this.highlightedHyperplanes=[],this.showDominantWeights=!1,t.repaintEvent.subscribe(()=>{this.clearHyperplaneHighlight(),this.clearRootHighlight()})}paint(e){const t=this.rootSystem.getRoots();this.showAffineVersion||this.paintExtraGeometry();for(let r of t)this.paintRoot(r),r.isPositive&&!this.showAffineVersion&&this.paintHyperplane(r);null!=e&&(this.paintLayer=e),this.showAffineVersion&&this.affinePainter.paint(jn.layer3)}setDisplayStateOfDominantWeights(e){this.showDominantWeights=e,this.repaintEvent.next()}switchColorMode(e){this.colorMode=e,this.repaintEvent.next()}switchVersion(e){this.showAffineVersion=e,this.rootSystem.repaintEvent.next()}highlightRoot(e){this.highlightedRoots.push(e),this.repaintEvent.next()}highlightHyperplaneToRoot(e){this.highlightedHyperplanes.push(e),this.repaintEvent.next()}rootIsHighlighted(e){return this.highlightedRoots.some(t=>t.equal(e))}removeHighlightFromRoot(e){this.highlightedRoots=this.highlightedRoots.filter(t=>!e.equal(t)),this.repaintEvent.next()}hyperplaneToRootHighlighted(e){return this.highlightedHyperplanes.some(t=>t.equal(e))}removeHighlightOfHyperplaneToRoot(e){this.highlightedHyperplanes=this.highlightedHyperplanes.filter(t=>!e.equal(t)),this.repaintEvent.next()}allRootsHighlighted(){return this.highlightedRoots.length==this.rootSystem.getPositiveRoots().length}allHyperplanesHighlighted(){return this.highlightedHyperplanes.length==this.rootSystem.getPositiveRoots().length}clearRootHighlight(){this.highlightedRoots=[],this.repaintEvent.next()}clearHyperplaneHighlight(){this.highlightedHyperplanes=[],this.repaintEvent.next()}highlightAllRoots(){this.highlightedRoots=this.rootSystem.getPositiveRoots(),this.repaintEvent.next()}highlightAllHyperplanes(){this.highlightedHyperplanes=this.rootSystem.getPositiveRoots(),this.repaintEvent.next()}paintExtraGeometry(){switch(this.rootSystem.getType()){case sl.A2:this.paintTriangle();break;case sl.B2:this.paintSquare();break;case sl.G2:this.paintHexagon()}}paintVectorEnd(e,t,r=1,i="transparent"){this.painter.paintCircle(new f0({center:e,color:t,radius:16}),jn.layer4).opacity(r).stroke({color:i,width:3})}paintVectorLine(e,t,r=1,i=K.white){const o=new co({start:e,end:t,color:i,width:7});this.painter.paintLine(o,jn.layer3).opacity(r)}paintRoot(e){const t=e.getVector();let r=K.white,i=K.white,o="transparent",s=1;if(this.showAffineVersion)s=1,i=K.purple900,r=K.purple900;else if(this.colorMode==To.base){if(r=e.isSimple?K.brightRed:K.brightGreen,this.rootIsHighlighted(e)||this.rootIsHighlighted(e.getNegative())){const a=this.rootSystem.getPositiveRoots().findIndex(l=>l.equal(e)||l.equal(e.getNegative()));o=yr[this.rootSystem.getType()][a]}}else if(this.colorMode==To.positiveRoots){if(r=e.isPositive?K.brightRed:K.brightGreen,this.rootIsHighlighted(e)||this.rootIsHighlighted(e.getNegative())){const a=this.rootSystem.getPositiveRoots().findIndex(l=>l.equal(e)||l.equal(e.getNegative()));o=yr[this.rootSystem.getType()][a]}}else if(this.rootIsHighlighted(e)||this.rootIsHighlighted(e.getNegative())){const a=this.rootSystem.getPositiveRoots().findIndex(l=>l.equal(e)||l.equal(e.getNegative()));r=yr[this.rootSystem.getType()][a]}if(this.paintVectorLine(new Ot(0,0),t,s,i),this.transformService.transformationAppliedTo("ROOTS")){const a=e.getVectorUnderTransformation(this.transformService.currentTranformation);this.paintVectorEnd(a,r,s,o)}else this.paintVectorEnd(e.getVector(),r,s,o)}paintHyperplane(e){let t=K.white;if(this.hyperplaneToRootHighlighted(e)||this.hyperplaneToRootHighlighted(e.getNegative())){const l=this.rootSystem.getPositiveRoots().findIndex(c=>c.equal(e)||c.equal(e.getNegative()));t=yr[this.rootSystem.getType()][l]}let r=e.getHyperplane();this.transformService.transformationAppliedTo("HYPERPLANES")&&(r=e.getHyperplane().withTransformation(this.transformService.currentTranformation)),console.log(e,r.getDirection());const o=r.angle/(2*Math.PI)*360,s=this.coord.getCrossLength()/2,a=new co({start:new Ot(-s,0),end:new Ot(s,0),color:t,width:2,dashed:!0,dashString:"12 12"});this.painter.paintLine(a,jn.layer3).transform({rotate:-o})}paintTriangle(){let e=new mm({points:[new Ot(Math.cos(Math.PI/3+Math.PI/6),Math.sin(Math.PI/3+Math.PI/6)),new Ot(Math.cos(Math.PI+Math.PI/6),Math.sin(Math.PI+Math.PI/6)),new Ot(Math.cos(2*Math.PI-Math.PI/3+Math.PI/6),Math.sin(2*Math.PI-Math.PI/3+Math.PI/6))],color:"#9999CC"});this.painter.paintPolygon(e,jn.layer3).opacity(.5)}paintSquare(){let e=new mm({points:[new Ot(.5,.5),new Ot(-.5,.5),new Ot(-.5,-.5),new Ot(.5,-.5)],color:"#9999CC"});this.painter.paintPolygon(e,jn.layer3).opacity(.5).transform({rotate:45})}paintHexagon(){let e=new mm({points:[new Ot(.8,0),new Ot(.8*Math.cos(Math.PI/3),.8*Math.sin(Math.PI/3)),new Ot(.8*Math.cos(2*Math.PI/3),.8*Math.sin(2*Math.PI/3)),new Ot(.8*Math.cos(3*Math.PI/3),.8*Math.sin(3*Math.PI/3)),new Ot(.8*Math.cos(4*Math.PI/3),.8*Math.sin(4*Math.PI/3)),new Ot(.8*Math.cos(5*Math.PI/3),.8*Math.sin(5*Math.PI/3))],color:"#9999CC"});this.painter.paintPolygon(e,jn.layer3).opacity(.5).transform({rotate:30})}}Ku.\u0275fac=function(e){return new(e||Ku)(Oe(Ul),Oe(Qs),Oe(ol),Oe(Hl),Oe(bh),Oe(Vc))},Ku.\u0275prov=_t({token:Ku,factory:Ku.\u0275fac,providedIn:"root"});class vm{constructor(e,t,r){this.rootSystem=e,this.coord=t,this.painter=r,this.repaintEvent=new Tn}paint(e){this.paintAffineHyperplanes(),this.paintDominantIntegralWeights()}paintDominantIntegralWeights(){let e=[];const t=(i,o)=>{let s=i.add(o);length=s.length();let a=e.some(l=>l.equal(s));if(length<10&&!a){e.push(s);for(let l of[...this.rootSystem.rootSystem.fundamentalWeights,...this.rootSystem.rootSystem.fundamentalWeights.map(c=>c.multiply(-1))])t(s,l)}};for(let i of[...this.rootSystem.rootSystem.fundamentalWeights,...this.rootSystem.rootSystem.fundamentalWeights.map(o=>o.multiply(-1))])t(new Ot(0,0),i);let r=this.rootSystem.getBase().map(i=>i.getVector());for(let i of e)r.every(o=>o.dot(i)>=-.05)?this.painter.paintCircle(new f0({center:new Ot(i.x,i.y),color:K.purple,radius:8}),jn.layer4).click(()=>{this.repaintEvent.next(),this.paintWeightToHighestWeight(i)}):this.painter.paintCircle(new f0({center:new Ot(i.x,i.y),color:K.purple400,radius:8}),jn.layer3)}paintWeightToHighestWeight(e){let t=this.rootSystem.rootSystem.getWeightsToHighestWeight(new dr([e.x,e.y]));for(let r of t)this.painter.paintCircle(new f0({center:new Ot(r.get(0),r.get(1)),color:K.palePurple100,radius:20}),jn.layer3)}paintAffineHyperplanes(){let e=K.palePurple300;this.coord.getCrossLength();let r=[new Ot(1,0),new Ot(.5,.5)];for(let i=-5;i<=5;++i){const o=new co({start:new Ot(r[0].x,r[0].y).add(new Ot(1,0)),end:new Ot(8*r[0].x-r[0].x,8*r[0].y-r[0].y).add(new Ot(1,0)),color:e,width:1});this.painter.paintLine(o,jn.layer2)}}}vm.\u0275fac=function(e){return new(e||vm)(Oe(Qs),Oe(ol),Oe(Hl))},vm.\u0275prov=_t({token:vm,factory:vm.\u0275fac,providedIn:"root"});class _m{constructor(e,t,r,i){this.rootSystemService=e,this.painter=t,this.coord=r,this.transformService=i,this.paintLayer=jn.default}paint(e){let t=this.rootSystemService.getFundamentalWeylChamber();this.transformService.transformationAppliedTo("WEYL_CHAMBERS")&&(t=t.getTransformedWeylChamber(this.transformService.currentTranformation)),this.weylChamber=this.paintWeylChamber(t),this.paintLayer=e??jn.default}paintWeylChamber(e){let t=this.coord.getCrossLength();const r=new Ot(Math.cos(e.startAngle)*t,Math.sin(e.startAngle)*t),i=new Ot(Math.cos(e.startAngle+e.spanningAngle)*t,Math.sin(e.startAngle+e.spanningAngle)*t);if(Math.abs(e.spanningAngle-Math.PI)<.01){const o=new Ot(r.y,-r.x);o.x+=r.x,o.y+=r.y;const s=new Ot(-i.y,-i.x);s.x+=i.x,s.y+=i.y;const a=this.painter.paintPolygon(new mm({points:[r,o,s,i],color:K.purple300}),this.paintLayer);return a.opacity(.4),a}{const o=this.painter.paintPolygon(new mm({points:[i,new Ot(0,0),r],color:K.purple300}),this.paintLayer);return o.opacity(.4),o}}transformWeylChamber(e){this.transformation=e;const t=e.rotate/(2*Math.PI)*360,r=this.coord.getCenterPoint();this.weylChamber.animate(250).transform({rotate:t,flip:"none"!==this.transformation.flip&&this.transformation.flip,originX:r.x,originY:r.y})}}_m.\u0275fac=function(e){return new(e||_m)(Oe(Qs),Oe(Hl),Oe(ol),Oe(Vc))},_m.\u0275prov=_t({token:_m,factory:_m.\u0275fac,providedIn:"root"});class g0{constructor(e,t,r){this.rootSystemService=e,this.activatedRoute=t,this.router=r,this.RootSystems=sl,this.activatedRoute.params.subscribe(i=>{console.log("Change!");let o=decodeURI(i.root_system||"");null!=cw[o]&&this.rootSystemService.switchRootSystem(cw[o])})}ngOnInit(){}switchToRootSystem(e){this.rootSystemService.switchRootSystem(cw[e]),this.router.navigate(["/2D",{root_system:e}])}getSelectedRootSystem(){return this.rootSystemService.getType()}}g0.\u0275fac=function(e){return new(e||g0)(Me(Qs),Me(Al),Me(Co))},g0.\u0275cmp=Dr({type:g0,selectors:[["app-switch-root-system-panel"]],decls:19,vars:8,consts:[["id","switch-panel-container"],["id","switch-panel"],["id","root-systems-container"],[1,"root-system-item",3,"click"],["src","assets/A1.svg",1,"root-system-image"],[1,"root-system-title"],["src","assets/A2.svg",1,"root-system-image"],["src","assets/B2.svg",1,"root-system-image"],["src","assets/G2.svg",1,"root-system-image"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Et("click",function(){return t.switchToRootSystem(t.RootSystems.A1)}),At(4,"img",4),he(5,"small",5),ht(6,"A1"),be()(),he(7,"div",3),Et("click",function(){return t.switchToRootSystem(t.RootSystems.A2)}),At(8,"img",6),he(9,"small",5),ht(10,"A2"),be()(),he(11,"div",3),Et("click",function(){return t.switchToRootSystem(t.RootSystems.B2)}),At(12,"img",7),he(13,"small",5),ht(14,"B2"),be()(),he(15,"div",3),Et("click",function(){return t.switchToRootSystem(t.RootSystems.G2)}),At(16,"img",8),he(17,"small",5),ht(18,"G2"),be()()()()()),2&e&&(Le(3),ai("selected","A1"==t.getSelectedRootSystem()),Le(4),ai("selected","A2"==t.getSelectedRootSystem()),Le(4),ai("selected","B2"==t.getSelectedRootSystem()),Le(4),ai("selected","G2"==t.getSelectedRootSystem()))},styles:["@media (max-width: 1000px){#switch-panel-container[_ngcontent-%COMP%]{left:auto!important;right:16px!important;width:max-content!important;justify-content:flex-end!important}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]{justify-content:flex-end}}@media (max-width: 750px){#switch-panel-container[_ngcontent-%COMP%]{width:calc(100% - 32px)!important;inset:auto 16px 80px!important;justify-content:center!important}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr!important;grid-auto-flow:row!important}}@media (max-width: 550px){#switch-panel-container[_ngcontent-%COMP%]{bottom:130px!important}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr!important;grid-auto-flow:row!important}}@media (max-width: 450px){#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr!important}}#switch-panel-container[_ngcontent-%COMP%]{left:0;top:0;width:100%;display:grid;justify-content:center;padding-top:16px;position:absolute;pointer-events:none}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]{pointer-events:all;padding:12px;box-sizing:border-box;height:max-content;background-color:#fff;border-radius:8px;shadow:var(--light-shadow);display:grid;align-content:flex-start;justify-content:center}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-auto-flow:column;grid-gap:8px}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]{padding:15px;border:var(--border-thin);border-radius:4px;display:grid;justify-content:center;align-content:center;align-items:center;transition:.15s all ease-in-out;cursor:pointer;position:relative;height:72px;box-sizing:border-box}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item.selected[_ngcontent-%COMP%], #switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .root-system-image[_ngcontent-%COMP%]{position:relative;top:-6px;width:40px}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .root-system-title[_ngcontent-%COMP%]{font-size:11px;font-weight:600;position:absolute;bottom:4px;color:var(--text-light);text-align:center;width:100%}"]});const lDe=["input"],cDe=["label"],uDe=["*"],dDe=new bt("mat-checkbox-default-options",{providedIn:"root",factory:BH});function BH(){return{color:"accent",clickAction:"check-indeterminate"}}const hDe={provide:Ps,useExisting:$n(()=>v0),multi:!0};class fDe{}let pDe=0;const VH=BH(),mDe=bU(_U(yU(O1e(class{constructor(n){this._elementRef=n}}))));let gDe=(()=>{class n extends mDe{constructor(t,r,i,o,s,a,l){super(r),this._changeDetectorRef=i,this._ngZone=o,this._animationMode=a,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new pr,this.indeterminateChange=new pr,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||VH,this.color=this.defaultColor=this._options.color||VH.color,this.tabIndex=parseInt(s)||0,this.id=this._uniqueId=`${t}${++pDe}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=us(t)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const r=us(t);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const r=us(t);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const r=t!=this._indeterminate;this._indeterminate=us(t),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let r=this._currentCheckState,i=this._getAnimationTargetElement();if(r!==t&&i&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,r){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const r=this._inputElement;r&&(r.nativeElement.indeterminate=t)}}return n.\u0275fac=function(t){v_()},n.\u0275dir=tn({type:n,viewQuery:function(t,r){if(1&t&&(po(lDe,5),po(cDe,5),po(kD,5)),2&t){let i;ki(i=Li())&&(r._inputElement=i.first),ki(i=Li())&&(r._labelElement=i.first),ki(i=Li())&&(r.ripple=i.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[zn]}),n})(),v0=(()=>{class n extends gDe{constructor(t,r,i,o,s,a){super("mat-mdc-checkbox-",t,r,i,o,s,a),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(t){const r=new fDe;return r.source=this,r.checked=t,r}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_preventBubblingFromLabel(t){t.target&&this._labelElement.nativeElement.contains(t.target)&&t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(Me(ni),Me(rs),Me(Zn),fd("tabindex"),Me(Mf,8),Me(dDe,8))},n.\u0275cmp=Dr({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(t,r){2&t&&(vM("id",r.id),zo("tabindex",null)("aria-label",null)("aria-labelledby",null),ai("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mdc-checkbox--disabled",r.disabled)("mat-mdc-checkbox-disabled",r.disabled)("mat-mdc-checkbox-checked",r.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[Tr([hDe]),zn],ngContentSelectors:uDe,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[3,"for"],["label",""]],template:function(t,r){if(1&t&&(lg(),he(0,"div",0),Et("click",function(o){return r._preventBubblingFromLabel(o)}),he(1,"div",1,2)(3,"div",3),Et("click",function(){return r._onInputClick()}),be(),he(4,"input",4,5),Et("blur",function(){return r._onBlur()})("click",function(){return r._onInputClick()})("change",function(o){return r._onInteractionEvent(o)}),be(),At(6,"div",6),he(7,"div",7),function uI(){Mn.lFrame.currentNamespace="svg"}(),he(8,"svg",8),At(9,"path",9),be(),function dI(){!function I9(){Mn.lFrame.currentNamespace=null}()}(),At(10,"div",10),be(),At(11,"div",11),be(),he(12,"label",12,13),cg(14),be()()),2&t){const i=E_(2);ai("mdc-form-field--align-end","before"==r.labelPosition),Le(4),ai("mdc-checkbox--selected",r.checked),ot("checked",r.checked)("disabled",r.disabled)("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex),zo("aria-checked",r._getAriaChecked())("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby)("name",r.name)("value",r.value),Le(7),ot("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Le(1),ot("for",r.inputId)}},dependencies:[kD],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:not([disabled])~.mdc-checkbox__ripple{opacity:.04;transform:scale(1);transition:opacity 80ms 0 cubic-bezier(0, 0, 0.2, 1),transform 80ms 0 cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:not([disabled]):focus~.mdc-checkbox__ripple{opacity:.16}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__native-control:focus:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, black)}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),zH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({}),n})(),yDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ds,Ix,zH,ds,zH]}),n})();function bDe(n,e){if(1&n){const t=ho();he(0,"div",16)(1,"div",17)(2,"p",18),ht(3),be(),At(4,"div",19),be(),he(5,"div",20)(6,"mat-checkbox",21),Et("click",function(){const o=qr(t).$implicit;return $r(pn(2).toggleRootHighlight(o))}),be()(),he(7,"div",22)(8,"mat-checkbox",21),Et("click",function(){const o=qr(t).$implicit;return $r(pn(2).toggleHyperplane(o))}),be()()()}if(2&n){const t=e.$implicit,r=pn(2);Le(3),Jc(t.name),Le(1),Uo("background-color",r.getColor(t)),Le(2),ot("checked",r.rootHighlighted(t)),Le(2),ot("checked",r.hyperplaneToRootHighlighted(t))}}function xDe(n,e){if(1&n){const t=ho();he(0,"div")(1,"h4",7),ht(2,"Highlights"),be(),he(3,"mat-radio-group",8)(4,"div",9),Et("click",function(){qr(t);const i=pn();return $r(i.switchHighlightMode(i.RootSystemColorMode.base))}),At(5,"mat-radio-button",10),he(6,"p",11),ht(7,"Base"),be()(),he(8,"div",9),Et("click",function(){qr(t);const i=pn();return $r(i.switchHighlightMode(i.RootSystemColorMode.positiveRoots))}),At(9,"mat-radio-button",12),he(10,"p",11),ht(11,"Positive roots"),be()(),he(12,"div",9),Et("click",function(){qr(t);const i=pn();return $r(i.switchHighlightMode(i.RootSystemColorMode.highlight))}),At(13,"mat-radio-button",12),he(14,"p",11),ht(15,"Custom Highlight"),be()()(),At(16,"div",5),he(17,"h4",7),ht(18,"Highlight specific object"),be(),he(19,"div",13)(20,"div",14)(21,"div",15),At(22,"p"),he(23,"p"),ht(24,"Root (+,-)"),be(),he(25,"p"),ht(26,"Hyperplanes"),be()(),he(27,"div",16)(28,"div",17)(29,"p",18),ht(30,"All"),be(),At(31,"div",19),be(),he(32,"div",20)(33,"mat-checkbox",21),Et("click",function(){return qr(t),$r(pn().toggleAllRootsHighlighted())}),be()(),he(34,"div",22)(35,"mat-checkbox",21),Et("click",function(){return qr(t),$r(pn().toggleAllRootsHyperplanes())}),be()()(),Yn(36,bDe,9,5,"div",23),be()(),At(37,"div",5),he(38,"h4",7),ht(39,"Show Weights"),be(),he(40,"div",24),Et("click",function(){return qr(t),$r(pn().toggleDominantWeights())}),At(41,"mat-checkbox",12),he(42,"div",25)(43,"p"),ht(44,"Show integral weights"),be(),he(45,"small",26),ht(46,"Hint: Select one of the dominant integral elements to highlight the weights occuring in the representation with the selected weight as the highest weight"),be()()()()}if(2&n){const t=pn();Le(5),ot("checked",t.getCurrentColorMode()==t.RootSystemColorMode.base)("value",t.RootSystemColorMode.base),Le(4),ot("checked",t.getCurrentColorMode()==t.RootSystemColorMode.positiveRoots),Le(4),ot("checked",t.getCurrentColorMode()==t.RootSystemColorMode.highlight),Le(20),ot("checked",t.allRootsHighlighted()),Le(2),ot("checked",t.allHyperplanesHighlighted()),Le(1),ot("ngForOf",t.roots),Le(5),ot("checked",t.showDominantWeights)}}class _0{constructor(e,t,r){this.rootSystemService=e,this.rootSystemPainter=t,this.cd=r,this.RootSystemColorMode=To,this.rootSystemColors=[],this.Colors=K,this.isExpanded=!0,this.rootListForDisplay=[],this.isAffineRootSystem=!1,this.showDominantWeights=!1,this.rootSystemService.repaintEvent.subscribe(()=>{this.rootSystemColors=yr[e.rootSystem.type],this.roots=this.rootSystemService.getPositiveRoots(),this.showDominantWeights=this.rootSystemPainter.showDominantWeights,this.cd.detectChanges()}),this.rootSystemColors=yr[e.rootSystem.type],this.roots=this.rootSystemService.getPositiveRoots(),window.innerWidth<1e3&&(this.isExpanded=!1)}toggleExpand(){this.isExpanded=!this.isExpanded}ngOnInit(){}switchHighlightMode(e){this.rootSystemPainter.switchColorMode(e)}switchAffineVersion(e){this.isAffineRootSystem=e,this.rootSystemPainter.switchVersion(this.isAffineRootSystem)}toggleRootHighlight(e){this.rootSystemPainter.rootIsHighlighted(e)?this.rootSystemPainter.removeHighlightFromRoot(e):this.rootSystemPainter.highlightRoot(e)}toggleDominantWeights(){this.showDominantWeights=!this.showDominantWeights,this.rootSystemPainter.setDisplayStateOfDominantWeights(this.showDominantWeights)}hyperplaneToRootHighlighted(e){return this.rootSystemPainter.hyperplaneToRootHighlighted(e)}rootHighlighted(e){return this.rootSystemPainter.rootIsHighlighted(e)}getPositiveRoots(){return this.rootSystemService.rootSystem.getPositiveRoots()}toggleHyperplane(e){this.rootSystemPainter.hyperplaneToRootHighlighted(e)?this.rootSystemPainter.removeHighlightOfHyperplaneToRoot(e):this.rootSystemPainter.highlightHyperplaneToRoot(e)}allRootsHighlighted(){return this.rootSystemPainter.allRootsHighlighted()}allHyperplanesHighlighted(){return this.rootSystemPainter.allHyperplanesHighlighted()}toggleAllRootsHighlighted(){this.allRootsHighlighted()?this.rootSystemPainter.clearRootHighlight():(this.rootSystemPainter.highlightAllRoots(),this.rootSystemPainter.switchColorMode(To.highlight))}toggleAllRootsHyperplanes(){this.allHyperplanesHighlighted()?this.rootSystemPainter.clearHyperplaneHighlight():this.rootSystemPainter.highlightAllHyperplanes()}getColor(e){return this.rootSystemColors[this.roots.findIndex(t=>t.equal(e))]}getCurrentColorMode(){return this.rootSystemPainter.colorMode}getDividedRootListForDisplay(){let e=[],t=0,r=-1;for(;t<=this.roots.length-1;)t%10==0&&t!=this.roots.length-1&&(r+=1,e.push([])),e[r].push(this.roots[t]),t+=1;return e}}function wDe(n,e){if(1&n&&(he(0,"p"),ht(1),be()),2&n){const t=e.$implicit;Le(1),Jc(t)}}function MDe(n,e){if(1&n){const t=ho();he(0,"div"),At(1,"div",19),he(2,"p",20),ht(3,"Have Weyl Group act on:"),be(),he(4,"div",21)(5,"div",22)(6,"mat-checkbox",23),Et("click",function(){return qr(t),$r(pn().toggleObjectActedOn("ROOTS"))}),be(),he(7,"p",24),ht(8,"Roots"),be()(),he(9,"div",22)(10,"mat-checkbox",23),Et("click",function(){return qr(t),$r(pn().toggleObjectActedOn("WEYL_CHAMBERS"))}),be(),he(11,"p",24),ht(12,"Weyl Chambers"),be()(),he(13,"div",22)(14,"mat-checkbox",23),Et("click",function(){return qr(t),$r(pn().toggleObjectActedOn("HYPERPLANES"))}),be(),he(15,"p",24),ht(16,"Hyperplanes"),be()()()()}if(2&n){const t=pn();Le(6),ot("checked",t.transformationAppliedTo("ROOTS")),Le(4),ot("checked",t.transformationAppliedTo("WEYL_CHAMBERS")),Le(4),ot("checked",t.transformationAppliedTo("HYPERPLANES"))}}function CDe(n,e){if(1&n&&(he(0,"p",37),ht(1),be()),2&n){const t=pn().$implicit;Le(1),fo(" \u27c2 ",t.root.name," ")}}function SDe(n,e){if(1&n&&(he(0,"p",37),ht(1),be()),2&n){const t=pn().$implicit;Le(1),fo(" \u27c2 ",t.root.name," ")}}function EDe(n,e){if(1&n){const t=ho();he(0,"div",33),Et("click",function(){const o=qr(t).$implicit;return $r(pn(2).applyAffineReflection(o.root,o.hyperplane))}),he(1,"div",34),Yn(2,CDe,2,1,"p",35),Yn(3,SDe,2,1,"p",35),At(4,"div",36),be()()}if(2&n){const t=e.$implicit,r=pn(2);Le(2),ot("ngIf",!t.root.isHighestRoot),Le(1),ot("ngIf",t.root.isHighestRoot),Le(1),Uo("background-color",r.getColor(t.root))}}function DDe(n,e){1&n&&(he(0,"p",38),ht(1," (None applied) "),be())}function ADe(n,e){if(1&n&&(he(0,"div",39)(1,"div",34)(2,"p",37),ht(3),be(),At(4,"div",36),be()()),2&n){const t=e.$implicit,r=pn(2);Le(3),fo("\u27c2 ",t.name,""),Le(1),Uo("background-color",r.getColor(t))}}function TDe(n,e){if(1&n){const t=ho();he(0,"div")(1,"p",20),ht(2,"Apply affine reflection:"),be(),he(3,"p",25),ht(4,"Base:"),be(),he(5,"div",26),Yn(6,EDe,5,4,"div",27),be(),he(7,"div",28)(8,"p",20),ht(9,"Applied affine reflections:"),be(),Yn(10,DDe,2,0,"p",29),he(11,"div",30),Yn(12,ADe,5,3,"div",31),be(),he(13,"div",32),Et("click",function(){return qr(t),$r(pn().resetAffineTransformation())}),ht(14," Reset "),be()()()}if(2&n){const t=pn();Le(6),ot("ngForOf",t.getAffineReflectionBase()),Le(4),ot("ngIf",0==t.rootsToAffineMirrorings.length),Le(2),ot("ngForOf",t.rootsToAffineMirrorings)}}function IDe(n,e){if(1&n){const t=ho();he(0,"div",33),Et("click",function(){const o=qr(t).$implicit;return $r(pn(2).mirrorWithRoot(o))}),he(1,"div",34)(2,"p",37),ht(3),be(),At(4,"div",36),be()()}if(2&n){const t=e.$implicit,r=pn(2);Le(3),fo("\u27c2 ",t.name,""),Le(1),Uo("background-color",r.getColor(t))}}function PDe(n,e){if(1&n){const t=ho();he(0,"div",33),Et("click",function(){const o=qr(t).$implicit;return $r(pn(2).mirrorWithRoot(o))}),he(1,"div",34)(2,"p",37),ht(3),be(),At(4,"div",36),be()()}if(2&n){const t=e.$implicit,r=pn(2);Le(3),fo("\u27c2 ",t.name,""),Le(1),Uo("background-color",r.getColor(t))}}function ODe(n,e){1&n&&(he(0,"p",38),ht(1," (None applied) "),be())}function NDe(n,e){if(1&n){const t=ho();he(0,"div",33),Et("click",function(){const o=qr(t).$implicit;return $r(pn(2).mirrorWithRoot(o))}),he(1,"div",34)(2,"p",37),ht(3),be(),At(4,"div",36),be()()}if(2&n){const t=e.$implicit,r=pn(2);Le(3),fo("\u27c2 ",t.name,""),Le(1),Uo("background-color",r.getColor(t))}}function RDe(n,e){if(1&n&&(he(0,"p",41),ht(1),be()),2&n){const t=pn(2);Le(1),fo(" (Length: ",t.getLength(),") ")}}function FDe(n,e){if(1&n){const t=ho();he(0,"div")(1,"p",20),ht(2,"Mirror at hyperplane orthogonal to root:"),be(),he(3,"p",25),ht(4,"Base:"),be(),he(5,"div",26),Yn(6,IDe,5,3,"div",27),be(),he(7,"p",25),ht(8,"Other positive roots:"),be(),he(9,"div",26),Yn(10,PDe,5,3,"div",27),be(),he(11,"div",28)(12,"p",20),ht(13,"Applied relections:"),be(),Yn(14,ODe,2,0,"p",29),he(15,"div",30),Yn(16,NDe,5,3,"div",27),be(),Yn(17,RDe,2,1,"p",40),he(18,"div",32),Et("click",function(){return qr(t),$r(pn().resetTransformations())}),ht(19,"Reset"),be()()()}if(2&n){const t=pn();Le(6),ot("ngForOf",t.getBase()),Le(4),ot("ngForOf",t.getPositiveRootsWithoutBase()),Le(4),ot("ngIf",0==t.rootsToAppliedMirrorings.length),Le(2),ot("ngForOf",t.rootsToAppliedMirrorings),Le(1),ot("ngIf",0!=t.rootsToAppliedMirrorings.length)}}_0.\u0275fac=function(e){return new(e||_0)(Me(Qs),Me(Ku),Me(rs))},_0.\u0275cmp=Dr({type:_0,selectors:[["app-object-selector2-d"]],decls:8,vars:3,consts:[["id","object-selector-panel"],["id","expand-button"],[3,"fontIcon","click"],["id","heading"],["id","inner-content"],[1,"divider"],[4,"ngIf"],[1,"subsection-heading"],["id","type-selection-container"],[1,"switch-mode-item",3,"click"],[3,"checked","value"],[1,"switch-mode-text"],[3,"checked"],["id","highlight-table"],[1,"highlight-table-column"],[1,"highlight-table-header"],[1,"object-highlight-item"],[1,"root-vector"],[1,"root-vector-text"],[1,"root-vector-background"],[1,"highlight-toggle"],[3,"checked","click"],[1,"hyperplane-toggle"],["class","object-highlight-item",4,"ngFor","ngForOf"],["id","weight-toggle-element",3,"click"],["id","weight-text-container"],["id","weight-hint"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"button",1)(2,"mat-icon",2),Et("click",function(){return t.toggleExpand()}),be()(),he(3,"h3",3),ht(4,"Objects & Selection"),be(),he(5,"div",4),At(6,"div",5),Yn(7,xDe,47,8,"div",6),be()()),2&e&&(Le(2),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(3),ot("@expanded",t.isExpanded),Le(2),ot("ngIf",!t.isAffineRootSystem))},dependencies:[tu,nu,v0,Hu,fA,qx],styles:["@media (max-width: 550px){#object-selector-panel[_ngcontent-%COMP%]{max-width:calc(100% - 32px)!important;width:100%!important;left:16px!important;bottom:8px!important}}#object-selector-panel[_ngcontent-%COMP%]{min-width:310px;position:absolute;left:16px;bottom:16px;width:max-content;padding:16px;box-sizing:border-box;background-color:#fff;border-radius:8px;shadow:var(--light-shadow);display:grid;align-content:flex-start;justify-content:stretch;align-items:flex-start;max-width:calc(50vw - 30px);z-index:100;height:max-content;max-height:calc(100vh - 50px);overflow-y:auto}#object-selector-panel[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 8px;padding:0;color:var(--text-dark)}#object-selector-panel[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin:0;padding:0;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   .subsection-heading[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0;padding:0;color:var(--text-medium)}#object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #version-switch-container[_ngcontent-%COMP%]{padding:8px 0;display:grid;grid-template-rows:max-content}#object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-version-item[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #version-switch-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #version-switch-container[_ngcontent-%COMP%]   .switch-version-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:center;cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%]   .switch-mode-text[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%]   .switch-version-text[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-version-item[_ngcontent-%COMP%]   .switch-mode-text[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-version-item[_ngcontent-%COMP%]   .switch-version-text[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #version-switch-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%]   .switch-mode-text[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #version-switch-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%]   .switch-version-text[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #version-switch-container[_ngcontent-%COMP%]   .switch-version-item[_ngcontent-%COMP%]   .switch-mode-text[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #version-switch-container[_ngcontent-%COMP%]   .switch-version-item[_ngcontent-%COMP%]   .switch-version-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:600;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:4px 0 12px;width:100%;background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   #highlight-table[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-column[_ngcontent-%COMP%]{grid-template-rows:repeat(8,max-content);row-gap:4px;grid-auto-flow:column;padding-left:16px}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-column[_ngcontent-%COMP%]:not(#object-selector-panel   .highlight-table-column[_ngcontent-%COMP%]:first-of-type){border-left:var(--border-thin)}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-header[_ngcontent-%COMP%]{margin-top:8px;display:grid;grid-template-columns:70px 64px 128px;justify-items:center}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);padding:0;margin:0;font-size:13px;font-weight:600}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:70px 78px 128px;align-items:center}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]{position:relative;height:max-content;width:78px;display:grid;justify-content:center}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-text[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;font-size:14px;padding:4px;margin:0;cursor:pointer;font-weight:500}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-background[_ngcontent-%COMP%]{opacity:.6;position:absolute;top:0;left:0;height:100%;width:100%;border-radius:4px}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .highlight-toggle[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .hyperplane-toggle[_ngcontent-%COMP%]{justify-self:center}#object-selector-panel[_ngcontent-%COMP%]   #weight-toggle-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:flex-start;cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #weight-toggle-element[_ngcontent-%COMP%]   #weight-text-container[_ngcontent-%COMP%]{max-width:250px;padding-top:8px}#object-selector-panel[_ngcontent-%COMP%]   #weight-toggle-element[_ngcontent-%COMP%]   #weight-text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-dark);font-weight:600;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   #weight-toggle-element[_ngcontent-%COMP%]   #weight-text-container[_ngcontent-%COMP%]   #weight-hint[_ngcontent-%COMP%]{font-size:12px;color:var(--text-light);font-weight:600;margin:0;line-height:.7em;padding:0;font-style:italic}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]},changeDetection:0});const kDe=function(n,e,t){return{matrix3:n,matrix2:e,matrix1:t}};class y0{constructor(e,t,r,i,o){this.rootSystemService=e,this.rootSystemPainter=t,this.cd=r,this.transformService=i,this.affinePainter=o,this.rootSystemColors=[],this.rootsToAppliedMirrorings=[],this.rootsToAffineMirrorings=[],this.isExpanded=!0,this.moreInformationShown=!1,this.isAffineVersion=!1,this.rootSystemService.repaintEvent.subscribe(()=>{this.isAffineVersion=t.showAffineVersion,this.resetTransformations(),this.rootSystemColors=yr[e.rootSystem.type],this.roots=this.getRoots(),this.resetAffineTransformation(),r.detectChanges()}),this.transformService.transformationChanged.subscribe(()=>{this.getAppliedMirrorings(),this.cd.detectChanges()}),this.roots=this.getRoots(),this.rootSystemColors=yr[e.rootSystem.type],window.innerWidth<1e3&&(this.isExpanded=!1)}toggleExpand(){this.isExpanded=!this.isExpanded}toggleMoreInformation(){this.moreInformationShown=!this.moreInformationShown}toggleObjectActedOn(e){this.transformService.transformationAppliedTo(e)?this.transformService.removeTransformedObjectType(e):this.transformService.addTransformedObjectType(e),this.cd.detectChanges()}transformationAppliedTo(e){return this.transformService.transformationAppliedTo(e)}getRoots(){return this.rootSystemService.rootSystem.getPositiveRoots()}getPositiveRootsWithoutBase(){return this.getRoots().filter(e=>!e.isSimple)}getCoxeterMatrix(){return this.rootSystemService.rootSystem.getCoxeterMatrix()}getWeylGroupOrder(){return this.rootSystemService.rootSystem.orderOfWeylGroup}getBase(){return this.rootSystemService.getBase()}getColor(e){return this.rootSystemColors[this.roots.findIndex(t=>t.equal(e))]}getLength(){return this.rootSystemService.rootSystem.getLengthOfTransformation(this.transformService.currentTranformation)}mirrorWithRoot(e){this.transformService.mirrorOnPlaneOfRoot(e)}getAppliedMirrorings(){this.rootsToAppliedMirrorings=[...this.transformService.appliedMirrorings].reverse()}resetTransformations(){this.transformService.resetTransformation()}resetAffineTransformation(){this.affinePainter.resetReflection(),this.getAppliedReflections(),this.cd.detectChanges()}getAffineReflectionBase(){return this.rootSystemService.getAffineReflectionBase()}applyAffineReflection(e,t){this.affinePainter.addReflection(e,t),this.getAppliedReflections(),this.cd.detectChanges()}getAppliedReflections(){this.rootsToAffineMirrorings=this.affinePainter.appliedReflections.map(e=>e.root)}}y0.\u0275fac=function(e){return new(e||y0)(Me(Qs),Me(Ku),Me(rs),Me(Vc),Me(bh))},y0.\u0275cmp=Dr({type:y0,selectors:[["app-object-transformer-panel2-d"]],decls:30,vars:14,consts:[["id","object-selector-panel"],["id","heading"],["id","expand-button"],[3,"fontIcon","click"],["id","inner-content"],["id","more-information",3,"click"],["id","more-information-header"],["id","more-information-text"],["id","more-information-toggle-button"],[3,"fontIcon"],["id","content-wrapper"],["id","information-container"],[1,"information-item"],[1,"information-item-text"],[3,"ngClass"],[1,"matrix-bracket-left"],[4,"ngFor","ngForOf"],[1,"matrix-bracket-right"],[4,"ngIf"],[1,"divider"],[1,"description-text"],["id","action-on-table"],[1,"action-object"],[3,"checked","click"],[1,"action-object-text"],[1,"sub-description-text"],[1,"mirror-root-container"],["class","mirror-root-item",3,"click",4,"ngFor","ngForOf"],[1,"applied-mirrorings-container"],["class","reflection-placeholder-text",4,"ngIf"],[1,"mirrorings"],["class","mirror-root-item",4,"ngFor","ngForOf"],[1,"reset-button",3,"click"],[1,"mirror-root-item",3,"click"],[1,"root-vector"],["class","root-vector-text",4,"ngIf"],[1,"root-vector-background"],[1,"root-vector-text"],[1,"reflection-placeholder-text"],[1,"mirror-root-item"],["id","length-text",4,"ngIf"],["id","length-text"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"h3",1),ht(2,"Transform"),be(),he(3,"button",2)(4,"mat-icon",3),Et("click",function(){return t.toggleExpand()}),be()(),he(5,"div",4)(6,"div",5),Et("click",function(){return t.toggleMoreInformation()}),he(7,"div",6)(8,"h5",7),ht(9,"More Information"),be(),he(10,"button",8),At(11,"mat-icon",9),be()(),he(12,"div",10)(13,"div",11)(14,"div",12)(15,"p",13),ht(16,"Coxeter Matrix"),be(),he(17,"div",14)(18,"div",15),ht(19,"["),be(),Yn(20,wDe,2,1,"p",16),he(21,"div",17),ht(22,"]"),be()()(),he(23,"div",12)(24,"p",13),ht(25),be()()()()(),Yn(26,MDe,17,3,"div",18),At(27,"div",19),Yn(28,TDe,15,3,"div",18),Yn(29,FDe,20,5,"div",18),be()()),2&e&&(Le(4),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(1),ot("@expanded",t.isExpanded),Le(6),ot("fontIcon",t.moreInformationShown?"expand_less":"expand_more"),Le(2),ot("@expanded",t.moreInformationShown),Le(4),ot("ngClass",rN(10,kDe,9==t.getCoxeterMatrix().length,4==t.getCoxeterMatrix().length,1==t.getCoxeterMatrix().length)),Le(3),ot("ngForOf",t.getCoxeterMatrix()),Le(5),fo("Order of Weyl Group: ",t.getWeylGroupOrder(),""),Le(1),ot("ngIf",!t.isAffineVersion),Le(2),ot("ngIf",t.isAffineVersion),Le(1),ot("ngIf",!t.isAffineVersion))},dependencies:[CR,tu,nu,v0,Hu],styles:["@media (max-width: 550px){#object-selector-panel[_ngcontent-%COMP%]{max-width:calc(100% - 32px)!important;width:100%!important;left:16px!important;bottom:70px!important}}#object-selector-panel[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:16px;z-index:10;height:max-content;max-height:calc(100vh - 130px);overflow-y:auto;width:400px;padding:16px;box-sizing:border-box;background-color:#fff;border-radius:8px;shadow:var(--light-shadow);display:grid;align-content:flex-start;justify-content:stretch;align-items:flex-start;max-width:calc(50vw - 30px)}#object-selector-panel[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 6px;padding:0;color:var(--text-dark)}#object-selector-panel[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin:0;padding:0;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   .subsection-heading[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0;padding:0;color:var(--text-medium)}#object-selector-panel[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:8px 0 0;padding:0;color:var(--text-dark)}#object-selector-panel[_ngcontent-%COMP%]   #length-text[_ngcontent-%COMP%]{font-size:14px;font-style:italic;font-weight:500;color:var(--text-light);display:block;width:100%;box-sizing:border-box;text-align:right;padding-right:8px}#object-selector-panel[_ngcontent-%COMP%]   .reflection-placeholder-text[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--text-light);padding:0;margin:0}#object-selector-panel[_ngcontent-%COMP%]   .sub-description-text[_ngcontent-%COMP%]{color:var(--text-light);margin:0;font-size:13px;font-weight:600;padding:0}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]{background-color:var(--purple-light);padding:8px;margin-top:8px;border-radius:4px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #more-information-header[_ngcontent-%COMP%]{position:relative;display:grid;align-content:center;align-items:center;height:24px;border:1px solid var(--purple-light);cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #more-information-header[_ngcontent-%COMP%]   #more-information-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:700;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #more-information-header[_ngcontent-%COMP%]   #more-information-toggle-button[_ngcontent-%COMP%]{right:12px;position:absolute;top:0;border:none;background-color:transparent;border-radius:50%;height:16px;width:16px;color:var(--text-medium);cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]{overflow:hidden}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(2,max-content);justify-content:flex-start;row-gap:12px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]{display:grid;justify-items:flex-start}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .information-item-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-dark);font-weight:700}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1[_ngcontent-%COMP%]{display:grid;grid-template-columns:16px 16px 16px;column-gap:6px;position:relative;margin-left:14px;box-sizing:border-box;width:max-content}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3.matrix2[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2.matrix2[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1.matrix2[_ngcontent-%COMP%]{grid-template-columns:16px 16px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3.matrix2[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3.matrix2[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2.matrix2[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2.matrix2[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1.matrix2[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1.matrix2[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%]{font-size:42px;top:-12px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3.matrix1[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2.matrix1[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1.matrix1[_ngcontent-%COMP%]{grid-template-columns:16px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3.matrix1[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3.matrix1[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2.matrix1[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2.matrix1[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1.matrix1[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1.matrix1[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%]{font-size:24px;top:-8px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%]{position:absolute;font-size:62px;left:-16px;margin:0;padding:0;top:-18px;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%]{position:absolute;font-size:62px;right:-16px;margin:0;padding:0;top:-18px;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;display:block;font-size:13px;color:var(--text-dark);font-weight:700;text-align:center}#object-selector-panel[_ngcontent-%COMP%]   #action-on-table[_ngcontent-%COMP%]{padding:0;display:grid;grid-template-rows:max-content}#object-selector-panel[_ngcontent-%COMP%]   #action-on-table[_ngcontent-%COMP%]   .action-object[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:center}#object-selector-panel[_ngcontent-%COMP%]   #action-on-table[_ngcontent-%COMP%]   .action-object[_ngcontent-%COMP%]   .action-object-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:600;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   #option-container[_ngcontent-%COMP%]{padding:8px 0;display:grid;grid-template-rows:max-content}#object-selector-panel[_ngcontent-%COMP%]   #option-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:center}#object-selector-panel[_ngcontent-%COMP%]   #option-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   .option-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:500;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:8px 0 12px;width:100%;background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-container[_ngcontent-%COMP%]{width:100%;padding:4px 0;margin-bottom:4px;display:grid;grid-template-columns:repeat(auto-fill,90px);grid-gap:8px}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]{position:relative;height:max-content;width:90px;display:grid;justify-content:center}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-text[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;font-size:14px;padding:4px;margin:0;cursor:pointer;font-weight:500}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-background[_ngcontent-%COMP%]{opacity:.6;position:absolute;top:0;left:0;height:100%;width:100%;border-radius:4px}#object-selector-panel[_ngcontent-%COMP%]   .applied-mirrorings-container[_ngcontent-%COMP%]   .mirrorings[_ngcontent-%COMP%]{margin-top:4px;display:grid;grid-template-columns:repeat(auto-fill,90px);grid-gap:8px}#object-selector-panel[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{background-color:var(--background-color);color:#fff;padding:8px 16px;font-weight:600;font-size:12px;border:none;border-radius:4px;cursor:pointer;width:max-content;margin-top:12px}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]},changeDetection:0});const LDe=["paintContainer"],BDe=["paintContainerLayer0"],VDe=["paintContainerLayer1"],zDe=["paintContainerLayer2"],UDe=["paintContainerLayer3"],HDe=["paintContainerLayer4"];class ym{constructor(e,t,r,i,o,s,a){this.canvas=e,this.gridPainter=t,this.rootSystemPainter=r,this.weylChamberPainter=i,this.weightPainter=o,this.rootSystemService=s,this.transformService=a,this.pixelsInOneUnit=130,this.offsetTop=0,window.innerWidth<750&&(this.pixelsInOneUnit=100,this.offsetTop=-80),window.innerHeight<700&&window.innerWidth<750&&(this.offsetTop=-90),window.innerHeight<700&&window.innerWidth<680&&(this.offsetTop=-140),window.innerHeight<600&&window.innerWidth<680&&(this.pixelsInOneUnit=65,this.offsetTop=-140),addEventListener("resize",l=>{window.innerWidth<750?(this.pixelsInOneUnit=100,this.offsetTop=-80):(this.pixelsInOneUnit=130,this.offsetTop=0),window.innerHeight<700&&window.innerWidth<750&&(this.offsetTop=-90),window.innerHeight<700&&window.innerWidth<680&&(this.pixelsInOneUnit=80,this.offsetTop=-140),window.innerHeight<600&&window.innerWidth<680&&(this.pixelsInOneUnit=65,this.offsetTop=-140),this.repaintObjects()}),s.repaintEvent.subscribe(()=>{this.repaintObjects()}),r.repaintEvent.subscribe(()=>{this.repaintObjects()}),this.transformService.transformationChanged.subscribe(()=>{this.repaintObjects()}),this.weightPainter.repaintEvent.subscribe(()=>{this.repaintObjects()})}ngOnInit(){}ngAfterViewInit(){this.initializeCanvas(),this.paintObjects()}repaintObjects(){null!=this.paintSvgContainer&&(this.clearCanvas(),this.initializeCanvas(),this.paintObjects())}paintObjects(){this.rootSystemPainter.showAffineVersion||this.gridPainter.paint(jn.layer0),this.rootSystemPainter.showAffineVersion||this.weylChamberPainter.paint(jn.layer1),this.rootSystemPainter.paint(jn.layer4),this.rootSystemPainter.showDominantWeights&&this.weightPainter.paint(jn.layer4)}clearCanvas(){null!=this.paintSvgContainer&&this.paintSvgContainer.remove()}initializeCanvas(){if(null==this.paintContainer)return;const e=document.body.clientHeight-4,t=document.body.clientWidth-1;this.paintSvgContainer=tDe().addTo(this.paintContainer.nativeElement).size(t,e);const r=[this.paintSvgContainer.nested().size(t,e),this.paintSvgContainer.nested().size(t,e),this.paintSvgContainer.nested().size(t,e),this.paintSvgContainer.nested().size(t,e),this.paintSvgContainer.nested().size(t,e)],i=new nDe({height:e,width:t,pixelsInOneUnit:this.pixelsInOneUnit,offsetTop:this.offsetTop});this.canvas.initializeCanvas(i),this.canvas.initializePaintLayers(r)}}ym.\u0275fac=function(e){return new(e||ym)(Me(Ul),Me(pm),Me(Ku),Me(_m),Me(vm),Me(Qs),Me(Vc))},ym.\u0275cmp=Dr({type:ym,selectors:[["app-root-systems2-d"]],viewQuery:function(e,t){if(1&e&&(po(LDe,5),po(BDe,5),po(VDe,5),po(zDe,5),po(UDe,5),po(HDe,5)),2&e){let r;ki(r=Li())&&(t.paintContainer=r.first),ki(r=Li())&&(t.layer0=r.first),ki(r=Li())&&(t.layer1=r.first),ki(r=Li())&&(t.layer2=r.first),ki(r=Li())&&(t.layer3=r.first),ki(r=Li())&&(t.layer4=r.first)}},decls:6,vars:0,consts:[["id","root-system-2d"],["id","paint-container"],["paintContainer",""]],template:function(e,t){1&e&&(he(0,"section",0),At(1,"div",1,2)(3,"app-switch-root-system-panel")(4,"app-object-selector2-d")(5,"app-object-transformer-panel2-d"),be())},dependencies:[g0,_0,y0],styles:["#root-system-2d[_ngcontent-%COMP%]{background-color:var(--background-color);overflow:hidden;height:100%;width:100%}#root-system-2d[_ngcontent-%COMP%]   .paint-layer[_ngcontent-%COMP%]{background-color:transparent;fill:transparent}"]});class al{constructor(){this.rootGroup=new vo,this.highlightedRootGroup=new vo,this.hyperplaneGroup=new vo,this.weylChamberGroup=new vo,this.reinitializedScene=new Tn,this.miniViewRootSystemGroup=new vo}initializeScene(e){this.canvasReference=e,this.scene=new kp,this.camera=new Oi(50,e.clientWidth/e.clientHeight,.1,1e3),this.renderer=new Fp({antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.rendererDom=this.renderer.domElement,e.appendChild(this.rendererDom),this.camera.position.set(-20,5,0),this.canvasReference.clientWidth<500&&(this.camera.position.set(-25,5,0),this.camera.updateProjectionMatrix()),this.canvasReference.clientHeight<700&&(this.camera.position.set(-30,5,0),this.camera.updateProjectionMatrix()),this.camera.updateProjectionMatrix(),this.addOrbitControls(),this.addComposer(),this.displayScene(),this.scene.add(this.rootGroup),this.scene.add(this.weylChamberGroup),this.scene.add(this.hyperplaneGroup),this.reactToMainSceneOrbitChange()}initializeMiniView(e){this.canvasReferenceMiniView=e,this.sceneMiniView=new kp,this.cameraMiniView=new Oi(50,e.clientWidth/e.clientHeight,.1,70),this.rendererMiniView=new Fp,this.rendererMiniView.setSize(e.clientWidth,e.clientHeight),this.rendererDomMiniView=this.rendererMiniView.domElement,e.appendChild(this.rendererDomMiniView),this.cameraMiniView.position.set(-20,5,0),this.displayMiniView(),this.startMiniViewDisplay(),this.sceneMiniView.add(this.miniViewRootSystemGroup),this.addOrbitControlsToMiniView(),this.reactToMainSceneOrbitChange()}addOrbitControlsToMiniView(){this.miniViewOrbitControls=new Dv(this.cameraMiniView,this.rendererMiniView.domElement),this.miniViewOrbitControls.enabled=!1}rerender(){this.renderer.render(this.scene,this.camera)}addToRootGroup(e){this.rootGroup.add(e),this.miniViewRootSystemGroup.add(e.clone())}addToWeylChamberGroup(e){this.weylChamberGroup.add(e),this.miniViewRootSystemGroup.add(e.clone())}addToHyperplaneGroup(e){this.hyperplaneGroup.add(e),this.miniViewRootSystemGroup.add(e.clone())}removeTransformations(){this.rootGroup.position.set(0,0,0),this.rootGroup.rotation.set(0,0,0),this.rootGroup.scale.set(1,1,1),this.rootGroup.updateMatrix(),this.hyperplaneGroup.position.set(0,0,0),this.hyperplaneGroup.rotation.set(0,0,0),this.hyperplaneGroup.scale.set(1,1,1),this.hyperplaneGroup.updateMatrix(),this.weylChamberGroup.position.set(0,0,0),this.weylChamberGroup.rotation.set(0,0,0),this.weylChamberGroup.scale.set(1,1,1),this.weylChamberGroup.updateMatrix()}setTransformations(e,t){this.removeTransformations(),t.includes("ROOTS")&&this.rootGroup.applyMatrix4(e),t.includes("HYPERPLANES")&&this.hyperplaneGroup.applyMatrix4(e),t.includes("WEYL_CHAMBERS")&&this.weylChamberGroup.applyMatrix4(e)}clearScene(){function e(t){for(;t.children.length>0;)e(t.children[0]),t.remove(t.children[0]);t.geometry&&t.geometry.dispose(),t.material&&(Object.keys(t.material).forEach(r=>{!t.material[r]||null!==t.material[r]&&"function"==typeof t.material[r].dispose&&t.material[r].dispose()}),t.material.dispose())}this.scene&&(e(this.scene),e(this.sceneMiniView))}reinitializeScene(){this.clearScene(),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.canvasReference.clientWidth,this.canvasReference.clientHeight),this.rootGroup=new vo,this.hyperplaneGroup=new vo,this.weylChamberGroup=new vo,this.miniViewRootSystemGroup=new vo,this.scene.add(this.rootGroup),this.scene.add(this.hyperplaneGroup),this.scene.add(this.weylChamberGroup),this.sceneMiniView.add(this.miniViewRootSystemGroup),this.startMiniViewDisplay(),this.startDisplay(),this.reinitializedScene.next()}startDisplay(){this.adjustBackgroundColor(K.purple800),this.addLight()}startMiniViewDisplay(){this.rendererMiniView.setClearColor(K.purple800);const e=new Xp(16777215,.8),t=new $p(16777215,.8);t.position.set(0,30,0),this.sceneMiniView.add(e),this.sceneMiniView.add(t)}displayMiniView(){requestAnimationFrame(()=>this.displayMiniView()),this.rendererMiniView.render(this.sceneMiniView,this.cameraMiniView)}displayScene(){requestAnimationFrame(()=>this.displayScene()),this.renderer.render(this.scene,this.camera)}adjustBackgroundColor(e){this.renderer.setClearColor(e)}addOrbitControls(){this.orbitControls=new Dv(this.camera,this.renderer.domElement),this.orbitControls.addEventListener("change",e=>{this.reactToMainSceneOrbitChange()})}reactToMainSceneOrbitChange(){if(null!=this.camera){var e=new q;this.camera.getWorldPosition(e),e.setLength(21.5),this.cameraMiniView.position.set(e.x,e.y,e.z),this.cameraMiniView.lookAt(new q(0,0,0))}}addComposer(){}addLight(){const e=new Xp(16777215,.8),t=new $p(16777215,.8);t.position.set(0,30,0),this.scene.add(e),this.scene.add(t)}}al.\u0275fac=function(e){return new(e||al)},al.\u0275prov=_t({token:al,factory:al.\u0275fac,providedIn:"root"});class Gl{constructor(e){this.dashed=!1,this.dashString="",this.start=e.start,this.end=e.end,this.color=e.color,this.width=e.width,this.dashed=null!=e.dashed&&e.dashed,this.dashString=null!=e.dashString?e.dashString:""}}class xh{constructor(e){this.center=e.center,this.radius=e.radius,this.color=e.color}get colorNumber(){return function jwe(n){return parseInt(n.replace("#","0x"),16)}(this.color)}}class wh{constructor(e){this.sceneManager=e,this.scaleFactor=5}drawSphere(e){const t=new Nu(e.radius*this.scaleFactor,32,16),r=new kl({color:e.colorNumber}),i=new _r(t,r);return i.position.set(e.center.x*this.scaleFactor,e.center.y*this.scaleFactor,e.center.z*this.scaleFactor),this.sceneManager.addToRootGroup(i),i}drawLine(e,t="ROOT"){const r=new q(e.end.x-e.start.x,e.end.y-e.start.y,e.end.z-e.start.z),i=new eh(2*e.width,2*e.width,r.length()*this.scaleFactor,32),o=new kl({color:e.color}),s=new _r(i,o);var a=new q(0,1,0);s.quaternion.setFromUnitVectors(a,r.clone().normalize()),s.position.copy(r.clone().multiplyScalar(.5*this.scaleFactor)),"HYPERPLANE"==t?this.sceneManager.addToHyperplaneGroup(s):"WEYL_CHAMBER"==t?this.sceneManager.addToWeylChamberGroup(s):this.sceneManager.addToRootGroup(s)}drawPlane(e,t="HYPERPLANE"){var r=new q(e.normalVector.x,e.normalVector.y,e.normalVector.z),i=new q(e.point.x,e.point.y,e.point.z),o=new ya;o.setFromNormalAndCoplanarPoint(r,i).normalize();var s=new Kd(9,9),a=new q;o.coplanarPoint(a);var l=(new q).copy(a).add(o.normal);s.lookAt(l),s.translate(a.x,a.y,a.z);var c=new kl({color:e.color,side:2,opacity:.65,transparent:!0}),u=new _r(s,c);"HYPERPLANE"==t?this.sceneManager.addToHyperplaneGroup(u):"WEYL_CHAMBER"==t?this.sceneManager.addToWeylChamberGroup(u):this.sceneManager.addToRootGroup(u)}drawWeylChamber(e){const t=a=>[a.x,a.y,a.z],r=a=>{const l=new Jn;l.setAttribute("position",new so(a,3));const c=new Nc({color:K.purple300,side:2,transparent:!0,opacity:.2}),u=new _r(l,c);c.polygonOffset=!0,c.polygonOffsetFactor=-.1,this.sceneManager.addToWeylChamberGroup(u)};let i=-1;const o=e.edgePoints,s=e.size;for(;i<e.edgePoints.length-1;)i+=1,this.drawLine(new Gl({start:e.centerPoint,end:o[i].stretchedBy(100),color:K.purple300,width:.05}),"WEYL_CHAMBER"),r(i==o.length-1?new Float32Array([...t(e.centerPoint),...t(o[i].stretchedBy(s)),...t(o[0].stretchedBy(s))]):new Float32Array([...t(e.centerPoint),...t(o[i].stretchedBy(s)),...t(o[i+1].stretchedBy(s))]))}}wh.\u0275fac=function(e){return new(e||wh)(Oe(al))},wh.\u0275prov=_t({token:wh,factory:wh.\u0275fac,providedIn:"root"});class jl{constructor(){this.rootSystem=Gu.A3,this.rootSystemChangeEvent=new Tn}setInitialRootSystem(e){this.rootSystem=e,this.rootSystemChangeEvent.next()}switchRootSystem(e){this.rootSystem=e,this.rootSystemChangeEvent.next()}}jl.\u0275fac=function(e){return new(e||jl)},jl.\u0275prov=_t({token:jl,factory:jl.\u0275fac,providedIn:"root"});class Qu{constructor(e){this.sceneManager=e,this.currentTranformation=(new Sn).identity(),this.appliedMirrorings=[],this.transformationChanged=new Tn,this.objectsTransformationActsOn=["ROOTS","WEYL_CHAMBERS"],e.reinitializedScene.subscribe(()=>{this.applyTransformation()})}transformationAppliedTo(e){return this.objectsTransformationActsOn.includes(e)}getCurrentTransformedObjects(){return this.objectsTransformationActsOn}addTransformedObjectType(e){this.objectsTransformationActsOn.push(e),this.transformationChanged.next(),this.applyTransformation()}removeTransformedObjectType(e){this.objectsTransformationActsOn=this.objectsTransformationActsOn.filter(t=>t!=e),this.transformationChanged.next(),this.applyTransformation()}resetTransformation(){this.appliedMirrorings=[],this.currentTranformation=(new Sn).identity(),this.clearTranformation(),this.transformationChanged.next()}clearTranformation(){this.sceneManager.removeTransformations()}applyTransformation(){this.sceneManager.setTransformations(this.currentTranformation,this.objectsTransformationActsOn),this.transformationChanged.next()}mirrorOnPlaneOfRoot(e){this.appliedMirrorings.push(e);const r=e.getHyperplane().normalVector.normalized(),i=(new io).fromArray([1-2*r.x*r.x,-2*r.x*r.y,-2*r.x*r.z,-2*r.x*r.y,1-2*r.y*r.y,-2*r.y*r.z,-2*r.x*r.z,-2*r.y*r.z,1-2*r.z*r.z]);this.currentTranformation=(new Sn).setFromMatrix3(i).multiply(this.currentTranformation),this.applyTransformation()}}Qu.\u0275fac=function(e){return new(e||Qu)(Oe(al))},Qu.\u0275prov=_t({token:Qu,factory:Qu.\u0275fac,providedIn:"root"});class Mh{constructor(e,t,r,i){this.painter=e,this.rootSystemService=t,this.sceneManager=r,this.transformServiece=i,this.colorMode=To.base,this.highlightedRoots=[],this.rootWithVisibleHyperplanes=[],this.rootSystem=Gu.A3,addEventListener("resize",o=>{this.repaint()}),this.rootSystem=t.rootSystem,this.rootSystemService.rootSystemChangeEvent.subscribe(()=>{this.rootSystemService.rootSystem.type!=this.rootSystem.type&&(this.clearRootHighlight(),this.clearHyperplaneVisibility()),this.repaint()})}repaint(){this.sceneManager.reinitializeScene(),this.rootSystem=this.rootSystemService.rootSystem,this.paint()}paint(){this.paintCenter(),this.paintRoots(),this.paintHyperplanes(),this.paintWeylChambers()}switchColorMode(e){this.colorMode=e,this.repaint()}highlightRoot(e){this.highlightedRoots.push(e),this.repaint()}removeHighlightFromRoot(e){this.highlightedRoots=this.highlightedRoots.filter(t=>!t.equal(e)),this.repaint()}showHyperplaneToRoot(e){this.rootWithVisibleHyperplanes.push(e),this.repaint()}hideHyperplaneToRoot(e){this.rootWithVisibleHyperplanes=this.rootWithVisibleHyperplanes.filter(t=>!t.equal(e)),this.repaint()}highlightAllRoots(){this.highlightedRoots=this.rootSystem.getPositiveRoots(),this.repaint()}clearRootHighlight(){this.highlightedRoots=[],this.repaint()}showAllHyperplanes(){this.rootWithVisibleHyperplanes=this.rootSystem.getPositiveRoots(),this.repaint()}allRootsHighlighted(){return this.highlightedRoots.length==this.rootSystem.getPositiveRoots().length}allHyperplanesVisible(){return this.rootWithVisibleHyperplanes.length==this.rootSystem.getPositiveRoots().length}clearHyperplaneVisibility(){this.rootWithVisibleHyperplanes=[],this.repaint()}rootIsHighlighted(e){return this.highlightedRoots.some(t=>t.equal(e))}hyperplaneToRootIsVisible(e){return this.rootWithVisibleHyperplanes.some(t=>t.equal(e))}paintCenter(){this.painter.drawSphere(new xh({center:new rn(0,0,0),radius:.1,color:K.white}))}paintAxis(){this.painter.drawLine(new Gl({start:new rn(100,0,0),end:new rn(-100,0,0),color:K.purple500,width:.03})),this.painter.drawLine(new Gl({start:new rn(-100,0,0),end:new rn(100,0,0),color:K.purple500,width:.03})),this.painter.drawLine(new Gl({start:new rn(0,-100,0),end:new rn(0,0,0),color:K.purple500,width:.03})),this.painter.drawLine(new Gl({start:new rn(0,100,0),end:new rn(0,0,0),color:K.purple500,width:.03})),this.painter.drawLine(new Gl({start:new rn(0,0,100),end:new rn(0,0,-100),color:K.purple500,width:.03})),this.painter.drawLine(new Gl({start:new rn(0,0,-100),end:new rn(0,0,100),color:K.purple500,width:.03}))}paintHyperplanes(){let e=0;const t=yr[this.rootSystem.type];for(let r of this.rootSystem.getPositiveRoots()){let i=r.getHyperplane();this.colorMode==To.highlight?(this.rootIsHighlighted(r)&&(i.color=t[e]),this.hyperplaneToRootIsVisible(r)&&this.painter.drawPlane(i)):this.hyperplaneToRootIsVisible(r)&&this.painter.drawPlane(i),e+=1}}paintRoots(){let e=0;for(let t of this.rootSystem.getPositiveRoots())this.paintRoot(t,e),this.paintRoot(t.getNegative(),e),e+=1}paintRoot(e,t){this.colorMode==To.base?this.paintRootWithBaseMarked(e):this.colorMode==To.positiveRoots?this.paintRootWithPositiveMarked(e):this.colorMode==To.highlight&&this.paintRootWithHighlight(e,t)}paintRootWithHighlight(e,t){const r=yr[this.rootSystem.type];let i=K.white;(this.rootIsHighlighted(e)||this.rootIsHighlighted(e.getNegative()))&&(i=r[t]),this.painter.drawSphere(new xh({center:e.getVector(),radius:.1,color:i})),this.painter.drawLine(new Gl({start:rn.getZero(),end:e.getVector(),width:.04,color:K.white}))}paintRootWithPositiveMarked(e){this.painter.drawSphere(new xh(e.isPositive?{center:e.getVector(),radius:.1,color:K.brightRed}:{center:e.getVector(),radius:.1,color:K.brightGreen})),this.painter.drawLine(new Gl({start:rn.getZero(),end:e.getVector(),width:.04,color:K.white}))}paintRootWithBaseMarked(e){this.painter.drawSphere(new xh(e.isSimple?{center:e.getVector(),radius:.1,color:K.brightRed}:{center:e.getVector(),radius:.1,color:K.brightGreen})),this.painter.drawLine(new Gl({start:rn.getZero(),end:e.getVector(),width:.04,color:K.white}))}paintWeylChambers(){const e=this.rootSystem.getFundamentalWeylChamber();this.painter.drawWeylChamber(e)}}Mh.\u0275fac=function(e){return new(e||Mh)(Oe(wh),Oe(jl),Oe(al),Oe(Qu))},Mh.\u0275prov=_t({token:Mh,factory:Mh.\u0275fac,providedIn:"root"});class bm{constructor(e,t,r,i){this.painter=e,this.rootSystemService=t,this.sceneManager=r,this.transformServiece=i}paint(){this.paintAffineHyperplanes()}paintAffineHyperplanes(){let e=this.rootSystemService.rootSystem.getRoots(),t=[];for(let a of e){t.push({root:a,hyperplanes:[]});const l=a.getHyperplane(),c=a.getVector();for(let u=-2;u<=2;++u)t[t.length-1].hyperplanes.push(new HD(l.normalVector,c.stretchedBy(u)))}function r(a,l,c){const u=[];for(let d of a)for(let h of l)for(let f of c){let m=d.getIntersectionWithTwoOtherPlanes(h.getPlaneAsThreePlane(),f.getPlaneAsThreePlane());null!=m&&u.push(m)}return u}const i=[];for(let a of t)for(let l of t)for(let c of t){if(a==l||a==c||l==c)continue;let u=r(a.hyperplanes,l.hyperplanes,c.hyperplanes);i.push(...u)}const s=[...new Map(i.map(a=>[`\n        ${a.x.toFixed(2)} +\n        ${a.y.toFixed(2)} +\n        ${a.z.toFixed(2)}`,a])).values()];for(let a of s)a.length()<7&&this.painter.drawSphere(new xh({center:a,radius:.1,color:K.white}))}}bm.\u0275fac=function(e){return new(e||bm)(Oe(wh),Oe(jl),Oe(al),Oe(Qu))},bm.\u0275prov=_t({token:bm,factory:bm.\u0275fac,providedIn:"root"});class b0{constructor(e,t,r){this.rootSystemService=e,this.activatedRoute=t,this.router=r,this.RootSystems=dh,this.activatedRoute.params.subscribe(i=>{let o=decodeURI(i.root_system||"");null!=Gu[o]&&this.rootSystemService.setInitialRootSystem(Gu[o])})}ngOnInit(){}switchToRootSystem(e){this.rootSystemService.switchRootSystem(Gu[e]),this.router.navigate(["/3D",{root_system:e}])}getSelectedRootSystem(){return this.rootSystemService.rootSystem.type}}function GDe(n,e){if(1&n){const t=ho();he(0,"div",14)(1,"div",15)(2,"p",16),ht(3),be(),At(4,"div",17),be(),he(5,"div",18)(6,"mat-checkbox",19),Et("click",function(){const o=qr(t).$implicit;return $r(pn().toggleRootHighlight(o))}),be()(),he(7,"div",20)(8,"mat-checkbox",19),Et("click",function(){const o=qr(t).$implicit;return $r(pn().toggleHyperplane(o))}),be()()()}if(2&n){const t=e.$implicit,r=pn();Le(3),Jc(t.name),Le(1),Uo("background-color",r.getColor(t)),Le(2),ot("checked",r.rootHighlighted(t)&&r.getCurrentColorMode()==r.RootSystemColorMode.highlight),Le(2),ot("checked",r.hyperplaneToRootVisible(t))}}b0.\u0275fac=function(e){return new(e||b0)(Me(jl),Me(Al),Me(Co))},b0.\u0275cmp=Dr({type:b0,selectors:[["app-switch-root-system3-d"]],decls:15,vars:6,consts:[["id","switch-panel-container"],["id","switch-panel"],["id","root-systems-container"],[1,"root-system-item",3,"click"],["src","assets/A3.svg",1,"root-system-image"],[1,"root-system-title"],["src","assets/B3.svg",1,"root-system-image"],["src","assets/C3.svg",1,"root-system-image"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Et("click",function(){return t.switchToRootSystem(t.RootSystems.A3)}),At(4,"img",4),he(5,"small",5),ht(6,"A3"),be()(),he(7,"div",3),Et("click",function(){return t.switchToRootSystem(t.RootSystems.B3)}),At(8,"img",6),he(9,"small",5),ht(10,"B3"),be()(),he(11,"div",3),Et("click",function(){return t.switchToRootSystem(t.RootSystems.C3)}),At(12,"img",7),he(13,"small",5),ht(14,"C3"),be()()()()()),2&e&&(Le(3),ai("selected","A3"==t.getSelectedRootSystem()),Le(4),ai("selected","B3"==t.getSelectedRootSystem()),Le(4),ai("selected","C3"==t.getSelectedRootSystem()))},styles:["@media (max-width: 650px){#switch-panel-container[_ngcontent-%COMP%]{left:auto!important;right:16px!important;width:max-content!important;justify-content:flex-end!important;padding-left:0!important}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]{justify-content:flex-end}}@media (max-width: 500px){#switch-panel-container[_ngcontent-%COMP%]{right:0!important;left:0!important;top:74px!important;width:100%!important;justify-content:center!important}}@media (max-width: 500px){#switch-panel-container[_ngcontent-%COMP%]{width:calc(100% - 32px)!important;inset:auto 16px 130px!important}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr!important}}#switch-panel-container[_ngcontent-%COMP%]{left:0;top:0;width:100%;display:grid;justify-content:flex-start;padding-left:270px;padding-top:16px;position:absolute;box-sizing:border-box}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]{padding:12px;box-sizing:border-box;height:max-content;background-color:#fff;border-radius:8px;shadow:var(--light-shadow);display:grid;align-content:flex-start;justify-content:center}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-auto-flow:column;grid-gap:8px}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]{padding:15px;border:var(--border-thin);border-radius:4px;display:grid;justify-content:center;align-content:center;align-items:center;transition:.15s all ease-in-out;cursor:pointer;position:relative}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item.selected[_ngcontent-%COMP%], #switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .root-system-image[_ngcontent-%COMP%]{position:relative;top:-6px;width:40px}#switch-panel-container[_ngcontent-%COMP%]   #switch-panel[_ngcontent-%COMP%]   #root-systems-container[_ngcontent-%COMP%]   .root-system-item[_ngcontent-%COMP%]   .root-system-title[_ngcontent-%COMP%]{font-size:11px;font-weight:600;position:absolute;bottom:4px;color:var(--text-light);text-align:center;width:100%}"]});class x0{constructor(e,t){this.rootSystemService=e,this.rootSystemPainter=t,this.RootSystemColorMode=To,this.rootSystemColors=[],this.Colors=K,this.isExpanded=!0,this.rootListForDisplay=[],this.rootSystemColors=yr[e.rootSystem.type],this.rootSystemService.rootSystemChangeEvent.subscribe(()=>{this.rootSystemColors=yr[e.rootSystem.type],this.roots=this.getRoots(),this.rootListForDisplay=this.getDividedRootListForDisplay()}),this.roots=this.getRoots(),this.rootListForDisplay=this.getDividedRootListForDisplay(),window.innerWidth<1e3&&(this.isExpanded=!1)}toggleExpand(){this.isExpanded=!this.isExpanded}ngOnInit(){}switchHighlightMode(e){e==this.getCurrentColorMode()?this.rootSystemPainter.switchColorMode(To.highlight):this.rootSystemPainter.switchColorMode(e)}toggleRootHighlight(e){this.rootSystemPainter.switchColorMode(To.highlight),this.rootSystemPainter.rootIsHighlighted(e)?this.rootSystemPainter.removeHighlightFromRoot(e):this.rootSystemPainter.highlightRoot(e)}hyperplaneToRootVisible(e){return this.rootSystemPainter.hyperplaneToRootIsVisible(e)}rootHighlighted(e){return this.rootSystemPainter.rootIsHighlighted(e)}getRoots(){return this.rootSystemService.rootSystem.getPositiveRoots()}toggleHyperplane(e){this.rootSystemPainter.hyperplaneToRootIsVisible(e)?this.rootSystemPainter.hideHyperplaneToRoot(e):this.rootSystemPainter.showHyperplaneToRoot(e)}allRootsHighlighted(){return this.rootSystemPainter.allRootsHighlighted()}allHyperplanesVisible(){return this.rootSystemPainter.allHyperplanesVisible()}toggleAllRootsHighlighted(){this.allRootsHighlighted()?this.rootSystemPainter.clearRootHighlight():(this.rootSystemPainter.highlightAllRoots(),this.rootSystemPainter.switchColorMode(To.highlight))}toggleAllRootsHyperplanes(){this.allHyperplanesVisible()?this.rootSystemPainter.clearHyperplaneVisibility():this.rootSystemPainter.showAllHyperplanes()}getColor(e){return this.rootSystemColors[this.roots.findIndex(t=>t.equal(e))]}getCurrentColorMode(){return this.rootSystemPainter.colorMode}getDividedRootListForDisplay(){let e=[],t=0,r=-1;for(;t<=this.roots.length-1;)t%10==0&&t!=this.roots.length-1&&(r+=1,e.push([])),e[r].push(this.roots[t]),t+=1;return e}}function jDe(n,e){if(1&n&&(he(0,"p"),ht(1),be()),2&n){const t=e.$implicit;Le(1),Jc(t)}}function WDe(n,e){if(1&n){const t=ho();he(0,"div",32),Et("click",function(){const o=qr(t).$implicit;return $r(pn().mirrorWithRoot(o))}),he(1,"div",33)(2,"p",34),ht(3),be(),At(4,"div",35),be()()}if(2&n){const t=e.$implicit,r=pn();Le(3),fo("\u27c2",t.name,""),Le(1),Uo("background-color",r.getColor(t))}}function qDe(n,e){if(1&n){const t=ho();he(0,"div",32),Et("click",function(){const o=qr(t).$implicit;return $r(pn().mirrorWithRoot(o))}),he(1,"div",33)(2,"p",34),ht(3),be(),At(4,"div",35),be()()}if(2&n){const t=e.$implicit,r=pn();Le(3),fo("\u27c2",t.name,""),Le(1),Uo("background-color",r.getColor(t))}}function $De(n,e){1&n&&(he(0,"p",36),ht(1," (None applied) "),be())}function XDe(n,e){if(1&n){const t=ho();he(0,"div",32),Et("click",function(){const o=qr(t).$implicit;return $r(pn().mirrorWithRoot(o))}),he(1,"div",33)(2,"p",34),ht(3),be(),At(4,"div",35),be()()}if(2&n){const t=e.$implicit,r=pn();Le(3),fo("\u27c2 ",t.name,""),Le(1),Uo("background-color",r.getColor(t))}}function YDe(n,e){if(1&n&&(he(0,"p",37),ht(1),be()),2&n){const t=pn();Le(1),fo(" (Length: ",t.getLength(),") ")}}x0.\u0275fac=function(e){return new(e||x0)(Me(jl),Me(Mh))},x0.\u0275cmp=Dr({type:x0,selectors:[["app-object-selector3-d"]],decls:40,vars:8,consts:[["id","object-selector-panel"],["id","expand-button"],[3,"fontIcon","click"],["id","heading"],["id","inner-content"],["id","type-selection-container"],[1,"switch-mode-item",3,"click"],[3,"checked"],[1,"switch-mode-text"],[1,"divider"],[1,"subsection-heading"],["id","highlight-table"],[1,"highlight-table-column"],[1,"highlight-table-header"],[1,"object-highlight-item"],[1,"root-vector"],[1,"root-vector-text"],[1,"root-vector-background"],[1,"highlight-toggle"],[3,"checked","click"],[1,"hyperplane-toggle"],["class","object-highlight-item",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"button",1)(2,"mat-icon",2),Et("click",function(){return t.toggleExpand()}),be()(),he(3,"h3",3),ht(4,"Highlight"),be(),he(5,"div",4)(6,"div",5)(7,"div",6),Et("click",function(){return t.switchHighlightMode(t.RootSystemColorMode.base)}),At(8,"mat-radio-button",7),he(9,"p",8),ht(10,"Base"),be()(),he(11,"div",6),Et("click",function(){return t.switchHighlightMode(t.RootSystemColorMode.positiveRoots)}),At(12,"mat-radio-button",7),he(13,"p",8),ht(14,"Positive roots"),be()(),he(15,"div",6),Et("click",function(){return t.switchHighlightMode(t.RootSystemColorMode.highlight)}),At(16,"mat-radio-button",7),he(17,"p",8),ht(18,"Custom Highlight"),be()()(),At(19,"div",9),he(20,"h4",10),ht(21,"Highlight specific object"),be(),he(22,"div",11)(23,"div",12)(24,"div",13),At(25,"p"),he(26,"p"),ht(27,"Root (+,-)"),be(),he(28,"p"),ht(29,"Hyperplanes"),be()(),he(30,"div",14)(31,"div",15)(32,"p",16),ht(33,"All"),be(),At(34,"div",17),be(),he(35,"div",18)(36,"mat-checkbox",19),Et("click",function(){return t.toggleAllRootsHighlighted()}),be()(),he(37,"div",20)(38,"mat-checkbox",19),Et("click",function(){return t.toggleAllRootsHyperplanes()}),be()()(),Yn(39,GDe,9,5,"div",21),be()()()()),2&e&&(Le(2),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(3),ot("@expanded",t.isExpanded),Le(3),ot("checked",t.getCurrentColorMode()==t.RootSystemColorMode.base),Le(4),ot("checked",t.getCurrentColorMode()==t.RootSystemColorMode.positiveRoots),Le(4),ot("checked",t.getCurrentColorMode()==t.RootSystemColorMode.highlight),Le(20),ot("checked",t.allRootsHighlighted()),Le(2),ot("checked",t.allHyperplanesVisible()),Le(1),ot("ngForOf",t.roots))},dependencies:[tu,v0,Hu,qx],styles:["@media (max-width: 550px){#object-selector-panel[_ngcontent-%COMP%]{max-width:calc(100% - 32px)!important;width:100%!important;left:16px!important;bottom:8px!important}}#object-selector-panel[_ngcontent-%COMP%]{position:absolute;left:16px;bottom:16px;height:max-content;max-height:calc(100vh - 50px);overflow-y:auto;width:max-content;padding:16px;box-sizing:border-box;background-color:#fff;border-radius:8px;shadow:var(--light-shadow);display:grid;align-content:flex-start;justify-content:stretch;align-items:flex-start;max-width:calc(50vw - 30px);z-index:100}#object-selector-panel[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 4px;padding:0;color:var(--text-dark)}#object-selector-panel[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin:0;padding:0;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   .subsection-heading[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0;padding:0;color:var(--text-medium)}#object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]{padding:8px 0;display:grid;grid-template-rows:max-content}#object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:center;cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #type-selection-container[_ngcontent-%COMP%]   .switch-mode-item[_ngcontent-%COMP%]   .switch-mode-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:600;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:4px 0 12px;width:100%;background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   #highlight-table[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-column[_ngcontent-%COMP%]{grid-template-rows:repeat(8,max-content);row-gap:4px;grid-auto-flow:column;padding-left:16px}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-column[_ngcontent-%COMP%]:not(#object-selector-panel   .highlight-table-column[_ngcontent-%COMP%]:first-of-type){border-left:var(--border-thin)}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-header[_ngcontent-%COMP%]{margin-top:8px;display:grid;grid-template-columns:70px 64px 128px;justify-items:center}#object-selector-panel[_ngcontent-%COMP%]   .highlight-table-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);padding:0;margin:0;font-size:13px;font-weight:600}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:70px 64px 128px;align-items:center}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]{position:relative;height:max-content;width:64px;display:grid;justify-content:center}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-text[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;font-size:14px;padding:4px;margin:0;cursor:pointer;font-weight:500}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-background[_ngcontent-%COMP%]{opacity:.6;position:absolute;top:0;left:0;height:100%;width:100%;border-radius:4px}#object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .highlight-toggle[_ngcontent-%COMP%], #object-selector-panel[_ngcontent-%COMP%]   .object-highlight-item[_ngcontent-%COMP%]   .hyperplane-toggle[_ngcontent-%COMP%]{justify-self:center}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]}});class w0{constructor(e,t,r){this.rootSystemService=e,this.cd=t,this.transformService=r,this.rootSystemColors=[],this.rootsToAppliedMirrorings=[],this.isExpanded=!0,this.moreInformationShown=!1,this.rootSystemService.rootSystemChangeEvent.subscribe(()=>{this.resetTransformations(),this.rootSystemColors=yr[e.rootSystem.type],this.roots=this.getRoots(),t.detectChanges()}),this.transformService.transformationChanged.subscribe(()=>{this.getAppliedMirrorings()}),this.roots=this.getRoots(),this.rootSystemColors=yr[e.rootSystem.type],window.innerWidth<1e3&&(this.isExpanded=!1)}toggleMoreInformation(){this.moreInformationShown=!this.moreInformationShown}toggleObjectActedOn(e){this.transformService.transformationAppliedTo(e)?this.transformService.removeTransformedObjectType(e):this.transformService.addTransformedObjectType(e),this.cd.detectChanges()}transformationAppliedTo(e){return this.transformService.transformationAppliedTo(e)}toggleExpand(){this.isExpanded=!this.isExpanded}getRoots(){return this.rootSystemService.rootSystem.getPositiveRoots()}getPositiveRootsWithoutBase(){return this.getRoots().filter(e=>!e.isSimple)}getBase(){return this.rootSystemService.rootSystem.getBase()}getColor(e){return this.rootSystemColors[this.roots.findIndex(t=>t.equal(e))]}getCoxeterMatrix(){return this.rootSystemService.rootSystem.coxeterMatrix}getWeylGroupOrder(){return this.rootSystemService.rootSystem.orderOfWeylGroup}getLength(){return this.rootSystemService.rootSystem.getLengthOfTransformation(this.transformService.appliedMirrorings)}mirrorWithRoot(e){this.transformService.mirrorOnPlaneOfRoot(e)}getAppliedMirrorings(){this.rootsToAppliedMirrorings=[...this.transformService.appliedMirrorings].reverse()}resetTransformations(){this.transformService.resetTransformation()}}w0.\u0275fac=function(e){return new(e||w0)(Me(jl),Me(rs),Me(Qu))},w0.\u0275cmp=Dr({type:w0,selectors:[["app-object-transformer-panel"]],decls:63,vars:14,consts:[["id","object-selector-panel"],["id","heading"],["id","expand-button"],[3,"fontIcon","click"],["id","inner-content"],["id","more-information",3,"click"],["id","more-information-header"],["id","more-information-text"],["id","more-information-toggle-button"],[3,"fontIcon"],["id","content-wrapper"],["id","information-container"],[1,"information-item"],[1,"information-item-text"],[1,"matrix3"],[1,"matrix-bracket-left"],[4,"ngFor","ngForOf"],[1,"matrix-bracket-right"],[1,"divider"],["id","action-on-table"],[1,"description-text"],[1,"action-object",3,"click"],[3,"checked"],[1,"action-object-text"],[1,"sub-description-text"],[1,"mirror-root-container"],["class","mirror-root-item",3,"click",4,"ngFor","ngForOf"],["id","applied-mirrorings-container"],["id","reflection-placeholder-text",4,"ngIf"],["id","mirrorings"],["id","length-text",4,"ngIf"],["id","reset-button",3,"click"],[1,"mirror-root-item",3,"click"],[1,"root-vector"],[1,"root-vector-text"],[1,"root-vector-background"],["id","reflection-placeholder-text"],["id","length-text"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"h3",1),ht(2,"Transform"),be(),he(3,"button",2)(4,"mat-icon",3),Et("click",function(){return t.toggleExpand()}),be()(),he(5,"div",4)(6,"div",5),Et("click",function(){return t.toggleMoreInformation()}),he(7,"div",6)(8,"h5",7),ht(9,"More Information"),be(),he(10,"button",8),At(11,"mat-icon",9),be()(),he(12,"div",10)(13,"div",11)(14,"div",12)(15,"p",13),ht(16,"Coxeter Matrix"),be(),he(17,"div",14)(18,"div",15),ht(19,"["),be(),Yn(20,jDe,2,1,"p",16),he(21,"div",17),ht(22,"]"),be()()(),he(23,"div",12)(24,"p",13),ht(25),be()()()()(),At(26,"div",18),he(27,"div",19)(28,"p",20),ht(29,"Apply group action to:"),be(),he(30,"div",21),Et("click",function(){return t.toggleObjectActedOn("ROOTS")}),At(31,"mat-checkbox",22),he(32,"p",23),ht(33,"Roots"),be()(),he(34,"div",21),Et("click",function(){return t.toggleObjectActedOn("WEYL_CHAMBERS")}),At(35,"mat-checkbox",22),he(36,"p",23),ht(37,"Weyl Chambers"),be()(),he(38,"div",21),Et("click",function(){return t.toggleObjectActedOn("HYPERPLANES")}),At(39,"mat-checkbox",22),he(40,"p",23),ht(41,"Hyperplanes"),be()()(),At(42,"div",18),he(43,"p",20),ht(44,"Mirror at hyperplane orthogonal to root:"),be(),he(45,"p",24),ht(46,"Base:"),be(),he(47,"div",25),Yn(48,WDe,5,3,"div",26),be(),he(49,"p",24),ht(50,"Other positive roots:"),be(),he(51,"div",25),Yn(52,qDe,5,3,"div",26),be(),At(53,"div",18),he(54,"p",20),ht(55,"Applied relections:"),be(),he(56,"div",27),Yn(57,$De,2,0,"p",28),he(58,"div",29),Yn(59,XDe,5,3,"div",26),be(),Yn(60,YDe,2,1,"p",30),he(61,"div",31),Et("click",function(){return t.resetTransformations()}),ht(62,"Reset"),be()()()()),2&e&&(Le(4),ot("fontIcon",t.isExpanded?"expand_more":"expand_less"),Le(1),ot("@expanded",t.isExpanded),Le(6),ot("fontIcon",t.moreInformationShown?"expand_less":"expand_more"),Le(2),ot("@expanded",t.moreInformationShown),Le(7),ot("ngForOf",t.getCoxeterMatrix()),Le(5),fo("Order of Weyl Group: ",t.getWeylGroupOrder(),""),Le(6),ot("checked",t.transformationAppliedTo("ROOTS")),Le(4),ot("checked",t.transformationAppliedTo("WEYL_CHAMBERS")),Le(4),ot("checked",t.transformationAppliedTo("HYPERPLANES")),Le(9),ot("ngForOf",t.getBase()),Le(4),ot("ngForOf",t.getPositiveRootsWithoutBase()),Le(5),ot("ngIf",0==t.rootsToAppliedMirrorings.length),Le(2),ot("ngForOf",t.rootsToAppliedMirrorings),Le(1),ot("ngIf",0!=t.rootsToAppliedMirrorings.length))},dependencies:[tu,nu,v0,Hu],styles:["@media (max-width: 550px){#object-selector-panel[_ngcontent-%COMP%]{max-width:calc(100% - 32px)!important;width:100%!important;left:16px!important;bottom:70px!important}}#object-selector-panel[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:16px;z-index:10;height:max-content;max-height:calc(100vh - 130px);overflow-y:auto;width:400px;padding:16px;box-sizing:border-box;background-color:#fff;border-radius:8px;shadow:var(--light-shadow);display:grid;align-content:flex-start;justify-content:stretch;align-items:flex-start;max-width:calc(50vw - 30px)}#object-selector-panel[_ngcontent-%COMP%]   #inner-content[_ngcontent-%COMP%]{overflow:hidden}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;color:var(--text-medium);background-color:#fff;border:none;border-radius:50%;transition:all .15s;height:36px;display:grid;justify-content:center;align-content:center;cursor:pointer;width:36px}#object-selector-panel[_ngcontent-%COMP%]   #expand-button[_ngcontent-%COMP%]:hover{background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   #heading[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0 0 4px;padding:0;color:var(--text-dark)}#object-selector-panel[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin:0;padding:0;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   .subsection-heading[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0;padding:0;color:var(--text-medium)}#object-selector-panel[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:8px 0 0;padding:0;color:var(--text-dark)}#object-selector-panel[_ngcontent-%COMP%]   #length-text[_ngcontent-%COMP%]{font-size:14px;font-style:italic;font-weight:500;color:var(--text-light);display:block;width:100%;box-sizing:border-box;text-align:right;padding-right:8px}#object-selector-panel[_ngcontent-%COMP%]   #reflection-placeholder-text[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--text-light);padding:0;margin:0}#object-selector-panel[_ngcontent-%COMP%]   .sub-description-text[_ngcontent-%COMP%]{color:var(--text-light);margin:0;font-size:13px;font-weight:600;padding:0}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]{background-color:var(--purple-light);padding:8px;margin-top:8px;border-radius:4px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #more-information-header[_ngcontent-%COMP%]{position:relative;display:grid;align-content:center;align-items:center;height:24px;border:1px solid var(--purple-light);cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #more-information-header[_ngcontent-%COMP%]   #more-information-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:700;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #more-information-header[_ngcontent-%COMP%]   #more-information-toggle-button[_ngcontent-%COMP%]{right:12px;position:absolute;top:0;border:none;background-color:transparent;border-radius:50%;height:16px;width:16px;color:var(--text-medium);cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]{overflow:hidden}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(2,max-content);justify-content:flex-start;row-gap:12px}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]{display:grid;justify-items:flex-start}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .information-item-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-dark);font-weight:700}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]{display:grid;grid-template-columns:16px 16px 16px;column-gap:6px;position:relative;margin-left:10px;box-sizing:border-box;width:max-content}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   .matrix-bracket-left[_ngcontent-%COMP%]{position:absolute;font-size:62px;left:-16px;margin:0;padding:0;top:-18px;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   .matrix-bracket-right[_ngcontent-%COMP%]{position:absolute;font-size:62px;right:-16px;margin:0;padding:0;top:-18px;color:var(--text-light)}#object-selector-panel[_ngcontent-%COMP%]   #more-information[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]   #information-container[_ngcontent-%COMP%]   .information-item[_ngcontent-%COMP%]   .matrix3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;display:block;font-size:13px;color:var(--text-dark);font-weight:700;text-align:center}#object-selector-panel[_ngcontent-%COMP%]   #action-on-table[_ngcontent-%COMP%]{padding:0 0 4px;display:grid;grid-template-rows:max-content}#object-selector-panel[_ngcontent-%COMP%]   #action-on-table[_ngcontent-%COMP%]   .action-object[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:center;cursor:pointer}#object-selector-panel[_ngcontent-%COMP%]   #action-on-table[_ngcontent-%COMP%]   .action-object[_ngcontent-%COMP%]   .action-object-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:600;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   #option-container[_ngcontent-%COMP%]{padding:8px 0;display:grid;grid-template-rows:max-content}#object-selector-panel[_ngcontent-%COMP%]   #option-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:max-content 1fr;align-items:center}#object-selector-panel[_ngcontent-%COMP%]   #option-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   .option-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-medium);font-weight:500;margin:0;padding:0}#object-selector-panel[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:8px 0 12px;width:100%;background-color:var(--purple-light)}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-container[_ngcontent-%COMP%]{padding:4px 0;margin-bottom:4px;display:grid;grid-template-columns:repeat(auto-fill,74px);grid-gap:8px}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]{position:relative;height:max-content;width:74px;display:grid;justify-content:center}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-text[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;font-size:14px;padding:4px;margin:0;cursor:pointer;font-weight:500}#object-selector-panel[_ngcontent-%COMP%]   .mirror-root-item[_ngcontent-%COMP%]   .root-vector[_ngcontent-%COMP%]   .root-vector-background[_ngcontent-%COMP%]{opacity:.6;position:absolute;top:0;left:0;height:100%;width:100%;border-radius:4px}#object-selector-panel[_ngcontent-%COMP%]   #applied-mirrorings-container[_ngcontent-%COMP%]{padding-top:4px}#object-selector-panel[_ngcontent-%COMP%]   #applied-mirrorings-container[_ngcontent-%COMP%]   #mirrorings[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,74px);grid-gap:8px}#object-selector-panel[_ngcontent-%COMP%]   #applied-mirrorings-container[_ngcontent-%COMP%]   #reset-button[_ngcontent-%COMP%]{background-color:var(--background-color);color:#fff;padding:8px 16px;font-weight:600;font-size:12px;border:none;border-radius:4px;cursor:pointer;width:max-content;margin-top:12px}"],data:{animation:[tl("expanded",[Jr("void",Cr({height:"0"})),Jr("true",Cr({height:"*"})),Jr("false",Cr({height:"0"})),xa("true <=> false",[nl("125ms ease-in-out")])])]},changeDetection:0});const ZDe=["miniView"];class M0{constructor(e){this.sceneManager=e}ngAfterViewInit(){this.initializeThreeJs()}initializeThreeJs(){this.sceneManager.initializeMiniView(this.miniViewCont.nativeElement)}}M0.\u0275fac=function(e){return new(e||M0)(Me(al))},M0.\u0275cmp=Dr({type:M0,selectors:[["app-mini-view3-d"]],viewQuery:function(e,t){if(1&e&&po(ZDe,5),2&e){let r;ki(r=Li())&&(t.miniViewCont=r.first)}},decls:3,vars:0,consts:[["id","mini-view-container"],["id","mini-view-canvas"],["miniView",""]],template:function(e,t){1&e&&(he(0,"div",0),At(1,"div",1,2),be())},styles:["@media (max-width: 700px){#mini-view-container[_ngcontent-%COMP%]{visibility:hidden}}#mini-view-container[_ngcontent-%COMP%]{height:160px;width:160px;position:absolute;top:16px;right:24px;border-radius:32px;border:5px solid white;overflow:hidden}#mini-view-container[_ngcontent-%COMP%]   #mini-view-canvas[_ngcontent-%COMP%]{height:100%;width:100%}"]});const KDe=["canvas"];class C0{constructor(e,t,r){this.sceneManager=e,this.rootSystemPainter=t,this.affinePainter=r}ngOnInit(){}ngAfterViewInit(){this.initializeThreeJs(),this.rootSystemPainter.paint()}initializeThreeJs(){this.sceneManager.initializeScene(this.canvas.nativeElement),this.sceneManager.startDisplay()}}C0.\u0275fac=function(e){return new(e||C0)(Me(al),Me(Mh),Me(bm))},C0.\u0275cmp=Dr({type:C0,selectors:[["app-root-systems3-d"]],viewQuery:function(e,t){if(1&e&&po(KDe,5),2&e){let r;ki(r=Li())&&(t.canvas=r.first)}},decls:6,vars:0,consts:[["id","main-canvas"],["canvas",""]],template:function(e,t){1&e&&At(0,"div",0,1)(2,"app-switch-root-system3-d")(3,"app-object-selector3-d")(4,"app-object-transformer-panel")(5,"app-mini-view3-d")},dependencies:[b0,x0,w0,M0],styles:["#main-canvas[_ngcontent-%COMP%]{height:100vh;width:100vw}"]});const QDe=[{path:"2D",component:ym},{path:"3D",component:C0},{path:"Projection",component:e0},{path:"**",component:ym}];class xm{}xm.\u0275fac=function(e){return new(e||xm)},xm.\u0275mod=kr({type:xm}),xm.\u0275inj=Er({imports:[vk.forRoot(QDe),vk]});class S0{constructor(e,t){this.switchedToDimension=new pr,this.selectedDimension="2D",t.events.subscribe(r=>{if(r instanceof lu){const i=r.url,o=i.lastIndexOf(";");let s=i.substring(i.indexOf("/")+1,o>-1?o:i.length);console.log("Dim; ",s),("2D"==s||"3D"==s||"Projection"==s)&&(this.selectedDimension=s)}})}switchToDimension(e){this.selectedDimension=e,this.switchedToDimension.emit(e)}}S0.\u0275fac=function(e){return new(e||S0)(Me(Al),Me(Co))},S0.\u0275cmp=Dr({type:S0,selectors:[["app-dimension-switch-button"]],outputs:{switchedToDimension:"switchedToDimension"},decls:10,vars:6,consts:[["id","dimension-button"],[1,"dimension-item",3,"click"]],template:function(e,t){1&e&&(he(0,"div",0)(1,"div",1),Et("click",function(){return t.switchToDimension("2D")}),he(2,"p"),ht(3,"2D"),be()(),he(4,"div",1),Et("click",function(){return t.switchToDimension("3D")}),he(5,"p"),ht(6,"3D"),be()(),he(7,"div",1),Et("click",function(){return t.switchToDimension("Projection")}),he(8,"p"),ht(9,"Projection"),be()()()),2&e&&(Le(1),ai("selected","2D"==t.selectedDimension),Le(3),ai("selected","3D"==t.selectedDimension),Le(3),ai("selected","Projection"==t.selectedDimension))},styles:["#dimension-button[_ngcontent-%COMP%]{height:64px;background-color:#fff;border-radius:16px;position:absolute;display:grid;grid-template-columns:64px 64px 120px;top:16px;left:8px;z-index:1}#dimension-button[_ngcontent-%COMP%]   .dimension-item[_ngcontent-%COMP%]{width:100%;font-size:16px;font-weight:700;color:var(--text-dark);display:grid;justify-content:center;align-content:center;cursor:pointer}#dimension-button[_ngcontent-%COMP%]   .dimension-item.selected[_ngcontent-%COMP%]{background-color:var(--purple-medium);border-radius:16px}"]});class E0{constructor(e,t){this.router=e,this.route=t,this.showDimension="2D",this.initializeView()}ngOnInit(){}initializeView(){let e=this.route.snapshot.url.toString().split("/").pop();("2D"==e||"3D"==e)&&(this.showDimension=e,null!=this.route.snapshot.params.root_system&&this.router.navigate(["/"+this.showDimension,{root_system:this.route.snapshot.params.root_system}]))}switchDimension(e){this.router.navigateByUrl("/"+e)}}E0.\u0275fac=function(e){return new(e||E0)(Me(Co),Me(Al))},E0.\u0275cmp=Dr({type:E0,selectors:[["app-homepage"]],decls:3,vars:0,consts:[[3,"switchedToDimension"]],template:function(e,t){1&e&&(he(0,"main")(1,"app-dimension-switch-button",0),Et("switchedToDimension",function(i){return t.switchDimension(i)}),be(),At(2,"router-outlet"),be())},dependencies:[qC,S0],styles:["#main[_ngcontent-%COMP%]{display:block;height:100%;width:100%;overflow:hidden;box-sizing:border-box}"]});class D0{constructor(){this.title="rootSystems"}}function UH(n){return new We(3e3,!1)}function NAe(){return typeof window<"u"&&typeof window.document<"u"}function XA(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ju(n){switch(n.length){case 0:return new Av;case 1:return n[0];default:return new tU(n)}}function HH(n,e,t,r,i=new Map,o=new Map){const s=[],a=[];let l=-1,c=null;if(r.forEach(u=>{const d=u.get("offset"),h=d==l,f=h&&c||new Map;u.forEach((m,p)=>{let g=p,_=m;if("offset"!==p)switch(g=e.normalizePropertyName(g,s),_){case"!":_=i.get(p);break;case Bc:_=o.get(p);break;default:_=e.normalizeStyleValue(p,g,_,s)}f.set(g,_)}),h||a.push(f),c=f,l=d}),s.length)throw function xAe(n){return new We(3502,!1)}();return a}function YA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&ZA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&ZA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&ZA(t,"destroy",n)))}}function ZA(n,e,t){const o=KA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function KA(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Js(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function GH(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}D0.\u0275fac=function(e){return new(e||D0)},D0.\u0275cmp=Dr({type:D0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&At(0,"app-homepage")},dependencies:[E0]});let QA=(n,e)=>!1,jH=(n,e,t)=>[],WH=null;function JA(n){const e=n.parentNode||n.host;return e===WH?null:e}(XA()||typeof Element<"u")&&(NAe()?(WH=(()=>document.documentElement)(),QA=(n,e)=>{for(;e;){if(e===n)return!0;e=JA(e)}return!1}):QA=(n,e)=>n.contains(e),jH=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ch=null,qH=!1;const $H=QA,XH=jH;let YH=(()=>{class n{validateStyleProperty(t){return function FAe(n){Ch||(Ch=function kAe(){return typeof document<"u"?document.body:null}()||{},qH=!!Ch.style&&"WebkitAppearance"in Ch.style);let e=!0;return Ch.style&&!function RAe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ch.style,!e&&qH&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ch.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return $H(t,r)}getParentElement(t){return JA(t)}query(t,r,i){return XH(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],l){return new Av(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),eT=(()=>{class n{}return n.NOOP=new YH,n})();const tT="ng-enter",uw="ng-leave",dw="ng-trigger",hw=".ng-trigger",KH="ng-animating",nT=".ng-animating";function zc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:rT(parseFloat(e[1]),e[2])}function rT(n,e){return"s"===e?1e3*n:n}function fw(n,e,t){return n.hasOwnProperty("duration")?n:function VAe(n,e,t){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(UH()),{duration:0,delay:0,easing:""};i=rT(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=rT(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function JDe(){return new We(3100,!1)}()),a=!0),o<0&&(e.push(function eAe(){return new We(3101,!1)}()),a=!0),a&&e.splice(l,0,UH())}return{duration:i,delay:o,easing:s}}(n,e,t)}function A0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function QH(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function ed(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function e7(n,e,t){return t?e+":"+t+";":""}function t7(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=e7(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=e7(0,GAe(t),n.style[t]));n.setAttribute("style",e)}function Wl(n,e,t){n.style&&(e.forEach((r,i)=>{const o=oT(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),XA()&&t7(n))}function Sh(n,e){n.style&&(e.forEach((t,r)=>{const i=oT(r);n.style[i]=""}),XA()&&t7(n))}function T0(n){return Array.isArray(n)?1==n.length?n[0]:J8(n):n}const iT=new RegExp("{{\\s*(.+?)\\s*}}","g");function n7(n){let e=[];if("string"==typeof n){let t;for(;t=iT.exec(n);)e.push(t[1]);iT.lastIndex=0}return e}function I0(n,e,t){const r=n.toString(),i=r.replace(iT,(o,s)=>{let a=e[s];return null==a&&(t.push(function nAe(n){return new We(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function pw(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const HAe=/-+([a-z0-9])/g;function oT(n){return n.replace(HAe,(...e)=>e[1].toUpperCase())}function GAe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ea(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function rAe(n){return new We(3004,!1)}()}}function r7(n,e){return window.getComputedStyle(n)[e]}function YAe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function ZAe(n,e,t){if(":"==n[0]){const l=function KAe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function vAe(n){return new We(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function gAe(n){return new We(3015,!1)}()),e;const i=r[1],o=r[2],s=r[3];e.push(o7(i,s));"<"==o[0]&&!("*"==i&&"*"==s)&&e.push(o7(s,i))}(r,t,e)):t.push(n),t}const _w=new Set(["true","1"]),yw=new Set(["false","0"]);function o7(n,e){const t=_w.has(n)||yw.has(n),r=_w.has(e)||yw.has(e);return(i,o)=>{let s="*"==n||n==i,a="*"==e||e==o;return!s&&t&&"boolean"==typeof i&&(s=i?_w.has(n):yw.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?_w.has(e):yw.has(e)),s&&a}}const QAe=new RegExp("s*:selfs*,?","g");function sT(n,e,t,r){return new JAe(n).build(e,t,r)}class JAe{constructor(e){this._driver=e}build(e,t,r){const i=new nTe(t);return this._resetContextStyleTimingState(i),ea(this,T0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function oAe(){return new We(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,s.push(l)}else t.errors.push(function sAe(){return new We(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{n7(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(pw(o.values()),t.errors.push(function aAe(n,e){return new We(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ea(this,T0(e.animation),t);return{type:1,matchers:YAe(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Eh(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ea(this,r,t)),options:Eh(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(s=>{t.currentTime=r;const a=ea(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:o,options:Eh(e.options)}}visitAnimate(e,t){const r=function iTe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return aT(fw(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=aT(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=fw(t,e);return aT(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Cr({});if(5==o.type)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const c={};r.easing&&(c.easing=r.easing),s=Cr(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Bc?r.push(a):t.errors.push(new We(3002,!1)):r.push(QH(a));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(o!=i&&o>=u.startTime&&i<=u.endTime&&(t.errors.push(function cAe(n,e,t,r,i){return new We(3010,!1)}()),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:i}),t.options&&function UAe(n,e,t){const r=e.params||{},i=n7(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function tAe(n){return new We(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function uAe(){return new We(3011,!1)}()),r;let o=0;const s=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const b=this._makeStyleAst(_,t);let v=null!=b.offset?b.offset:function rTe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(b.styles),y=0;return null!=v&&(o++,y=b.offset=v),l=l||y<0||y>1,a=a||y<c,c=y,s.push(y),b});l&&t.errors.push(function dAe(){return new We(3012,!1)}()),a&&t.errors.push(function hAe(){return new We(3200,!1)}());const d=e.steps.length;let h=0;o>0&&o<d?t.errors.push(function fAe(){return new We(3202,!1)}()):0==o&&(h=1/(d-1));const f=d-1,m=t.currentTime,p=t.currentAnimateTimings,g=p.duration;return u.forEach((_,b)=>{const v=h>0?b==f?1:h*b:s[b],y=v*g;t.currentTime=m+p.delay+y,p.duration=y,this._validateStyleAst(_,t),_.offset=v,r.styles.push(_)}),r}visitReference(e,t){return{type:8,animation:ea(this,T0(e.animation),t),options:Eh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Eh(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Eh(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function eTe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(QAe,"")),n=n.replace(/@\*/g,hw).replace(/@\w+/g,t=>hw+"-"+t.slice(1)).replace(/:animating/g,nT),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Js(t.collectedStyles,t.currentQuerySelector,new Map);const a=ea(this,T0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Eh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function pAe(){return new We(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:fw(e.timings,t.errors,!0);return{type:12,animation:ea(this,T0(e.animation),t),timings:r,options:null}}}class nTe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Eh(n){return n?(n=A0(n)).params&&(n.params=function tTe(n){return n?A0(n):null}(n.params)):n={},n}function aT(n,e,t){return{duration:n,delay:e,easing:t}}function lT(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class bw{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const aTe=new RegExp(":enter","g"),cTe=new RegExp(":leave","g");function cT(n,e,t,r,i,o=new Map,s=new Map,a,l,c=[]){return(new uTe).buildKeyframes(n,e,t,r,i,o,s,a,l,c)}class uTe{buildKeyframes(e,t,r,i,o,s,a,l,c,u=[]){c=c||new bw;const d=new uT(e,t,c,i,o,u,[]);d.options=l;const h=l.delay?zc(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,l),ea(this,r,d);const f=d.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let p=f.length-1;p>=0;p--){const g=f[p];if(g.element===t){m=g;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,l)}return f.length?f.map(m=>m.buildKeyframes()):[lT(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const s="number"==typeof o?o:zc(I0(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const s=null!=r.duration?zc(r.duration):null,a=null!=r.delay?zc(r.delay):null;return 0!==s&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ea(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=xw);const s=zc(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>ea(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?zc(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),ea(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return fw(t.params?I0(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?zc(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=xw);let s=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);o&&d.delayNextStep(o),c===t.element&&(l=d.currentTimeline),ea(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;ea(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const xw={};class uT{constructor(e,t,r,i,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=xw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new ww(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=zc(r.duration)),null!=r.delay&&(i.delay=zc(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=I0(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new uT(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=xw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new dTe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(aTe,"."+this._enterClassName)).replace(cTe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&0==a.length&&s.push(function mAe(n){return new We(3014,!1)}()),a}}class ww{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ww(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Bc),this._currentKeyframe.set(t,Bc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},s=function hTe(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Bc)}else ed(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const c=I0(l,o,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Bc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=ed(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===Bc&&t.add(d)}),r||c.set("offset",l/this.duration),i.push(c)});const o=e.size?pw(e.values()):[],s=t.size?pw(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return lT(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class dTe extends ww{constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=r+t,a=t/s,l=ed(e[0]);l.set("offset",0),o.push(l);const c=ed(e[0]);c.set("offset",l7(a)),o.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=ed(e[d]);const f=h.get("offset");h.set("offset",l7((t+f*r)/s)),o.push(h)}r=s,t=0,i="",e=o}return lT(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function l7(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class dT{}const fTe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class pTe extends dT{normalizePropertyName(e,t){return oT(e)}normalizeStyleValue(e,t,r,i){let o="";const s=r.toString().trim();if(fTe.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function iAe(n,e){return new We(3005,!1)}())}return s+o}}function c7(n,e,t,r,i,o,s,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const hT={};class u7{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function mTe(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||hT,m=this.buildStyles(r,a&&a.params||hT,d),p=l&&l.params||hT,g=this.buildStyles(i,p,d),_=new Set,b=new Map,v=new Map,y="void"===i,w={params:gTe(p,h),delay:this.ast.options?.delay},x=u?[]:cT(e,t,this.ast.animation,o,s,m,g,w,c,d);let E=0;if(x.forEach(S=>{E=Math.max(S.duration+S.delay,E)}),d.length)return c7(t,this._triggerName,r,i,y,m,g,[],[],b,v,E,d);x.forEach(S=>{const C=S.element,I=Js(b,C,new Set);S.preStyleProps.forEach(F=>I.add(F));const P=Js(v,C,new Set);S.postStyleProps.forEach(F=>P.add(F)),C!==t&&_.add(C)});const M=pw(_.values());return c7(t,this._triggerName,r,i,y,m,g,x,M,b,v,E)}}function gTe(n,e){const t=A0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class vTe{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=A0(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(i[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=I0(s,i,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),r.set(a,s)})}),r}}class yTe{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new vTe(i.style,i.options&&i.options.params||{},r))}),d7(this.states,"true","1"),d7(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new u7(e,i,this.states))}),this.fallbackTransition=function bTe(n,e,t){return new u7(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function d7(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const xTe=new bw;class wTe{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=sT(this._driver,t,r,[]);if(r.length)throw function wAe(n){return new We(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=HH(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=cT(this._driver,t,o,tT,uw,new Map,new Map,r,xTe,i),s.forEach(u=>{const d=Js(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(function MAe(){return new We(3300,!1)}()),s=[]),i.length)throw function CAe(n){return new We(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Bc))})});const c=Ju(s.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function SAe(n){return new We(3301,!1)}();return t}listen(e,t,r,i){const o=KA(t,"","","");return YA(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const h7="ng-animate-queued",fT="ng-animate-disabled",DTe=[],f7={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ATe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wa="__ng_removed";class pT{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function OTe(n){return n??null}(r?e.value:e),r){const o=A0(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const P0="void",mT=new pT(P0);class TTe{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ma(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function EAe(n,e){return new We(3302,!1)}();if(null==r||0==r.length)throw function DAe(n){return new We(3303,!1)}();if(!function NTe(n){return"start"==n||"done"==n}(r))throw function AAe(n,e){return new We(3400,!1)}();const o=Js(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);const a=Js(this._engine.statesByElement,e,new Map);return a.has(t)||(Ma(e,dw),Ma(e,dw+"-"+t),a.set(t,mT)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function TAe(n){return new We(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),s=new gT(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ma(e,dw),Ma(e,dw+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new pT(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=mT),c.value!==P0&&l.value===c.value){if(!function kTe(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,c.params)){const p=[],g=o.matchStyles(l.value,l.params,p),_=o.matchStyles(c.value,c.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(()=>{Sh(e,g),Wl(e,_)})}return}const h=Js(this._engine.playersByElement,e,[]);h.forEach(p=>{p.namespaceId==this.id&&p.triggerName==t&&p.queued&&p.destroy()});let f=o.matchTransition(l.value,c.value,e,c.params),m=!1;if(!f){if(!i)return;f=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:m}),m||(Ma(e,h7),s.onStart(()=>{wm(e,h7)})),s.onDone(()=>{let p=this.players.indexOf(s);p>=0&&this.players.splice(p,1);const g=this._engine.playersByElement.get(e);if(g){let _=g.indexOf(s);_>=0&&g.splice(_,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,hw,!0);r.forEach(i=>{if(i[wa])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,P0,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Ju(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const l=this._triggers.get(s).fallbackTransition,c=r.get(s)||mT,u=new pT(P0),d=new gT(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[wa];(!o||o===f7)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ma(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const l=KA(o,r.triggerName,r.fromState.value,r.toState.value);l._data=e,YA(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class ITe{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new TTe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Mw(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Mw(t))return;const o=t[wa];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ma(e,fT)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wm(e,fT))}removeNode(e,t,r,i){if(Mw(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[wa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Mw(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,hw,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,nT,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ju(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[wa];if(t&&t.setForRemoval){if(e[wa]=f7,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(fT)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ma(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ju(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function IAe(n){return new We(3402,!1)}()}_flushAnimations(e,t){const r=new bw,i=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(O=>{u.add(O);const T=this.driver.query(O,".ng-animate-queued",!0);for(let V=0;V<T.length;V++)u.add(T[V])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=g7(h,this.collectedEnterElements),m=new Map;let p=0;f.forEach((O,T)=>{const V=tT+p++;m.set(T,V),O.forEach(D=>Ma(D,V))});const g=[],_=new Set,b=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const T=this.collectedLeaveElements[O],V=T[wa];V&&V.setForRemoval&&(g.push(T),_.add(T),V.hasAnimation?this.driver.query(T,".ng-star-inserted",!0).forEach(D=>_.add(D)):b.add(T))}const v=new Map,y=g7(h,Array.from(_));y.forEach((O,T)=>{const V=uw+p++;v.set(T,V),O.forEach(D=>Ma(D,V))}),e.push(()=>{f.forEach((O,T)=>{const V=m.get(T);O.forEach(D=>wm(D,V))}),y.forEach((O,T)=>{const V=v.get(T);O.forEach(D=>wm(D,V))}),g.forEach(O=>{this.processLeaveNode(O)})});const w=[],x=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(t).forEach(V=>{const D=V.player,k=V.element;if(w.push(D),this.collectedEnterElements.length){const Ae=k[wa];if(Ae&&Ae.setForMove){if(Ae.previousTriggersValues&&Ae.previousTriggersValues.has(V.triggerName)){const Fe=Ae.previousTriggersValues.get(V.triggerName),He=this.statesByElement.get(V.element);if(He&&He.has(V.triggerName)){const me=He.get(V.triggerName);me.value=Fe,He.set(V.triggerName,me)}}return void D.destroy()}}const J=!d||!this.driver.containsElement(d,k),ce=v.get(k),X=m.get(k),re=this._buildInstruction(V,r,X,ce,J);if(re.errors&&re.errors.length)return void x.push(re);if(J)return D.onStart(()=>Sh(k,re.fromStyles)),D.onDestroy(()=>Wl(k,re.toStyles)),void i.push(D);if(V.isFallbackTransition)return D.onStart(()=>Sh(k,re.fromStyles)),D.onDestroy(()=>Wl(k,re.toStyles)),void i.push(D);const Ee=[];re.timelines.forEach(Ae=>{Ae.stretchStartingKeyframe=!0,this.disabledNodes.has(Ae.element)||Ee.push(Ae)}),re.timelines=Ee,r.append(k,re.timelines),s.push({instruction:re,player:D,element:k}),re.queriedElements.forEach(Ae=>Js(a,Ae,[]).push(D)),re.preStyleProps.forEach((Ae,Fe)=>{if(Ae.size){let He=l.get(Fe);He||l.set(Fe,He=new Set),Ae.forEach((me,mt)=>He.add(mt))}}),re.postStyleProps.forEach((Ae,Fe)=>{let He=c.get(Fe);He||c.set(Fe,He=new Set),Ae.forEach((me,mt)=>He.add(mt))})});if(x.length){const O=[];x.forEach(T=>{O.push(function PAe(n,e){return new We(3505,!1)}())}),w.forEach(T=>T.destroy()),this.reportError(O)}const E=new Map,M=new Map;s.forEach(O=>{const T=O.element;r.has(T)&&(M.set(T,T),this._beforeAnimationBuild(O.player.namespaceId,O.instruction,E))}),i.forEach(O=>{const T=O.element;this._getPreviousPlayers(T,!1,O.namespaceId,O.triggerName,null).forEach(D=>{Js(E,T,[]).push(D),D.destroy()})});const S=g.filter(O=>_7(O,l,c)),C=new Map;m7(C,this.driver,b,c,Bc).forEach(O=>{_7(O,l,c)&&S.push(O)});const P=new Map;f.forEach((O,T)=>{m7(P,this.driver,new Set(O),l,"!")}),S.forEach(O=>{const T=C.get(O),V=P.get(O);C.set(O,new Map([...Array.from(T?.entries()??[]),...Array.from(V?.entries()??[])]))});const F=[],R=[],z={};s.forEach(O=>{const{element:T,player:V,instruction:D}=O;if(r.has(T)){if(u.has(T))return V.onDestroy(()=>Wl(T,D.toStyles)),V.disabled=!0,V.overrideTotalTime(D.totalTime),void i.push(V);let k=z;if(M.size>1){let ce=T;const X=[];for(;ce=ce.parentNode;){const re=M.get(ce);if(re){k=re;break}X.push(ce)}X.forEach(re=>M.set(re,k))}const J=this._buildAnimation(V.namespaceId,D,E,o,P,C);if(V.setRealPlayer(J),k===z)F.push(V);else{const ce=this.playersByElement.get(k);ce&&ce.length&&(V.parentPlayer=Ju(ce)),i.push(V)}}else Sh(T,D.fromStyles),V.onDestroy(()=>Wl(T,D.toStyles)),R.push(V),u.has(T)&&i.push(V)}),R.forEach(O=>{const T=o.get(O.element);if(T&&T.length){const V=Ju(T);O.setRealPlayer(V)}}),i.forEach(O=>{O.parentPlayer?O.syncPlayerEvents(O.parentPlayer):O.destroy()});for(let O=0;O<g.length;O++){const T=g[O],V=T[wa];if(wm(T,uw),V&&V.hasAnimation)continue;let D=[];if(a.size){let J=a.get(T);J&&J.length&&D.push(...J);let ce=this.driver.query(T,nT,!0);for(let X=0;X<ce.length;X++){let re=a.get(ce[X]);re&&re.length&&D.push(...re)}}const k=D.filter(J=>!J.destroyed);k.length?RTe(this,T,k):this.processLeaveNode(T)}return g.length=0,F.forEach(O=>{this.players.push(O),O.onDone(()=>{O.destroy();const T=this.players.indexOf(O);this.players.splice(T,1)}),O.play()}),F}elementContainsData(e,t){let r=!1;const i=t[wa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==P0;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==o,d=Js(r,c,[]);this._getPreviousPlayers(c,u,s,a,t.toState).forEach(f=>{const m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),d.push(f)})}Sh(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(m=>{const p=m.element;u.add(p);const g=p[wa];if(g&&g.removedBeforeQueried)return new Av(m.duration,m.delay);const _=p!==l,b=function FTe(n){const e=[];return v7(n,e),e}((r.get(p)||DTe).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===p),v=o.get(p),y=s.get(p),w=HH(0,this._normalizer,0,m.keyframes,v,y),x=this._buildPlayer(m,w,b);if(m.subTimeline&&i&&d.add(p),_){const E=new gT(e,a,p);E.setRealPlayer(x),c.push(E)}return x});c.forEach(m=>{Js(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function PTe(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>Ma(m,KH));const f=Ju(h);return f.onDestroy(()=>{u.forEach(m=>wm(m,KH)),Wl(l,t.toStyles)}),d.forEach(m=>{Js(i,m,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Av(e.duration,e.delay)}}class gT{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Av,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>YA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Js(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Mw(n){return n&&1===n.nodeType}function p7(n,e){const t=n.style.display;return n.style.display=e??"none",t}function m7(n,e,t,r,i){const o=[];t.forEach(l=>o.push(p7(l)));const s=[];r.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,i);u.set(d,h),(!h||0==h.length)&&(c[wa]=ATe,s.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>p7(l,o[a++])),s}function g7(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:s(c),o.set(a,l),l}return e.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function Ma(n,e){n.classList?.add(e)}function wm(n,e){n.classList?.remove(e)}function RTe(n,e,t){Ju(t).onDone(()=>n.processLeaveNode(e))}function v7(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof tU?v7(r.players,e):e.push(r)}}function _7(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class Cw{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new ITe(e,t,r),this._timelineEngine=new wTe(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const s=e+"-"+i;let a=this._triggerCache[s];if(!a){const l=[],u=sT(this._driver,o,l,[]);if(l.length)throw function bAe(n,e){return new We(3404,!1)}();a=function _Te(n,e,t){return new yTe(n,e,t)}(i,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,s]=GH(r);this._timelineEngine.command(o,t,s,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[s,a]=GH(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let BTe=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Wl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wl(this._element,this._initialStyles),this._endStyles&&(Wl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Sh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sh(this._element,this._endStyles),this._endStyles=null),Wl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function vT(n){let e=null;return n.forEach((t,r)=>{(function VTe(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class y7{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:r7(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class zTe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return $H(e,t)}getParentElement(e){return JA(e)}query(e,t,r){return XH(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,s=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(l.easing=o);const c=new Map,u=s.filter(f=>f instanceof y7);(function jAe(n,e){return 0===n||0===e})(r,i)&&u.forEach(f=>{f.currentSnapshot.forEach((m,p)=>c.set(p,m))});let d=function zAe(n){return n.length?n[0]instanceof Map?n:n.map(e=>QH(e)):[]}(t).map(f=>ed(f));d=function WAe(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,r7(n,a)))}}return e}(e,d,c);const h=function LTe(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=vT(e[0]),e.length>1&&(r=vT(e[e.length-1]))):e instanceof Map&&(t=vT(e)),t||r?new BTe(n,t,r):null}(e,d);return new y7(e,d,l,h)}}let UTe=(()=>{class n extends Q8{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Na.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?J8(t):t;return b7(this._renderer,null,r,"register",[i]),new HTe(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Oe(tg),Oe(rr))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class HTe extends Wwe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new GTe(this._id,e,t||{},this._renderer)}}class GTe{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return b7(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function b7(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const x7="@.disabled";let jTe=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(o);return u||(u=new w7("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,u)),u}const s=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,a,t,u.name,u)};return r.data.animation.forEach(l),new WTe(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Oe(tg),Oe(Cw),Oe(Zn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class w7{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==x7?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class WTe extends w7{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==x7?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function qTe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function $Te(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const M7=[{provide:Q8,useClass:UTe},{provide:dT,useFactory:function YTe(){return new pTe}},{provide:Cw,useClass:(()=>{class n extends Cw{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr),Oe(eT),Oe(dT),Oe(Cf))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})()},{provide:tg,useFactory:function ZTe(n,e,t){return new jTe(n,e,t)},deps:[ry,Cw,Zn]}],_T=[{provide:eT,useFactory:()=>new zTe},{provide:Mf,useValue:"BrowserAnimations"},...M7],C7=[{provide:eT,useClass:YH},{provide:Mf,useValue:"NoopAnimations"},...M7];let KTe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?C7:_T}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({providers:_T,imports:[QR]}),n})(),sIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ds,Ef,Ix]}),n})();const aIe=["addListener","removeListener"],lIe=["addEventListener","removeEventListener"],cIe=["on","off"];function Ew(n,e,t,r){if(Xe(t)&&(r=t,t=void 0),r)return Ew(n,e,t).pipe(AC(r));const[i,o]=function hIe(n){return Xe(n.addEventListener)&&Xe(n.removeEventListener)}(n)?lIe.map(s=>a=>n[s](e,a,t)):function uIe(n){return Xe(n.addListener)&&Xe(n.removeListener)}(n)?aIe.map(D7(n,e)):function dIe(n){return Xe(n.on)&&Xe(n.off)}(n)?cIe.map(D7(n,e)):[];if(!i&&vt(n))return Wr(s=>Ew(s,e,t))(fr(n));if(!i)throw new TypeError("Invalid event target");return new _n(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return i(a),()=>o(a)})}function D7(n,e){return t=>r=>n[t](e,r)}const O0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=O0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new st(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=O0;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=O0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},mIe=new class pIe extends ND{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class fIe extends OD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=O0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(O0.cancelAnimationFrame(t),e._scheduled=void 0)}});let yT,gIe=1;const Dw={};function A7(n){return n in Dw&&(delete Dw[n],!0)}const vIe={setImmediate(n){const e=gIe++;return Dw[e]=!0,yT||(yT=Promise.resolve()),yT.then(()=>A7(e)&&n()),e},clearImmediate(n){A7(n)}},{setImmediate:_Ie,clearImmediate:yIe}=vIe,Aw={setImmediate(...n){const{delegate:e}=Aw;return(e?.setImmediate||_Ie)(...n)},clearImmediate(n){const{delegate:e}=Aw;return(e?.clearImmediate||yIe)(n)},delegate:void 0},wIe=new class xIe extends ND{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class bIe extends OD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Aw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(Aw.clearImmediate(t),e._scheduled=void 0)}});function bT(n,e=RD){return function MIe(n){return br((e,t)=>{let r=!1,i=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const c=i;i=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(zr(t,c=>{r=!0,i=c,o||fr(n(c)).subscribe(o=zr(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>function SIe(n=0,e,t=s1e){let r=-1;return null!=e&&(od(e)?t=e:r=e),new _n(i=>{let o=function CIe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,e))}const EIe=["contentWrapper"],DIe=["*"],AIe=new bt("VIRTUAL_SCROLL_STRATEGY");let Tw=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Tn,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new _n(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(bT(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Zt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(ja(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Qp(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ew(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Oe(Zn),Oe(rl),Oe(rr,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T7=(()=>{class n{constructor(t,r,i,o){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new Tn,this._elementScrolled=new _n(s=>this.ngZone.runOutsideAngular(()=>Ew(this.elementRef.nativeElement,"scroll").pipe(Pv(this._destroyed)).subscribe(s)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Iv()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Iv()?t.left=t.right:1==Iv()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;rU()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const s=this.dir&&"rtl"==this.dir.value;return"start"==t?t=s?i:r:"end"==t&&(t=s?r:i),s&&2==Iv()?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&1==Iv()?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(Me(ni),Me(Tw),Me(Zn),Me(Tx,8))},n.\u0275dir=tn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),xT=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Tn,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(bT(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Oe(rl),Oe(Zn),Oe(rr,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I7=new bt("VIRTUAL_SCROLLABLE");let PIe=(()=>{class n extends T7{constructor(t,r,i,o){super(t,r,i,o)}measureViewportSize(t){const r=this.elementRef.nativeElement;return"horizontal"===t?r.clientWidth:r.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(Me(ni),Me(Tw),Me(Zn),Me(Tx,8))},n.\u0275dir=tn({type:n,features:[zn]}),n})();const NIe=typeof requestAnimationFrame<"u"?mIe:wIe;let RIe=(()=>{class n extends PIe{constructor(t,r,i,o,s,a,l,c){super(t,a,i,s),this.elementRef=t,this._changeDetectorRef=r,this._scrollStrategy=o,this.scrollable=c,this._platform=Vn(rl),this._detachedSubject=new Tn,this._renderedRangeSubject=new Tn,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new _n(u=>this._scrollStrategy.scrolledIndexChange.subscribe(d=>Promise.resolve().then(()=>this.ngZone.run(()=>u.next(d))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=st.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=us(t)}ngOnInit(){!this._platform.isBrowser||(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(PC(null),bT(0,NIe)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(Pv(this._detachedSubject)).subscribe(r=>{const i=r.length;i!==this._dataLength&&(this._dataLength=i,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function OIe(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,r="to-start"){t=this.appendOnly&&"to-start"===r?0:t;const o="horizontal"==this.orientation,s=o?"X":"Y";let l=`translate${s}(${Number((o&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===r&&(l+=` translate${s}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,r="auto"){const i={behavior:r};"horizontal"===this.orientation?i.start=t:i.top=t,this.scrollable.scrollTo(i)}scrollToIndex(t,r="auto"){this._scrollStrategy.scrollToIndex(t,r)}measureScrollOffset(t){let r;return r=this.scrollable==this?i=>super.measureScrollOffset(i):i=>this.scrollable.measureScrollOffset(i),Math.max(0,r(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let r;const i="left",o="right",s="rtl"==this.dir?.value;r="start"==t?s?o:i:"end"==t?s?i:o:t||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(r);return this.elementRef.nativeElement.getBoundingClientRect()[r]-a}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const r of t)r()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(Me(ni),Me(rs),Me(Zn),Me(AIe,8),Me(Tx,8),Me(Tw),Me(xT),Me(I7,8))},n.\u0275cmp=Dr({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,r){if(1&t&&po(EIe,7),2&t){let i;ki(i=Li())&&(r._contentWrapper=i.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,r){2&t&&ai("cdk-virtual-scroll-orientation-horizontal","horizontal"===r.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==r.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Tr([{provide:T7,useFactory:(e,t)=>e||t,deps:[[new _l,new r_(I7)],n]}]),zn,SM],ngContentSelectors:DIe,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,r){1&t&&(lg(),he(0,"div",0,1),cg(2),be(),At(3,"div",2)),2&t&&(Le(3),Uo("width",r._totalContentWidth)("height",r._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),wT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({}),n})(),P7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[Nv,wT,RIe,Nv,wT]}),n})();class MT{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class FIe extends MT{constructor(e,t,r,i,o){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=o}}class kIe extends MT{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class LIe extends MT{constructor(e){super(),this.element=e instanceof ni?e.nativeElement:e}}class BIe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof FIe?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof kIe?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof LIe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class VIe extends BIe{constructor(e,t,r,i,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Ms.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let zIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({}),n})();const O7=rU();class UIe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Gi(-this._previousScrollPosition.left),e.style.top=Gi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),O7&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),O7&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class HIe{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class N7{enable(){}disable(){}attach(){}}function CT(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function R7(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class GIe{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();CT(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let jIe=(()=>{class n{constructor(t,r,i,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new N7,this.close=s=>new HIe(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new UIe(this._viewportRuler,this._document),this.reposition=s=>new GIe(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(Oe(Tw),Oe(xT),Oe(Zn),Oe(rr))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WIe{constructor(e){if(this.scrollStrategy=new N7,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class qIe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let F7=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$Ie=(()=>{class n extends F7{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr),Oe(Zn,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XIe=(()=>{class n extends F7{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Vu(o)},this._clickListener=o=>{const s=Vu(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(s)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(o)):d.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr),Oe(rl),Oe(Zn,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k7=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||PD()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),PD()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(Oe(rr),Oe(rl))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class YIe{constructor(e,t,r,i,o,s,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Tn,this._attachments=new Tn,this._detachments=new Tn,this._locationChanges=st.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Tn,this._outsidePointerEvents=new Tn,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(iu(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Gi(this._config.width),e.height=Gi(this._config.height),e.minWidth=Gi(this._config.minWidth),e.minHeight=Gi(this._config.minHeight),e.maxWidth=Gi(this._config.maxWidth),e.maxHeight=Gi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=Ex(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Pv(ys(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const L7="cdk-overlay-connected-position-bounding-box",ZIe=/([A-Za-z%]+)$/;class KIe{constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Tn,this._resizeSubscription=st.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(L7),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(const c of o){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Dh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(L7),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,o;if("center"==r.originX)i=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?s:a}return t.left<0&&(i-=t.left),o="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){const o=V7(t);let{x:s,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(s+=l),c&&(a+=c);let h=0-a,f=a+o.height-r.height,m=this._subtractOverflows(o.width,0-s,s+o.width-r.width),p=this._subtractOverflows(o.height,h,f),g=m*p;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:p===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,s=B7(this._overlayRef.getConfig().minHeight),a=B7(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=o;return(e.fitsInViewportVertically||null!=s&&s<=i)&&c}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=V7(t),o=this._viewportRect,s=Math.max(e.x+i.width-o.width,0),a=Math.max(e.y+i.height-o.height,0),l=Math.max(o.top-r.top-e.y,0),c=Math.max(o.left-r.left-e.x,0);let u=0,d=0;return u=i.width<=o.width?c||-s:e.x<this._viewportMargin?o.left-r.left-e.x:0,d=i.height<=o.height?l||-a:e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new qIe(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let o,s,a,u,d,h;if("top"===t.overlayY)s=e.y,o=r.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,o=r.height-a+this._viewportMargin;else{const f=Math.min(r.bottom-e.y+r.top,e.y),m=this._lastBoundingBoxSize.height;o=2*f,s=e.y-f,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-m/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)h=r.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)d=e.x,u=r.right-e.x;else{const f=Math.min(r.right-e.x+r.left,e.x),m=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-m/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=Gi(r.height),i.top=Gi(r.top),i.bottom=Gi(r.bottom),i.width=Gi(r.width),i.left=Gi(r.left),i.right=Gi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=Gi(o)),s&&(i.maxWidth=Gi(s))}this._lastBoundingBoxSize=r,Dh(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Dh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Dh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();Dh(r,this._getExactOverlayY(t,e,u)),Dh(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=Gi(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=Gi(s.maxWidth):o&&(r.maxWidth="")),Dh(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=Gi(o.y),i}_getExactOverlayX(e,t,r){let s,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Gi(o.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:R7(e,r),isOriginOutsideView:CT(e,r),isOverlayClipped:R7(t,r),isOverlayOutsideView:CT(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Ex(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ni)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Dh(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function B7(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(ZIe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function V7(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const z7="cdk-global-overlay-wrapper";class QIe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(z7),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",m="",p="";l?p="flex-start":"center"===u?(p="center",h?m=d:f=d):h?"left"===u||"end"===u?(p="flex-end",f=d):("right"===u||"start"===u)&&(p="flex-start",m=d):"left"===u||"start"===u?(p="flex-start",f=d):("right"===u||"end"===u)&&(p="flex-end",m=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,t.justifyContent=p,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(z7),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let JIe=(()=>{class n{constructor(t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new QIe}flexibleConnectedTo(t){return new KIe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Oe(xT),Oe(rr),Oe(rl),Oe(k7))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ePe=0,ST=(()=>{class n{constructor(t,r,i,o,s,a,l,c,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),s=new WIe(t);return s.direction=s.direction||this._directionality.value,new YIe(o,r,i,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+ePe++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Cf)),new VIe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Oe(jIe),Oe(k7),Oe(tf),Oe(JIe),Oe($Ie),Oe(Ms),Oe(Zn),Oe(rr),Oe(Tx),Oe(j_),Oe(XIe),Oe(Mf,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rPe={provide:new bt("cdk-connected-overlay-scroll-strategy"),deps:[ST],useFactory:function nPe(n){return()=>n.scrollStrategies.reposition()}};let iPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({providers:[ST,rPe],imports:[Nv,zIe,P7,P7]}),n})(),oPe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({providers:[oPe]}),n})(),fPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({imports:[ds,Ef,sPe,ds]}),n})();const _Pe={provide:new bt("mat-select-scroll-strategy"),deps:[ST],useFactory:function vPe(n){return()=>n.scrollStrategies.reposition()}};let yPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kr({type:n}),n.\u0275inj=Er({providers:[_Pe],imports:[Ef,iPe,EU,ds,wT,fPe,EU,ds]}),n})();St(386);class Mm{}Mm.\u0275fac=function(e){return new(e||Mm)},Mm.\u0275mod=kr({type:Mm,bootstrap:[D0]}),Mm.\u0275inj=Er({providers:[{provide:iy,useClass:rF}],imports:[QR,xm,KTe,yDe,vMe,BCe,DCe,yPe,sIe,OQ]}),xQ().bootstrapModule(Mm).catch(n=>console.error(n))},6:function(qt,Qt){var Xe;!function(It){"use strict";var qe=Math.cosh||function(N){return Math.abs(N)<1e-9?1-N:.5*(Math.exp(N)+Math.exp(-N))},ke=Math.sinh||function(N){return Math.abs(N)<1e-9?N:.5*(Math.exp(N)-Math.exp(-N))},ft=function(){throw SyntaxError("Invalid Param")};function Be(N,L){var U=Math.abs(N),Y=Math.abs(L);return 0===N?Math.log(Y):0===L?Math.log(U):U<3e3&&Y<3e3?.5*Math.log(N*N+L*L):(N/=2,L/=2,.5*Math.log(N*N+L*L)+Math.LN2)}function Q(N,L){if(!(this instanceof Q))return new Q(N,L);var U=function(N,L){var U={re:0,im:0};if(null==N)U.re=U.im=0;else if(void 0!==L)U.re=N,U.im=L;else switch(typeof N){case"object":if("im"in N&&"re"in N)U.re=N.re,U.im=N.im;else if("abs"in N&&"arg"in N){if(!Number.isFinite(N.abs)&&Number.isFinite(N.arg))return Q.INFINITY;U.re=N.abs*Math.cos(N.arg),U.im=N.abs*Math.sin(N.arg)}else if("r"in N&&"phi"in N){if(!Number.isFinite(N.r)&&Number.isFinite(N.phi))return Q.INFINITY;U.re=N.r*Math.cos(N.phi),U.im=N.r*Math.sin(N.phi)}else 2===N.length?(U.re=N[0],U.im=N[1]):ft();break;case"string":U.im=U.re=0;var Y=N.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),ee=1,fe=0;null===Y&&ft();for(var Ie=0;Ie<Y.length;Ie++){var rt=Y[Ie];" "===rt||"\t"===rt||"\n"===rt||("+"===rt?ee++:"-"===rt?fe++:"i"===rt||"I"===rt?(ee+fe===0&&ft()," "===Y[Ie+1]||isNaN(Y[Ie+1])?U.im+=parseFloat((fe%2?"-":"")+"1"):(U.im+=parseFloat((fe%2?"-":"")+Y[Ie+1]),Ie++),ee=fe=0):((ee+fe===0||isNaN(rt))&&ft(),"i"===Y[Ie+1]||"I"===Y[Ie+1]?(U.im+=parseFloat((fe%2?"-":"")+rt),Ie++):U.re+=parseFloat((fe%2?"-":"")+rt),ee=fe=0))}ee+fe>0&&ft();break;case"number":U.im=0,U.re=N;break;default:ft()}return isNaN(U.re)||isNaN(U.im),U}(N,L);this.re=U.re,this.im=U.im}Q.prototype={re:0,im:0,sign:function(){var N=this.abs();return new Q(this.re/N,this.im/N)},add:function(N,L){var U=new Q(N,L);return this.isInfinite()&&U.isInfinite()?Q.NAN:this.isInfinite()||U.isInfinite()?Q.INFINITY:new Q(this.re+U.re,this.im+U.im)},sub:function(N,L){var U=new Q(N,L);return this.isInfinite()&&U.isInfinite()?Q.NAN:this.isInfinite()||U.isInfinite()?Q.INFINITY:new Q(this.re-U.re,this.im-U.im)},mul:function(N,L){var U=new Q(N,L);return this.isInfinite()&&U.isZero()||this.isZero()&&U.isInfinite()?Q.NAN:this.isInfinite()||U.isInfinite()?Q.INFINITY:0===U.im&&0===this.im?new Q(this.re*U.re,0):new Q(this.re*U.re-this.im*U.im,this.re*U.im+this.im*U.re)},div:function(N,L){var U=new Q(N,L);if(this.isZero()&&U.isZero()||this.isInfinite()&&U.isInfinite())return Q.NAN;if(this.isInfinite()||U.isZero())return Q.INFINITY;if(this.isZero()||U.isInfinite())return Q.ZERO;N=this.re,L=this.im;var fe,Ie,Y=U.re,ee=U.im;return 0===ee?new Q(N/Y,L/Y):Math.abs(Y)<Math.abs(ee)?new Q((N*(Ie=Y/ee)+L)/(fe=Y*Ie+ee),(L*Ie-N)/fe):new Q((N+L*(Ie=ee/Y))/(fe=ee*Ie+Y),(L-N*Ie)/fe)},pow:function(N,L){var U=new Q(N,L);if(N=this.re,L=this.im,U.isZero())return Q.ONE;if(0===U.im){if(0===L&&N>0)return new Q(Math.pow(N,U.re),0);if(0===N)switch((U.re%4+4)%4){case 0:return new Q(Math.pow(L,U.re),0);case 1:return new Q(0,Math.pow(L,U.re));case 2:return new Q(-Math.pow(L,U.re),0);case 3:return new Q(0,-Math.pow(L,U.re))}}if(0===N&&0===L&&U.re>0&&U.im>=0)return Q.ZERO;var Y=Math.atan2(L,N),ee=Be(N,L);return N=Math.exp(U.re*ee-U.im*Y),L=U.im*ee+U.re*Y,new Q(N*Math.cos(L),N*Math.sin(L))},sqrt:function(){var Y,ee,N=this.re,L=this.im,U=this.abs();if(N>=0){if(0===L)return new Q(Math.sqrt(N),0);Y=.5*Math.sqrt(2*(U+N))}else Y=Math.abs(L)/Math.sqrt(2*(U-N));return ee=N<=0?.5*Math.sqrt(2*(U-N)):Math.abs(L)/Math.sqrt(2*(U+N)),new Q(Y,L<0?-ee:ee)},exp:function(){var N=Math.exp(this.re);return new Q(N*Math.cos(this.im),N*Math.sin(this.im))},expm1:function(){var N=this.re,L=this.im;return new Q(Math.expm1(N)*Math.cos(L)+function(N){var L=Math.PI/4;if(-L>N||N>L)return Math.cos(N)-1;var U=N*N;return U*(U*(U*(U*(U*(U*(U*(U/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(L),Math.exp(N)*Math.sin(L))},log:function(){var N=this.re,L=this.im;return new Q(Be(N,L),Math.atan2(L,N))},abs:function(){return N=this.re,L=this.im,U=Math.abs(N),Y=Math.abs(L),U<3e3&&Y<3e3?Math.sqrt(U*U+Y*Y):(U<Y?(U=Y,Y=N/L):Y=L/N,U*Math.sqrt(1+Y*Y));var N,L,U,Y},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var N=this.re,L=this.im;return new Q(Math.sin(N)*qe(L),Math.cos(N)*ke(L))},cos:function(){var N=this.re,L=this.im;return new Q(Math.cos(N)*qe(L),-Math.sin(N)*ke(L))},tan:function(){var N=2*this.re,L=2*this.im,U=Math.cos(N)+qe(L);return new Q(Math.sin(N)/U,ke(L)/U)},cot:function(){var N=2*this.re,L=2*this.im,U=Math.cos(N)-qe(L);return new Q(-Math.sin(N)/U,ke(L)/U)},sec:function(){var N=this.re,L=this.im,U=.5*qe(2*L)+.5*Math.cos(2*N);return new Q(Math.cos(N)*qe(L)/U,Math.sin(N)*ke(L)/U)},csc:function(){var N=this.re,L=this.im,U=.5*qe(2*L)-.5*Math.cos(2*N);return new Q(Math.sin(N)*qe(L)/U,-Math.cos(N)*ke(L)/U)},asin:function(){var N=this.re,L=this.im,U=new Q(L*L-N*N+1,-2*N*L).sqrt(),Y=new Q(U.re-L,U.im+N).log();return new Q(Y.im,-Y.re)},acos:function(){var N=this.re,L=this.im,U=new Q(L*L-N*N+1,-2*N*L).sqrt(),Y=new Q(U.re-L,U.im+N).log();return new Q(Math.PI/2-Y.im,Y.re)},atan:function(){var N=this.re,L=this.im;if(0===N){if(1===L)return new Q(0,1/0);if(-1===L)return new Q(0,-1/0)}var U=N*N+(1-L)*(1-L),Y=new Q((1-L*L-N*N)/U,-2*N/U).log();return new Q(-.5*Y.im,.5*Y.re)},acot:function(){var N=this.re,L=this.im;if(0===L)return new Q(Math.atan2(1,N),0);var U=N*N+L*L;return 0!==U?new Q(N/U,-L/U).atan():new Q(0!==N?N/0:0,0!==L?-L/0:0).atan()},asec:function(){var N=this.re,L=this.im;if(0===N&&0===L)return new Q(0,1/0);var U=N*N+L*L;return 0!==U?new Q(N/U,-L/U).acos():new Q(0!==N?N/0:0,0!==L?-L/0:0).acos()},acsc:function(){var N=this.re,L=this.im;if(0===N&&0===L)return new Q(Math.PI/2,1/0);var U=N*N+L*L;return 0!==U?new Q(N/U,-L/U).asin():new Q(0!==N?N/0:0,0!==L?-L/0:0).asin()},sinh:function(){var N=this.re,L=this.im;return new Q(ke(N)*Math.cos(L),qe(N)*Math.sin(L))},cosh:function(){var N=this.re,L=this.im;return new Q(qe(N)*Math.cos(L),ke(N)*Math.sin(L))},tanh:function(){var N=2*this.re,L=2*this.im,U=qe(N)+Math.cos(L);return new Q(ke(N)/U,Math.sin(L)/U)},coth:function(){var N=2*this.re,L=2*this.im,U=qe(N)-Math.cos(L);return new Q(ke(N)/U,-Math.sin(L)/U)},csch:function(){var N=this.re,L=this.im,U=Math.cos(2*L)-qe(2*N);return new Q(-2*ke(N)*Math.cos(L)/U,2*qe(N)*Math.sin(L)/U)},sech:function(){var N=this.re,L=this.im,U=Math.cos(2*L)+qe(2*N);return new Q(2*qe(N)*Math.cos(L)/U,-2*ke(N)*Math.sin(L)/U)},asinh:function(){var N=this.im;this.im=-this.re,this.re=N;var L=this.asin();return this.re=-this.im,this.im=N,N=L.re,L.re=-L.im,L.im=N,L},acosh:function(){var N=this.acos();if(N.im<=0){var L=N.re;N.re=-N.im,N.im=L}else L=N.im,N.im=-N.re,N.re=L;return N},atanh:function(){var N=this.re,L=this.im,U=N>1&&0===L,Y=1-N,ee=1+N,fe=Y*Y+L*L,Ie=0!==fe?new Q((ee*Y-L*L)/fe,(L*Y+ee*L)/fe):new Q(-1!==N?N/0:0,0!==L?L/0:0),rt=Ie.re;return Ie.re=Be(Ie.re,Ie.im)/2,Ie.im=Math.atan2(Ie.im,rt)/2,U&&(Ie.im=-Ie.im),Ie},acoth:function(){var N=this.re,L=this.im;if(0===N&&0===L)return new Q(0,Math.PI/2);var U=N*N+L*L;return 0!==U?new Q(N/U,-L/U).atanh():new Q(0!==N?N/0:0,0!==L?-L/0:0).atanh()},acsch:function(){var N=this.re,L=this.im;if(0===L)return new Q(0!==N?Math.log(N+Math.sqrt(N*N+1)):1/0,0);var U=N*N+L*L;return 0!==U?new Q(N/U,-L/U).asinh():new Q(0!==N?N/0:0,0!==L?-L/0:0).asinh()},asech:function(){var N=this.re,L=this.im;if(this.isZero())return Q.INFINITY;var U=N*N+L*L;return 0!==U?new Q(N/U,-L/U).acosh():new Q(0!==N?N/0:0,0!==L?-L/0:0).acosh()},inverse:function(){if(this.isZero())return Q.INFINITY;if(this.isInfinite())return Q.ZERO;var N=this.re,L=this.im,U=N*N+L*L;return new Q(N/U,-L/U)},conjugate:function(){return new Q(this.re,-this.im)},neg:function(){return new Q(-this.re,-this.im)},ceil:function(N){return N=Math.pow(10,N||0),new Q(Math.ceil(this.re*N)/N,Math.ceil(this.im*N)/N)},floor:function(N){return N=Math.pow(10,N||0),new Q(Math.floor(this.re*N)/N,Math.floor(this.im*N)/N)},round:function(N){return N=Math.pow(10,N||0),new Q(Math.round(this.re*N)/N,Math.round(this.im*N)/N)},equals:function(N,L){var U=new Q(N,L);return Math.abs(U.re-this.re)<=Q.EPSILON&&Math.abs(U.im-this.im)<=Q.EPSILON},clone:function(){return new Q(this.re,this.im)},toString:function(){var N=this.re,L=this.im,U="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(N)<Q.EPSILON&&(N=0),Math.abs(L)<Q.EPSILON&&(L=0),0===L?U+N:(0!==N?(U+=N,U+=" ",L<0?(L=-L,U+="-"):U+="+",U+=" "):L<0&&(L=-L,U+="-"),1!==L&&(U+=L),U+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},Q.ZERO=new Q(0,0),Q.ONE=new Q(1,0),Q.I=new Q(0,1),Q.PI=new Q(Math.PI,0),Q.E=new Q(Math.E,0),Q.INFINITY=new Q(1/0,1/0),Q.NAN=new Q(NaN,NaN),Q.EPSILON=1e-15,void 0!==(Xe=function(){return Q}.apply(Qt,[]))&&(qt.exports=Xe)}()},613:function(qt,Qt){var Xe;!function(It){"use strict";var ke={s:1,n:0,d:1};function st(Y,ee){if(isNaN(Y=parseInt(Y,10)))throw U.InvalidParameter;return Y*ee}function at(Y,ee){if(0===ee)throw U.DivisionByZero;var fe=Object.create(U.prototype);fe.s=Y<0?-1:1;var Ie=L(Y=Y<0?-Y:Y,ee);return fe.n=Y/Ie,fe.d=ee/Ie,fe}function ft(Y){for(var ee={},fe=Y,Ie=2,rt=4;rt<=fe;){for(;fe%Ie==0;)fe/=Ie,ee[Ie]=(ee[Ie]||0)+1;rt+=1+2*Ie++}return fe!==Y?fe>1&&(ee[fe]=(ee[fe]||0)+1):ee[Y]=(ee[Y]||0)+1,ee}var Be=function(Y,ee){var Fn,fe=0,Ie=1,rt=1,se=0,le=0,Ce=0,xt=1,Ft=1,we=0,xe=1,je=1,$e=1,ut=1e7;if(null!=Y)if(void 0!==ee){if(rt=(fe=Y)*(Ie=ee),fe%1!=0||Ie%1!=0)throw U.NonIntegerParameter}else switch(typeof Y){case"object":if("d"in Y&&"n"in Y)fe=Y.n,Ie=Y.d,"s"in Y&&(fe*=Y.s);else{if(!(0 in Y))throw U.InvalidParameter;fe=Y[0],1 in Y&&(Ie=Y[1])}rt=fe*Ie;break;case"number":if(Y<0&&(rt=Y,Y=-Y),Y%1==0)fe=Y;else if(Y>0){for(Y>=1&&(Y/=Ft=Math.pow(10,Math.floor(1+Math.log(Y)/Math.LN10)));xe<=ut&&$e<=ut;){if(Y===(Fn=(we+je)/(xe+$e))){xe+$e<=ut?(fe=we+je,Ie=xe+$e):$e>xe?(fe=je,Ie=$e):(fe=we,Ie=xe);break}Y>Fn?(we+=je,xe+=$e):(je+=we,$e+=xe),xe>ut?(fe=je,Ie=$e):(fe=we,Ie=xe)}fe*=Ft}else(isNaN(Y)||isNaN(ee))&&(Ie=fe=NaN);break;case"string":if(null===(xe=Y.match(/\d+|./g)))throw U.InvalidParameter;if("-"===xe[we]?(rt=-1,we++):"+"===xe[we]&&we++,xe.length===we+1?le=st(xe[we++],rt):"."===xe[we+1]||"."===xe[we]?("."!==xe[we]&&(se=st(xe[we++],rt)),(1+ ++we===xe.length||"("===xe[we+1]&&")"===xe[we+3]||"'"===xe[we+1]&&"'"===xe[we+3])&&(le=st(xe[we],rt),xt=Math.pow(10,xe[we].length),we++),("("===xe[we]&&")"===xe[we+2]||"'"===xe[we]&&"'"===xe[we+2])&&(Ce=st(xe[we+1],rt),Ft=Math.pow(10,xe[we+1].length)-1,we+=3)):"/"===xe[we+1]||":"===xe[we+1]?(le=st(xe[we],rt),xt=st(xe[we+2],1),we+=3):"/"===xe[we+3]&&" "===xe[we+1]&&(se=st(xe[we],rt),le=st(xe[we+2],rt),xt=st(xe[we+4],1),we+=5),xe.length<=we){rt=fe=Ce+(Ie=xt*Ft)*se+Ft*le;break}default:throw U.InvalidParameter}if(0===Ie)throw U.DivisionByZero;ke.s=rt<0?-1:1,ke.n=Math.abs(fe),ke.d=Math.abs(Ie)};function L(Y,ee){if(!Y)return ee;if(!ee)return Y;for(;;){if(!(Y%=ee))return ee;if(!(ee%=Y))return Y}}function U(Y,ee){if(Be(Y,ee),!(this instanceof U))return at(ke.s*ke.n,ke.d);Y=L(ke.d,ke.n),this.s=ke.s,this.n=ke.n/Y,this.d=ke.d/Y}U.DivisionByZero=new Error("Division by Zero"),U.InvalidParameter=new Error("Invalid argument"),U.NonIntegerParameter=new Error("Parameters must be integer"),U.prototype={s:1,n:0,d:1,abs:function(){return at(this.n,this.d)},neg:function(){return at(-this.s*this.n,this.d)},add:function(Y,ee){return Be(Y,ee),at(this.s*this.n*ke.d+ke.s*this.d*ke.n,this.d*ke.d)},sub:function(Y,ee){return Be(Y,ee),at(this.s*this.n*ke.d-ke.s*this.d*ke.n,this.d*ke.d)},mul:function(Y,ee){return Be(Y,ee),at(this.s*ke.s*this.n*ke.n,this.d*ke.d)},div:function(Y,ee){return Be(Y,ee),at(this.s*ke.s*this.n*ke.d,this.d*ke.n)},clone:function(){return at(this.s*this.n,this.d)},mod:function(Y,ee){if(isNaN(this.n)||isNaN(this.d))return new U(NaN);if(void 0===Y)return at(this.s*this.n%this.d,1);if(Be(Y,ee),0===ke.n&&0===this.d)throw U.DivisionByZero;return at(this.s*(ke.d*this.n)%(ke.n*this.d),ke.d*this.d)},gcd:function(Y,ee){return Be(Y,ee),at(L(ke.n,this.n)*L(ke.d,this.d),ke.d*this.d)},lcm:function(Y,ee){return Be(Y,ee),0===ke.n&&0===this.n?at(0,1):at(ke.n*this.n,L(ke.n,this.n)*L(ke.d,this.d))},ceil:function(Y){return Y=Math.pow(10,Y||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):at(Math.ceil(Y*this.s*this.n/this.d),Y)},floor:function(Y){return Y=Math.pow(10,Y||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):at(Math.floor(Y*this.s*this.n/this.d),Y)},round:function(Y){return Y=Math.pow(10,Y||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):at(Math.round(Y*this.s*this.n/this.d),Y)},inverse:function(){return at(this.s*this.d,this.n)},pow:function(Y,ee){if(Be(Y,ee),1===ke.d)return ke.s<0?at(Math.pow(this.s*this.d,ke.n),Math.pow(this.n,ke.n)):at(Math.pow(this.s*this.n,ke.n),Math.pow(this.d,ke.n));if(this.s<0)return null;var fe=ft(this.n),Ie=ft(this.d),rt=1,se=1;for(var le in fe)if("1"!==le){if("0"===le){rt=0;break}if(fe[le]*=ke.n,fe[le]%ke.d!=0)return null;fe[le]/=ke.d,rt*=Math.pow(le,fe[le])}for(var le in Ie)if("1"!==le){if(Ie[le]*=ke.n,Ie[le]%ke.d!=0)return null;Ie[le]/=ke.d,se*=Math.pow(le,Ie[le])}return ke.s<0?at(se,rt):at(rt,se)},equals:function(Y,ee){return Be(Y,ee),this.s*this.n*ke.d==ke.s*ke.n*this.d},compare:function(Y,ee){Be(Y,ee);var fe=this.s*this.n*ke.d-ke.s*ke.n*this.d;return(0<fe)-(fe<0)},simplify:function(Y){if(isNaN(this.n)||isNaN(this.d))return this;Y=Y||.001;for(var ee=this.abs(),fe=ee.toContinued(),Ie=1;Ie<fe.length;Ie++){for(var rt=at(fe[Ie-1],1),se=Ie-2;se>=0;se--)rt=rt.inverse().add(fe[se]);if(rt.sub(ee).abs().valueOf()<Y)return rt.mul(this.s)}return this},divisible:function(Y,ee){return Be(Y,ee),!(!(ke.n*this.d)||this.n*ke.d%(ke.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(Y){var ee,fe="",Ie=this.n,rt=this.d;return this.s<0&&(fe+="-"),1===rt?fe+=Ie:(Y&&(ee=Math.floor(Ie/rt))>0&&(fe+=ee,fe+=" ",Ie%=rt),fe+=Ie,fe+="/",fe+=rt),fe},toLatex:function(Y){var ee,fe="",Ie=this.n,rt=this.d;return this.s<0&&(fe+="-"),1===rt?fe+=Ie:(Y&&(ee=Math.floor(Ie/rt))>0&&(fe+=ee,Ie%=rt),fe+="\\frac{",fe+=Ie,fe+="}{",fe+=rt,fe+="}"),fe},toContinued:function(){var Y,ee=this.n,fe=this.d,Ie=[];if(isNaN(ee)||isNaN(fe))return Ie;do{Ie.push(Math.floor(ee/fe)),Y=ee%fe,ee=fe,fe=Y}while(1!==ee);return Ie},toString:function(Y){var ee=this.n,fe=this.d;if(isNaN(ee)||isNaN(fe))return"NaN";Y=Y||15;var Ie=function Q(Y,ee){for(;ee%2==0;ee/=2);for(;ee%5==0;ee/=5);if(1===ee)return 0;for(var fe=10%ee,Ie=1;1!==fe;Ie++)if(fe=10*fe%ee,Ie>2e3)return 0;return Ie}(0,fe),rt=function N(Y,ee,fe){for(var Ie=1,rt=function oe(Y,ee,fe){for(var Ie=1;ee>0;Y=Y*Y%fe,ee>>=1)1&ee&&(Ie=Ie*Y%fe);return Ie}(10,fe,ee),se=0;se<300;se++){if(Ie===rt)return se;Ie=10*Ie%ee,rt=10*rt%ee}return 0}(0,fe,Ie),se=this.s<0?"-":"";if(se+=ee/fe|0,ee%=fe,(ee*=10)&&(se+="."),Ie){for(var le=rt;le--;)se+=ee/fe|0,ee%=fe,ee*=10;for(se+="(",le=Ie;le--;)se+=ee/fe|0,ee%=fe,ee*=10;se+=")"}else for(le=Y;ee&&le--;)se+=ee/fe|0,ee%=fe,ee*=10;return se}},void 0!==(Xe=function(){return U}.apply(Qt,[]))&&(qt.exports=Xe)}()},386:(qt,Qt,St)=>{var Xe;!function(It,qe,ke,st){"use strict";var fe,at=["","webkit","Moz","MS","ms","o"],ft=qe.createElement("div"),oe=Math.round,Q=Math.abs,N=Date.now;function L(B,j,de){return setTimeout(le(B,de),j)}function U(B,j,de){return!!Array.isArray(B)&&(Y(B,de[j],de),!0)}function Y(B,j,de){var Ve;if(B)if(B.forEach)B.forEach(j,de);else if(B.length!==st)for(Ve=0;Ve<B.length;)j.call(de,B[Ve],Ve,B),Ve++;else for(Ve in B)B.hasOwnProperty(Ve)&&j.call(de,B[Ve],Ve,B)}function ee(B,j,de){var Ve="DEPRECATED METHOD: "+j+"\n"+de+" AT \n";return function(){var pt=new Error("get-stack-trace"),kt=pt&&pt.stack?pt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Xn=It.console&&(It.console.warn||It.console.log);return Xn&&Xn.call(It.console,Ve,kt),B.apply(this,arguments)}}fe="function"!=typeof Object.assign?function(j){if(j===st||null===j)throw new TypeError("Cannot convert undefined or null to object");for(var de=Object(j),Ve=1;Ve<arguments.length;Ve++){var pt=arguments[Ve];if(pt!==st&&null!==pt)for(var kt in pt)pt.hasOwnProperty(kt)&&(de[kt]=pt[kt])}return de}:Object.assign;var Ie=ee(function(j,de,Ve){for(var pt=Object.keys(de),kt=0;kt<pt.length;)(!Ve||Ve&&j[pt[kt]]===st)&&(j[pt[kt]]=de[pt[kt]]),kt++;return j},"extend","Use `assign`."),rt=ee(function(j,de){return Ie(j,de,!0)},"merge","Use `assign`.");function se(B,j,de){var pt,Ve=j.prototype;(pt=B.prototype=Object.create(Ve)).constructor=B,pt._super=Ve,de&&fe(pt,de)}function le(B,j){return function(){return B.apply(j,arguments)}}function Ce(B,j){return"function"==typeof B?B.apply(j&&j[0]||st,j):B}function xt(B,j){return B===st?j:B}function Ft(B,j,de){Y($e(j),function(Ve){B.addEventListener(Ve,de,!1)})}function we(B,j,de){Y($e(j),function(Ve){B.removeEventListener(Ve,de,!1)})}function xe(B,j){for(;B;){if(B==j)return!0;B=B.parentNode}return!1}function je(B,j){return B.indexOf(j)>-1}function $e(B){return B.trim().split(/\s+/g)}function ut(B,j,de){if(B.indexOf&&!de)return B.indexOf(j);for(var Ve=0;Ve<B.length;){if(de&&B[Ve][de]==j||!de&&B[Ve]===j)return Ve;Ve++}return-1}function Fn(B){return Array.prototype.slice.call(B,0)}function dn(B,j,de){for(var Ve=[],pt=[],kt=0;kt<B.length;){var Xn=j?B[kt][j]:B[kt];ut(pt,Xn)<0&&Ve.push(B[kt]),pt[kt]=Xn,kt++}return de&&(Ve=j?Ve.sort(function(uo,Ro){return uo[j]>Ro[j]}):Ve.sort()),Ve}function Dn(B,j){for(var de,Ve,pt=j[0].toUpperCase()+j.slice(1),kt=0;kt<at.length;){if((Ve=(de=at[kt])?de+pt:j)in B)return Ve;kt++}return st}var yo=1;function na(B){var j=B.ownerDocument||B;return j.defaultView||j.parentWindow||It}var cl="ontouchstart"in It,$l=Dn(It,"PointerEvent")!==st,Tn=cl&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),$o="touch",br="mouse",id=["x","y"],qc=["clientX","clientY"];function Xo(B,j){var de=this;this.manager=B,this.callback=j,this.element=B.element,this.target=B.options.inputTarget,this.domHandler=function(Ve){Ce(B.options.enable,[B])&&de.handler(Ve)},this.init()}function Tm(B,j,de){var Ve=de.pointers.length,pt=de.changedPointers.length,kt=1&j&&Ve-pt==0,Xn=12&j&&Ve-pt==0;de.isFirst=!!kt,de.isFinal=!!Xn,kt&&(B.session={}),de.eventType=j,function ra(B,j){var de=B.session,Ve=j.pointers,pt=Ve.length;de.firstInput||(de.firstInput=Oh(j)),pt>1&&!de.firstMultiple?de.firstMultiple=Oh(j):1===pt&&(de.firstMultiple=!1);var kt=de.firstInput,Xn=de.firstMultiple,$i=Xn?Xn.center:kt.center,uo=j.center=Pm(Ve);j.timeStamp=N(),j.deltaTime=j.timeStamp-kt.timeStamp,j.angle=_e($i,uo),j.distance=ae($i,uo),function Ph(B,j){var de=j.center,Ve=B.offsetDelta||{},pt=B.prevDelta||{},kt=B.prevInput||{};(1===j.eventType||4===kt.eventType)&&(pt=B.prevDelta={x:kt.deltaX||0,y:kt.deltaY||0},Ve=B.offsetDelta={x:de.x,y:de.y}),j.deltaX=pt.x+(de.x-Ve.x),j.deltaY=pt.y+(de.y-Ve.y)}(de,j),j.offsetDirection=Rh(j.deltaX,j.deltaY);var Ro=Nh(j.deltaTime,j.deltaX,j.deltaY);j.overallVelocityX=Ro.x,j.overallVelocityY=Ro.y,j.overallVelocity=Q(Ro.x)>Q(Ro.y)?Ro.x:Ro.y,j.scale=Xn?function tt(B,j){return ae(j[0],j[1],qc)/ae(B[0],B[1],qc)}(Xn.pointers,Ve):1,j.rotation=Xn?function Ge(B,j){return _e(j[1],j[0],qc)+_e(B[1],B[0],qc)}(Xn.pointers,Ve):0,j.maxPointers=de.prevInput?j.pointers.length>de.prevInput.maxPointers?j.pointers.length:de.prevInput.maxPointers:j.pointers.length,function Im(B,j){var pt,kt,Xn,$i,de=B.lastInterval||j,Ve=j.timeStamp-de.timeStamp;if(8!=j.eventType&&(Ve>25||de.velocity===st)){var uo=j.deltaX-de.deltaX,Ro=j.deltaY-de.deltaY,oa=Nh(Ve,uo,Ro);kt=oa.x,Xn=oa.y,pt=Q(oa.x)>Q(oa.y)?oa.x:oa.y,$i=Rh(uo,Ro),B.lastInterval=j}else pt=de.velocity,kt=de.velocityX,Xn=de.velocityY,$i=de.direction;j.velocity=pt,j.velocityX=kt,j.velocityY=Xn,j.direction=$i}(de,j);var oa=B.element;xe(j.srcEvent.target,oa)&&(oa=j.srcEvent.target),j.target=oa}(B,de),B.emit("hammer.input",de),B.recognize(de),B.session.prevInput=de}function Oh(B){for(var j=[],de=0;de<B.pointers.length;)j[de]={clientX:oe(B.pointers[de].clientX),clientY:oe(B.pointers[de].clientY)},de++;return{timeStamp:N(),pointers:j,center:Pm(j),deltaX:B.deltaX,deltaY:B.deltaY}}function Pm(B){var j=B.length;if(1===j)return{x:oe(B[0].clientX),y:oe(B[0].clientY)};for(var de=0,Ve=0,pt=0;pt<j;)de+=B[pt].clientX,Ve+=B[pt].clientY,pt++;return{x:oe(de/j),y:oe(Ve/j)}}function Nh(B,j,de){return{x:j/B||0,y:de/B||0}}function Rh(B,j){return B===j?1:Q(B)>=Q(j)?B<0?2:4:j<0?8:16}function ae(B,j,de){de||(de=id);var Ve=j[de[0]]-B[de[0]],pt=j[de[1]]-B[de[1]];return Math.sqrt(Ve*Ve+pt*pt)}function _e(B,j,de){return de||(de=id),180*Math.atan2(j[de[1]]-B[de[1]],j[de[0]]-B[de[0]])/Math.PI}Xo.prototype={handler:function(){},init:function(){this.evEl&&Ft(this.element,this.evEl,this.domHandler),this.evTarget&&Ft(this.target,this.evTarget,this.domHandler),this.evWin&&Ft(na(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&we(this.element,this.evEl,this.domHandler),this.evTarget&&we(this.target,this.evTarget,this.domHandler),this.evWin&&we(na(this.element),this.evWin,this.domHandler)}};var vt={mousedown:1,mousemove:2,mouseup:4},yt="mousedown",Tt="mousemove mouseup";function nt(){this.evEl=yt,this.evWin=Tt,this.pressed=!1,Xo.apply(this,arguments)}se(nt,Xo,{handler:function(j){var de=vt[j.type];1&de&&0===j.button&&(this.pressed=!0),2&de&&1!==j.which&&(de=4),this.pressed&&(4&de&&(this.pressed=!1),this.callback(this.manager,de,{pointers:[j],changedPointers:[j],pointerType:br,srcEvent:j}))}});var wt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},en={2:$o,3:"pen",4:br,5:"kinect"},wn="pointerdown",Pt="pointermove pointerup pointercancel";function gi(){this.evEl=wn,this.evWin=Pt,Xo.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}It.MSPointerEvent&&!It.PointerEvent&&(wn="MSPointerDown",Pt="MSPointerMove MSPointerUp MSPointerCancel"),se(gi,Xo,{handler:function(j){var de=this.store,Ve=!1,pt=j.type.toLowerCase().replace("ms",""),kt=wt[pt],Xn=en[j.pointerType]||j.pointerType,$i=Xn==$o,uo=ut(de,j.pointerId,"pointerId");1&kt&&(0===j.button||$i)?uo<0&&(de.push(j),uo=de.length-1):12&kt&&(Ve=!0),!(uo<0)&&(de[uo]=j,this.callback(this.manager,kt,{pointers:de,changedPointers:[j],pointerType:Xn,srcEvent:j}),Ve&&de.splice(uo,1))}});var vi={touchstart:1,touchmove:2,touchend:4,touchcancel:8},fr="touchstart",di="touchstart touchmove touchend touchcancel";function qi(){this.evTarget=fr,this.evWin=di,this.started=!1,Xo.apply(this,arguments)}function _i(B,j){var de=Fn(B.touches),Ve=Fn(B.changedTouches);return 12&j&&(de=dn(de.concat(Ve),"identifier",!0)),[de,Ve]}se(qi,Xo,{handler:function(j){var de=vi[j.type];if(1===de&&(this.started=!0),this.started){var Ve=_i.call(this,j,de);12&de&&Ve[0].length-Ve[1].length==0&&(this.started=!1),this.callback(this.manager,de,{pointers:Ve[0],changedPointers:Ve[1],pointerType:$o,srcEvent:j})}}});var Po={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Fi="touchstart touchmove touchend touchcancel";function yi(){this.evTarget=Fi,this.targetIds={},Xo.apply(this,arguments)}function Ea(B,j){var de=Fn(B.touches),Ve=this.targetIds;if(3&j&&1===de.length)return Ve[de[0].identifier]=!0,[de,de];var pt,kt,Xn=Fn(B.changedTouches),$i=[],uo=this.target;if(kt=de.filter(function(Ro){return xe(Ro.target,uo)}),1===j)for(pt=0;pt<kt.length;)Ve[kt[pt].identifier]=!0,pt++;for(pt=0;pt<Xn.length;)Ve[Xn[pt].identifier]&&$i.push(Xn[pt]),12&j&&delete Ve[Xn[pt].identifier],pt++;return $i.length?[dn(kt.concat($i),"identifier",!0),$i]:void 0}function Wr(){Xo.apply(this,arguments);var B=le(this.handler,this);this.touch=new yi(this.manager,B),this.mouse=new nt(this.manager,B),this.primaryTouch=null,this.lastTouches=[]}function gs(B,j){1&B?(this.primaryTouch=j.changedPointers[0].identifier,vs.call(this,j)):12&B&&vs.call(this,j)}function vs(B){var j=B.changedPointers[0];if(j.identifier===this.primaryTouch){var de={x:j.clientX,y:j.clientY};this.lastTouches.push(de);var Ve=this.lastTouches;setTimeout(function(){var kt=Ve.indexOf(de);kt>-1&&Ve.splice(kt,1)},2500)}}function R0(B){for(var j=B.srcEvent.clientX,de=B.srcEvent.clientY,Ve=0;Ve<this.lastTouches.length;Ve++){var pt=this.lastTouches[Ve],kt=Math.abs(j-pt.x),Xn=Math.abs(de-pt.y);if(kt<=25&&Xn<=25)return!0}return!1}se(yi,Xo,{handler:function(j){var de=Po[j.type],Ve=Ea.call(this,j,de);!Ve||this.callback(this.manager,de,{pointers:Ve[0],changedPointers:Ve[1],pointerType:$o,srcEvent:j})}}),se(Wr,Xo,{handler:function(j,de,Ve){var kt=Ve.pointerType==br;if(!(kt&&Ve.sourceCapabilities&&Ve.sourceCapabilities.firesTouchEvents)){if(Ve.pointerType==$o)gs.call(this,de,Ve);else if(kt&&R0.call(this,Ve))return;this.callback(j,de,Ve)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Fh=Dn(ft.style,"touchAction"),od=Fh!==st,$c="compute",Da="manipulation",Aa="none",dl="pan-x",_s="pan-y",Xc=function Nm(){if(!od)return!1;var B={},j=It.CSS&&It.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(de){B[de]=!j||It.CSS.supports("touch-action",de)}),B}();function ad(B,j){this.manager=B,this.set(j)}function Bn(B){this.options=fe({},this.defaults,B||{}),this.id=function _n(){return yo++}(),this.manager=null,this.options.enable=xt(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Yc(B){return 16&B?"cancel":8&B?"end":4&B?"move":2&B?"start":""}function vr(B){return 16==B?"down":8==B?"up":2==B?"left":4==B?"right":""}function pl(B,j){var de=j.manager;return de?de.get(B):B}function Yo(){Bn.apply(this,arguments)}function $n(){Yo.apply(this,arguments),this.pX=null,this.pY=null}function $t(){Yo.apply(this,arguments)}function Si(){Bn.apply(this,arguments),this._timer=null,this._input=null}function ei(){Yo.apply(this,arguments)}function ld(){Yo.apply(this,arguments)}function Ta(){Bn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function We(B,j){return(j=j||{}).recognizers=xt(j.recognizers,We.defaults.preset),new nr(B,j)}function nr(B,j){this.options=fe({},We.defaults,j||{}),this.options.inputTarget=this.options.inputTarget||B,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=B,this.input=function Am(B){return new(B.options.inputClass||($l?gi:Tn?yi:cl?Wr:nt))(B,Tm)}(this),this.touchAction=new ad(this,this.options.touchAction),Pa(this,!0),Y(this.options.recognizers,function(de){var Ve=this.add(new de[0](de[1]));de[2]&&Ve.recognizeWith(de[2]),de[3]&&Ve.requireFailure(de[3])},this)}function Pa(B,j){var Ve,de=B.element;de.style&&(Y(B.options.cssProps,function(pt,kt){Ve=Dn(de.style,kt),j?(B.oldCssProps[Ve]=de.style[Ve],de.style[Ve]=pt):de.style[Ve]=B.oldCssProps[Ve]||""}),j||(B.oldCssProps={}))}ad.prototype={set:function(B){B==$c&&(B=this.compute()),od&&this.manager.element.style&&Xc[B]&&(this.manager.element.style[Fh]=B),this.actions=B.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var B=[];return Y(this.manager.recognizers,function(j){Ce(j.options.enable,[j])&&(B=B.concat(j.getTouchAction()))}),function Om(B){if(je(B,Aa))return Aa;var j=je(B,dl),de=je(B,_s);return j&&de?Aa:j||de?j?dl:_s:je(B,Da)?Da:"auto"}(B.join(" "))},preventDefaults:function(B){var j=B.srcEvent,de=B.offsetDirection;if(!this.manager.session.prevented){var Ve=this.actions,pt=je(Ve,Aa)&&!Xc[Aa],kt=je(Ve,_s)&&!Xc[_s],Xn=je(Ve,dl)&&!Xc[dl];if(pt&&1===B.pointers.length&&B.distance<2&&B.deltaTime<250)return;return Xn&&kt||!(pt||kt&&6&de||Xn&&24&de)?void 0:this.preventSrc(j)}j.preventDefault()},preventSrc:function(B){this.manager.session.prevented=!0,B.preventDefault()}},Bn.prototype={defaults:{},set:function(B){return fe(this.options,B),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(B){if(U(B,"recognizeWith",this))return this;var j=this.simultaneous;return j[(B=pl(B,this)).id]||(j[B.id]=B,B.recognizeWith(this)),this},dropRecognizeWith:function(B){return U(B,"dropRecognizeWith",this)||(B=pl(B,this),delete this.simultaneous[B.id]),this},requireFailure:function(B){if(U(B,"requireFailure",this))return this;var j=this.requireFail;return-1===ut(j,B=pl(B,this))&&(j.push(B),B.requireFailure(this)),this},dropRequireFailure:function(B){if(U(B,"dropRequireFailure",this))return this;B=pl(B,this);var j=ut(this.requireFail,B);return j>-1&&this.requireFail.splice(j,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(B){return!!this.simultaneous[B.id]},emit:function(B){var j=this,de=this.state;function Ve(pt){j.manager.emit(pt,B)}de<8&&Ve(j.options.event+Yc(de)),Ve(j.options.event),B.additionalEvent&&Ve(B.additionalEvent),de>=8&&Ve(j.options.event+Yc(de))},tryEmit:function(B){if(this.canEmit())return this.emit(B);this.state=32},canEmit:function(){for(var B=0;B<this.requireFail.length;){if(!(33&this.requireFail[B].state))return!1;B++}return!0},recognize:function(B){var j=fe({},B);if(!Ce(this.options.enable,[this,j]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(j),30&this.state&&this.tryEmit(j)},process:function(B){},getTouchAction:function(){},reset:function(){}},se(Yo,Bn,{defaults:{pointers:1},attrTest:function(B){var j=this.options.pointers;return 0===j||B.pointers.length===j},process:function(B){var j=this.state,de=B.eventType,Ve=6&j,pt=this.attrTest(B);return Ve&&(8&de||!pt)?16|j:Ve||pt?4&de?8|j:2&j?4|j:2:32}}),se($n,Yo,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var B=this.options.direction,j=[];return 6&B&&j.push(_s),24&B&&j.push(dl),j},directionTest:function(B){var j=this.options,de=!0,Ve=B.distance,pt=B.direction,kt=B.deltaX,Xn=B.deltaY;return pt&j.direction||(6&j.direction?(pt=0===kt?1:kt<0?2:4,de=kt!=this.pX,Ve=Math.abs(B.deltaX)):(pt=0===Xn?1:Xn<0?8:16,de=Xn!=this.pY,Ve=Math.abs(B.deltaY))),B.direction=pt,de&&Ve>j.threshold&&pt&j.direction},attrTest:function(B){return Yo.prototype.attrTest.call(this,B)&&(2&this.state||!(2&this.state)&&this.directionTest(B))},emit:function(B){this.pX=B.deltaX,this.pY=B.deltaY;var j=vr(B.direction);j&&(B.additionalEvent=this.options.event+j),this._super.emit.call(this,B)}}),se($t,Yo,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Aa]},attrTest:function(B){return this._super.attrTest.call(this,B)&&(Math.abs(B.scale-1)>this.options.threshold||2&this.state)},emit:function(B){1!==B.scale&&(B.additionalEvent=this.options.event+(B.scale<1?"in":"out")),this._super.emit.call(this,B)}}),se(Si,Bn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(B){var j=this.options,de=B.pointers.length===j.pointers,Ve=B.distance<j.threshold,pt=B.deltaTime>j.time;if(this._input=B,!Ve||!de||12&B.eventType&&!pt)this.reset();else if(1&B.eventType)this.reset(),this._timer=L(function(){this.state=8,this.tryEmit()},j.time,this);else if(4&B.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(B){8===this.state&&(B&&4&B.eventType?this.manager.emit(this.options.event+"up",B):(this._input.timeStamp=N(),this.manager.emit(this.options.event,this._input)))}}),se(ei,Yo,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Aa]},attrTest:function(B){return this._super.attrTest.call(this,B)&&(Math.abs(B.rotation)>this.options.threshold||2&this.state)}}),se(ld,Yo,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return $n.prototype.getTouchAction.call(this)},attrTest:function(B){var de,j=this.options.direction;return 30&j?de=B.overallVelocity:6&j?de=B.overallVelocityX:24&j&&(de=B.overallVelocityY),this._super.attrTest.call(this,B)&&j&B.offsetDirection&&B.distance>this.options.threshold&&B.maxPointers==this.options.pointers&&Q(de)>this.options.velocity&&4&B.eventType},emit:function(B){var j=vr(B.offsetDirection);j&&this.manager.emit(this.options.event+j,B),this.manager.emit(this.options.event,B)}}),se(Ta,Bn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Da]},process:function(B){var j=this.options,de=B.pointers.length===j.pointers,Ve=B.distance<j.threshold,pt=B.deltaTime<j.time;if(this.reset(),1&B.eventType&&0===this.count)return this.failTimeout();if(Ve&&pt&&de){if(4!=B.eventType)return this.failTimeout();var kt=!this.pTime||B.timeStamp-this.pTime<j.interval,Xn=!this.pCenter||ae(this.pCenter,B.center)<j.posThreshold;if(this.pTime=B.timeStamp,this.pCenter=B.center,Xn&&kt?this.count+=1:this.count=1,this._input=B,0==this.count%j.taps)return this.hasRequireFailures()?(this._timer=L(function(){this.state=8,this.tryEmit()},j.interval,this),2):8}return 32},failTimeout:function(){return this._timer=L(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),We.VERSION="2.0.7",We.defaults={domEvents:!1,touchAction:$c,enable:!0,inputTarget:null,inputClass:null,preset:[[ei,{enable:!1}],[$t,{enable:!1},["rotate"]],[ld,{direction:6}],[$n,{direction:6},["swipe"]],[Ta],[Ta,{event:"doubletap",taps:2},["tap"]],[Si]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},nr.prototype={set:function(B){return fe(this.options,B),B.touchAction&&this.touchAction.update(),B.inputTarget&&(this.input.destroy(),this.input.target=B.inputTarget,this.input.init()),this},stop:function(B){this.session.stopped=B?2:1},recognize:function(B){var j=this.session;if(!j.stopped){this.touchAction.preventDefaults(B);var de,Ve=this.recognizers,pt=j.curRecognizer;(!pt||pt&&8&pt.state)&&(pt=j.curRecognizer=null);for(var kt=0;kt<Ve.length;)de=Ve[kt],2===j.stopped||pt&&de!=pt&&!de.canRecognizeWith(pt)?de.reset():de.recognize(B),!pt&&14&de.state&&(pt=j.curRecognizer=de),kt++}},get:function(B){if(B instanceof Bn)return B;for(var j=this.recognizers,de=0;de<j.length;de++)if(j[de].options.event==B)return j[de];return null},add:function(B){if(U(B,"add",this))return this;var j=this.get(B.options.event);return j&&this.remove(j),this.recognizers.push(B),B.manager=this,this.touchAction.update(),B},remove:function(B){if(U(B,"remove",this))return this;if(B=this.get(B)){var j=this.recognizers,de=ut(j,B);-1!==de&&(j.splice(de,1),this.touchAction.update())}return this},on:function(B,j){if(B!==st&&j!==st){var de=this.handlers;return Y($e(B),function(Ve){de[Ve]=de[Ve]||[],de[Ve].push(j)}),this}},off:function(B,j){if(B!==st){var de=this.handlers;return Y($e(B),function(Ve){j?de[Ve]&&de[Ve].splice(ut(de[Ve],j),1):delete de[Ve]}),this}},emit:function(B,j){this.options.domEvents&&function TT(B,j){var de=qe.createEvent("Event");de.initEvent(B,!0,!0),de.gesture=j,j.target.dispatchEvent(de)}(B,j);var de=this.handlers[B]&&this.handlers[B].slice();if(de&&de.length){j.type=B,j.preventDefault=function(){j.srcEvent.preventDefault()};for(var Ve=0;Ve<de.length;)de[Ve](j),Ve++}},destroy:function(){this.element&&Pa(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},fe(We,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:nr,Input:Xo,TouchAction:ad,TouchInput:yi,MouseInput:nt,PointerEventInput:gi,TouchMouseInput:Wr,SingleTouchInput:qi,Recognizer:Bn,AttrRecognizer:Yo,Tap:Ta,Pan:$n,Swipe:ld,Pinch:$t,Rotate:ei,Press:Si,on:Ft,off:we,each:Y,merge:rt,extend:Ie,assign:fe,inherit:se,bindFn:le,prefixed:Dn}),(typeof It<"u"?It:typeof self<"u"?self:{}).Hammer=We,(Xe=function(){return We}.call(Qt,St,Qt,qt))!==st&&(qt.exports=Xe)}(window,document)},286:qt=>{qt.exports=function Qt(St,Xe){"use strict";var Y,ee,It=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,qe=/(^[ ]*|[ ]*$)/g,ke=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,st=/^0x[0-9a-f]+$/i,at=/^0/,ft=function(rt){return Qt.insensitive&&(""+rt).toLowerCase()||""+rt},Be=ft(St).replace(qe,"")||"",oe=ft(Xe).replace(qe,"")||"",Q=Be.replace(It,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),N=oe.replace(It,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),L=parseInt(Be.match(st),16)||1!==Q.length&&Be.match(ke)&&Date.parse(Be),U=parseInt(oe.match(st),16)||L&&oe.match(ke)&&Date.parse(oe)||null;if(U){if(L<U)return-1;if(L>U)return 1}for(var fe=0,Ie=Math.max(Q.length,N.length);fe<Ie;fe++){if(Y=!(Q[fe]||"").match(at)&&parseFloat(Q[fe])||Q[fe]||0,ee=!(N[fe]||"").match(at)&&parseFloat(N[fe])||N[fe]||0,isNaN(Y)!==isNaN(ee))return isNaN(Y)?1:-1;if(typeof Y!=typeof ee&&(Y+="",ee+=""),Y<ee)return-1;if(Y>ee)return 1}return 0}},212:(qt,Qt,St)=>{"use strict";var Xe=St(294),It=St(903),qe=St(60),ke=St(217);function oe(se,le,Ce,xt){return function(we,xe,je){var $e=se(se(le(xe[1],je[0]),le(-je[1],xe[0])),se(le(we[1],xe[0]),le(-xe[1],we[0]))),ut=se(le(we[1],je[0]),le(-je[1],we[0])),Fn=xt($e,ut);return Fn[Fn.length-1]}}function Q(se,le,Ce,xt){return function(we,xe,je,$e){var ut=se(se(Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),xe[2]),se(Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),-je[2]),Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),$e[2]))),se(Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),we[2]),se(Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),$e[2])))),Fn=se(se(Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),we[2]),se(Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),-je[2]),Ce(se(le(we[1],je[0]),le(-je[1],we[0])),$e[2]))),se(Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),we[2]),se(Ce(se(le(we[1],je[0]),le(-je[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),je[2])))),dn=xt(ut,Fn);return dn[dn.length-1]}}function N(se,le,Ce,xt){return function(we,xe,je,$e,ut){var Fn=se(se(se(Ce(se(Ce(se(le($e[1],ut[0]),le(-ut[1],$e[0])),je[2]),se(Ce(se(le(je[1],ut[0]),le(-ut[1],je[0])),-$e[2]),Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),ut[2]))),xe[3]),se(Ce(se(Ce(se(le($e[1],ut[0]),le(-ut[1],$e[0])),xe[2]),se(Ce(se(le(xe[1],ut[0]),le(-ut[1],xe[0])),-$e[2]),Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),ut[2]))),-je[3]),Ce(se(Ce(se(le(je[1],ut[0]),le(-ut[1],je[0])),xe[2]),se(Ce(se(le(xe[1],ut[0]),le(-ut[1],xe[0])),-je[2]),Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),ut[2]))),$e[3]))),se(Ce(se(Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),xe[2]),se(Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),-je[2]),Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),$e[2]))),-ut[3]),se(Ce(se(Ce(se(le($e[1],ut[0]),le(-ut[1],$e[0])),xe[2]),se(Ce(se(le(xe[1],ut[0]),le(-ut[1],xe[0])),-$e[2]),Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),ut[2]))),we[3]),Ce(se(Ce(se(le($e[1],ut[0]),le(-ut[1],$e[0])),we[2]),se(Ce(se(le(we[1],ut[0]),le(-ut[1],we[0])),-$e[2]),Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),ut[2]))),-xe[3])))),se(se(Ce(se(Ce(se(le(xe[1],ut[0]),le(-ut[1],xe[0])),we[2]),se(Ce(se(le(we[1],ut[0]),le(-ut[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),ut[2]))),$e[3]),se(Ce(se(Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),we[2]),se(Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),$e[2]))),-ut[3]),Ce(se(Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),xe[2]),se(Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),-je[2]),Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),$e[2]))),we[3]))),se(Ce(se(Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),we[2]),se(Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),-je[2]),Ce(se(le(we[1],je[0]),le(-je[1],we[0])),$e[2]))),-xe[3]),se(Ce(se(Ce(se(le(xe[1],$e[0]),le(-$e[1],xe[0])),we[2]),se(Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),$e[2]))),je[3]),Ce(se(Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),we[2]),se(Ce(se(le(we[1],je[0]),le(-je[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),je[2]))),-$e[3]))))),dn=se(se(se(Ce(se(Ce(se(le($e[1],ut[0]),le(-ut[1],$e[0])),je[2]),se(Ce(se(le(je[1],ut[0]),le(-ut[1],je[0])),-$e[2]),Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),ut[2]))),we[3]),Ce(se(Ce(se(le($e[1],ut[0]),le(-ut[1],$e[0])),we[2]),se(Ce(se(le(we[1],ut[0]),le(-ut[1],we[0])),-$e[2]),Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),ut[2]))),-je[3])),se(Ce(se(Ce(se(le(je[1],ut[0]),le(-ut[1],je[0])),we[2]),se(Ce(se(le(we[1],ut[0]),le(-ut[1],we[0])),-je[2]),Ce(se(le(we[1],je[0]),le(-je[1],we[0])),ut[2]))),$e[3]),Ce(se(Ce(se(le(je[1],$e[0]),le(-$e[1],je[0])),we[2]),se(Ce(se(le(we[1],$e[0]),le(-$e[1],we[0])),-je[2]),Ce(se(le(we[1],je[0]),le(-je[1],we[0])),$e[2]))),-ut[3]))),se(se(Ce(se(Ce(se(le(je[1],ut[0]),le(-ut[1],je[0])),xe[2]),se(Ce(se(le(xe[1],ut[0]),le(-ut[1],xe[0])),-je[2]),Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),ut[2]))),we[3]),Ce(se(Ce(se(le(je[1],ut[0]),le(-ut[1],je[0])),we[2]),se(Ce(se(le(we[1],ut[0]),le(-ut[1],we[0])),-je[2]),Ce(se(le(we[1],je[0]),le(-je[1],we[0])),ut[2]))),-xe[3])),se(Ce(se(Ce(se(le(xe[1],ut[0]),le(-ut[1],xe[0])),we[2]),se(Ce(se(le(we[1],ut[0]),le(-ut[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),ut[2]))),je[3]),Ce(se(Ce(se(le(xe[1],je[0]),le(-je[1],xe[0])),we[2]),se(Ce(se(le(we[1],je[0]),le(-je[1],we[0])),-xe[2]),Ce(se(le(we[1],xe[0]),le(-xe[1],we[0])),je[2]))),-ut[3])))),Dn=xt(Fn,dn);return Dn[Dn.length-1]}}function L(se){return(3===se?oe:4===se?Q:N)(It,Xe,qe,ke)}var U=L(3),Y=L(4),ee=[function(){return 0},function(){return 0},function(le,Ce){return Ce[0]-le[0]},function(le,Ce,xt){var je,Ft=(le[1]-xt[1])*(Ce[0]-xt[0]),we=(le[0]-xt[0])*(Ce[1]-xt[1]),xe=Ft-we;if(Ft>0){if(we<=0)return xe;je=Ft+we}else{if(!(Ft<0))return xe;if(we>=0)return xe;je=-(Ft+we)}var $e=33306690738754716e-32*je;return xe>=$e||xe<=-$e?xe:U(le,Ce,xt)},function(le,Ce,xt,Ft){var we=le[0]-Ft[0],xe=Ce[0]-Ft[0],je=xt[0]-Ft[0],$e=le[1]-Ft[1],ut=Ce[1]-Ft[1],Fn=xt[1]-Ft[1],dn=le[2]-Ft[2],Dn=Ce[2]-Ft[2],yo=xt[2]-Ft[2],_n=xe*Fn,na=je*ut,ll=je*$e,cl=we*Fn,$l=we*ut,Tn=xe*$e,$o=dn*(_n-na)+Dn*(ll-cl)+yo*($l-Tn),br=7771561172376103e-31*((Math.abs(_n)+Math.abs(na))*Math.abs(dn)+(Math.abs(ll)+Math.abs(cl))*Math.abs(Dn)+(Math.abs($l)+Math.abs(Tn))*Math.abs(yo));return $o>br||-$o>br?$o:Y(le,Ce,xt,Ft)}];function fe(se){var le=ee[se.length];return le||(le=ee[se.length]=L(se.length)),le.apply(void 0,se)}function Ie(se,le,Ce,xt,Ft,we,xe){return function($e,ut,Fn,dn,Dn){switch(arguments.length){case 0:case 1:return 0;case 2:return xt($e,ut);case 3:return Ft($e,ut,Fn);case 4:return we($e,ut,Fn,dn);case 5:return xe($e,ut,Fn,dn,Dn)}for(var yo=new Array(arguments.length),_n=0;_n<arguments.length;++_n)yo[_n]=arguments[_n];return se(yo)}}!function rt(){for(;ee.length<=5;)ee.push(L(ee.length));qt.exports=Ie.apply(void 0,[fe].concat(ee));for(var se=0;se<=5;++se)qt.exports[se]=ee[se]}()},77:(qt,Qt,St)=>{qt.exports=function It(qe,ke){for(var st=ke[0],at=ke[1],ft=qe.length,Be=1,oe=ft,Q=0,N=ft-1;Q<oe;N=Q++){var L=qe[Q],U=qe[N],Y=L[1],ee=U[1];if(ee<Y){if(ee<at&&at<Y){if(0===(fe=Xe(L,U,ke)))return 0;Be^=0<fe|0}else if(at===Y&&Y<qe[(Q+1)%ft][1]){if(0===(fe=Xe(L,U,ke)))return 0;Be^=0<fe|0}}else if(Y<ee){if(Y<at&&at<ee){if(0===(fe=Xe(L,U,ke)))return 0;Be^=fe<0|0}else if(at===Y&&qe[(Q+1)%ft][1]<Y){var fe;if(0===(fe=Xe(L,U,ke)))return 0;Be^=fe<0|0}}else if(at===Y){var se=Math.min(L[0],U[0]),le=Math.max(L[0],U[0]);if(0===Q){for(;N>0;){var Ce=(N+ft-1)%ft;if((xt=qe[Ce])[1]!==at)break;var Ft=xt[0];se=Math.min(se,Ft),le=Math.max(le,Ft),N=Ce}if(0===N)return se<=st&&st<=le?0:1;oe=N+1}for(var we=qe[(N+ft-1)%ft][1];Q+1<oe;){var xt;if((xt=qe[Q+1])[1]!==at)break;Ft=xt[0],se=Math.min(se,Ft),le=Math.max(le,Ft),Q+=1}if(se<=st&&st<=le)return 0;st<se&&we<at!=qe[(Q+1)%ft][1]<at&&(Be^=1)}}return 2*Be-1};var Xe=St(212)},60:(qt,Qt,St)=>{"use strict";var Xe=St(294),It=St(448);qt.exports=function qe(ke,st){var at=ke.length;if(1===at){var ft=Xe(ke[0],st);return ft[0]?ft:[ft[1]]}var Be=new Array(2*at),oe=[.1,.1],Q=[.1,.1],N=0;Xe(ke[0],st,oe),oe[0]&&(Be[N++]=oe[0]);for(var L=1;L<at;++L){Xe(ke[L],st,Q),It(oe[1],Q[0],oe),oe[0]&&(Be[N++]=oe[0]);var Y=Q[1],ee=oe[1],fe=Y+ee,rt=ee-(fe-Y);oe[1]=fe,rt&&(Be[N++]=rt)}return oe[1]&&(Be[N++]=oe[1]),0===N&&(Be[N++]=0),Be.length=N,Be}},217:qt=>{"use strict";qt.exports=function St(Xe,It){var qe=0|Xe.length,ke=0|It.length;if(1===qe&&1===ke)return function Qt(Xe,It){var qe=Xe+It,ke=qe-Xe,Be=Xe-(qe-ke)+(It-ke);return Be?[Be,qe]:[qe]}(Xe[0],-It[0]);var ee,fe,at=new Array(qe+ke),ft=0,Be=0,oe=0,Q=Math.abs,N=Xe[Be],L=Q(N),U=-It[oe],Y=Q(U);L<Y?(fe=N,(Be+=1)<qe&&(L=Q(N=Xe[Be]))):(fe=U,(oe+=1)<ke&&(Y=Q(U=-It[oe]))),Be<qe&&L<Y||oe>=ke?(ee=N,(Be+=1)<qe&&(L=Q(N=Xe[Be]))):(ee=U,(oe+=1)<ke&&(Y=Q(U=-It[oe])));for(var xt,Ft,Ie=ee+fe,rt=Ie-ee,se=fe-rt,le=se,Ce=Ie;Be<qe&&oe<ke;)L<Y?(ee=N,(Be+=1)<qe&&(L=Q(N=Xe[Be]))):(ee=U,(oe+=1)<ke&&(Y=Q(U=-It[oe]))),(se=(fe=le)-(rt=(Ie=ee+fe)-ee))&&(at[ft++]=se),le=Ce-((xt=Ce+Ie)-(Ft=xt-Ce))+(Ie-Ft),Ce=xt;for(;Be<qe;)(se=(fe=le)-(rt=(Ie=(ee=N)+fe)-ee))&&(at[ft++]=se),le=Ce-((xt=Ce+Ie)-(Ft=xt-Ce))+(Ie-Ft),Ce=xt,(Be+=1)<qe&&(N=Xe[Be]);for(;oe<ke;)(se=(fe=le)-(rt=(Ie=(ee=U)+fe)-ee))&&(at[ft++]=se),le=Ce-((xt=Ce+Ie)-(Ft=xt-Ce))+(Ie-Ft),Ce=xt,(oe+=1)<ke&&(U=-It[oe]);return le&&(at[ft++]=le),Ce&&(at[ft++]=Ce),ft||(at[ft++]=0),at.length=ft,at}},903:qt=>{"use strict";qt.exports=function St(Xe,It){var qe=0|Xe.length,ke=0|It.length;if(1===qe&&1===ke)return function Qt(Xe,It){var qe=Xe+It,ke=qe-Xe,Be=Xe-(qe-ke)+(It-ke);return Be?[Be,qe]:[qe]}(Xe[0],It[0]);var ee,fe,at=new Array(qe+ke),ft=0,Be=0,oe=0,Q=Math.abs,N=Xe[Be],L=Q(N),U=It[oe],Y=Q(U);L<Y?(fe=N,(Be+=1)<qe&&(L=Q(N=Xe[Be]))):(fe=U,(oe+=1)<ke&&(Y=Q(U=It[oe]))),Be<qe&&L<Y||oe>=ke?(ee=N,(Be+=1)<qe&&(L=Q(N=Xe[Be]))):(ee=U,(oe+=1)<ke&&(Y=Q(U=It[oe])));for(var xt,Ft,Ie=ee+fe,rt=Ie-ee,se=fe-rt,le=se,Ce=Ie;Be<qe&&oe<ke;)L<Y?(ee=N,(Be+=1)<qe&&(L=Q(N=Xe[Be]))):(ee=U,(oe+=1)<ke&&(Y=Q(U=It[oe]))),(se=(fe=le)-(rt=(Ie=ee+fe)-ee))&&(at[ft++]=se),le=Ce-((xt=Ce+Ie)-(Ft=xt-Ce))+(Ie-Ft),Ce=xt;for(;Be<qe;)(se=(fe=le)-(rt=(Ie=(ee=N)+fe)-ee))&&(at[ft++]=se),le=Ce-((xt=Ce+Ie)-(Ft=xt-Ce))+(Ie-Ft),Ce=xt,(Be+=1)<qe&&(N=Xe[Be]);for(;oe<ke;)(se=(fe=le)-(rt=(Ie=(ee=U)+fe)-ee))&&(at[ft++]=se),le=Ce-((xt=Ce+Ie)-(Ft=xt-Ce))+(Ie-Ft),Ce=xt,(oe+=1)<ke&&(U=It[oe]);return le&&(at[ft++]=le),Ce&&(at[ft++]=Ce),ft||(at[ft++]=0),at.length=ft,at}},340:(qt,Qt,St)=>{var Xe=St(471),It=St(992),qe=St(657),ke=St(583),st=St(929),at=St(83),ft=St(818);ft.alea=Xe,ft.xor128=It,ft.xorwow=qe,ft.xorshift7=ke,ft.xor4096=st,ft.tychei=at,qt.exports=ft},471:function(qt,Qt,St){var Xe;!function(It,qe,ke){function st(oe){var Q=this,N=function Be(){var oe=4022871197;return function(N){N=String(N);for(var L=0;L<N.length;L++){var U=.02519603282416938*(oe+=N.charCodeAt(L));U-=oe=U>>>0,oe=(U*=oe)>>>0,oe+=4294967296*(U-=oe)}return 2.3283064365386963e-10*(oe>>>0)}}();Q.next=function(){var L=2091639*Q.s0+2.3283064365386963e-10*Q.c;return Q.s0=Q.s1,Q.s1=Q.s2,Q.s2=L-(Q.c=0|L)},Q.c=1,Q.s0=N(" "),Q.s1=N(" "),Q.s2=N(" "),Q.s0-=N(oe),Q.s0<0&&(Q.s0+=1),Q.s1-=N(oe),Q.s1<0&&(Q.s1+=1),Q.s2-=N(oe),Q.s2<0&&(Q.s2+=1),N=null}function at(oe,Q){return Q.c=oe.c,Q.s0=oe.s0,Q.s1=oe.s1,Q.s2=oe.s2,Q}function ft(oe,Q){var N=new st(oe),L=Q&&Q.state,U=N.next;return U.int32=function(){return 4294967296*N.next()|0},U.double=function(){return U()+11102230246251565e-32*(2097152*U()|0)},U.quick=U,L&&("object"==typeof L&&at(L,N),U.state=function(){return at(N,{})}),U}qe&&qe.exports?qe.exports=ft:St.amdD&&St.amdO?void 0!==(Xe=function(){return ft}.call(Qt,St,Qt,qe))&&(qe.exports=Xe):this.alea=ft}(0,qt=St.nmd(qt))},83:function(qt,Qt,St){var Xe;!function(It,qe,ke){function st(Be){var oe=this,Q="";oe.next=function(){var L=oe.b,U=oe.c,Y=oe.d,ee=oe.a;return L=L<<25^L>>>7^U,U=U-Y|0,Y=Y<<24^Y>>>8^ee,ee=ee-L|0,oe.b=L=L<<20^L>>>12^U,oe.c=U=U-Y|0,oe.d=Y<<16^U>>>16^ee,oe.a=ee-L|0},oe.a=0,oe.b=0,oe.c=-1640531527,oe.d=1367130551,Be===Math.floor(Be)?(oe.a=Be/4294967296|0,oe.b=0|Be):Q+=Be;for(var N=0;N<Q.length+20;N++)oe.b^=0|Q.charCodeAt(N),oe.next()}function at(Be,oe){return oe.a=Be.a,oe.b=Be.b,oe.c=Be.c,oe.d=Be.d,oe}function ft(Be,oe){var Q=new st(Be),N=oe&&oe.state,L=function(){return(Q.next()>>>0)/4294967296};return L.double=function(){do{var ee=((Q.next()>>>11)+(Q.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},L.int32=Q.next,L.quick=L,N&&("object"==typeof N&&at(N,Q),L.state=function(){return at(Q,{})}),L}qe&&qe.exports?qe.exports=ft:St.amdD&&St.amdO?void 0!==(Xe=function(){return ft}.call(Qt,St,Qt,qe))&&(qe.exports=Xe):this.tychei=ft}(0,qt=St.nmd(qt))},992:function(qt,Qt,St){var Xe;!function(It,qe,ke){function st(Be){var oe=this,Q="";oe.x=0,oe.y=0,oe.z=0,oe.w=0,oe.next=function(){var L=oe.x^oe.x<<11;return oe.x=oe.y,oe.y=oe.z,oe.z=oe.w,oe.w^=oe.w>>>19^L^L>>>8},Be===(0|Be)?oe.x=Be:Q+=Be;for(var N=0;N<Q.length+64;N++)oe.x^=0|Q.charCodeAt(N),oe.next()}function at(Be,oe){return oe.x=Be.x,oe.y=Be.y,oe.z=Be.z,oe.w=Be.w,oe}function ft(Be,oe){var Q=new st(Be),N=oe&&oe.state,L=function(){return(Q.next()>>>0)/4294967296};return L.double=function(){do{var ee=((Q.next()>>>11)+(Q.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},L.int32=Q.next,L.quick=L,N&&("object"==typeof N&&at(N,Q),L.state=function(){return at(Q,{})}),L}qe&&qe.exports?qe.exports=ft:St.amdD&&St.amdO?void 0!==(Xe=function(){return ft}.call(Qt,St,Qt,qe))&&(qe.exports=Xe):this.xor128=ft}(0,qt=St.nmd(qt))},929:function(qt,Qt,St){var Xe;!function(It,qe,ke){function st(Be){var oe=this;oe.next=function(){var Y,ee,N=oe.w,L=oe.X,U=oe.i;return oe.w=N=N+1640531527|0,ee=L[U+34&127],Y=L[U=U+1&127],ee^=ee<<13,Y^=Y<<17,ee=L[U]=(ee^=ee>>>15)^(Y^=Y>>>12),oe.i=U,ee+(N^N>>>16)|0},function Q(N,L){var U,Y,ee,fe,Ie,rt=[],se=128;for(L===(0|L)?(Y=L,L=null):(L+="\0",Y=0,se=Math.max(se,L.length)),ee=0,fe=-32;fe<se;++fe)L&&(Y^=L.charCodeAt((fe+32)%L.length)),0===fe&&(Ie=Y),Y^=Y<<10,Y^=Y>>>15,Y^=Y<<4,Y^=Y>>>13,fe>=0&&(ee=0==(U=rt[127&fe]^=Y+(Ie=Ie+1640531527|0))?ee+1:0);for(ee>=128&&(rt[127&(L&&L.length||0)]=-1),ee=127,fe=512;fe>0;--fe)Y=rt[ee+34&127],U=rt[ee=ee+1&127],Y^=Y<<13,U^=U<<17,rt[ee]=(Y^=Y>>>15)^(U^=U>>>12);N.w=Ie,N.X=rt,N.i=ee}(oe,Be)}function at(Be,oe){return oe.i=Be.i,oe.w=Be.w,oe.X=Be.X.slice(),oe}function ft(Be,oe){null==Be&&(Be=+new Date);var Q=new st(Be),N=oe&&oe.state,L=function(){return(Q.next()>>>0)/4294967296};return L.double=function(){do{var ee=((Q.next()>>>11)+(Q.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},L.int32=Q.next,L.quick=L,N&&(N.X&&at(N,Q),L.state=function(){return at(Q,{})}),L}qe&&qe.exports?qe.exports=ft:St.amdD&&St.amdO?void 0!==(Xe=function(){return ft}.call(Qt,St,Qt,qe))&&(qe.exports=Xe):this.xor4096=ft}(0,qt=St.nmd(qt))},583:function(qt,Qt,St){var Xe;!function(It,qe,ke){function st(Be){var oe=this;oe.next=function(){var U,Y,N=oe.x,L=oe.i;return U=N[L],Y=(U^=U>>>7)^U<<24,Y^=(U=N[L+1&7])^U>>>10,Y^=(U=N[L+3&7])^U>>>3,Y^=(U=N[L+4&7])^U<<7,U=N[L+7&7],N[L]=Y^=(U^=U<<13)^U<<9,oe.i=L+1&7,Y},function Q(N,L){var U,ee=[];if(L===(0|L))ee[0]=L;else for(L=""+L,U=0;U<L.length;++U)ee[7&U]=ee[7&U]<<15^L.charCodeAt(U)+ee[U+1&7]<<13;for(;ee.length<8;)ee.push(0);for(U=0;U<8&&0===ee[U];++U);for(8==U&&(ee[7]=-1),N.x=ee,N.i=0,U=256;U>0;--U)N.next()}(oe,Be)}function at(Be,oe){return oe.x=Be.x.slice(),oe.i=Be.i,oe}function ft(Be,oe){null==Be&&(Be=+new Date);var Q=new st(Be),N=oe&&oe.state,L=function(){return(Q.next()>>>0)/4294967296};return L.double=function(){do{var ee=((Q.next()>>>11)+(Q.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},L.int32=Q.next,L.quick=L,N&&(N.x&&at(N,Q),L.state=function(){return at(Q,{})}),L}qe&&qe.exports?qe.exports=ft:St.amdD&&St.amdO?void 0!==(Xe=function(){return ft}.call(Qt,St,Qt,qe))&&(qe.exports=Xe):this.xorshift7=ft}(0,qt=St.nmd(qt))},657:function(qt,Qt,St){var Xe;!function(It,qe,ke){function st(Be){var oe=this,Q="";oe.next=function(){var L=oe.x^oe.x>>>2;return oe.x=oe.y,oe.y=oe.z,oe.z=oe.w,oe.w=oe.v,(oe.d=oe.d+362437|0)+(oe.v=oe.v^oe.v<<4^L^L<<1)|0},oe.x=0,oe.y=0,oe.z=0,oe.w=0,oe.v=0,Be===(0|Be)?oe.x=Be:Q+=Be;for(var N=0;N<Q.length+64;N++)oe.x^=0|Q.charCodeAt(N),N==Q.length&&(oe.d=oe.x<<10^oe.x>>>4),oe.next()}function at(Be,oe){return oe.x=Be.x,oe.y=Be.y,oe.z=Be.z,oe.w=Be.w,oe.v=Be.v,oe.d=Be.d,oe}function ft(Be,oe){var Q=new st(Be),N=oe&&oe.state,L=function(){return(Q.next()>>>0)/4294967296};return L.double=function(){do{var ee=((Q.next()>>>11)+(Q.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},L.int32=Q.next,L.quick=L,N&&("object"==typeof N&&at(N,Q),L.state=function(){return at(Q,{})}),L}qe&&qe.exports?qe.exports=ft:St.amdD&&St.amdO?void 0!==(Xe=function(){return ft}.call(Qt,St,Qt,qe))&&(qe.exports=Xe):this.xorwow=ft}(0,qt=St.nmd(qt))},818:function(qt,Qt,St){var Xe;!function(It,qe,ke){var U,st=256,oe=ke.pow(st,6),Q=ke.pow(2,52),N=2*Q,L=255;function Y(Ce,xt,Ft){var we=[],xe=rt(Ie((xt=1==xt?{entropy:!0}:xt||{}).entropy?[Ce,le(qe)]:Ce??function se(){try{var Ce;return U&&(Ce=U.randomBytes)?Ce=Ce(st):(Ce=new Uint8Array(st),(It.crypto||It.msCrypto).getRandomValues(Ce)),le(Ce)}catch{var xt=It.navigator,Ft=xt&&xt.plugins;return[+new Date,It,Ft,It.screen,le(qe)]}}(),3),we),je=new ee(we),$e=function(){for(var ut=je.g(6),Fn=oe,dn=0;ut<Q;)ut=(ut+dn)*st,Fn*=st,dn=je.g(1);for(;ut>=N;)ut/=2,Fn/=2,dn>>>=1;return(ut+dn)/Fn};return $e.int32=function(){return 0|je.g(4)},$e.quick=function(){return je.g(4)/4294967296},$e.double=$e,rt(le(je.S),qe),(xt.pass||Ft||function(ut,Fn,dn,Dn){return Dn&&(Dn.S&&fe(Dn,je),ut.state=function(){return fe(je,{})}),dn?(ke.random=ut,Fn):ut})($e,xe,"global"in xt?xt.global:this==ke,xt.state)}function ee(Ce){var xt,Ft=Ce.length,we=this,xe=0,je=we.i=we.j=0,$e=we.S=[];for(Ft||(Ce=[Ft++]);xe<st;)$e[xe]=xe++;for(xe=0;xe<st;xe++)$e[xe]=$e[je=L&je+Ce[xe%Ft]+(xt=$e[xe])],$e[je]=xt;(we.g=function(ut){for(var Fn,dn=0,Dn=we.i,yo=we.j,_n=we.S;ut--;)Fn=_n[Dn=L&Dn+1],dn=dn*st+_n[L&(_n[Dn]=_n[yo=L&yo+Fn])+(_n[yo]=Fn)];return we.i=Dn,we.j=yo,dn})(st)}function fe(Ce,xt){return xt.i=Ce.i,xt.j=Ce.j,xt.S=Ce.S.slice(),xt}function Ie(Ce,xt){var xe,Ft=[],we=typeof Ce;if(xt&&"object"==we)for(xe in Ce)try{Ft.push(Ie(Ce[xe],xt-1))}catch{}return Ft.length?Ft:"string"==we?Ce:Ce+"\0"}function rt(Ce,xt){for(var we,Ft=Ce+"",xe=0;xe<Ft.length;)xt[L&xe]=L&(we^=19*xt[L&xe])+Ft.charCodeAt(xe++);return le(xt)}function le(Ce){return String.fromCharCode.apply(0,Ce)}if(rt(ke.random(),qe),qt.exports){qt.exports=Y;try{U=St(42)}catch{}}else void 0!==(Xe=function(){return Y}.call(Qt,St,Qt,qt))&&(qt.exports=Xe)}(typeof self<"u"?self:this,[],Math)},294:qt=>{"use strict";qt.exports=function St(Xe,It,qe){var ke=Xe*It,st=Qt*Xe,ft=st-(st-Xe),Be=Xe-ft,oe=Qt*It,N=oe-(oe-It),L=It-N,fe=Be*L-(ke-ft*N-Be*N-ft*L);return qe?(qe[0]=fe,qe[1]=ke,qe):[fe,ke]};var Qt=+(Math.pow(2,27)+1)},448:qt=>{"use strict";qt.exports=function Qt(St,Xe,It){var qe=St+Xe,ke=qe-St,at=Xe-ke,ft=St-(qe-ke);return It?(It[0]=ft+at,It[1]=qe,It):[ft+at,qe]}},42:()=>{},961:function(qt){qt.exports=function(){"use strict";function Qt(oe,Q){var N=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!N){if(Array.isArray(oe)||(N=function St(oe,Q){if(oe){if("string"==typeof oe)return Xe(oe,Q);var N=Object.prototype.toString.call(oe).slice(8,-1);if("Object"===N&&oe.constructor&&(N=oe.constructor.name),"Map"===N||"Set"===N)return Array.from(oe);if("Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Xe(oe,Q)}}(oe))||Q&&oe&&"number"==typeof oe.length){N&&(oe=N);var L=0,U=function(){};return{s:U,n:function(){return L>=oe.length?{done:!0}:{done:!1,value:oe[L++]}},e:function(rt){throw rt},f:U}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var fe,Y=!0,ee=!1;return{s:function(){N=N.call(oe)},n:function(){var rt=N.next();return Y=rt.done,rt},e:function(rt){ee=!0,fe=rt},f:function(){try{!Y&&null!=N.return&&N.return()}finally{if(ee)throw fe}}}}function Xe(oe,Q){(null==Q||Q>oe.length)&&(Q=oe.length);for(var N=0,L=new Array(Q);N<Q;N++)L[N]=oe[N];return L}function It(oe){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(oe)}function qe(){return!0}function ke(){return!1}function st(){}var at="Argument is not a typed-function.";return function ft(){function oe(ae){return"object"===It(ae)&&null!==ae&&ae.constructor===Object}var L,U,Q=[{name:"number",test:function(_e){return"number"==typeof _e}},{name:"string",test:function(_e){return"string"==typeof _e}},{name:"boolean",test:function(_e){return"boolean"==typeof _e}},{name:"Function",test:function(_e){return"function"==typeof _e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(_e){return _e instanceof Date}},{name:"RegExp",test:function(_e){return _e instanceof RegExp}},{name:"Object",test:oe},{name:"null",test:function(_e){return null===_e}},{name:"undefined",test:function(_e){return void 0===_e}}],N={name:"any",test:qe,isAny:!0},Y=0,ee={createCount:0};function fe(ae){var _e=L.get(ae);if(_e)return _e;var vt,Tt,Ge='Unknown type "'+ae+'"',tt=ae.toLowerCase(),yt=Qt(U);try{for(yt.s();!(Tt=yt.n()).done;)if((vt=Tt.value).toLowerCase()===tt){Ge+='. Did you mean "'+vt+'" ?';break}}catch(nt){yt.e(nt)}finally{yt.f()}throw new TypeError(Ge)}function Ie(ae){for(var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",Ge=_e?fe(_e).index:U.length,tt=[],vt=0;vt<ae.length;++vt){if(!ae[vt]||"string"!=typeof ae[vt].name||"function"!=typeof ae[vt].test)throw new TypeError("Object with properties {name: string, test: function} expected");var yt=ae[vt].name;if(L.has(yt))throw new TypeError('Duplicate type name "'+yt+'"');tt.push(yt),L.set(yt,{name:yt,test:ae[vt].test,isAny:ae[vt].isAny,index:Ge+vt,conversionsTo:[]})}var Tt=U.slice(Ge);U=U.slice(0,Ge).concat(tt).concat(Tt);for(var nt=Ge+tt.length;nt<U.length;++nt)L.get(U[nt]).index=nt}function rt(){L=new Map,U=[],Y=0,Ie([N],!1)}function le(ae){var _e=U.filter(function(Ge){var tt=L.get(Ge);return!tt.isAny&&tt.test(ae)});return _e.length?_e:["any"]}function Ce(ae){return ae&&"function"==typeof ae&&"_typedFunctionData"in ae}function xt(ae,_e,Ge){if(!Ce(ae))throw new TypeError(at);var tt=Ge&&Ge.exact,yt=Fn(Array.isArray(_e)?_e.join(","):_e),Tt=xe(yt);if(!tt||Tt in ae.signatures){var nt=ae._typedFunctionData.signatureMap.get(Tt);if(nt)return nt}var en,wn,wt=yt.length;if(tt)for(wn in en=[],ae.signatures)en.push(ae._typedFunctionData.signatureMap.get(wn));else en=ae._typedFunctionData.signatures;for(var Pt=0;Pt<wt;++Pt){var qi,gi=yt[Pt],vi=[],fr=void 0,di=Qt(en);try{for(di.s();!(qi=di.n()).done;){var _i=_n((fr=qi.value).params,Pt);if(_i&&(!gi.restParam||_i.restParam)){if(!_i.hasAny&&"continue"===function(){var Zr=ut(_i);if(gi.types.some(function(ia){return!Zr.has(ia.name)}))return"continue"}())continue;vi.push(fr)}}}catch(Zr){di.e(Zr)}finally{di.f()}if(0===(en=vi).length)break}var Fi,Ea,yi=Qt(en);try{for(yi.s();!(Ea=yi.n()).done;)if((Fi=Ea.value).params.length<=wt)return Fi}catch(Zr){yi.e(Zr)}finally{yi.f()}throw new TypeError("Signature not found (signature: "+(ae.name||"unnamed")+"("+xe(yt,", ")+"))")}function xe(ae){var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return ae.map(function(Ge){return Ge.name}).join(_e)}function je(ae){var _e=0===ae.indexOf("..."),tt=(_e?ae.length>3?ae.slice(3):"any":ae).split("|").map(function(nt){return fe(nt.trim())}),vt=!1,yt=_e?"...":"";return{types:tt.map(function(nt){return vt=nt.isAny||vt,yt+=nt.name+"|",{name:nt.name,typeIndex:nt.index,test:nt.test,isAny:nt.isAny,conversion:null,conversionIndex:-1}}),name:yt.slice(0,-1),hasAny:vt,hasConversion:!1,restParam:_e}}function $e(ae){var Ge=function zr(ae){if(0===ae.length)return[];var _e=ae.map(fe);ae.length>1&&_e.sort(function(wt,en){return wt.index-en.index});var Ge=_e[0].conversionsTo;if(1===ae.length)return Ge;Ge=Ge.concat([]);for(var tt=new Set(ae),vt=1;vt<_e.length;++vt){var nt,yt=void 0,Tt=Qt(_e[vt].conversionsTo);try{for(Tt.s();!(nt=Tt.n()).done;)tt.has((yt=nt.value).from)||(Ge.push(yt),tt.add(yt.from))}catch(wt){Tt.e(wt)}finally{Tt.f()}}return Ge}(ae.types.map(function(Tt){return Tt.name})),tt=ae.hasAny,vt=ae.name,yt=Ge.map(function(Tt){var nt=fe(Tt.from);return tt=nt.isAny||tt,vt+="|"+Tt.from,{name:Tt.from,typeIndex:nt.index,test:nt.test,isAny:nt.isAny,conversion:Tt,conversionIndex:Tt.index}});return{types:ae.types.concat(yt),name:vt,hasAny:tt,hasConversion:yt.length>0,restParam:ae.restParam}}function ut(ae){return ae.typeSet||(ae.typeSet=new Set,ae.types.forEach(function(_e){return ae.typeSet.add(_e.name)})),ae.typeSet}function Fn(ae){var _e=[];if("string"!=typeof ae)throw new TypeError("Signatures must be strings");var Ge=ae.trim();if(""===Ge)return _e;for(var tt=Ge.split(","),vt=0;vt<tt.length;++vt){var yt=je(tt[vt].trim());if(yt.restParam&&vt!==tt.length-1)throw new SyntaxError('Unexpected rest parameter "'+tt[vt]+'": only allowed for the last parameter');if(0===yt.types.length)return null;_e.push(yt)}return _e}function dn(ae){var _e=bo(ae);return!!_e&&_e.restParam}function Dn(ae){if(!ae||0===ae.types.length)return qe;if(1===ae.types.length)return fe(ae.types[0].name).test;if(2===ae.types.length){var _e=fe(ae.types[0].name).test,Ge=fe(ae.types[1].name).test;return function(yt){return _e(yt)||Ge(yt)}}var tt=ae.types.map(function(vt){return fe(vt.name).test});return function(yt){for(var Tt=0;Tt<tt.length;Tt++)if(tt[Tt](yt))return!0;return!1}}function yo(ae){var _e,Ge,tt;if(dn(ae)){var vt=(_e=ms(ae).map(Dn)).length,yt=Dn(bo(ae));return function(wt){for(var en=0;en<_e.length;en++)if(!_e[en](wt[en]))return!1;return function(wt){for(var en=vt;en<wt.length;en++)if(!yt(wt[en]))return!1;return!0}(wt)&&wt.length>=vt+1}}return 0===ae.length?function(wt){return 0===wt.length}:1===ae.length?(Ge=Dn(ae[0]),function(wt){return Ge(wt[0])&&1===wt.length}):2===ae.length?(Ge=Dn(ae[0]),tt=Dn(ae[1]),function(wt){return Ge(wt[0])&&tt(wt[1])&&2===wt.length}):(_e=ae.map(Dn),function(wt){for(var en=0;en<_e.length;en++)if(!_e[en](wt[en]))return!1;return wt.length===_e.length})}function _n(ae,_e){return _e<ae.length?ae[_e]:dn(ae)?bo(ae):null}function na(ae,_e){var Ge=_n(ae,_e);return Ge?ut(Ge):new Set}function ll(ae){return null==ae.conversion}function cl(ae,_e){var Ge=new Set;return ae.forEach(function(tt){var nt,Tt=Qt(na(tt.params,_e));try{for(Tt.s();!(nt=Tt.n()).done;)Ge.add(nt.value)}catch(wt){Tt.e(wt)}finally{Tt.f()}}),Ge.has("any")?["any"]:Array.from(Ge)}function $l(ae,_e,Ge){var tt,vt,nt,yt=ae||"unnamed",Tt=Ge,wt=function(){var di=[];if(Tt.forEach(function(_i){var Fi=Dn(_n(_i.params,nt));(nt<_i.params.length||dn(_i.params))&&Fi(_e[nt])&&di.push(_i)}),0===di.length){if((vt=cl(Tt,nt)).length>0){var qi=le(_e[nt]);return(tt=new TypeError("Unexpected type of argument in function "+yt+" (expected: "+vt.join(" or ")+", actual: "+qi.join(" | ")+", index: "+nt+")")).data={category:"wrongType",fn:yt,index:nt,actual:qi,expected:vt},{v:tt}}}else Tt=di};for(nt=0;nt<_e.length;nt++){var en=wt();if("object"===It(en))return en.v}var wn=Tt.map(function(fr){return dn(fr.params)?1/0:fr.params.length});if(_e.length<Math.min.apply(null,wn))return vt=cl(Tt,nt),(tt=new TypeError("Too few arguments in function "+yt+" (expected: "+vt.join(" or ")+", index: "+_e.length+")")).data={category:"tooFewArgs",fn:yt,index:_e.length,expected:vt},tt;var Pt=Math.max.apply(null,wn);if(_e.length>Pt)return(tt=new TypeError("Too many arguments in function "+yt+" (expected: "+Pt+", actual: "+_e.length+")")).data={category:"tooManyArgs",fn:yt,index:_e.length,expectedLength:Pt},tt;for(var gi=[],vi=0;vi<_e.length;++vi)gi.push(le(_e[vi]).join("|"));return(tt=new TypeError('Arguments of type "'+gi.join(", ")+'" do not match any of the defined signatures of function '+yt+".")).data={category:"mismatch",actual:gi},tt}function Tn(ae){for(var _e=U.length+1,Ge=0;Ge<ae.types.length;Ge++)ll(ae.types[Ge])&&(_e=Math.min(_e,ae.types[Ge].typeIndex));return _e}function $o(ae){for(var _e=Y+1,Ge=0;Ge<ae.types.length;Ge++)ll(ae.types[Ge])||(_e=Math.min(_e,ae.types[Ge].conversionIndex));return _e}function Hc(ae,_e){if(ae.hasAny){if(!_e.hasAny)return 1}else if(_e.hasAny)return-1;if(ae.restParam){if(!_e.restParam)return 1}else if(_e.restParam)return-1;if(ae.hasConversion){if(!_e.hasConversion)return 1}else if(_e.hasConversion)return-1;var Ge=Tn(ae)-Tn(_e);if(Ge<0)return-1;if(Ge>0)return 1;var tt=$o(ae)-$o(_e);return tt<0?-1:tt>0?1:0}function br(ae,_e){var Ge=ae.params,tt=_e.params,vt=bo(Ge),yt=bo(tt),Tt=dn(Ge),nt=dn(tt);if(Tt&&vt.hasAny){if(!nt||!yt.hasAny)return 1}else if(nt&&yt.hasAny)return-1;var wn,gi,wt=0,en=0,Pt=Qt(Ge);try{for(Pt.s();!(gi=Pt.n()).done;)(wn=gi.value).hasAny&&++wt,wn.hasConversion&&++en}catch(gs){Pt.e(gs)}finally{Pt.f()}var qi,vi=0,fr=0,di=Qt(tt);try{for(di.s();!(qi=di.n()).done;)(wn=qi.value).hasAny&&++vi,wn.hasConversion&&++fr}catch(gs){di.e(gs)}finally{di.f()}if(wt!==vi)return wt-vi;if(Tt&&vt.hasConversion){if(!nt||!yt.hasConversion)return 1}else if(nt&&yt.hasConversion)return-1;if(en!==fr)return en-fr;if(Tt){if(!nt)return 1}else if(nt)return-1;var _i=(Ge.length-tt.length)*(Tt?-1:1);if(0!==_i)return _i;for(var Po=[],Fi=0,yi=0;yi<Ge.length;++yi){var Ea=Hc(Ge[yi],tt[yi]);Po.push(Ea),Fi+=Ea}if(0!==Fi)return Fi;for(var Zr,ia=0,Wr=Po;ia<Wr.length;ia++)if(0!==(Zr=Wr[ia]))return Zr;return 0}function Dm(ae,_e){var Ge=_e;if(ae.some(function(nt){return nt.hasConversion})){var tt=dn(ae),vt=ae.map(Gt);Ge=function(){for(var wt=[],en=tt?arguments.length-1:arguments.length,wn=0;wn<en;wn++)wt[wn]=vt[wn](arguments[wn]);return tt&&(wt[en]=arguments[en].map(vt[en])),_e.apply(this,wt)}}var yt=Ge;if(dn(ae)){var Tt=ae.length-1;yt=function(){return Ge.apply(this,rd(arguments,0,Tt).concat([rd(arguments,Tt)]))}}return yt}function Gt(ae){var _e,Ge,tt,vt,yt=[],Tt=[];switch(ae.types.forEach(function(nt){nt.conversion&&(yt.push(fe(nt.conversion.from).test),Tt.push(nt.conversion.convert))}),Tt.length){case 0:return function(wt){return wt};case 1:return _e=yt[0],tt=Tt[0],function(wt){return _e(wt)?tt(wt):wt};case 2:return _e=yt[0],Ge=yt[1],tt=Tt[0],vt=Tt[1],function(wt){return _e(wt)?tt(wt):Ge(wt)?vt(wt):wt};default:return function(wt){for(var en=0;en<Tt.length;en++)if(yt[en](wt))return Tt[en](wt);return wt}}}function Rs(ae){return function _e(Ge,tt,vt){if(tt<Ge.length){var yt=Ge[tt],Tt=[];if(yt.restParam){var nt=yt.types.filter(ll);nt.length<yt.types.length&&Tt.push({types:nt,name:"..."+nt.map(function(wt){return wt.name}).join("|"),hasAny:nt.some(function(wt){return wt.isAny}),hasConversion:!1,restParam:!0}),Tt.push(yt)}else Tt=yt.types.map(function(wt){return{types:[wt],name:wt.name,hasAny:wt.isAny,hasConversion:wt.conversion,restParam:!1}});return function qc(ae,_e){return Array.prototype.concat.apply([],ae.map(_e))}(Tt,function(wt){return _e(Ge,tt+1,vt.concat([wt]))})}return[vt]}(ae,0,[])}function nd(ae,_e,Ge){var vt,Tt,tt=[],yt=Qt(ae);try{for(yt.s();!(Tt=yt.n()).done;){var nt=Ge[vt=Tt.value];if("number"!=typeof nt)throw new TypeError('No definition for referenced signature "'+vt+'"');if("function"!=typeof(nt=_e[nt]))return!1;tt.push(nt)}}catch(wt){yt.e(wt)}finally{yt.f()}return tt}function Gc(ae,_e,Ge){for(var tt=function Wi(ae){return ae.map(function(_e){return Ph(_e)?Tm(_e.referToSelf.callback):ra(_e)?Am(_e.referTo.references,_e.referTo.callback):_e})}(ae),vt=new Array(tt.length).fill(!1),yt=!0;yt;){yt=!1;for(var Tt=!0,nt=0;nt<tt.length;++nt)if(!vt[nt]){var wt=tt[nt];if(Ph(wt))tt[nt]=wt.referToSelf.callback(Ge),tt[nt].referToSelf=wt.referToSelf,vt[nt]=!0,Tt=!1;else if(ra(wt)){var en=nd(wt.referTo.references,tt,_e);en?(tt[nt]=wt.referTo.callback.apply(this,en),tt[nt].referTo=wt.referTo,vt[nt]=!0,Tt=!1):yt=!0}}if(Tt&&yt)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return tt}function Wc(ae,_e){if(ee.createCount++,0===Object.keys(_e).length)throw new SyntaxError("No signatures provided");ee.warnAgainstDeprecatedThis&&function jc(ae){var _e=/\bthis(\(|\.signatures\b)/;Object.keys(ae).forEach(function(Ge){if(_e.test(ae[Ge].toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}(_e);var Tt,Ge=[],tt=[],vt={},yt=[],nt=function(){if(!Object.prototype.hasOwnProperty.call(_e,Tt))return"continue";var ei=Fn(Tt);if(!ei)return"continue";Ge.forEach(function(Pa){if(function ui(ae,_e){for(var Ge=Math.max(ae.length,_e.length),tt=0;tt<Ge;tt++){var en,vt=na(ae,tt),Tt=!1,wt=Qt(na(_e,tt));try{for(wt.s();!(en=wt.n()).done;)if(vt.has(en.value)){Tt=!0;break}}catch(fr){wt.e(fr)}finally{wt.f()}if(!Tt)return!1}var wn=ae.length,Pt=_e.length,gi=dn(ae),vi=dn(_e);return gi?vi?wn===Pt:Pt>=wn:vi?wn>=Pt:wn===Pt}(Pa,ei))throw new TypeError('Conflicting signatures "'+xe(Pa)+'" and "'+xe(ei)+'".')}),Ge.push(ei);var ld=tt.length;tt.push(_e[Tt]);var hn,We=void 0,Ia=Qt(Rs(ei.map($e)));try{for(Ia.s();!(hn=Ia.n()).done;){var nr=xe(We=hn.value);yt.push({params:We,name:nr,fn:ld}),We.every(function(Pa){return!Pa.hasConversion})&&(vt[nr]=ld)}}catch(Pa){Ia.e(Pa)}finally{Ia.f()}};for(Tt in _e)nt();yt.sort(br);var wn,en=Gc(tt,vt,$t);for(wn in vt)Object.prototype.hasOwnProperty.call(vt,wn)&&(vt[wn]=en[vt[wn]]);for(var Pt=[],gi=new Map,vi=0,fr=yt;vi<fr.length;vi++)gi.has((wn=fr[vi]).name)||(wn.fn=en[wn.fn],Pt.push(wn),gi.set(wn.name,wn));for(var di=Pt[0]&&Pt[0].params.length<=2&&!dn(Pt[0].params),qi=Pt[1]&&Pt[1].params.length<=2&&!dn(Pt[1].params),_i=Pt[2]&&Pt[2].params.length<=2&&!dn(Pt[2].params),Po=Pt[3]&&Pt[3].params.length<=2&&!dn(Pt[3].params),Fi=Pt[4]&&Pt[4].params.length<=2&&!dn(Pt[4].params),yi=Pt[5]&&Pt[5].params.length<=2&&!dn(Pt[5].params),Ea=di&&qi&&_i&&Po&&Fi&&yi,Zr=0;Zr<Pt.length;++Zr)Pt[Zr].test=yo(Pt[Zr].params);for(var ia=di?Dn(Pt[0].params[0]):ke,Wr=qi?Dn(Pt[1].params[0]):ke,gs=_i?Dn(Pt[2].params[0]):ke,vs=Po?Dn(Pt[3].params[0]):ke,R0=Fi?Dn(Pt[4].params[0]):ke,Fh=yi?Dn(Pt[5].params[0]):ke,od=di?Dn(Pt[0].params[1]):ke,$c=qi?Dn(Pt[1].params[1]):ke,sd=_i?Dn(Pt[2].params[1]):ke,Da=Po?Dn(Pt[3].params[1]):ke,Aa=Fi?Dn(Pt[4].params[1]):ke,dl=yi?Dn(Pt[5].params[1]):ke,_s=0;_s<Pt.length;++_s)Pt[_s].implementation=Dm(Pt[_s].params,Pt[_s].fn);var Xc=di?Pt[0].implementation:st,ad=qi?Pt[1].implementation:st,Om=_i?Pt[2].implementation:st,Nm=Po?Pt[3].implementation:st,Xl=Fi?Pt[4].implementation:st,Oo=yi?Pt[5].implementation:st,hl=di?Pt[0].params.length:-1,xr=qi?Pt[1].params.length:-1,ys=_i?Pt[2].params.length:-1,fl=Po?Pt[3].params.length:-1,No=Fi?Pt[4].params.length:-1,Bn=yi?Pt[5].params.length:-1,Yc=Ea?6:0,vr=Pt.length,pl=Pt.map(function(Si){return Si.test}),Yo=Pt.map(function(Si){return Si.implementation}),$n=function(){for(var ei=Yc;ei<vr;ei++)if(pl[ei](arguments))return Yo[ei].apply(this,arguments);return ee.onMismatch(ae,arguments,Pt)};function $t(Si,ei){return arguments.length===hl&&ia(Si)&&od(ei)?Xc.apply(this,arguments):arguments.length===xr&&Wr(Si)&&$c(ei)?ad.apply(this,arguments):arguments.length===ys&&gs(Si)&&sd(ei)?Om.apply(this,arguments):arguments.length===fl&&vs(Si)&&Da(ei)?Nm.apply(this,arguments):arguments.length===No&&R0(Si)&&Aa(ei)?Xl.apply(this,arguments):arguments.length===Bn&&Fh(Si)&&dl(ei)?Oo.apply(this,arguments):$n.apply(this,arguments)}try{Object.defineProperty($t,"name",{value:ae})}catch{}return $t.signatures=vt,$t._typedFunctionData={signatures:Pt,signatureMap:gi},$t}function ul(ae,_e,Ge){throw $l(ae,_e,Ge)}function ms(ae){return rd(ae,0,ae.length-1)}function bo(ae){return ae[ae.length-1]}function rd(ae,_e,Ge){return Array.prototype.slice.call(ae,_e,Ge)}function Am(ae,_e){return{referTo:{references:ae,callback:_e}}}function Tm(ae){if("function"!=typeof ae)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:ae}}}function ra(ae){return ae&&"object"===It(ae.referTo)&&Array.isArray(ae.referTo.references)&&"function"==typeof ae.referTo.callback}function Ph(ae){return ae&&"object"===It(ae.referToSelf)&&"function"==typeof ae.referToSelf.callback}function Im(ae,_e){if(!ae)return _e;if(_e&&_e!==ae){var Ge=new Error("Function names do not match (expected: "+ae+", actual: "+_e+")");throw Ge.data={actual:_e,expected:ae},Ge}return ae}function Oh(ae){var _e;for(var Ge in ae)Object.prototype.hasOwnProperty.call(ae,Ge)&&(Ce(ae[Ge])||"string"==typeof ae[Ge].signature)&&(_e=Im(_e,ae[Ge].name));return _e}function Pm(ae,_e){var Ge;for(Ge in _e)if(Object.prototype.hasOwnProperty.call(_e,Ge)){if(Ge in ae&&_e[Ge]!==ae[Ge]){var tt=new Error('Signature "'+Ge+'" is defined twice');throw tt.data={signature:Ge,sourceFunction:_e[Ge],destFunction:ae[Ge]},tt}ae[Ge]=_e[Ge]}}rt(),Ie(Q);var Nh=ee;function Rh(ae){if(!ae||"string"!=typeof ae.from||"string"!=typeof ae.to||"function"!=typeof ae.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(ae.to===ae.from)throw new SyntaxError('Illegal to define conversion from "'+ae.from+'" to itself.')}return ee=function(_e){for(var Ge="string"==typeof _e,vt=Ge?_e:"",yt={},Tt=Ge?1:0;Tt<arguments.length;++Tt){var nt=arguments[Tt],wt={},en=void 0;if("function"==typeof nt?(en=nt.name,"string"==typeof nt.signature?wt[nt.signature]=nt:Ce(nt)&&(wt=nt.signatures)):oe(nt)&&(wt=nt,Ge||(en=Oh(nt))),0===Object.keys(wt).length){var wn=new TypeError("Argument to 'typed' at index "+Tt+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw wn.data={index:Tt,argument:nt},wn}Ge||(vt=Im(vt,en)),Pm(yt,wt)}return Wc(vt||"",yt)},ee.create=ft,ee.createCount=Nh.createCount,ee.onMismatch=ul,ee.throwMismatchError=ul,ee.createError=$l,ee.clear=rt,ee.clearConversions=function se(){var Ge,_e=Qt(U);try{for(_e.s();!(Ge=_e.n()).done;)L.get(Ge.value).conversionsTo=[]}catch(tt){_e.e(tt)}finally{_e.f()}Y=0},ee.addTypes=Ie,ee._findType=fe,ee.referTo=function Xo(){var ae=ms(arguments).map(function(Ge){return xe(Fn(Ge))}),_e=bo(arguments);if("function"!=typeof _e)throw new TypeError("Callback function expected as last argument");return Am(ae,_e)},ee.referToSelf=Tm,ee.convert=function we(ae,_e){var Ge=fe(_e);if(Ge.test(ae))return ae;var tt=Ge.conversionsTo;if(0===tt.length)throw new Error("There are no conversions to "+_e+" defined.");for(var vt=0;vt<tt.length;vt++)if(fe(tt[vt].from).test(ae))return tt[vt].convert(ae);throw new Error("Cannot convert "+ae+" to "+_e)},ee.findSignature=xt,ee.find=function Ft(ae,_e,Ge){return xt(ae,_e,Ge).implementation},ee.isTypedFunction=Ce,ee.warnAgainstDeprecatedThis=!0,ee.addType=function(ae,_e){var Ge="any";!1!==_e&&L.has("Object")&&(Ge="Object"),ee.addTypes([ae],Ge)},ee.addConversion=function(ae){Rh(ae);var _e=fe(ae.to);if(!_e.conversionsTo.every(function(Ge){return Ge.from!==ae.from}))throw new Error('There is already a conversion from "'+ae.from+'" to "'+_e.name+'"');_e.conversionsTo.push({from:ae.from,convert:ae.convert,index:Y++})},ee.addConversions=function(ae){ae.forEach(ee.addConversion)},ee.removeConversion=function(ae){Rh(ae);var _e=fe(ae.to),Ge=function id(ae,_e){for(var Ge=0;Ge<ae.length;Ge++)if(_e(ae[Ge]))return ae[Ge]}(_e.conversionsTo,function(vt){return vt.from===ae.from});if(!Ge)throw new Error("Attempt to remove nonexistent conversion from "+ae.from+" to "+ae.to);if(Ge.convert!==ae.convert)throw new Error("Conversion to remove does not match existing conversion");var tt=_e.conversionsTo.indexOf(Ge);_e.conversionsTo.splice(tt,1)},ee.resolve=function(ae,_e){if(!Ce(ae))throw new TypeError(at);for(var Ge=ae._typedFunctionData.signatures,tt=0;tt<Ge.length;++tt)if(Ge[tt].test(_e))return Ge[tt];return null},ee}()}()}},qt=>{qt(qt.s=543)}]);